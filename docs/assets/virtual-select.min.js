/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(t,e,i)=>{function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function n(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}i.r(e),i.d(e,{DomUtils:()=>l});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,o;return e=t,o=[{key:"addClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).add.apply(i,s(e))})))}},{key:"removeClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).remove.apply(i,s(e))})))}},{key:"toggleClass",value:function(t,e,i){var s;if(t)return void 0!==i&&(i=Boolean(i)),this.getElements(t).forEach((function(t){s=t.classList.toggle(e,i)})),s}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,o=e.left,n=e.top;return{horizontal:o>i-o-e.width?"left":"right",vertical:n>s-n-e.height?"top":"bottom"}}},{key:"getData",value:function(t,e,i){if(t){var s=t?t.dataset[e]:"";return"number"===i?s=parseFloat(s)||0:"true"===s?s=!0:"false"===s&&(s=!1),s}}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"setStyle",value:function(t,e,i){t&&(t.style[e]=i)}},{key:"getElements",value:function(t){if(t)return void 0===t.length&&(t=[t]),t}},{key:"getStyleText",value:function(t,e){var i="";for(var s in t)i+="".concat(s,": ").concat(t[s],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var s=t[i];void 0!==s&&(e+=" ".concat(i,'="').concat(s,'" '))}return e}}],(i=null)&&n(e.prototype,i),o&&n(e,o),t}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(t,e,i)=>{i.r(e),i.d(e,{Utils:()=>s.Utils,DomUtils:()=>o.DomUtils});var s=i(/*! ./utils */"./src/utils/utils.js"),o=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(t,e,i)=>{function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}i.r(e),i.d(e,{Utils:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,o;return e=t,o=[{key:"getString",value:function(t){return t||0===t?t.toString():""}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===n(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length||!e)return t;i&&(t=s(t));var o=t.indexOf(e);return-1!==o&&t.splice(o,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}}],(i=null)&&l(e.prototype,i),o&&l(e,o),t}()}},e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(s),i.d(s,{VirtualSelect:()=>p});var t=i(/*! ./utils */"./src/utils/index.js");function e(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r="{#virtual-select-none-option#}",u={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},p=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);try{this.setProps(t),this.setDisabledOptions(t.disabledOptions),this.setOptions(t.options),this.render()}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var s,n,l;return s=i,l=[{key:"init",value:function(t){var e=t.ele;if(e){var s=!1;if("string"!=typeof e||(e=document.querySelector(e))){void 0===e.length&&(e=[e],s=!0);var o=[];return e.forEach((function(e){t.ele=e,o.push(new i(t))})),s?o[0]:o}}}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t,e){this.virtualSelect.setOptionsMethod(t,e)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.onResize()}))}}],(n=[{key:"render",value:function(){if(this.$ele){var e="vscomp-wrapper",i=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),o={"z-index":this.zIndex};this.additionalClasses&&(e+=" "+this.additionalClasses),this.multiple&&(e+=" multiple",this.disableSelectAll||(e+=" has-select-all")),"top"===this.position&&(e+=" position-top"),this.hideClearButton||(e+=" has-clear-button"),this.keepAlwaysOpen?e+=" keep-always-open opened":e+=" closed",this.showAsPopup?e+=" show-as-popup":this.dropboxWidth&&(o.width=this.dropboxWidth),this.hasSearch&&(e+=" has-search-input");var n='<div class="'.concat(e,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(i,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        <div class="vscomp-dropbox-container" ').concat(t.DomUtils.getStyleText(o),'>\n          <div class="vscomp-dropbox">\n            <div class="vscomp-search-wrapper"></div>\n\n            <div class="vscomp-options-container">\n              <div class="vscomp-options-loader"></div>\n\n              <div class="vscomp-options-list">\n                <div class="vscomp-options"></div>\n              </div>\n            </div>\n\n            <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n            <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n            <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n          </div>\n        </div>\n      </div>');this.$ele.innerHTML=n,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),this.$search=this.$ele.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$ele.querySelector(".vscomp-options-container"),this.$optionsList=this.$ele.querySelector(".vscomp-options-list"),this.$options=this.$ele.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$ele.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$ele.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var e,i=this,s="",o=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),u=t.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(e=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var p=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(p,"></span>")}o.forEach((function(t){var o=t.label,p="vscomp-option",c=i.getTooltipAttrText("",!0),h=n,d="",v="";t.isFocused&&(p+=" focused"),t.isDisabled&&(p+=" disabled"),t.isGroupTitle?(p+=" group-title",h=""):t.isSelected&&(p+=" selected"),t.isGroupOption&&(p+=" group-option"),t.description&&(v='<div class="vscomp-option-description" '.concat(c,">").concat(t.description,"</div>")),t.isCurrentNew?(p+=" current-new",d+=l):a&&!t.isGroupTitle&&(o=o.replace(e,"<mark>$1</mark>")),s+='<div class="'.concat(p,'" data-value="').concat(t.value,'" data-index="').concat(t.index,'" data-visible-index="').concat(t.visibleIndex,'" ').concat(u,">\n          ").concat(h,'\n          <span class="vscomp-option-text ').concat(t.value===r?"none":"",'" ').concat(c,">\n            ").concat(o,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=s;var c=!this.options.length,h=!c&&!o.length;this.allowNewOption||t.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),t.DomUtils.toggleClass(this.$wrapper,"has-no-options",c),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var t="",e="";this.multiple&&!this.disableSelectAll&&(t='<span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>")),this.hasSearch&&(e='<input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n      <span class="vscomp-search-clear">&times;</span>'));var i='<div class="vscomp-search-container">\n        '.concat(t,"\n        ").concat(e,"\n      </div>");this.$search.innerHTML=i,this.$searchInput=this.$ele.querySelector(".vscomp-search-input"),this.$searchClear=this.$ele.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$ele.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$ele.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"addEvent",value:function(e,i,s){var o=this;e&&(i=t.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(s,"-").concat(i),l=o.events[n];l||(l=o[s].bind(o),o.events[n]=l),(e=t.DomUtils.getElements(e)).forEach((function(t){t.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(e,i){e&&(e=t.DomUtils.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(t){t.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=u[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)"))}},{key:"onDropboxContainerClick",value:function(t){t.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.isOpened()&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.setOptionsContainerHeight(!0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),t.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(t){t&&this.showAsPopup&&this.setVisibleOptions()}},{key:"setProps",value:function(e){e=this.setDefaultProps(e),this.setPropsFromElementAttr(e);var i=t.Utils.convertToBoolean;this.$ele=e.ele,this.valueKey=e.valueKey,this.labelKey=e.labelKey,this.descriptionKey=e.descriptionKey,this.aliasKey=e.aliasKey,this.optionHeightText=e.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(e.multiple),this.hasSearch=i(e.search),this.hideClearButton=i(e.hideClearButton),this.autoSelectFirstOption=i(e.autoSelectFirstOption),this.hasOptionDescription=i(e.hasOptionDescription),this.silentInitialValueSet=i(e.silentInitialValueSet),this.allowNewOption=i(e.allowNewOption),this.markSearchResults=i(e.markSearchResults),this.showSelectedOptionsFirst=i(e.showSelectedOptionsFirst),this.disableSelectAll=i(e.disableSelectAll),this.keepAlwaysOpen=i(e.keepAlwaysOpen),this.showDropboxAsPopup=i(e.showDropboxAsPopup),this.noOptionsText=e.noOptionsText,this.noSearchResultsText=e.noSearchResultsText,this.selectAllText=e.selectAllText,this.placeholder=e.placeholder,this.position=e.position,this.dropboxWidth=e.dropboxWidth,this.tooltipFontSize=e.tooltipFontSize,this.tooltipAlignment=e.tooltipAlignment,this.tooltipMaxWidth=e.tooltipMaxWidth,this.noOfDisplayValues=parseInt(e.noOfDisplayValues),this.zIndex=parseInt(e.zIndex),this.maxValues=parseInt(e.maxValues),this.name=e.name,this.additionalClasses=e.additionalClasses,this.initialSelectedValue=e.selectedValue,this.popupDropboxBreakpoint=e.popupDropboxBreakpoint,this.onServerSearch=e.onServerSearch,this.searchPlaceholder=e.searchPlaceholder,this.itemsSelectedMessage=e.itemsSelectedMessage,this.allowNoneOption=e.allowNoneOption,this.noneOptionText=e.noneOptionText,this.selectedValues=[],this.selectedIndexes=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===e.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(e.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None"};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint"};for(var s in i){var o=e.getAttribute(s);"multiple"!==s||""!==o&&"true"!==o||(o=!0),o&&(t[i[s]]=o)}}},{key:"setMethods",value:function(){var t=this.$ele;t.virtualSelect=this,t.value=this.multiple?[]:"",t.reset=i.reset,t.setValue=i.setValueMethod,t.setOptions=i.setOptionsMethod,t.setDisabledOptions=i.setDisabledOptionsMethod,t.toggleSelectAll=i.toggleSelectAll,t.isAllSelected=i.isAllSelected,t.addOption=i.addOptionMethod,t.getNewValue=i.getNewValueMethod,t.getDisplayValue=i.getDisplayValueMethod,t.open=i.openMethod,t.close=i.closeMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i=[],s=[];this.options.forEach((function(e,o){-1===t.indexOf(e.value)||e.isDisabled||e.isGroupTitle?e.isSelected=!1:(e.isSelected=!0,i.push(e.value),s.push(o))})),this.multiple||(i=i[0],s=s[0]),this.beforeValueSet(),this.setValue(i,s,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t,e){var i=t!=this.options;this.setOptions(t),this.afterSetOptions(e,i)}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(e){e||(e=[]);var i=[],s=this.disabledOptions,o=s.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,u=this.aliasKey,p=this.hasOptionDescription,c=t.Utils.getString,h=this.getAlias,d=0,v=!1;!this.multiple&&this.allowNoneOption&&e.unshift({value:r,label:this.noneOptionText}),e.forEach((function t(e){var r=c(e[n]),f=e.options,y=!!f,g={index:d,value:r,label:c(e[l]),alias:h(e[u]),isVisible:!0,isGroupTitle:y};if(o&&(g.isDisabled=-1!==s.indexOf(r)),e.isGroupOption&&(g.isGroupOption=!0,g.groupIndex=e.groupIndex),p&&(g.description=c(e[a])),i.push(g),d++,y){var m=g.index;v=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=m,t(e)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=v,this.setSortedOptions()}},{key:"setServerOptions",value:function(e){this.setOptionsMethod(e,!0),t.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSortedOptions",value:function(){var t=o(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=o(this.sortedOptions),e=2*this.optionsCount,i=this.getVisibleStartIndex(),s=this.getNewOption(),n=i+e-1,l=0;s&&(s.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=i&&l<=n,t.visibleIndex=l,l++),e})),s&&(t=[s].concat(o(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){void 0===e&&(e=this.getVisibleStartIndex());var i=e*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),t.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var e=this,i=this.getVisibleOptions(),s=this.hasOptionDescription;i.forEach((function(i){var o=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));t.DomUtils.setData(o.querySelector(".vscomp-option-text"),"tooltip",i.label),s&&t.DomUtils.setData(o.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(e,i,s){e?Array.isArray(e)?this.selectedValues=o(e):this.selectedValues=[e]:this.selectedValues=[];var n=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=n,this.$hiddenInput.value=n,i?Array.isArray(i)?this.selectedIndexes=o(i):this.selectedIndexes=[i]:this.selectedIndexes=[];var l=this.multiple?this.selectedIndexes:this.selectedIndexes[0]||"";this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===r?t.DomUtils.removeClass(this.$wrapper,"has-value"):t.DomUtils.toggleClass(this.$wrapper,"has-value",t.Utils.isNotEmpty(this.selectedValues)),t.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),s&&this.dispatchEvent(this.$ele,"change")}},{key:"setValueText",value:function(){var i=[],s=[],o=this.selectedValues,n=o.length,l=this.noOfDisplayValues,a=0;if(this.isAllSelected)this.$valueText.innerHTML="".concat(n," ").concat(this.itemsSelectedMessage);else{var u,p=e(this.options);try{for(p.s();!(u=p.n()).done;){var c=u.value;if(!c.isCurrentNew){if(a>50)break;var h=c.value;if(-1!==o.indexOf(h)){var d=c.label;i.push(d),++a<=l&&s.push('<span class="vscomp-value-tag">'.concat(d,"</span>"))}}}}catch(t){p.e(t)}finally{p.f()}var v=n-l;v>0&&s.push('<span class="vscomp-value-tag more-value-count">+ '.concat(v," more...</span>"));var f=i.join(", ");if(""===f||o&&o[0]===r)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=f,this.multiple){var y=this.maxValues;if(t.DomUtils.hasEllipsis(this.$valueText)||y){var g="".concat(n);y&&(g+=" / ".concat(y)),this.$valueText.innerHTML="".concat(g," ").concat(this.itemsSelectedMessage)}else s=[]}}t.DomUtils.setData(this.$valueText,"tooltip",s.join(", "))}},{key:"setSearchValue",value:function(e,i,s){if(e!==this.searchValueOriginal||s){i||(this.$searchInput.value=e);var o=e.toLowerCase().trim();if(this.searchValue=o,this.searchValueOriginal=e,t.DomUtils.toggleClass(this.$wrapper,"has-search-value",e),this.hasServerSearch)this.serverSearch(o);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(o)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=r(t,o,a,n);e.isVisible&&l++,a||(a=e.hasExactOption)}})),this.allowNewOption&&(o&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(e){var i;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(t.DomUtils.setStyle(this.$noOptions,"height",i),t.DomUtils.setStyle(this.$noSearchResults,"height",i))),t.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(e)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var e=t.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var s=this.$toggleButton.getBoundingClientRect(),o=window.innerWidth,n=parseFloat(this.dropboxWidth),l=s.left+n>o,a=n>s.right;l&&!a&&(i=!0)}t.DomUtils.toggleClass(this.$wrapper,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var s={value:t,label:t,isCurrentNew:!0};this.addOption(s)}}}},{key:"setSelectedProp",value:function(){var t=this.selectedValues;this.options.forEach((function(e){-1!==t.indexOf(e.value)&&(e.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":s};return t.DomUtils.getAttributesText(o)}},{key:"getOptionObj",value:function(e){if(e){var i=t.Utils.getString;return{index:e.index,value:i(e.value),label:i(e.label),description:i(e.description),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,i=[],s=this.selectedValues,o=e(this.options);try{for(o.s();!(t=o.n()).done;){var n=t.value;-1!==s.indexOf(n.value)&&i.push(n.label)}}catch(t){o.e(t)}finally{o.f()}return this.multiple?i:i[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},s=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return s(e,t).isVisible}))})),i}},{key:"getOptionsCount",value:function(t){if(this.showAsPopup){var e=80*window.innerHeight/100-48;this.hasSearchContainer&&(e-=40),t=Math.floor(e/this.optionHeight)}else t=parseInt(t);return t}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(e,i){var s="next"===i?"nextElementSibling":"previousElementSibling";do{e&&(e=e[s])}while(t.DomUtils.hasClass(e,"disabled")||t.DomUtils.hasClass(e,"group-title"));return e}},{key:"openDropbox",value:function(e){var i=this;this.setDropboxPosition(),t.DomUtils.removeClass(this.$wrapper,"closed"),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"opened"),i.dispatchEvent(i.$ele,"opened"),e||(i.moveSelectedOptionsFirst(),t.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(t.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput())}),0)}},{key:"closeDropbox",value:function(e){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var s=e?0:this.transitionDuration;setTimeout((function(){t.DomUtils.removeClass(i.$wrapper,"opened focused"),i.dispatchEvent(i.$ele,"closed"),i.removeOptionFocus(),e||i.isPopupActive&&(t.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1)}),0),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"closed")}),s)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return t.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(e,i){var s,o=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)s=i;else if(o)s=this.getSibling(o,e);else{var n=this.getFirstVisibleOptionIndex();s=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(t.DomUtils.hasClass(s,"disabled")||t.DomUtils.hasClass(s,"group-title"))&&(s=this.getSibling(s,"next"))}s&&s!==o&&(o&&t.DomUtils.removeClass(o,"focused"),t.DomUtils.addClass(s,"focused"),this.toggleFocusedProp(t.DomUtils.getData(s,"index"),!0),this.moveFocusedOptionToView(s))}},{key:"moveFocusedOptionToView",value:function(e){if(e||(e=this.$dropboxContainer.querySelector(".vscomp-option.focused")),e){var i,s=this.$optionsContainer.getBoundingClientRect(),o=e.getBoundingClientRect(),n=s.top,l=s.bottom,a=s.height,r=o.top,u=o.bottom,p=o.height,c=e.offsetTop,h=t.DomUtils.getData(this.$options,"top","number");n>r?i=c+h:l<u&&(i=c-a+p+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(t.DomUtils.removeClass(e,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){if(e){var i=!t.DomUtils.hasClass(e,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var s=this.selectedValues,o=this.selectedIndexes,n=t.DomUtils.getData(e,"value"),l=t.DomUtils.getData(e,"index");if(this.toggleSelectedProp(l,i),i){if(this.multiple)s.push(n),o.push(l),this.toggleAllOptionsClass();else{s.length&&this.toggleSelectedProp(this.getOptionIndex(s[0]),!1),s=[n],o=[l];var a=this.$ele.querySelector(".vscomp-option.selected");a&&t.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}t.DomUtils.toggleClass(e,"selected")}else this.multiple&&(t.DomUtils.toggleClass(e,"selected"),t.Utils.removeItemFromArray(s,n),t.Utils.removeItemFromArray(o,l),this.toggleAllOptionsClass(!1));if(t.DomUtils.hasClass(e,"current-new")&&this.beforeSelectNewValue(),this.setValue(s,o,!0),this.keepAlwaysOpen&&this.showSelectedOptionsFirst){var r=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=r}}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof e&&(e=!t.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],s=[];this.options.forEach((function(t,o){t.isDisabled||t.isCurrentNew||t.isGroupTitle||(t.isSelected=e,e&&(i.push(t.value),s.push(o)))})),this.toggleAllOptionsClass(e),this.setValue(i,s,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){"boolean"!=typeof e&&(e=!1,this.options.length&&(e=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),t.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",e),this.isAllSelected=e}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(t){var e=this.searchValue;t&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.setSearchValue(e,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),t||this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return e.value===r&&t.value!==r?0:t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,s){var o=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==o.indexOf(e);return t.isGroupTitle&&(a=s[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=o===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var s=[];t.options=s,i[t.index]=s,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"serverSearch",value:function(e){t.DomUtils.removeClass(this.$wrapper,"has-no-options"),t.DomUtils.addClass(this.$wrapper,"server-searching"),this.onServerSearch(e,this)}}])&&a(s.prototype,n),l&&a(s,l),i}();document.addEventListener("reset",p.resetForm),window.addEventListener("resize",p.onResizeMethod),window.VirtualSelect=p})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy91dGlscy9kb20tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJEb21VdGlscyIsIiRlbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsInRoaXMiLCJnZXRFbGVtZW50cyIsImZvckVhY2giLCJfdGhpcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImlzQWRkIiwiaXNBZGRlZCIsInVuZGVmaW5lZCIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJjb250YWlucyIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhdmFpbGFibGVXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwibGVmdCIsInRvcEFyZWEiLCJ0b3AiLCJob3Jpem9udGFsIiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImhlaWdodCIsIm5hbWUiLCJ0eXBlIiwidmFsdWUiLCJkYXRhc2V0IiwicGFyc2VGbG9hdCIsInN0eWxlIiwibGVuZ3RoIiwicHJvcHMiLCJza2lwQXR0ck5hbWUiLCJyZXN1bHQiLCJrIiwiZGF0YSIsImh0bWwiLCJVdGlscyIsInRleHQiLCJ0b1N0cmluZyIsImRlZmF1bHRWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlsdGVyIiwiZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwibm9uZU9wdGlvblZhbHVlIiwia2V5RG93bk1ldGhvZE1hcHBpbmciLCIxMyIsIjI3IiwiMzgiLCI0MCIsIlZpcnR1YWxTZWxlY3QiLCJvcHRpb25zIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCIkZWxlQXJyYXkiLCJlbGUiLCJzaW5nbGVFbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnN0YW5jZXMiLCJwdXNoIiwiJGZvcm0iLCJ0YXJnZXQiLCJjbG9zZXN0IiwicXVlcnlTZWxlY3RvckFsbCIsInBhcmVudEVsZW1lbnQiLCJ2aXJ0dWFsU2VsZWN0IiwicmVzZXQiLCJzaWxlbnRDaGFuZ2UiLCJzZXRWYWx1ZU1ldGhvZCIsImtlZXBWYWx1ZSIsInNldE9wdGlvbnNNZXRob2QiLCJzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QiLCJpc1NlbGVjdGVkIiwidG9nZ2xlQWxsT3B0aW9ucyIsImlzQWxsU2VsZWN0ZWQiLCJhZGRPcHRpb24iLCJnZXROZXdWYWx1ZSIsImdldERpc3BsYXlWYWx1ZSIsIm9wZW5Ecm9wYm94IiwiY2xvc2VEcm9wYm94Iiwib25SZXNpemUiLCJ3cmFwcGVyQ2xhc3NlcyIsInZhbHVlVG9vbHRpcCIsImdldFRvb2x0aXBBdHRyVGV4dCIsIm11bHRpcGxlIiwiY2xlYXJCdXR0b25Ub29sdGlwIiwiZHJvcGJveENvbnRhaW5lclN0eWxlIiwiekluZGV4IiwiYWRkaXRpb25hbENsYXNzZXMiLCJkaXNhYmxlU2VsZWN0QWxsIiwicG9zaXRpb24iLCJoaWRlQ2xlYXJCdXR0b24iLCJrZWVwQWx3YXlzT3BlbiIsInNob3dBc1BvcHVwIiwiZHJvcGJveFdpZHRoIiwiaGFzU2VhcmNoIiwicGxhY2Vob2xkZXIiLCJub09wdGlvbnNUZXh0Iiwibm9TZWFyY2hSZXN1bHRzVGV4dCIsImlubmVySFRNTCIsIiRib2R5IiwiJHdyYXBwZXIiLCIkdG9nZ2xlQnV0dG9uIiwiJGNsZWFyQnV0dG9uIiwiJGRyb3Bib3hDb250YWluZXIiLCIkZHJvcGJveENsb3NlQnV0dG9uIiwiJHNlYXJjaCIsIiRvcHRpb25zQ29udGFpbmVyIiwiJG9wdGlvbnNMaXN0IiwiJG9wdGlvbnMiLCIkdmFsdWVUZXh0IiwiJGhpZGRlbklucHV0IiwiJG5vT3B0aW9ucyIsIiRub1NlYXJjaFJlc3VsdHMiLCJhZnRlclJlbmRlcldyYXBwZXIiLCJzZWFyY2hSZWdleCIsInZpc2libGVPcHRpb25zIiwiZ2V0VmlzaWJsZU9wdGlvbnMiLCJjaGVja2JveEh0bWwiLCJuZXdPcHRpb25JY29uSHRtbCIsIm1hcmtTZWFyY2hSZXN1bHRzIiwic2VhcmNoVmFsdWUiLCJzdHlsZVRleHQiLCJvcHRpb25IZWlnaHQiLCJSZWdFeHAiLCJhbGxvd05ld09wdGlvbiIsIm5ld09wdGlvblRvb2x0aXAiLCJvcHRpb25MYWJlbCIsImxhYmVsIiwib3B0aW9uQ2xhc3NlcyIsIm9wdGlvblRvb2x0aXAiLCJsZWZ0U2VjdGlvbiIsInJpZ2h0U2VjdGlvbiIsImRlc2NyaXB0aW9uIiwiaXNGb2N1c2VkIiwiaXNEaXNhYmxlZCIsImlzR3JvdXBUaXRsZSIsImlzR3JvdXBPcHRpb24iLCJpc0N1cnJlbnROZXciLCJyZXBsYWNlIiwidmlzaWJsZUluZGV4IiwiaGFzTm9PcHRpb25zIiwiaGFzTm9TZWFyY2hSZXN1bHRzIiwic2V0T3B0aW9uc1Bvc2l0aW9uIiwic2V0T3B0aW9uc1Rvb2x0aXAiLCJoYXNTZWFyY2hDb250YWluZXIiLCJzZWFyY2hJbnB1dCIsInNlbGVjdEFsbFRleHQiLCJzZWFyY2hQbGFjZWhvbGRlciIsIiRzZWFyY2hJbnB1dCIsIiRzZWFyY2hDbGVhciIsIiR0b2dnbGVBbGxCdXR0b24iLCIkdG9nZ2xlQWxsQ2hlY2tib3giLCJhZGRFdmVudCIsImV2ZW50cyIsIm1ldGhvZCIsImV2ZW50IiwiZXZlbnRzS2V5IiwiY2FsbGJhY2siLCJiaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50TmFtZSIsInNldFRpbWVvdXQiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJidWJibGVzIiwid2hpY2giLCJrZXlDb2RlIiwiaXNPcGVuZWQiLCJzZWxlY3RGb2N1c2VkT3B0aW9uIiwicHJldmVudERlZmF1bHQiLCJmb2N1c09wdGlvbiIsInRvZ2dsZURyb3Bib3giLCJzZXRWaXNpYmxlT3B0aW9ucyIsInNlbGVjdE9wdGlvbiIsInJlbW92ZU9wdGlvbkZvY3VzIiwic3RvcFByb3BhZ2F0aW9uIiwic2V0U2VhcmNoVmFsdWUiLCJmb2N1c1NlYXJjaElucHV0Iiwic2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsInNldEF0dHJpYnV0ZSIsInJlbmRlclNlYXJjaCIsInNldE9wdGlvbnNIZWlnaHQiLCJhZGRFdmVudHMiLCJzZXRNZXRob2RzIiwiaW5pdGlhbFNlbGVjdGVkVmFsdWUiLCJzaWxlbnRJbml0aWFsVmFsdWVTZXQiLCJhdXRvU2VsZWN0Rmlyc3RPcHRpb24iLCJzZXREZWZhdWx0UHJvcHMiLCJzZXRQcm9wc0Zyb21FbGVtZW50QXR0ciIsImNvbnZlcnRUb0Jvb2xlYW4iLCJ2YWx1ZUtleSIsImxhYmVsS2V5IiwiZGVzY3JpcHRpb25LZXkiLCJhbGlhc0tleSIsIm9wdGlvbkhlaWdodFRleHQiLCJzZWFyY2giLCJoYXNPcHRpb25EZXNjcmlwdGlvbiIsInNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCIsInNob3dEcm9wYm94QXNQb3B1cCIsInRvb2x0aXBGb250U2l6ZSIsInRvb2x0aXBBbGlnbm1lbnQiLCJ0b29sdGlwTWF4V2lkdGgiLCJub09mRGlzcGxheVZhbHVlcyIsInBhcnNlSW50IiwibWF4VmFsdWVzIiwic2VsZWN0ZWRWYWx1ZSIsInBvcHVwRHJvcGJveEJyZWFrcG9pbnQiLCJvblNlcnZlclNlYXJjaCIsIml0ZW1zU2VsZWN0ZWRNZXNzYWdlIiwiYWxsb3dOb25lT3B0aW9uIiwibm9uZU9wdGlvblRleHQiLCJzZWxlY3RlZFZhbHVlcyIsInNlbGVjdGVkSW5kZXhlcyIsIm5ld1ZhbHVlcyIsInRvb2x0aXBFbnRlckRlbGF5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwic2VhcmNoVmFsdWVPcmlnaW5hbCIsImhhc1NlcnZlclNlYXJjaCIsIm9wdGlvbnNDb3VudCIsImdldE9wdGlvbnNDb3VudCIsImhhbGZPcHRpb25zQ291bnQiLCJNYXRoIiwiY2VpbCIsIm9wdGlvbnNIZWlnaHQiLCJnZXRPcHRpb25zSGVpZ2h0IiwiZGVmYXVsdE9wdGlvbnMiLCJhc3NpZ24iLCJtYXBwaW5nIiwiZ2V0QXR0cmlidXRlIiwic2V0VmFsdWUiLCJ0b2dnbGVTZWxlY3RBbGwiLCJhZGRPcHRpb25NZXRob2QiLCJnZXROZXdWYWx1ZU1ldGhvZCIsImdldERpc3BsYXlWYWx1ZU1ldGhvZCIsIm9wZW4iLCJvcGVuTWV0aG9kIiwiY2xvc2UiLCJjbG9zZU1ldGhvZCIsIm1hcCIsInYiLCJ2YWxpZFZhbHVlcyIsInZhbGlkSW5kZXhlcyIsImlkeCIsImJlZm9yZVZhbHVlU2V0IiwiYWZ0ZXJWYWx1ZVNldCIsIm5ld29wdGlvbiIsImFmdGVyU2V0T3B0aW9ucyIsInNldE9wdGlvbnNQcm9wIiwicHJlcGFyZWRPcHRpb25zIiwiaGFzRGlzYWJsZWRPcHRpb25zIiwiZ2V0U3RyaW5nIiwiZ2V0QWxpYXMiLCJoYXNPcHRpb25Hcm91cCIsInVuc2hpZnQiLCJwcmVwYXJlT3B0aW9uIiwiY2hpbGRPcHRpb25zIiwib3B0aW9uIiwiYWxpYXMiLCJpc1Zpc2libGUiLCJncm91cEluZGV4IiwidmlzaWJsZU9wdGlvbnNDb3VudCIsImxhc3RPcHRpb25JbmRleCIsInNldFNvcnRlZE9wdGlvbnMiLCJzb3J0ZWRPcHRpb25zIiwic29ydE9wdGlvbnNHcm91cCIsInNvcnRPcHRpb25zIiwibWF4T3B0aW9uc1RvU2hvdyIsInN0YXJ0SW5kZXgiLCJnZXRWaXNpYmxlU3RhcnRJbmRleCIsIm5ld09wdGlvbiIsImdldE5ld09wdGlvbiIsImVuZEluZGV4IiwiaSIsImluVmlldyIsInJlbmRlck9wdGlvbnMiLCJ0cmFuc2Zvcm0iLCIkb3B0aW9uRWxlIiwidHJpZ2dlckV2ZW50IiwibmV3VmFsdWUiLCJuZXdJbmRleCIsImlzTWF4VmFsdWVzU2VsZWN0ZWQiLCJzZXRWYWx1ZVRleHQiLCJ2YWx1ZVRleHQiLCJzZWxlY3RlZExlbmd0aCIsInNlbGVjdGVkVmFsdWVzQ291bnQiLCJtb3JlU2VsZWN0ZWRPcHRpb25zIiwiYWdncmVnYXRlZFZhbHVlVGV4dCIsImpvaW4iLCJjb3VudFRleHQiLCJza2lwSW5wdXRTZXQiLCJmb3JjZSIsInRvTG93ZXJDYXNlIiwidHJpbSIsInNlcnZlclNlYXJjaCIsInZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nIiwiaGFzRXhhY3RPcHRpb24iLCJpc09wdGlvblZpc2libGUiLCJnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyIsInNldE5ld09wdGlvbiIsInJlbW92ZU5ld09wdGlvbiIsInNjcm9sbFRvVG9wIiwiYWZ0ZXJTZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0IiwibW9yZVZpc2libGVTaWRlcyIsInNob3dPbkxlZnQiLCJidXR0b25Db29yZHMiLCJ2aWV3cG9ydFdpZHRoIiwiaGlkZGVuT25SaWdodCIsImhpZGRlbk9uTGVmdCIsInJpZ2h0Iiwic2V0T3B0aW9uUHJvcCIsInNjcm9sbFRvcCIsImdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IiwiZWxsaXBzaXNPbmx5IiwiYWxsb3dIdG1sIiwibGFzdE9wdGlvbiIsInNvbWUiLCJkaXNwbGF5VmFsdWVzIiwic3RydWN0dXJlT3B0aW9uR3JvdXAiLCJjb3VudCIsImZsb29yIiwiZGlyZWN0aW9uIiwicHJvcE5hbWUiLCJpc1NpbGVudCIsInNldERyb3Bib3hQb3NpdGlvbiIsIm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCIsImlzUG9wdXBBY3RpdmUiLCJmb2N1cyIsIiRuZXdGb2N1c2VkRWxlIiwiJGZvY3VzZWRFbGUiLCJnZXRTaWJsaW5nIiwiZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgiLCJ0b2dnbGVGb2N1c2VkUHJvcCIsIm1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3IiwibmV3U2Nyb2xsVG9wIiwiY29udGFpbmVyUmVjdCIsIm9wdGlvblJlY3QiLCJjb250YWluZXJUb3AiLCJjb250YWluZXJCb3R0b20iLCJib3R0b20iLCJjb250YWluZXJIZWlnaHQiLCJvcHRpb25Ub3AiLCJvcHRpb25Cb3R0b20iLCJvcHRpb25PZmZzZXRUb3AiLCJvZmZzZXRUb3AiLCJvcHRpb25zVG9wIiwiaXNBZGRpbmciLCJzZWxlY3RlZEluZGV4IiwidG9nZ2xlU2VsZWN0ZWRQcm9wIiwidG9nZ2xlQWxsT3B0aW9uc0NsYXNzIiwiZ2V0T3B0aW9uSW5kZXgiLCIkcHJldlNlbGVjdGVkT3B0aW9uIiwiYmVmb3JlU2VsZWN0TmV3VmFsdWUiLCJsYXN0U2Nyb2xsVG9wIiwiZm9jdXNlZE9wdGlvbkluZGV4IiwiaXNDbG9zZWQiLCJpc1Jlc2V0IiwicmVyZW5kZXIiLCJnZXRPcHRpb25PYmoiLCJyZW1vdmVPcHRpb24iLCJzb3J0IiwiYSIsImIiLCJkZXN0cnVjdHVyZU9wdGlvbkdyb3VwIiwiY2hpbGRBcnJheSIsImNvbmNhdCIsInJlc2V0Rm9ybSIsIm9u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QkFBaUIsU0FBVXRILEVBQWNxVSxnQkFFaER4WSxPQUFPbUUsY0FBZ0JBLEciLCJmaWxlIjoidmlydHVhbC1zZWxlY3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIERvbVV0aWxzIHtcclxuICBzdGF0aWMgYWRkQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgX3RoaXMuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgX3RoaXMuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdG9nZ2xlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lLCBpc0FkZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNBZGQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpc0FkZCA9IEJvb2xlYW4oaXNBZGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGVkO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgaXNBZGRlZCA9IF90aGlzLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBpc0FkZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaXNBZGRlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYXNDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzRWxsaXBzaXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZS5zY3JvbGxXaWR0aCA+ICRlbGUub2Zmc2V0V2lkdGg7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TW9yZVZpc2libGVTaWRlcygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBib3ggPSAkZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGF2YWlsYWJsZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgbGV0IGxlZnRBcmVhID0gYm94LmxlZnQ7XHJcbiAgICBsZXQgdG9wQXJlYSA9IGJveC50b3A7XHJcbiAgICBsZXQgcmlnaHRBcmVhID0gYXZhaWxhYmxlV2lkdGggLSBsZWZ0QXJlYSAtIGJveC53aWR0aDtcclxuICAgIGxldCBib3R0b21BcmVhID0gYXZhaWxhYmxlSGVpZ2h0IC0gdG9wQXJlYSAtIGJveC5oZWlnaHQ7XHJcbiAgICBsZXQgaG9yaXpvbnRhbCA9IGxlZnRBcmVhID4gcmlnaHRBcmVhID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuICAgIGxldCB2ZXJ0aWNhbCA9IHRvcEFyZWEgPiBib3R0b21BcmVhID8gJ3RvcCcgOiAnYm90dG9tJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBob3Jpem9udGFsLFxyXG4gICAgICB2ZXJ0aWNhbCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGF0YSgkZWxlLCBuYW1lLCB0eXBlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB2YWx1ZSA9ICRlbGUgPyAkZWxlLmRhdGFzZXRbbmFtZV0gOiAnJztcclxuXHJcbiAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcclxuICAgICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldERhdGEoJGVsZSwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZS5kYXRhc2V0W25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0U3R5bGUoJGVsZSwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZS5zdHlsZVtuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEVsZW1lbnRzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRlbGUubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZSA9IFskZWxlXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZTtcclxuICB9XHJcblxyXG4gIC8qKiBjb252ZXJ0IG9iamVjdCB0byBzdHlsZSBhdHRyaWJ1dGUgKi9cclxuICBzdGF0aWMgZ2V0U3R5bGVUZXh0KHByb3BzLCBza2lwQXR0ck5hbWUpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XHJcbiAgICAgIHJlc3VsdCArPSBgJHtrfTogJHtwcm9wc1trXX07YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmICFza2lwQXR0ck5hbWUpIHtcclxuICAgICAgcmVzdWx0ID0gYHN0eWxlPVwiJHtyZXN1bHR9XCJgO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKiogY29udmVydCBvYmplY3QgdG8gZG9tIGF0dHJpYnV0ZXMgKi9cclxuICBzdGF0aWMgZ2V0QXR0cmlidXRlc1RleHQoZGF0YSkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuXHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuIGh0bWw7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBkYXRhKSB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IGRhdGFba107XHJcblxyXG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGh0bWwgKz0gYCAke2t9PVwiJHt2YWx1ZX1cIiBgO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVdGlscyB7XHJcbiAgc3RhdGljIGdldFN0cmluZyh0ZXh0KSB7XHJcbiAgICByZXR1cm4gdGV4dCB8fCB0ZXh0ID09PSAwID8gdGV4dC50b1N0cmluZygpIDogJyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29udmVydFRvQm9vbGVhbih2YWx1ZSwgZGVmYXVsdFZhbHVlID0gZmFsc2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNFbXB0eSh2YWx1ZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTm90RW1wdHkodmFsdWUpIHtcclxuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVJdGVtRnJvbUFycmF5KGFycmF5LCB2YWx1ZSwgY2xvbmVBcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoIHx8ICF2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNsb25lQXJyYXkpIHtcclxuICAgICAgYXJyYXkgPSBbLi4uYXJyYXldO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xyXG5cclxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlQXJyYXlFbXB0eShhcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXkuZmlsdGVyKChkKSA9PiAhIWQpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBVdGlscywgRG9tVXRpbHMgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmNvbnN0IHZpcnR1YWxTZWxlY3RWZXJzaW9uID0gJ3YxLjAuNic7XHJcbmNvbnN0IGRyb3Bib3hDbG9zZUJ1dHRvbkZ1bGxIZWlnaHQgPSA0ODtcclxuY29uc3Qgc2VhcmNoSGVpZ2h0ID0gNDA7XHJcbmNvbnN0IG5vbmVPcHRpb25WYWx1ZSA9ICd7I3ZpcnR1YWwtc2VsZWN0LW5vbmUtb3B0aW9uI30nO1xyXG5cclxuY29uc3Qga2V5RG93bk1ldGhvZE1hcHBpbmcgPSB7XHJcbiAgMTM6ICdvbkVudGVyUHJlc3MnLFxyXG4gIDI3OiAnb25Fc2NQcmVzcycsXHJcbiAgMzg6ICdvblVwQXJyb3dQcmVzcycsXHJcbiAgNDA6ICdvbkRvd25BcnJvd1ByZXNzJyxcclxufTtcclxuXHJcbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgVmlydHVhbFNlbGVjdCAqL1xyXG5leHBvcnQgY2xhc3MgVmlydHVhbFNlbGVjdCB7XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgVmlydHVhbFNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7KGVsZW1lbnR8c3RyaW5nKX0gZWxlIC0gUGFyZW50IGVsZW1lbnQgdG8gcmVuZGVyIFZpcnR1YWxTZWxlY3RcclxuICAgKiBAcHJvcGVydHkge29iamVjdFtdfSBvcHRpb25zIC0gQXJyYXkgb2Ygb2JqZWN0IHRvIHNob3cgYXMgb3B0aW9uc1xyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10udmFsdWUgLSBWYWx1ZSBvZiB0aGUgb3B0aW9uXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS5sYWJlbCAtIERpc3BsYXkgdGV4dCBvZiB0aGUgb3B0aW9uXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS5kZXNjcmlwdGlvbiAtIFRleHQgdG8gc2hvdyBhbG9uZyB3aXRoIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfGFycmF5KX0gb3B0aW9uc1tdLmFsaWFzIC0gQWx0ZXJuYXRpdmUgbGFiZWxzIHRvIHVzZSBvbiBzZWFyY2guIEFycmF5IG9mIHN0cmluZyBvciBjb21tYSBzZXBhcmF0ZWQgc3RyaW5nLlxyXG4gICAqIEBwcm9wZXJ0eSB7YXJyYXl9IG9wdGlvbnNbXS5vcHRpb25zIC0gTGlzdCBvZiBvcHRpb25zIGZvciBvcHRpb24gZ3JvdXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3ZhbHVlS2V5PXZhbHVlXSAtIE9iamVjdCBrZXkgdG8gdXNlIHRvIGdldCB2YWx1ZSBmcm9tIG9wdGlvbnMgYXJyYXlcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsS2V5PWxhYmVsXSAtIE9iamVjdCBrZXkgdG8gdXNlIHRvIGdldCBsYWJlbCBmcm9tIG9wdGlvbnMgYXJyYXlcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Rlc2NyaXB0aW9uS2V5PWRlc2NyaXB0aW9uXSAtIE9iamVjdCBrZXkgdG8gdXNlIHRvIGdldCBkZXNjcmlwdGlvbiBmcm9tIG9wdGlvbnMgYXJyYXlcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2FsaWFzS2V5PWFsaWFzXSAtIEtleSBuYW1lIHRvIGdldCBhbGlhcyBmcm9tIG9wdGlvbnMgb2JqZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlwbGU9ZmFsc2VdIC0gRW5hYmxlIG11bHRpc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2VhcmNoPWZhbHNlXSAtIEVuYWJsZSBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoaWRlQ2xlYXJCdXR0b249ZmFsc2VdIC0gSGlkZSBjbGVhciBidXR0b25cclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvU2VsZWN0Rmlyc3RPcHRpb249ZmFsc2VdIC0gU2VsZWN0IGZpcnN0IG9wdGlvbiBieSBkZWZhdWx0IG9uIGxvYWRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoYXNPcHRpb25EZXNjcmlwdGlvbj1mYWxzZV0gLSBIYXMgZGVzY3JpcHRpb24gdG8gc2hvdyBhbG9uZyB3aXRoIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbZGlzYWJsZVNlbGVjdEFsbD1mYWxzZV0gLSBEaXNhYmxlIHNlbGVjdCBhbGwgZmVhdHVyZSBvZiBtdWx0aXBsZSBzZWxlY3RcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW29wdGlvbnNDb3VudD01fDRdIC0gTm8ub2Ygb3B0aW9ucyB0byBzaG93IG9uIHZpZXdwb3J0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25IZWlnaHQ9NDBweHw2MHB4XSAtIEhlaWdodCBvZiBlYWNoIGRyb3Bkb3duIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Bvc2l0aW9uPWF1dG9dIC0gUG9zaXRpb24gb2YgZHJvcGJveCAodG9wLCBib3R0b20sIGF1dG8pXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbGFjZWhvbGRlcj1TZWxlY3RdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gb3B0aW9ucyBzZWxlY3RlZFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9PcHRpb25zVGV4dD1ObyBvcHRpb25zIGZvdW5kXSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgdG8gc2hvd1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9TZWFyY2hSZXN1bHRzVGV4dD1ObyByZXN1bHRzIGZvdW5kXSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIHJlc3VsdHMgb24gc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzZWxlY3RBbGxUZXh0PVNlbGVjdCBhbGxdIC0gVGV4dCB0byBzaG93IG5lYXIgc2VsZWN0IGFsbCBjaGVja2JveCB3aGVuIHNlYXJjaCBpcyBkaXNhYmxlZFxyXG4gICAqIEBwcm9wZXJ0eSB7YXJyYXl9IFtkaXNhYmxlZE9wdGlvbnNdIC0gT3B0aW9ucyB0byBkaXNhYmxlIChhcnJheSBvZiB2YWx1ZXMpXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfGFycmF5KX0gW3NlbGVjdGVkVmFsdWVdIC0gU2luZ2xlIHZhbHVlIG9yIGFycmF5IG9mIHZhbHVlcyB0byBzZWxlY3Qgb24gaW5pdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NpbGVudEluaXRpYWxWYWx1ZVNldD1mYWxzZV0gLSBUbyBhdm9pZCBcImNoYW5nZSBldmVudFwiIHRyaWdnZXIgb24gc2V0dGluZyBpbml0aWFsIHZhbHVlXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcm9wYm94V2lkdGhdIC0gQ3VzdG9tIHdpZHRoIGZvciBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXg9MV0gLSBDU1Mgei1pbmRleCB2YWx1ZSBmb3IgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbm9PZkRpc3BsYXlWYWx1ZXM9NTBdIC0gTWF4aW11bSBuby5vZiB2YWx1ZXMgdG8gc2hvdyBpbiB0aGUgdG9vbHRpcCBmb3IgbXVsdGktc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYWxsb3dOZXdPcHRpb249ZmFsc2VdIC0gQWxsb3cgdG8gYWRkIG5ldyBvcHRpb24gYnkgc2VhcmNoaW5nXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbbWFya1NlYXJjaFJlc3VsdHM9ZmFsc2VdIC0gTWFyayBtYXRjaGVkIHRlcm0gaW4gbGFiZWxcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBGb250U2l6ZT0xNHB4XSAtIEZvbnQgc2l6ZSBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcEFsaWdubWVudD1jZW50ZXJdIC0gQ1NTIFRleHQgYWxpZ25tZW50IGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwTWF4V2lkdGg9MzAwcHhdIC0gQ1NTIG1heCB3aWR0aCBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dTZWxlY3RlZE9wdGlvbnNGaXJzdD1mYWxzZV0gLSBTaG93IHNlbGVjdGVkIG9wdGlvbnMgYXQgdGhlIHRvcCBvZiB0aGUgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gLSBOYW1lIGF0dHJpYnV0ZSBmb3IgaGlkZGVuIGlucHV0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBba2VlcEFsd2F5c09wZW5dIC0gS2VlcCBkcm9wYm94IGFsd2F5cyBvcGVuIHdpdGggZml4ZWQgaGVpZ2h0XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhWYWx1ZXM9MF0gLSBNYXhpbXVtIG5vLm9mIG9wdGlvbnMgYWxsb3dlZCB0byBjaG9vc2UgaW4gbXVsdGlwbGUgc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthZGRpdGlvbmFsQ2xhc3Nlc10gLSBBZGRpdGlvbmFsIGNsYXNzZXMgZm9yIHdyYXBwZXIgZWxlbWVudFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dEcm9wYm94QXNQb3B1cD10cnVlXSAtIFNob3cgZHJvcGJveCBhcyBwb3B1cCBvbiBzbWFsbCBzY3JlZW4gbGlrZSBtb2JpbGVcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3BvcHVwRHJvcGJveEJyZWFrcG9pbnQ9NTc2cHhdIC0gTWF4aW11bSBzY3JlZW4gd2lkdGggdGhhdCBhbGxvd2VkIHRvIHNob3cgZHJvcGJveCBhcyBwb3B1cFxyXG4gICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtvblNlcnZlclNlYXJjaF0gLSBDYWxsYmFjayBmdW5jdGlvbiB0byBpbnRlZ3JhdGUgc2VydmVyIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc2VhcmNoUGxhY2Vob2xkZXI9U2VhcmNoLi4uXSAtIFRleHQgdG8gc2hvdyBpbnNpZGUgc2VhcmNoIGlucHV0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYWxsb3dOb25lT3B0aW9uPWZhbHNlXSAtIEluIHNpbmdsZSBzZWxlY3Rpb24gbW9kZSBvbmx5IGFuZCB3aGVuIGtlZXAgYWx3YXlzIG9wZW4gaXMgb246IGRpc3BsYXkgYSBub25lIG9wdGlvbiB0aGF0IGNsZWFycyB0aGUgc2VsZWN0aW9uXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtub25lT3B0aW9uVGV4dD1Ob25lXSAtIFRleHQgdG8gYmUgZGlzcGxheSBpZiBhbGxvd05vbmUgb3B0aW9uIGlzIGFjdGl2ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuc2V0UHJvcHMob3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKG9wdGlvbnMuZGlzYWJsZWRPcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMub3B0aW9ucyk7XHJcbiAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgQ291bGRuJ3QgaW5pdGlhdGUgVmlydHVhbCBTZWxlY3RgKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiByZW5kZXIgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKCF0aGlzLiRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB3cmFwcGVyQ2xhc3NlcyA9ICd2c2NvbXAtd3JhcHBlcic7XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsICF0aGlzLm11bHRpcGxlLCB0cnVlKTtcclxuICAgIGxldCBjbGVhckJ1dHRvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnQ2xlYXInKTtcclxuXHJcbiAgICBsZXQgZHJvcGJveENvbnRhaW5lclN0eWxlID0ge1xyXG4gICAgICAnei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcykge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnICcgKyB0aGlzLmFkZGl0aW9uYWxDbGFzc2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHdyYXBwZXJDbGFzc2VzICs9ICcgbXVsdGlwbGUnO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGhhcy1zZWxlY3QtYWxsJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIHBvc2l0aW9uLXRvcCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmhpZGVDbGVhckJ1dHRvbikge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGhhcy1jbGVhci1idXR0b24nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmtlZXBBbHdheXNPcGVuKSB7XHJcbiAgICAgIHdyYXBwZXJDbGFzc2VzICs9ICcga2VlcC1hbHdheXMtb3BlbiBvcGVuZWQnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd3JhcHBlckNsYXNzZXMgKz0gJyBjbG9zZWQnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgIHdyYXBwZXJDbGFzc2VzICs9ICcgc2hvdy1hcy1wb3B1cCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5kcm9wYm94V2lkdGgpIHtcclxuICAgICAgICBkcm9wYm94Q29udGFpbmVyU3R5bGUud2lkdGggPSB0aGlzLmRyb3Bib3hXaWR0aDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmhhc1NlYXJjaCkge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGhhcy1zZWFyY2gtaW5wdXQnO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCIke3dyYXBwZXJDbGFzc2VzfVwiIHRhYmluZGV4PVwiMFwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIiR7dGhpcy5uYW1lfVwiIGNsYXNzPVwidnNjb21wLWhpZGRlbi1pbnB1dFwiPlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXRvZ2dsZS1idXR0b25cIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtdmFsdWVcIiAke3ZhbHVlVG9vbHRpcH0+XHJcbiAgICAgICAgICAgICR7dGhpcy5wbGFjZWhvbGRlcn1cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtYXJyb3dcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWNsZWFyLWJ1dHRvbiB0b2dnbGUtYnV0dG9uLWNoaWxkXCIgJHtjbGVhckJ1dHRvblRvb2x0aXB9PlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cInZzY29tcC1jbGVhci1pY29uXCI+PC9pPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtZHJvcGJveC1jb250YWluZXJcIiAke0RvbVV0aWxzLmdldFN0eWxlVGV4dChcclxuICAgICAgICAgIGRyb3Bib3hDb250YWluZXJTdHlsZVxyXG4gICAgICAgICl9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1kcm9wYm94XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLXdyYXBwZXJcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbG9hZGVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1saXN0XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnNcIj48L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLW9wdGlvbnNcIj4ke3RoaXMubm9PcHRpb25zVGV4dH08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1zZWFyY2gtcmVzdWx0c1wiPiR7XHJcbiAgICAgICAgICAgICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0XHJcbiAgICAgICAgICAgIH08L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uXCI+PGkgY2xhc3M9XCJ2c2NvbXAtY2xlYXItaWNvblwiPjwvaT48L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRlbGUuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICB0aGlzLiR3cmFwcGVyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtd3JhcHBlcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdG9nZ2xlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kY2xlYXJCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1jbGVhci1idXR0b24nKTtcclxuICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtZHJvcGJveC1jb250YWluZXInXHJcbiAgICApO1xyXG4gICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uJ1xyXG4gICAgKTtcclxuICAgIHRoaXMuJHNlYXJjaCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbnMtY29udGFpbmVyJ1xyXG4gICAgKTtcclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucy1saXN0Jyk7XHJcbiAgICB0aGlzLiRvcHRpb25zID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kdmFsdWVUZXh0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdmFsdWUnKTtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtaGlkZGVuLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRub09wdGlvbnMgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1uby1vcHRpb25zJyk7XHJcbiAgICB0aGlzLiRub1NlYXJjaFJlc3VsdHMgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtbm8tc2VhcmNoLXJlc3VsdHMnXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWZ0ZXJSZW5kZXJXcmFwcGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJPcHRpb25zKCkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBuZXdPcHRpb25JY29uSHRtbCA9ICcnO1xyXG4gICAgbGV0IG1hcmtTZWFyY2hSZXN1bHRzID1cclxuICAgICAgdGhpcy5tYXJrU2VhcmNoUmVzdWx0cyAmJiB0aGlzLnNlYXJjaFZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgbGV0IHNlYXJjaFJlZ2V4O1xyXG5cclxuICAgIGxldCBzdHlsZVRleHQgPSBEb21VdGlscy5nZXRTdHlsZVRleHQoe1xyXG4gICAgICBoZWlnaHQ6IHRoaXMub3B0aW9uSGVpZ2h0ICsgJ3B4JyxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cykge1xyXG4gICAgICBzZWFyY2hSZWdleCA9IG5ldyBSZWdFeHAoYCgke3RoaXMuc2VhcmNoVmFsdWV9KWAsICdnaScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIGNoZWNrYm94SHRtbCA9ICc8c3BhbiBjbGFzcz1cImNoZWNrYm94LWljb25cIj48L3NwYW4+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3T3B0aW9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdOZXcgT3B0aW9uJyk7XHJcbiAgICAgIG5ld09wdGlvbkljb25IdG1sID0gYDxzcGFuIGNsYXNzPVwidnNjb21wLW5ldy1vcHRpb24taWNvblwiICR7bmV3T3B0aW9uVG9vbHRpcH0+PC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgb3B0aW9uTGFiZWwgPSBkLmxhYmVsO1xyXG4gICAgICBsZXQgb3B0aW9uQ2xhc3NlcyA9ICd2c2NvbXAtb3B0aW9uJztcclxuICAgICAgbGV0IG9wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnJywgdHJ1ZSk7XHJcbiAgICAgIGxldCBsZWZ0U2VjdGlvbiA9IGNoZWNrYm94SHRtbDtcclxuICAgICAgbGV0IHJpZ2h0U2VjdGlvbiA9ICcnO1xyXG4gICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuXHJcbiAgICAgIGlmIChkLmlzRm9jdXNlZCkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBmb2N1c2VkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNEaXNhYmxlZCkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBkaXNhYmxlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBncm91cC10aXRsZSc7XHJcbiAgICAgICAgbGVmdFNlY3Rpb24gPSAnJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgc2VsZWN0ZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBncm91cC1vcHRpb24nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9uLWRlc2NyaXB0aW9uXCIgJHtvcHRpb25Ub29sdGlwfT4ke2QuZGVzY3JpcHRpb259PC9kaXY+YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGN1cnJlbnQtbmV3JztcclxuICAgICAgICByaWdodFNlY3Rpb24gKz0gbmV3T3B0aW9uSWNvbkh0bWw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG1hcmtTZWFyY2hSZXN1bHRzICYmICFkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgICAgb3B0aW9uTGFiZWwgPSBvcHRpb25MYWJlbC5yZXBsYWNlKHNlYXJjaFJlZ2V4LCAnPG1hcms+JDE8L21hcms+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwiJHtvcHRpb25DbGFzc2VzfVwiIGRhdGEtdmFsdWU9XCIke1xyXG4gICAgICAgIGQudmFsdWVcclxuICAgICAgfVwiIGRhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCIgZGF0YS12aXNpYmxlLWluZGV4PVwiJHtcclxuICAgICAgICBkLnZpc2libGVJbmRleFxyXG4gICAgICB9XCIgJHtzdHlsZVRleHR9PlxyXG4gICAgICAgICAgJHtsZWZ0U2VjdGlvbn1cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLW9wdGlvbi10ZXh0ICR7XHJcbiAgICAgICAgICAgIGQudmFsdWUgPT09IG5vbmVPcHRpb25WYWx1ZSA/ICdub25lJyA6ICcnXHJcbiAgICAgICAgICB9XCIgJHtvcHRpb25Ub29sdGlwfT5cclxuICAgICAgICAgICAgJHtvcHRpb25MYWJlbH1cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICR7ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAke3JpZ2h0U2VjdGlvbn1cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy4kb3B0aW9ucy5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgbGV0IGhhc05vT3B0aW9ucyA9ICF0aGlzLm9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IGhhc05vU2VhcmNoUmVzdWx0cyA9ICFoYXNOb09wdGlvbnMgJiYgIXZpc2libGVPcHRpb25zLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoIXRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJyxcclxuICAgICAgICBoYXNOb1NlYXJjaFJlc3VsdHNcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLW9wdGlvbnMnLCBoYXNOb09wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zUG9zaXRpb24oKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Rvb2x0aXAoKTtcclxuICAgIC8vdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VhcmNoKCkge1xyXG4gICAgaWYgKCF0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoZWNrYm94SHRtbCA9ICcnO1xyXG4gICAgbGV0IHNlYXJjaElucHV0ID0gJyc7XHJcblxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1idXR0b25cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvbiB2c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveFwiPjwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtbGFiZWxcIj4ke3RoaXMuc2VsZWN0QWxsVGV4dH08L3NwYW4+XHJcbiAgICAgICAgPC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgIHNlYXJjaElucHV0ID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidnNjb21wLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaFBsYWNlaG9sZGVyfVwiPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY29udGFpbmVyXCI+XHJcbiAgICAgICAgJHtjaGVja2JveEh0bWx9XHJcbiAgICAgICAgJHtzZWFyY2hJbnB1dH1cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRzZWFyY2guaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJHNlYXJjaElucHV0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRzZWFyY2hDbGVhciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC1jbGVhcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWxsQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLXRvZ2dsZS1hbGwtYnV0dG9uJ1xyXG4gICAgKTtcclxuICAgIHRoaXMuJHRvZ2dsZUFsbENoZWNrYm94ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLXRvZ2dsZS1hbGwtY2hlY2tib3gnXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kc2VhcmNoSW5wdXQsICdrZXl1cCBjaGFuZ2UnLCAnb25TZWFyY2gnKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kc2VhcmNoQ2xlYXIsICdjbGljaycsICdvblNlYXJjaENsZWFyJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHRvZ2dsZUFsbEJ1dHRvbiwgJ2NsaWNrJywgJ29uVG9nZ2xlQWxsT3B0aW9ucycpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHJlbmRlciBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBkb20gZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWRkRXZlbnRzKCkge1xyXG4gICAgdGhpcy5hZGRFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgJ29uRG9jdW1lbnRDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR3cmFwcGVyLCAna2V5ZG93bicsICdvbktleURvd24nKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRjbGVhckJ1dHRvbiwgJ2NsaWNrJywgJ29uQ2xlYXJCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRkcm9wYm94Q29udGFpbmVyLCAnY2xpY2snLCAnb25Ecm9wYm94Q29udGFpbmVyQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQoXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDbG9zZUJ1dHRvbixcclxuICAgICAgJ2NsaWNrJyxcclxuICAgICAgJ29uRHJvcGJveENsb3NlQnV0dG9uQ2xpY2snXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9uc0NvbnRhaW5lciwgJ3Njcm9sbCcsICdvbk9wdGlvbnNTY3JvbGwnKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnMsICdjbGljaycsICdvbk9wdGlvbnNDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAnbW91c2VvdmVyJywgJ29uT3B0aW9uc01vdXNlT3ZlcicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAndG91Y2htb3ZlJywgJ29uT3B0aW9uc1RvdWNoTW92ZScpO1xyXG4gIH1cclxuXHJcbiAgYWRkRXZlbnQoJGVsZSwgZXZlbnRzLCBtZXRob2QpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRzID0gVXRpbHMucmVtb3ZlQXJyYXlFbXB0eShldmVudHMuc3BsaXQoJyAnKSk7XHJcblxyXG4gICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBldmVudHNLZXkgPSBgJHttZXRob2R9LSR7ZXZlbnR9YDtcclxuICAgICAgbGV0IGNhbGxiYWNrID0gdGhpcy5ldmVudHNbZXZlbnRzS2V5XTtcclxuXHJcbiAgICAgIGlmICghY2FsbGJhY2spIHtcclxuICAgICAgICBjYWxsYmFjayA9IHRoaXNbbWV0aG9kXS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50c0tleV0gPSBjYWxsYmFjaztcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgICAgJGVsZS5mb3JFYWNoKChfdGhpcykgPT4ge1xyXG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc3BhdGNoRXZlbnQoJGVsZSwgZXZlbnROYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUgPSBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgJGVsZS5mb3JFYWNoKChfdGhpcykgPT4ge1xyXG4gICAgICAgIF90aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KGV2ZW50TmFtZSwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgfSk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIG9uRG9jdW1lbnRDbGljayhlKSB7XHJcbiAgICBsZXQgJGVsZVRvS2VlcE9wZW4gPSBlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLXdyYXBwZXInKTtcclxuXHJcbiAgICBpZiAoJGVsZVRvS2VlcE9wZW4gIT09IHRoaXMuJHdyYXBwZXIpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uS2V5RG93bihlKSB7XHJcbiAgICBsZXQga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7XHJcbiAgICBsZXQgbWV0aG9kID0ga2V5RG93bk1ldGhvZE1hcHBpbmdba2V5XTtcclxuXHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgIHRoaXNbbWV0aG9kXShlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRW50ZXJQcmVzcygpIHtcclxuICAgIGlmICghdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0Rm9jdXNlZE9wdGlvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Fc2NQcmVzcygpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRG93bkFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbignbmV4dCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25VcEFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbigncHJldmlvdXMnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQnV0dG9uQ2xpY2soZSkge1xyXG4gICAgbGV0IGNoaWxkRWxlID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1idXR0b24tY2hpbGQnKTtcclxuXHJcbiAgICBpZiAoY2hpbGRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9nZ2xlRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgb25DbGVhckJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zU2Nyb2xsKCkge1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zQ2xpY2soZSkge1xyXG4gICAgdGhpcy5zZWxlY3RPcHRpb24oXHJcbiAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtb3B0aW9uOm5vdCguZGlzYWJsZWQpOm5vdCguZ3JvdXAtdGl0bGUpJylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDb250YWluZXJDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtZHJvcGJveCcpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDbG9zZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlT3ZlcihlKSB7XHJcbiAgICBsZXQgJGVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKTpub3QoLmdyb3VwLXRpdGxlKSdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCRlbGUgJiYgdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNPcHRpb24obnVsbCwgJGVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNUb3VjaE1vdmUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaChlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZShlLnRhcmdldC52YWx1ZSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaENsZWFyKCkge1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQWxsT3B0aW9ucygpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25SZXNpemUoKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNDb250YWluZXJIZWlnaHQodHJ1ZSk7XHJcbiAgfVxyXG4gIC8qKiBkb20gZXZlbnQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogYWZ0ZXIgZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWZ0ZXJSZW5kZXJXcmFwcGVyKCkge1xyXG4gICAgdGhpcy4kZWxlLnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZSk7XHJcblxyXG4gICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kZWxlLCAndnNjb21wLWVsZScpO1xyXG4gICAgdGhpcy5yZW5kZXJTZWFyY2goKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50cygpO1xyXG4gICAgdGhpcy5zZXRNZXRob2RzKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaW5pdGlhbFNlbGVjdGVkVmFsdWUpIHtcclxuICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChcclxuICAgICAgICB0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlLFxyXG4gICAgICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uICYmIHRoaXMudmlzaWJsZU9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QoXHJcbiAgICAgICAgdGhpcy52aXNpYmxlT3B0aW9uc1swXS52YWx1ZSxcclxuICAgICAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWZ0ZXJTZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHJlc2V0KSB7XHJcbiAgICBpZiAocmVzZXQpIHtcclxuICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqIGFmdGVyIGV2ZW50IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIHNldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBzZXRQcm9wcyhvcHRpb25zKSB7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zZXREZWZhdWx0UHJvcHMob3B0aW9ucyk7XHJcbiAgICB0aGlzLnNldFByb3BzRnJvbUVsZW1lbnRBdHRyKG9wdGlvbnMpO1xyXG5cclxuICAgIGxldCBjb252ZXJ0VG9Cb29sZWFuID0gVXRpbHMuY29udmVydFRvQm9vbGVhbjtcclxuXHJcbiAgICB0aGlzLiRlbGUgPSBvcHRpb25zLmVsZTtcclxuICAgIHRoaXMudmFsdWVLZXkgPSBvcHRpb25zLnZhbHVlS2V5O1xyXG4gICAgdGhpcy5sYWJlbEtleSA9IG9wdGlvbnMubGFiZWxLZXk7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uS2V5ID0gb3B0aW9ucy5kZXNjcmlwdGlvbktleTtcclxuICAgIHRoaXMuYWxpYXNLZXkgPSBvcHRpb25zLmFsaWFzS2V5O1xyXG4gICAgdGhpcy5vcHRpb25IZWlnaHRUZXh0ID0gb3B0aW9ucy5vcHRpb25IZWlnaHQ7XHJcbiAgICB0aGlzLm9wdGlvbkhlaWdodCA9IHBhcnNlRmxvYXQodGhpcy5vcHRpb25IZWlnaHRUZXh0KTtcclxuICAgIHRoaXMubXVsdGlwbGUgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubXVsdGlwbGUpO1xyXG4gICAgdGhpcy5oYXNTZWFyY2ggPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2VhcmNoKTtcclxuICAgIHRoaXMuaGlkZUNsZWFyQnV0dG9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmhpZGVDbGVhckJ1dHRvbik7XHJcbiAgICB0aGlzLmF1dG9TZWxlY3RGaXJzdE9wdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4oXHJcbiAgICAgIG9wdGlvbnMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uXHJcbiAgICApO1xyXG4gICAgdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5oYXNPcHRpb25EZXNjcmlwdGlvbik7XHJcbiAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldCA9IGNvbnZlcnRUb0Jvb2xlYW4oXHJcbiAgICAgIG9wdGlvbnMuc2lsZW50SW5pdGlhbFZhbHVlU2V0XHJcbiAgICApO1xyXG4gICAgdGhpcy5hbGxvd05ld09wdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5hbGxvd05ld09wdGlvbik7XHJcbiAgICB0aGlzLm1hcmtTZWFyY2hSZXN1bHRzID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLm1hcmtTZWFyY2hSZXN1bHRzKTtcclxuICAgIHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0ID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3RcclxuICAgICk7XHJcbiAgICB0aGlzLmRpc2FibGVTZWxlY3RBbGwgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuZGlzYWJsZVNlbGVjdEFsbCk7XHJcbiAgICB0aGlzLmtlZXBBbHdheXNPcGVuID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmtlZXBBbHdheXNPcGVuKTtcclxuICAgIHRoaXMuc2hvd0Ryb3Bib3hBc1BvcHVwID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLnNob3dEcm9wYm94QXNQb3B1cCk7XHJcbiAgICB0aGlzLm5vT3B0aW9uc1RleHQgPSBvcHRpb25zLm5vT3B0aW9uc1RleHQ7XHJcbiAgICB0aGlzLm5vU2VhcmNoUmVzdWx0c1RleHQgPSBvcHRpb25zLm5vU2VhcmNoUmVzdWx0c1RleHQ7XHJcbiAgICB0aGlzLnNlbGVjdEFsbFRleHQgPSBvcHRpb25zLnNlbGVjdEFsbFRleHQ7XHJcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gb3B0aW9ucy5wbGFjZWhvbGRlcjtcclxuICAgIHRoaXMucG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uO1xyXG4gICAgdGhpcy5kcm9wYm94V2lkdGggPSBvcHRpb25zLmRyb3Bib3hXaWR0aDtcclxuICAgIHRoaXMudG9vbHRpcEZvbnRTaXplID0gb3B0aW9ucy50b29sdGlwRm9udFNpemU7XHJcbiAgICB0aGlzLnRvb2x0aXBBbGlnbm1lbnQgPSBvcHRpb25zLnRvb2x0aXBBbGlnbm1lbnQ7XHJcbiAgICB0aGlzLnRvb2x0aXBNYXhXaWR0aCA9IG9wdGlvbnMudG9vbHRpcE1heFdpZHRoO1xyXG4gICAgdGhpcy5ub09mRGlzcGxheVZhbHVlcyA9IHBhcnNlSW50KG9wdGlvbnMubm9PZkRpc3BsYXlWYWx1ZXMpO1xyXG4gICAgdGhpcy56SW5kZXggPSBwYXJzZUludChvcHRpb25zLnpJbmRleCk7XHJcbiAgICB0aGlzLm1heFZhbHVlcyA9IHBhcnNlSW50KG9wdGlvbnMubWF4VmFsdWVzKTtcclxuICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZTtcclxuICAgIHRoaXMuYWRkaXRpb25hbENsYXNzZXMgPSBvcHRpb25zLmFkZGl0aW9uYWxDbGFzc2VzO1xyXG4gICAgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSA9IG9wdGlvbnMuc2VsZWN0ZWRWYWx1ZTtcclxuICAgIHRoaXMucG9wdXBEcm9wYm94QnJlYWtwb2ludCA9IG9wdGlvbnMucG9wdXBEcm9wYm94QnJlYWtwb2ludDtcclxuICAgIHRoaXMub25TZXJ2ZXJTZWFyY2ggPSBvcHRpb25zLm9uU2VydmVyU2VhcmNoO1xyXG4gICAgdGhpcy5zZWFyY2hQbGFjZWhvbGRlciA9IG9wdGlvbnMuc2VhcmNoUGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLml0ZW1zU2VsZWN0ZWRNZXNzYWdlID0gb3B0aW9ucy5pdGVtc1NlbGVjdGVkTWVzc2FnZTtcclxuICAgIHRoaXMuYWxsb3dOb25lT3B0aW9uID0gb3B0aW9ucy5hbGxvd05vbmVPcHRpb247XHJcbiAgICB0aGlzLm5vbmVPcHRpb25UZXh0ID0gb3B0aW9ucy5ub25lT3B0aW9uVGV4dDtcclxuXHJcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkSW5kZXhlcyA9IFtdO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB0aGlzLnRvb2x0aXBFbnRlckRlbGF5ID0gMjAwO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uRHVyYXRpb24gPSAyNTA7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gJyc7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSAnJztcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgKG9wdGlvbnMuc2VhcmNoID09PSB1bmRlZmluZWQgJiYgdGhpcy5tdWx0aXBsZSkgfHxcclxuICAgICAgdGhpcy5hbGxvd05ld09wdGlvblxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuaGFzU2VhcmNoID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tYXhWYWx1ZXMpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU2VsZWN0QWxsID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhhc1NlcnZlclNlYXJjaCA9IHR5cGVvZiB0aGlzLm9uU2VydmVyU2VhcmNoID09PSAnZnVuY3Rpb24nO1xyXG4gICAgdGhpcy5zaG93QXNQb3B1cCA9XHJcbiAgICAgIHRoaXMuc2hvd0Ryb3Bib3hBc1BvcHVwICYmXHJcbiAgICAgICF0aGlzLmtlZXBBbHdheXNPcGVuICYmXHJcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIDw9IHBhcnNlRmxvYXQodGhpcy5wb3B1cERyb3Bib3hCcmVha3BvaW50KTtcclxuICAgIHRoaXMuaGFzU2VhcmNoQ29udGFpbmVyID1cclxuICAgICAgdGhpcy5oYXNTZWFyY2ggfHwgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCk7XHJcbiAgICB0aGlzLm9wdGlvbnNDb3VudCA9IHRoaXMuZ2V0T3B0aW9uc0NvdW50KG9wdGlvbnMub3B0aW9uc0NvdW50KTtcclxuICAgIHRoaXMuaGFsZk9wdGlvbnNDb3VudCA9IE1hdGguY2VpbCh0aGlzLm9wdGlvbnNDb3VudCAvIDIpO1xyXG4gICAgdGhpcy5vcHRpb25zSGVpZ2h0ID0gdGhpcy5nZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgfVxyXG5cclxuICBzZXREZWZhdWx0UHJvcHMob3B0aW9ucykge1xyXG4gICAgbGV0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICB2YWx1ZUtleTogJ3ZhbHVlJyxcclxuICAgICAgbGFiZWxLZXk6ICdsYWJlbCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uS2V5OiAnZGVzY3JpcHRpb24nLFxyXG4gICAgICBhbGlhc0tleTogJ2FsaWFzJyxcclxuICAgICAgb3B0aW9uc0NvdW50OiA1LFxyXG4gICAgICBub09mRGlzcGxheVZhbHVlczogNTAsXHJcbiAgICAgIG9wdGlvbkhlaWdodDogJzQwcHgnLFxyXG4gICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgIGhpZGVDbGVhckJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIGF1dG9TZWxlY3RGaXJzdE9wdGlvbjogZmFsc2UsXHJcbiAgICAgIGhhc09wdGlvbkRlc2NyaXB0aW9uOiBmYWxzZSxcclxuICAgICAgc2lsZW50SW5pdGlhbFZhbHVlU2V0OiBmYWxzZSxcclxuICAgICAgZGlzYWJsZVNlbGVjdEFsbDogZmFsc2UsXHJcbiAgICAgIG5vT3B0aW9uc1RleHQ6ICdObyBvcHRpb25zIGZvdW5kJyxcclxuICAgICAgbm9TZWFyY2hSZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgZm91bmQnLFxyXG4gICAgICBzZWxlY3RBbGxUZXh0OiAnU2VsZWN0IEFsbCcsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAnU2VsZWN0JyxcclxuICAgICAgcG9zaXRpb246ICdhdXRvJyxcclxuICAgICAgekluZGV4OiAxLFxyXG4gICAgICBhbGxvd05ld09wdGlvbjogZmFsc2UsXHJcbiAgICAgIG1hcmtTZWFyY2hSZXN1bHRzOiBmYWxzZSxcclxuICAgICAgdG9vbHRpcEZvbnRTaXplOiAnMTRweCcsXHJcbiAgICAgIHRvb2x0aXBBbGlnbm1lbnQ6ICdjZW50ZXInLFxyXG4gICAgICB0b29sdGlwTWF4V2lkdGg6ICczMDBweCcsXHJcbiAgICAgIHNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdDogZmFsc2UsXHJcbiAgICAgIG5hbWU6ICcnLFxyXG4gICAgICBhZGRpdGlvbmFsQ2xhc3NlczogJycsXHJcbiAgICAgIGtlZXBBbHdheXNPcGVuOiBmYWxzZSxcclxuICAgICAgbWF4VmFsdWVzOiAwLFxyXG4gICAgICBzaG93RHJvcGJveEFzUG9wdXA6IHRydWUsXHJcbiAgICAgIHBvcHVwRHJvcGJveEJyZWFrcG9pbnQ6ICc1NzZweCcsXHJcbiAgICAgIHNlYXJjaFBsYWNlaG9sZGVyOiAnU2VhcmNoLi4uJyxcclxuICAgICAgaXRlbXNTZWxlY3RlZE1lc3NhZ2U6ICdzZWxlY3RlZCcsXHJcbiAgICAgIGFsbG93Tm9uZU9wdGlvbjogZmFsc2UsXHJcbiAgICAgIG5vbmVPcHRpb25UZXh0OiAnTm9uZScsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbnNDb3VudCA9IDQ7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbkhlaWdodCA9ICc2MHB4JztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgbGV0IG1hcHBpbmcgPSB7XHJcbiAgICAgIG11bHRpcGxlOiAnbXVsdGlwbGUnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ3BsYWNlaG9sZGVyJyxcclxuICAgICAgbmFtZTogJ25hbWUnLFxyXG4gICAgICAnZGF0YS12YWx1ZS1rZXknOiAndmFsdWVLZXknLFxyXG4gICAgICAnZGF0YS1sYWJlbC1rZXknOiAnbGFiZWxLZXknLFxyXG4gICAgICAnZGF0YS1kZXNjcmlwdGlvbi1rZXknOiAnZGVzY3JpcHRpb25LZXknLFxyXG4gICAgICAnZGF0YS1hbGlhcy1rZXknOiAnYWxpYXNLZXknLFxyXG4gICAgICAnZGF0YS1zZWFyY2gnOiAnc2VhcmNoJyxcclxuICAgICAgJ2RhdGEtaGlkZS1jbGVhci1idXR0b24nOiAnaGlkZUNsZWFyQnV0dG9uJyxcclxuICAgICAgJ2RhdGEtYXV0by1zZWxlY3QtZmlyc3Qtb3B0aW9uJzogJ2F1dG9TZWxlY3RGaXJzdE9wdGlvbicsXHJcbiAgICAgICdkYXRhLWhhcy1vcHRpb24tZGVzY3JpcHRpb24nOiAnaGFzT3B0aW9uRGVzY3JpcHRpb24nLFxyXG4gICAgICAnZGF0YS1vcHRpb25zLWNvdW50JzogJ29wdGlvbnNDb3VudCcsXHJcbiAgICAgICdkYXRhLW9wdGlvbi1oZWlnaHQnOiAnb3B0aW9uSGVpZ2h0JyxcclxuICAgICAgJ2RhdGEtcG9zaXRpb24nOiAncG9zaXRpb24nLFxyXG4gICAgICAnZGF0YS1uby1vcHRpb25zLXRleHQnOiAnbm9PcHRpb25zVGV4dCcsXHJcbiAgICAgICdkYXRhLW5vLXNlYXJjaC1yZXN1bHRzLXRleHQnOiAnbm9TZWFyY2hSZXN1bHRzVGV4dCcsXHJcbiAgICAgICdkYXRhLXNlbGVjdC1hbGwtdGV4dCc6ICdzZWxlY3RBbGxUZXh0JyxcclxuICAgICAgJ2RhdGEtc2lsZW50LWluaXRpYWwtdmFsdWUtc2V0JzogJ3NpbGVudEluaXRpYWxWYWx1ZVNldCcsXHJcbiAgICAgICdkYXRhLWRyb3Bib3gtd2lkdGgnOiAnZHJvcGJveFdpZHRoJyxcclxuICAgICAgJ2RhdGEtei1pbmRleCc6ICd6SW5kZXgnLFxyXG4gICAgICAnZGF0YS1uby1vZi1kaXNwbGF5LXZhbHVlcyc6ICdub09mRGlzcGxheVZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFsbG93LW5ldy1vcHRpb24nOiAnYWxsb3dOZXdPcHRpb24nLFxyXG4gICAgICAnZGF0YS1tYXJrLXNlYXJjaC1yZXN1bHRzJzogJ21hcmtTZWFyY2hSZXN1bHRzJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1mb250LXNpemUnOiAndG9vbHRpcEZvbnRTaXplJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGlnbm1lbnQnOiAndG9vbHRpcEFsaWdubWVudCcsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtbWF4LXdpZHRoJzogJ3Rvb2x0aXBNYXhXaWR0aCcsXHJcbiAgICAgICdkYXRhLXNob3ctc2VsZWN0ZWQtb3B0aW9ucy1maXJzdCc6ICdzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QnLFxyXG4gICAgICAnZGF0YS1kaXNhYmxlLXNlbGVjdC1hbGwnOiAnZGlzYWJsZVNlbGVjdEFsbCcsXHJcbiAgICAgICdkYXRhLWtlZXAtYWx3YXlzLW9wZW4nOiAna2VlcEFsd2F5c09wZW4nLFxyXG4gICAgICAnZGF0YS1tYXgtdmFsdWVzJzogJ21heFZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFkZGl0aW9uYWwtY2xhc3Nlcyc6ICdhZGRpdGlvbmFsQ2xhc3NlcycsXHJcbiAgICAgICdkYXRhLXNob3ctZHJvcGJveC1hcy1wb3B1cCc6ICdzaG93RHJvcGJveEFzUG9wdXAnLFxyXG4gICAgICAnZGF0YS1wb3B1cC1kcm9wYm94LWJyZWFrcG9pbnQnOiAncG9wdXBEcm9wYm94QnJlYWtwb2ludCcsXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGsgaW4gbWFwcGluZykge1xyXG4gICAgICBsZXQgdmFsdWUgPSAkZWxlLmdldEF0dHJpYnV0ZShrKTtcclxuXHJcbiAgICAgIGlmIChrID09PSAnbXVsdGlwbGUnICYmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09ICd0cnVlJykpIHtcclxuICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIG9wdGlvbnNbbWFwcGluZ1trXV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TWV0aG9kcygpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kZWxlO1xyXG4gICAgJGVsZS52aXJ0dWFsU2VsZWN0ID0gdGhpcztcclxuICAgICRlbGUudmFsdWUgPSB0aGlzLm11bHRpcGxlID8gW10gOiAnJztcclxuICAgICRlbGUucmVzZXQgPSBWaXJ0dWFsU2VsZWN0LnJlc2V0O1xyXG4gICAgJGVsZS5zZXRWYWx1ZSA9IFZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLnNldE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldE9wdGlvbnNNZXRob2Q7XHJcbiAgICAkZWxlLnNldERpc2FibGVkT3B0aW9ucyA9IFZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS50b2dnbGVTZWxlY3RBbGwgPSBWaXJ0dWFsU2VsZWN0LnRvZ2dsZVNlbGVjdEFsbDtcclxuICAgICRlbGUuaXNBbGxTZWxlY3RlZCA9IFZpcnR1YWxTZWxlY3QuaXNBbGxTZWxlY3RlZDtcclxuICAgICRlbGUuYWRkT3B0aW9uID0gVmlydHVhbFNlbGVjdC5hZGRPcHRpb25NZXRob2Q7XHJcbiAgICAkZWxlLmdldE5ld1ZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUuZ2V0RGlzcGxheVZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLm9wZW4gPSBWaXJ0dWFsU2VsZWN0Lm9wZW5NZXRob2Q7XHJcbiAgICAkZWxlLmNsb3NlID0gVmlydHVhbFNlbGVjdC5jbG9zZU1ldGhvZDtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdmFsdWUgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlID0gdmFsdWUubWFwKCh2KSA9PiB7XHJcbiAgICAgIHJldHVybiB2IHx8IHYgPT0gMCA/IHYudG9TdHJpbmcoKSA6ICcnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHZhbGlkVmFsdWVzID0gW107XHJcbiAgICBsZXQgdmFsaWRJbmRleGVzID0gW107XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQsIGlkeCkgPT4ge1xyXG4gICAgICBsZXQgaXNTZWxlY3RlZCA9IHZhbHVlLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZhbGlkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgICAgdmFsaWRJbmRleGVzLnB1c2goaWR4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHZhbGlkVmFsdWVzID0gdmFsaWRWYWx1ZXNbMF07XHJcbiAgICAgIHZhbGlkSW5kZXhlcyA9IHZhbGlkSW5kZXhlc1swXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJlZm9yZVZhbHVlU2V0KCk7XHJcbiAgICB0aGlzLnNldFZhbHVlKHZhbGlkVmFsdWVzLCB2YWxpZEluZGV4ZXMsICFzaWxlbnRDaGFuZ2UpO1xyXG4gICAgdGhpcy5hZnRlclZhbHVlU2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIGtlZXBWYWx1ZSkge1xyXG4gICAgbGV0IG5ld29wdGlvbiA9IG9wdGlvbnMgIT0gdGhpcy5vcHRpb25zO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgdGhpcy5hZnRlclNldE9wdGlvbnMoa2VlcFZhbHVlLCBuZXdvcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKGRpc2FibGVkT3B0aW9ucykge1xyXG4gICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMoZGlzYWJsZWRPcHRpb25zLCB0cnVlKTtcclxuICAgIHRoaXMuc2V0VmFsdWVNZXRob2QobnVsbCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZE9wdGlvbnMoZGlzYWJsZWRPcHRpb25zID0gW10sIHNldE9wdGlvbnNQcm9wID0gZmFsc2UpIHtcclxuICAgIGRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucy5tYXAoKGQpID0+IGQudG9TdHJpbmcoKSk7XHJcbiAgICB0aGlzLmRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucztcclxuXHJcbiAgICBpZiAoc2V0T3B0aW9uc1Byb3AgJiYgZGlzYWJsZWRPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICAgIGQuaXNEaXNhYmxlZCA9IGRpc2FibGVkT3B0aW9ucy5pbmRleE9mKGQudmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgb3B0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcmVwYXJlZE9wdGlvbnMgPSBbXTtcclxuICAgIGxldCBkaXNhYmxlZE9wdGlvbnMgPSB0aGlzLmRpc2FibGVkT3B0aW9ucztcclxuICAgIGxldCBoYXNEaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IHZhbHVlS2V5ID0gdGhpcy52YWx1ZUtleTtcclxuICAgIGxldCBsYWJlbEtleSA9IHRoaXMubGFiZWxLZXk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb25LZXkgPSB0aGlzLmRlc2NyaXB0aW9uS2V5O1xyXG4gICAgbGV0IGFsaWFzS2V5ID0gdGhpcy5hbGlhc0tleTtcclxuICAgIGxldCBoYXNPcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb247XHJcbiAgICBsZXQgZ2V0U3RyaW5nID0gVXRpbHMuZ2V0U3RyaW5nO1xyXG4gICAgbGV0IGdldEFsaWFzID0gdGhpcy5nZXRBbGlhcztcclxuICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICBsZXQgaGFzT3B0aW9uR3JvdXAgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgcHJlcGFyZU9wdGlvbiA9IChkKSA9PiB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IGdldFN0cmluZyhkW3ZhbHVlS2V5XSk7XHJcbiAgICAgIGxldCBjaGlsZE9wdGlvbnMgPSBkLm9wdGlvbnM7XHJcbiAgICAgIGxldCBpc0dyb3VwVGl0bGUgPSBjaGlsZE9wdGlvbnMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIGxldCBvcHRpb24gPSB7XHJcbiAgICAgICAgaW5kZXgsXHJcbiAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgbGFiZWw6IGdldFN0cmluZyhkW2xhYmVsS2V5XSksXHJcbiAgICAgICAgYWxpYXM6IGdldEFsaWFzKGRbYWxpYXNLZXldKSxcclxuICAgICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgaXNHcm91cFRpdGxlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKGhhc0Rpc2FibGVkT3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbi5pc0Rpc2FibGVkID0gZGlzYWJsZWRPcHRpb25zLmluZGV4T2YodmFsdWUpICE9PSAtMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIG9wdGlvbi5pc0dyb3VwT3B0aW9uID0gdHJ1ZTtcclxuICAgICAgICBvcHRpb24uZ3JvdXBJbmRleCA9IGQuZ3JvdXBJbmRleDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uLmRlc2NyaXB0aW9uID0gZ2V0U3RyaW5nKGRbZGVzY3JpcHRpb25LZXldKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHJlcGFyZWRPcHRpb25zLnB1c2gob3B0aW9uKTtcclxuICAgICAgaW5kZXgrKztcclxuXHJcbiAgICAgIGlmIChpc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBsZXQgZ3JvdXBJbmRleCA9IG9wdGlvbi5pbmRleDtcclxuICAgICAgICBoYXNPcHRpb25Hcm91cCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNoaWxkT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgICAgICBkLmlzR3JvdXBPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgZC5ncm91cEluZGV4ID0gZ3JvdXBJbmRleDtcclxuXHJcbiAgICAgICAgICBwcmVwYXJlT3B0aW9uKGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEFkZCBub25lIG9wdGlvbiBvbmx5IHdoZW4gaW4gbGlzdCBtb2RlIChhbHdheXMgb3BlbiBhbmQgb25seSlcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSAmJiB0aGlzLmFsbG93Tm9uZU9wdGlvbikge1xyXG4gICAgICBvcHRpb25zLnVuc2hpZnQoe1xyXG4gICAgICAgIHZhbHVlOiBub25lT3B0aW9uVmFsdWUsXHJcbiAgICAgICAgbGFiZWw6IHRoaXMubm9uZU9wdGlvblRleHQsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaChwcmVwYXJlT3B0aW9uKTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMgPSBwcmVwYXJlZE9wdGlvbnM7XHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgPSBwcmVwYXJlZE9wdGlvbnMubGVuZ3RoO1xyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXggPSB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMTtcclxuICAgIHRoaXMubmV3VmFsdWVzID0gW107XHJcbiAgICB0aGlzLmhhc09wdGlvbkdyb3VwID0gaGFzT3B0aW9uR3JvdXA7XHJcbiAgICB0aGlzLnNldFNvcnRlZE9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldFNlcnZlck9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgdGhpcy5zZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIHRydWUpO1xyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3NlcnZlci1zZWFyY2hpbmcnKTtcclxuICB9XHJcblxyXG4gIHNldFNvcnRlZE9wdGlvbnMoKSB7XHJcbiAgICBsZXQgc29ydGVkT3B0aW9ucyA9IFsuLi50aGlzLm9wdGlvbnNdO1xyXG5cclxuICAgIGlmICh0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCAmJiB0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICAgIHNvcnRlZE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zR3JvdXAoc29ydGVkT3B0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc29ydGVkT3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnMoc29ydGVkT3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNvcnRlZE9wdGlvbnMgPSBzb3J0ZWRPcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgc2V0VmlzaWJsZU9wdGlvbnMoKSB7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSBbLi4udGhpcy5zb3J0ZWRPcHRpb25zXTtcclxuICAgIGxldCBtYXhPcHRpb25zVG9TaG93ID0gdGhpcy5vcHRpb25zQ291bnQgKiAyO1xyXG4gICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmdldFZpc2libGVTdGFydEluZGV4KCk7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuICAgIGxldCBlbmRJbmRleCA9IHN0YXJ0SW5kZXggKyBtYXhPcHRpb25zVG9TaG93IC0gMTtcclxuICAgIGxldCBpID0gMDtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIG5ld09wdGlvbi52aXNpYmxlSW5kZXggPSBpO1xyXG4gICAgICBpKys7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMgPSB2aXNpYmxlT3B0aW9ucy5maWx0ZXIoKGQpID0+IHtcclxuICAgICAgbGV0IGluVmlldyA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKGQuaXNWaXNpYmxlICYmICFkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIGluVmlldyA9IGkgPj0gc3RhcnRJbmRleCAmJiBpIDw9IGVuZEluZGV4O1xyXG4gICAgICAgIGQudmlzaWJsZUluZGV4ID0gaTtcclxuICAgICAgICBpKys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBpblZpZXc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIHZpc2libGVPcHRpb25zID0gW25ld09wdGlvbiwgLi4udmlzaWJsZU9wdGlvbnNdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnMgPSB2aXNpYmxlT3B0aW9ucztcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc1Bvc2l0aW9uKHN0YXJ0SW5kZXgpIHtcclxuICAgIGlmIChzdGFydEluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgc3RhcnRJbmRleCA9IHRoaXMuZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdG9wID0gc3RhcnRJbmRleCAqIHRoaXMub3B0aW9uSGVpZ2h0O1xyXG4gICAgdGhpcy4kb3B0aW9ucy5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwgJHt0b3B9cHgsIDApYDtcclxuICAgIERvbVV0aWxzLnNldERhdGEodGhpcy4kb3B0aW9ucywgJ3RvcCcsIHRvcCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zVG9vbHRpcCgpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBoYXNPcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb247XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgJG9wdGlvbkVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLnZzY29tcC1vcHRpb25bZGF0YS1pbmRleD1cIiR7ZC5pbmRleH1cIl1gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBEb21VdGlscy5zZXREYXRhKFxyXG4gICAgICAgICRvcHRpb25FbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24tdGV4dCcpLFxyXG4gICAgICAgICd0b29sdGlwJyxcclxuICAgICAgICBkLmxhYmVsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICBEb21VdGlscy5zZXREYXRhKFxyXG4gICAgICAgICAgJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvbicpLFxyXG4gICAgICAgICAgJ3Rvb2x0aXAnLFxyXG4gICAgICAgICAgZC5kZXNjcmlwdGlvblxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWUodmFsdWUsIGluZGV4LCB0cmlnZ2VyRXZlbnQpIHtcclxuICAgIC8vIFZhbHVlXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFsuLi52YWx1ZV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW3ZhbHVlXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3VmFsdWUgPSB0aGlzLm11bHRpcGxlXHJcbiAgICAgID8gdGhpcy5zZWxlY3RlZFZhbHVlc1xyXG4gICAgICA6IHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF0gfHwgJyc7XHJcblxyXG4gICAgdGhpcy4kZWxlLnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dC52YWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuICAgIC8vIEluZGV4XHJcbiAgICBpZiAoIWluZGV4KSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5kZXgpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gWy4uLmluZGV4XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3SW5kZXggPSB0aGlzLm11bHRpcGxlXHJcbiAgICAgID8gdGhpcy5zZWxlY3RlZEluZGV4ZXNcclxuICAgICAgOiB0aGlzLnNlbGVjdGVkSW5kZXhlc1swXSB8fCAnJztcclxuXHJcbiAgICB0aGlzLiRlbGUuaW5kZXggPSBuZXdJbmRleDtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0LmluZGV4ID0gbmV3SW5kZXg7XHJcblxyXG4gICAgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkID1cclxuICAgICAgdGhpcy5tYXhWYWx1ZXMgJiYgdGhpcy5tYXhWYWx1ZXMgPD0gdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGhcclxuICAgICAgICA/IHRydWVcclxuICAgICAgICA6IGZhbHNlO1xyXG4gICAgdGhpcy5zZXRWYWx1ZVRleHQoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZFZhbHVlcyAmJiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpIHtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy12YWx1ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLXZhbHVlJyxcclxuICAgICAgICBVdGlscy5pc05vdEVtcHR5KHRoaXMuc2VsZWN0ZWRWYWx1ZXMpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICdtYXgtdmFsdWUtc2VsZWN0ZWQnLFxyXG4gICAgICB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWRcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRyaWdnZXJFdmVudCkge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2hhbmdlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZVRleHQoKSB7XHJcbiAgICBsZXQgdmFsdWVUZXh0ID0gW107XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkTGVuZ3RoID0gc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoO1xyXG4gICAgbGV0IG5vT2ZEaXNwbGF5VmFsdWVzID0gdGhpcy5ub09mRGlzcGxheVZhbHVlcztcclxuICAgIGxldCBtYXhpbXVtVmFsdWVzVG9TaG93ID0gNTA7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXNDb3VudCA9IDA7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAvL3RoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgQWxsICgke3NlbGVjdGVkTGVuZ3RofSlgO1xyXG4gICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7c2VsZWN0ZWRMZW5ndGh9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPiBtYXhpbXVtVmFsdWVzVG9TaG93KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZSA9IGQudmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICAgIGxldCBsYWJlbCA9IGQubGFiZWw7XHJcbiAgICAgICAgICB2YWx1ZVRleHQucHVzaChsYWJlbCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50Kys7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPD0gbm9PZkRpc3BsYXlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZ1wiPiR7bGFiZWx9PC9zcGFuPmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1vcmVTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZExlbmd0aCAtIG5vT2ZEaXNwbGF5VmFsdWVzO1xyXG5cclxuICAgICAgaWYgKG1vcmVTZWxlY3RlZE9wdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goXHJcbiAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdmFsdWUtdGFnIG1vcmUtdmFsdWUtY291bnRcIj4rICR7bW9yZVNlbGVjdGVkT3B0aW9uc30gbW9yZS4uLjwvc3Bhbj5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYWdncmVnYXRlZFZhbHVlVGV4dCA9IHZhbHVlVGV4dC5qb2luKCcsICcpO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPT09ICcnIHx8XHJcbiAgICAgICAgKHNlbGVjdGVkVmFsdWVzICYmIHNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBhZ2dyZWdhdGVkVmFsdWVUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgbGV0IG1heFZhbHVlcyA9IHRoaXMubWF4VmFsdWVzO1xyXG5cclxuICAgICAgICAgIGlmIChEb21VdGlscy5oYXNFbGxpcHNpcyh0aGlzLiR2YWx1ZVRleHQpIHx8IG1heFZhbHVlcykge1xyXG4gICAgICAgICAgICBsZXQgY291bnRUZXh0ID0gYCR7c2VsZWN0ZWRMZW5ndGh9YDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICBjb3VudFRleHQgKz0gYCAvICR7bWF4VmFsdWVzfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKiByZXBsYWNlIGNvbW1hIGRlbGltaXR0ZWQgbGlzdCBvZiBzZWxlY3Rpb25zIHdpdGggc2hvcnRlciB0ZXh0IGluZGljYXRpbmcgc2VsZWN0aW9uIGNvdW50ICovXHJcbiAgICAgICAgICAgIC8vIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9IG9wdGlvbiR7XHJcbiAgICAgICAgICAgIC8vICAgc2VsZWN0ZWRMZW5ndGggPT09IDEgPyAnJyA6ICdzJ1xyXG4gICAgICAgICAgICAvLyB9IHNlbGVjdGVkYDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLyoqIHJlbW92aW5nIHRvb2x0aXAgaWYgZnVsbCB2YWx1ZSB0ZXh0IGlzIHZpc2libGUgKi9cclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiR2YWx1ZVRleHQsICd0b29sdGlwJywgdmFsdWVUb29sdGlwLmpvaW4oJywgJykpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VhcmNoVmFsdWUodmFsdWUsIHNraXBJbnB1dFNldCwgZm9yY2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsICYmICFmb3JjZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFza2lwSW5wdXRTZXQpIHtcclxuICAgICAgdGhpcy4kc2VhcmNoSW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VhcmNoVmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBzZWFyY2hWYWx1ZTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9IHZhbHVlO1xyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG5cclxuICAgIGlmICh0aGlzLmhhc1NlcnZlclNlYXJjaCkge1xyXG4gICAgICB0aGlzLnNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnNDb3VudCA9IDA7XHJcbiAgICBsZXQgaGFzRXhhY3RPcHRpb24gPSBmYWxzZTtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZztcclxuICAgIGxldCBpc09wdGlvblZpc2libGUgPSB0aGlzLmlzT3B0aW9uVmlzaWJsZTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcoXHJcbiAgICAgICAgc2VhcmNoVmFsdWVcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCByZXN1bHQgPSBpc09wdGlvblZpc2libGUoXHJcbiAgICAgICAgZCxcclxuICAgICAgICBzZWFyY2hWYWx1ZSxcclxuICAgICAgICBoYXNFeGFjdE9wdGlvbixcclxuICAgICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZ1xyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKHJlc3VsdC5pc1Zpc2libGUpIHtcclxuICAgICAgICB2aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICBoYXNFeGFjdE9wdGlvbiA9IHJlc3VsdC5oYXNFeGFjdE9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgaWYgKHNlYXJjaFZhbHVlICYmICFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICAgIHRoaXMuc2V0TmV3T3B0aW9uKCk7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTmV3T3B0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgPSB2aXNpYmxlT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uUHJvcChpbmRleCwga2V5LCB2YWx1ZSkge1xyXG4gICAgaWYgKCF0aGlzLm9wdGlvbnNbaW5kZXhdKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnNbaW5kZXhdW2tleV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNIZWlnaHQoKSB7XHJcbiAgICB0aGlzLiRvcHRpb25zTGlzdC5zdHlsZS5oZWlnaHQgPVxyXG4gICAgICB0aGlzLm9wdGlvbkhlaWdodCAqIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCArICdweCc7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHJlc2V0KSB7XHJcbiAgICBsZXQgb3B0aW9uc0hlaWdodDtcclxuXHJcbiAgICBpZiAocmVzZXQpIHtcclxuICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnNDb3VudCA9IHRoaXMuZ2V0T3B0aW9uc0NvdW50KCk7XHJcbiAgICAgICAgb3B0aW9uc0hlaWdodCA9IHRoaXMuZ2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgICAgIHRoaXMub3B0aW9uc0hlaWdodCA9IG9wdGlvbnNIZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9wdGlvbnNIZWlnaHQgPSB0aGlzLm9wdGlvbnNIZWlnaHQ7XHJcblxyXG4gICAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG5vT3B0aW9ucywgJ2hlaWdodCcsIG9wdGlvbnNIZWlnaHQpO1xyXG4gICAgICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG5vU2VhcmNoUmVzdWx0cywgJ2hlaWdodCcsIG9wdGlvbnNIZWlnaHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMuc2V0U3R5bGUodGhpcy4kb3B0aW9uc0NvbnRhaW5lciwgJ21heC1oZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuXHJcbiAgICB0aGlzLmFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCk7XHJcbiAgfVxyXG5cclxuICBzZXREcm9wYm94UG9zaXRpb24oKSB7XHJcbiAgICBpZiAodGhpcy5wb3NpdGlvbiAhPT0gJ2F1dG8nKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbW9yZVZpc2libGVTaWRlcyA9IERvbVV0aWxzLmdldE1vcmVWaXNpYmxlU2lkZXModGhpcy4kd3JhcHBlcik7XHJcbiAgICBsZXQgc2hvd09uTGVmdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBjaGVjayB0aGF0IGlzIGRyb3Bib3ggaGlkZGVuIG9uIHJpZ2h0IGVkZ2UgLSBvbmx5IGlmIGN1c3RvbSB3aWR0aCBnaXZlbiAqL1xyXG4gICAgaWYgKHRoaXMuZHJvcGJveFdpZHRoKSB7XHJcbiAgICAgIGxldCBidXR0b25Db29yZHMgPSB0aGlzLiR0b2dnbGVCdXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGxldCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgIGxldCBkcm9wYm94V2lkdGggPSBwYXJzZUZsb2F0KHRoaXMuZHJvcGJveFdpZHRoKTtcclxuICAgICAgbGV0IGhpZGRlbk9uUmlnaHQgPSBidXR0b25Db29yZHMubGVmdCArIGRyb3Bib3hXaWR0aCA+IHZpZXdwb3J0V2lkdGg7XHJcbiAgICAgIGxldCBoaWRkZW5PbkxlZnQgPSBkcm9wYm94V2lkdGggPiBidXR0b25Db29yZHMucmlnaHQ7XHJcblxyXG4gICAgICBpZiAoaGlkZGVuT25SaWdodCAmJiAhaGlkZGVuT25MZWZ0KSB7XHJcbiAgICAgICAgc2hvd09uTGVmdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgIG1vcmVWaXNpYmxlU2lkZXMudmVydGljYWwgPT09ICd0b3AnXHJcbiAgICApO1xyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICB9XHJcblxyXG4gIHNldE5ld09wdGlvbigpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbC50cmltKCk7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnbGFiZWwnLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogdmFsdWUsXHJcbiAgICAgICAgaXNDdXJyZW50TmV3OiB0cnVlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRPcHRpb24oZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3RlZFByb3AoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGdldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBnZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2libGVPcHRpb25zIHx8IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIC8gdGhpcy5vcHRpb25IZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKSB7XHJcbiAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IC0gdGhpcy5oYWxmT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4IDwgMCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhcnRJbmRleDtcclxuICB9XHJcblxyXG4gIGdldFRvb2x0aXBBdHRyVGV4dCh0ZXh0LCBlbGxpcHNpc09ubHkgPSBmYWxzZSwgYWxsb3dIdG1sID0gZmFsc2UpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAnZGF0YS10b29sdGlwJzogdGV4dCB8fCAnJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbnRlci1kZWxheSc6IHRoaXMudG9vbHRpcEVudGVyRGVsYXksXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6IHRoaXMudG9vbHRpcEZvbnRTaXplLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6IHRoaXMudG9vbHRpcEFsaWdubWVudCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiB0aGlzLnRvb2x0aXBNYXhXaWR0aCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbGxpcHNpcy1vbmx5JzogZWxsaXBzaXNPbmx5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsbG93LWh0bWwnOiBhbGxvd0h0bWwsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBEb21VdGlscy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0ge1xyXG4gICAgICBpbmRleDogZGF0YS5pbmRleCxcclxuICAgICAgdmFsdWU6IGdldFN0cmluZyhkYXRhLnZhbHVlKSxcclxuICAgICAgbGFiZWw6IGdldFN0cmluZyhkYXRhLmxhYmVsKSxcclxuICAgICAgZGVzY3JpcHRpb246IGdldFN0cmluZyhkYXRhLmRlc2NyaXB0aW9uKSxcclxuICAgICAgYWxpYXM6IHRoaXMuZ2V0QWxpYXMoZGF0YS5hbGlhcyksXHJcbiAgICAgIGlzQ3VycmVudE5ldzogZGF0YS5pc0N1cnJlbnROZXcgfHwgZmFsc2UsXHJcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ld09wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE5ld09wdGlvbigpIHtcclxuICAgIGxldCBsYXN0T3B0aW9uID0gdGhpcy5vcHRpb25zW3RoaXMubGFzdE9wdGlvbkluZGV4XTtcclxuXHJcbiAgICBpZiAoIWxhc3RPcHRpb24gfHwgIWxhc3RPcHRpb24uaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGFzdE9wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbkluZGV4KHZhbHVlKSB7XHJcbiAgICBsZXQgaW5kZXg7XHJcblxyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgaWYgKGQudmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgIGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIGdldE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld1ZhbHVlcyA9IHRoaXMubmV3VmFsdWVzO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMuZmlsdGVyKChkKSA9PiBuZXdWYWx1ZXMuaW5kZXhPZihkKSAhPT0gLTEpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gcmVzdWx0IDogcmVzdWx0WzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxpYXMoYWxpYXMpIHtcclxuICAgIGlmIChhbGlhcykge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGlhcykpIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLmpvaW4oJywnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhbGlhcyA9IGFsaWFzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGlhcyA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhbGlhcztcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlWYWx1ZSgpIHtcclxuICAgIGxldCBkaXNwbGF5VmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGRpc3BsYXlWYWx1ZXMucHVzaChkLmxhYmVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gZGlzcGxheVZhbHVlcyA6IGRpc3BsYXlWYWx1ZXNbMF0gfHwgJyc7XHJcbiAgfVxyXG5cclxuICBnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0W2QuaW5kZXhdID0gZC5vcHRpb25zLnNvbWUoXHJcbiAgICAgICAgKGUpID0+IGlzT3B0aW9uVmlzaWJsZShlLCBzZWFyY2hWYWx1ZSkuaXNWaXNpYmxlXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uc0NvdW50KGNvdW50KSB7XHJcbiAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID1cclxuICAgICAgICAod2luZG93LmlubmVySGVpZ2h0ICogODApIC8gMTAwIC0gZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgIGF2YWlsYWJsZUhlaWdodCAtPSBzZWFyY2hIZWlnaHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvdW50ID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyB0aGlzLm9wdGlvbkhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudCA9IHBhcnNlSW50KGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc0NvdW50ICogdGhpcy5vcHRpb25IZWlnaHQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2libGluZygkZWxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBwcm9wTmFtZSA9XHJcbiAgICAgIGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ25leHRFbGVtZW50U2libGluZycgOiAncHJldmlvdXNFbGVtZW50U2libGluZyc7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoJGVsZSkge1xyXG4gICAgICAgICRlbGUgPSAkZWxlW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoXHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdncm91cC10aXRsZScpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiAkZWxlO1xyXG4gIH1cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgb3BlbkRyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIHRoaXMuc2V0RHJvcGJveFBvc2l0aW9uKCk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQnKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ29wZW5lZCcpO1xyXG5cclxuICAgICAgaWYgKCFpc1NpbGVudCkge1xyXG4gICAgICAgIHRoaXMubW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCk7XHJcbiAgICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2ZvY3VzZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGJvZHksICd2c2NvbXAtcG9wdXAtYWN0aXZlJyk7XHJcbiAgICAgICAgICB0aGlzLmlzUG9wdXBBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEcm9wYm94KGlzU2lsZW50KSB7XHJcbiAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHJhbnNpdGlvbkR1cmF0aW9uID0gaXNTaWxlbnQgPyAwIDogdGhpcy50cmFuc2l0aW9uRHVyYXRpb247XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2xvc2VkJyk7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwQWN0aXZlKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2Nsb3NlZCcpO1xyXG4gICAgfSwgdHJhbnNpdGlvbkR1cmF0aW9uKTtcclxuICB9XHJcblxyXG4gIG1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCgpIHtcclxuICAgIGlmICghdGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0U29ydGVkT3B0aW9ucygpO1xyXG5cclxuICAgIGlmICghdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgfHwgIXRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZURyb3Bib3goKSB7XHJcbiAgICBpZiAodGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc09wZW5lZCgpIHtcclxuICAgIHJldHVybiBEb21VdGlscy5oYXNDbGFzcyh0aGlzLiR3cmFwcGVyLCAnb3BlbmVkJyk7XHJcbiAgfVxyXG5cclxuICBmb2N1c1NlYXJjaElucHV0KCkge1xyXG4gICAgbGV0ICRlbGUgPSB0aGlzLiRzZWFyY2hJbnB1dDtcclxuXHJcbiAgICBpZiAoJGVsZSkge1xyXG4gICAgICAkZWxlLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb2N1c09wdGlvbihkaXJlY3Rpb24sIGVsZSkge1xyXG4gICAgbGV0ICRmb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICk7XHJcbiAgICBsZXQgJG5ld0ZvY3VzZWRFbGU7XHJcblxyXG4gICAgaWYgKGVsZSkge1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IGVsZTtcclxuICAgIH0gZWxzZSBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIC8qIGlmIG5vIGVsZW1lbnQgb24gZm9jdXMgY2hvb3NlIGZpcnN0IHZpc2libGUgb25lICovXHJcbiAgICAgIGxldCBmaXJzdFZpc2libGVPcHRpb25JbmRleCA9IHRoaXMuZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKTtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYC52c2NvbXAtb3B0aW9uW2RhdGEtdmlzaWJsZS1pbmRleD1cIiR7Zmlyc3RWaXNpYmxlT3B0aW9uSW5kZXh9XCJdYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRuZXdGb2N1c2VkRWxlLCAnZGlzYWJsZWQnKSB8fFxyXG4gICAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRuZXdGb2N1c2VkRWxlLCAnZ3JvdXAtdGl0bGUnKVxyXG4gICAgICApIHtcclxuICAgICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuZ2V0U2libGluZygkbmV3Rm9jdXNlZEVsZSwgJ25leHQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLmdldFNpYmxpbmcoJGZvY3VzZWRFbGUsIGRpcmVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRuZXdGb2N1c2VkRWxlICYmICRuZXdGb2N1c2VkRWxlICE9PSAkZm9jdXNlZEVsZSkge1xyXG4gICAgICBpZiAoJGZvY3VzZWRFbGUpIHtcclxuICAgICAgICBEb21VdGlscy5yZW1vdmVDbGFzcygkZm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICAgIHRoaXMudG9nZ2xlRm9jdXNlZFByb3AoRG9tVXRpbHMuZ2V0RGF0YSgkbmV3Rm9jdXNlZEVsZSwgJ2luZGV4JyksIHRydWUpO1xyXG4gICAgICB0aGlzLm1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3KCRuZXdGb2N1c2VkRWxlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3KCRmb2N1c2VkRWxlKSB7XHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgICRmb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICcudnNjb21wLW9wdGlvbi5mb2N1c2VkJ1xyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdTY3JvbGxUb3A7XHJcbiAgICBsZXQgY29udGFpbmVyUmVjdCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgb3B0aW9uUmVjdCA9ICRmb2N1c2VkRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGNvbnRhaW5lclRvcCA9IGNvbnRhaW5lclJlY3QudG9wO1xyXG4gICAgbGV0IGNvbnRhaW5lckJvdHRvbSA9IGNvbnRhaW5lclJlY3QuYm90dG9tO1xyXG4gICAgbGV0IGNvbnRhaW5lckhlaWdodCA9IGNvbnRhaW5lclJlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IG9wdGlvblRvcCA9IG9wdGlvblJlY3QudG9wO1xyXG4gICAgbGV0IG9wdGlvbkJvdHRvbSA9IG9wdGlvblJlY3QuYm90dG9tO1xyXG4gICAgbGV0IG9wdGlvbkhlaWdodCA9IG9wdGlvblJlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IG9wdGlvbk9mZnNldFRvcCA9ICRmb2N1c2VkRWxlLm9mZnNldFRvcDtcclxuICAgIGxldCBvcHRpb25zVG9wID0gRG9tVXRpbHMuZ2V0RGF0YSh0aGlzLiRvcHRpb25zLCAndG9wJywgJ251bWJlcicpO1xyXG5cclxuICAgIC8qIGlmIG9wdGlvbiBoaWRkZW4gb24gdG9wICovXHJcbiAgICBpZiAoY29udGFpbmVyVG9wID4gb3B0aW9uVG9wKSB7XHJcbiAgICAgIG5ld1Njcm9sbFRvcCA9IG9wdGlvbk9mZnNldFRvcCArIG9wdGlvbnNUb3A7XHJcbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5lckJvdHRvbSA8IG9wdGlvbkJvdHRvbSkge1xyXG4gICAgICAvKiBpZiBvcHRpb24gaGlkZGVuIG9uIGJvdHRvbSAqL1xyXG4gICAgICBuZXdTY3JvbGxUb3AgPVxyXG4gICAgICAgIG9wdGlvbk9mZnNldFRvcCAtIGNvbnRhaW5lckhlaWdodCArIG9wdGlvbkhlaWdodCArIG9wdGlvbnNUb3A7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld1Njcm9sbFRvcCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gbmV3U2Nyb2xsVG9wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT3B0aW9uRm9jdXMoKSB7XHJcbiAgICBsZXQgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbi5mb2N1c2VkJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcygkZm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgIHRoaXMudG9nZ2xlRm9jdXNlZFByb3AobnVsbCk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RPcHRpb24oJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNBZGRpbmcgPSAhRG9tVXRpbHMuaGFzQ2xhc3MoJGVsZSwgJ3NlbGVjdGVkJyk7XHJcblxyXG4gICAgaWYgKGlzQWRkaW5nKSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMuaXNNYXhWYWx1ZXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLyoqIG9uIHNlbGVjdGluZyBzYW1lIHZhbHVlIGluIHNpbmdsZSBzZWxlY3QgKi9cclxuICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXhlcyA9IHRoaXMuc2VsZWN0ZWRJbmRleGVzO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWUgPSBEb21VdGlscy5nZXREYXRhKCRlbGUsICd2YWx1ZScpO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXggPSBEb21VdGlscy5nZXREYXRhKCRlbGUsICdpbmRleCcpO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRQcm9wKHNlbGVjdGVkSW5kZXgsIGlzQWRkaW5nKTtcclxuXHJcbiAgICBpZiAoaXNBZGRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKHNlbGVjdGVkVmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3AoXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0T3B0aW9uSW5kZXgoc2VsZWN0ZWRWYWx1ZXNbMF0pLFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzID0gW3NlbGVjdGVkVmFsdWVdO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcyA9IFtzZWxlY3RlZEluZGV4XTtcclxuICAgICAgICBsZXQgJHByZXZTZWxlY3RlZE9wdGlvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgJy52c2NvbXAtb3B0aW9uLnNlbGVjdGVkJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICgkcHJldlNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkcHJldlNlbGVjdGVkT3B0aW9uLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoJGVsZSwgJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZEluZGV4ZXMsIHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnY3VycmVudC1uZXcnKSkge1xyXG4gICAgICB0aGlzLmJlZm9yZVNlbGVjdE5ld1ZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuXHJcbiAgICAvLyBJbiAnTGlzdCcgb25seVxyXG4gICAgLy8gaW1tZWRpYXRlbHkgbW92ZSBpdGVtIHRvIHRvcCBpZiBvcHRpb25zIGlzIG9uLlxyXG4gICAgLy8gRHJvcGRvd24gbW9kZSB3aWxsIHdhaXQgdW50aWwgdGhlIG5leHQgcmVvcGVuIHRvIGRvIHNvLlxyXG4gICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4gJiYgdGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QpIHtcclxuICAgICAgY29uc3QgbGFzdFNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG4gICAgICB0aGlzLm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCgpO1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IGxhc3RTY3JvbGxUb3A7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWxlY3RGb2N1c2VkT3B0aW9uKCkge1xyXG4gICAgdGhpcy5zZWxlY3RPcHRpb24oXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uZm9jdXNlZCcpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQWxsT3B0aW9ucyhpc1NlbGVjdGVkKSB7XHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUgfHwgdGhpcy5kaXNhYmxlU2VsZWN0QWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGlzU2VsZWN0ZWQgIT09ICdib29sZWFuJykge1xyXG4gICAgICBpc1NlbGVjdGVkID0gIURvbVV0aWxzLmhhc0NsYXNzKHRoaXMuJHRvZ2dsZUFsbENoZWNrYm94LCAnY2hlY2tlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXhlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkLCBpZHgpID0+IHtcclxuICAgICAgaWYgKGQuaXNEaXNhYmxlZCB8fCBkLmlzQ3VycmVudE5ldyB8fCBkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZC5pc1NlbGVjdGVkID0gaXNTZWxlY3RlZDtcclxuXHJcbiAgICAgIGlmIChpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMucHVzaChkLnZhbHVlKTtcclxuICAgICAgICBzZWxlY3RlZEluZGV4ZXMucHVzaChpZHgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhpc1NlbGVjdGVkKTtcclxuICAgIHRoaXMuc2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZXMsIHNlbGVjdGVkSW5kZXhlcywgdHJ1ZSk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhpc0FsbFNlbGVjdGVkKSB7XHJcbiAgICBpZiAodHlwZW9mIGlzQWxsU2VsZWN0ZWQgIT09ICdib29sZWFuJykge1xyXG4gICAgICBpc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIGlzQWxsU2VsZWN0ZWQgPSAhdGhpcy5vcHRpb25zLnNvbWUoKGQpID0+IHtcclxuICAgICAgICAgIHJldHVybiAhZC5pc1NlbGVjdGVkICYmICFkLmlzRGlzYWJsZWQgJiYgIWQuaXNHcm91cFRpdGxlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3gsICdjaGVja2VkJywgaXNBbGxTZWxlY3RlZCk7XHJcbiAgICB0aGlzLmlzQWxsU2VsZWN0ZWQgPSBpc0FsbFNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRm9jdXNlZFByb3AoaW5kZXgsIGlzRm9jdXNlZCA9IGZhbHNlKSB7XHJcbiAgICBpZiAodGhpcy5mb2N1c2VkT3B0aW9uSW5kZXgpIHtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4LCAnaXNGb2N1c2VkJywgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChpbmRleCwgJ2lzRm9jdXNlZCcsIGlzRm9jdXNlZCk7XHJcbiAgICB0aGlzLmZvY3VzZWRPcHRpb25JbmRleCA9IGluZGV4O1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU2VsZWN0ZWRQcm9wKGluZGV4LCBpc1NlbGVjdGVkID0gZmFsc2UpIHtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChpbmRleCwgJ2lzU2VsZWN0ZWQnLCBpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvVG9wKCkge1xyXG4gICAgbGV0IGlzQ2xvc2VkID0gIXRoaXMuaXNPcGVuZWQoKTtcclxuXHJcbiAgICBpZiAoaXNDbG9zZWQpIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2Nyb2xsVG9wID0gdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3A7XHJcblxyXG4gICAgaWYgKHNjcm9sbFRvcCA+IDApIHtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc0Nsb3NlZCkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCh0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgZC5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmJlZm9yZVZhbHVlU2V0KHRydWUpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShudWxsLCBudWxsLCB0cnVlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgYmVmb3JlVmFsdWVTZXQoaXNSZXNldCkge1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNSZXNldCA/IGZhbHNlIDogdW5kZWZpbmVkKTtcclxuICB9XHJcblxyXG4gIGFmdGVyVmFsdWVTZXQoKSB7XHJcbiAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJTZXRPcHRpb25zKGtlZXBWYWx1ZSkge1xyXG4gICAgbGV0IHNlYXJjaCA9IHRoaXMuc2VhcmNoVmFsdWU7IC8vIE5lZWQgdG8gYmUgc3RvcmVkIGJlY2F1c2Ugc2V0VmFsdWVNZXRob2Qgd2lsbCBlbXB0eSB0aGlzLnNlYXJjaFZhbHVlXHJcblxyXG4gICAgaWYgKGtlZXBWYWx1ZSkge1xyXG4gICAgICBpZiAodGhpcy5pc0FsbFNlbGVjdGVkKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zKHRoaXMuaXNBbGxTZWxlY3RlZCk7IC8vIElmIHNlbGVjdCBhbGwgd2FzIG9uIGxldCBzZWxlY3QgYWxsIG9uXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZCh0aGlzLnNlbGVjdGVkVmFsdWVzLCB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldCk7IC8vIFJlc2VsZWN0IHZhbGlkIHZhbHVlc1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNldFNlYXJjaFZhbHVlKHNlYXJjaCwgZmFsc2UsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG5cclxuICAgIGlmICgha2VlcFZhbHVlKSB7XHJcbiAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZE9wdGlvbihkYXRhLCByZXJlbmRlcikge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCsrO1xyXG4gICAgZGF0YS5pbmRleCA9IHRoaXMubGFzdE9wdGlvbkluZGV4O1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0T3B0aW9uT2JqKGRhdGEpO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5wdXNoKG5ld09wdGlvbik7XHJcbiAgICB0aGlzLnNvcnRlZE9wdGlvbnMucHVzaChuZXdPcHRpb24pO1xyXG5cclxuICAgIGlmIChyZXJlbmRlcikge1xyXG4gICAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgdGhpcy5hZnRlclNldE9wdGlvbnMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZU9wdGlvbihpbmRleCkge1xyXG4gICAgaWYgKCFpbmRleCAmJiBpbmRleCAhPSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4LS07XHJcbiAgfVxyXG5cclxuICByZW1vdmVOZXdPcHRpb24oKSB7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uKG5ld09wdGlvbi5pbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBiZWZvcmVTZWxlY3ROZXdWYWx1ZSgpIHtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IG5ld0luZGV4ID0gbmV3T3B0aW9uLmluZGV4O1xyXG5cclxuICAgIHRoaXMubmV3VmFsdWVzLnB1c2gobmV3T3B0aW9uLnZhbHVlKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2lzQ3VycmVudE5ldycsIGZhbHNlKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2lzTmV3JywgdHJ1ZSk7XHJcblxyXG4gICAgLyoqIHVzaW5nIHNldFRpbWVvdXQgdG8gZml4IHRoZSBpc3N1ZSBvZiBkcm9wYm94IGdldHRpbmcgY2xvc2VkIG9uIHNlbGVjdCAqL1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgc29ydE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG9wdGlvbnMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICBpZiAoYi52YWx1ZSA9PT0gbm9uZU9wdGlvblZhbHVlICYmIGEudmFsdWUgIT09IG5vbmVPcHRpb25WYWx1ZSkge1xyXG4gICAgICAgIC8vIE5vbmUgaXMgYWx3YXlzIGZpcnN0XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH0gZWxzZSBpZiAoIWEuaXNTZWxlY3RlZCAmJiAhYi5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH0gZWxzZSBpZiAoYS5pc1NlbGVjdGVkICYmICghYi5pc1NlbGVjdGVkIHx8IGEuaW5kZXggPCBiLmluZGV4KSkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzb3J0T3B0aW9uc0dyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCBzb3J0T3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnM7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IGNoaWxkT3B0aW9ucyA9IGQub3B0aW9ucztcclxuICAgICAgZC5pc1NlbGVjdGVkID0gY2hpbGRPcHRpb25zLnNvbWUoKGUpID0+IGUuaXNTZWxlY3RlZCk7XHJcblxyXG4gICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgc29ydE9wdGlvbnMoY2hpbGRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc29ydE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGVzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGlzT3B0aW9uVmlzaWJsZShkLCBzZWFyY2hWYWx1ZSwgaGFzRXhhY3RPcHRpb24sIHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBkLmxhYmVsLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBkLmRlc2NyaXB0aW9uO1xyXG4gICAgbGV0IGFsaWFzID0gZC5hbGlhcztcclxuICAgIGxldCBpc1Zpc2libGUgPSB2YWx1ZS5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgaWYgKGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nW2QuaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhbGlhcyAmJiAhaXNWaXNpYmxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IGFsaWFzLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVzY3JpcHRpb24gJiYgIWlzVmlzaWJsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSBkZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBkLmlzVmlzaWJsZSA9IGlzVmlzaWJsZTtcclxuXHJcbiAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgIGhhc0V4YWN0T3B0aW9uID0gdmFsdWUgPT09IHNlYXJjaFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmlzaWJsZSxcclxuICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGNoaWxkT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIC8qKiBnZXR0aW5nIGFsbCBncm91cCB0aXRsZSAqL1xyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBjaGlsZEFycmF5ID0gW107XHJcbiAgICAgICAgZC5vcHRpb25zID0gY2hpbGRBcnJheTtcclxuICAgICAgICBjaGlsZE9wdGlvbnNbZC5pbmRleF0gPSBjaGlsZEFycmF5O1xyXG5cclxuICAgICAgICByZXN1bHQucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqIGdldHRpbmcgYWxsIGdyb3VwIG9wdGlvbnMgKi9cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgY2hpbGRPcHRpb25zW2QuZ3JvdXBJbmRleF0ucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGRlc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICByZXN1bHQucHVzaChkKTtcclxuICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChkLm9wdGlvbnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSkge1xyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy1uby1vcHRpb25zJyk7XHJcbiAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnc2VydmVyLXNlYXJjaGluZycpO1xyXG4gICAgdGhpcy5vblNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSwgdGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHN0YXRpYyBpbml0KG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlQXJyYXkgPSBvcHRpb25zLmVsZTtcclxuXHJcbiAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNpbmdsZUVsZSA9IGZhbHNlO1xyXG5cclxuICAgIGlmICh0eXBlb2YgJGVsZUFycmF5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAkZWxlQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCRlbGVBcnJheSk7XHJcblxyXG4gICAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlQXJyYXkubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZUFycmF5ID0gWyRlbGVBcnJheV07XHJcbiAgICAgIHNpbmdsZUVsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluc3RhbmNlcyA9IFtdO1xyXG4gICAgJGVsZUFycmF5LmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgb3B0aW9ucy5lbGUgPSAkZWxlO1xyXG4gICAgICBpbnN0YW5jZXMucHVzaChuZXcgVmlydHVhbFNlbGVjdChvcHRpb25zKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc2luZ2xlRWxlID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0Rm9ybShlKSB7XHJcbiAgICBsZXQgJGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJyk7XHJcblxyXG4gICAgaWYgKCEkZm9ybSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnZzY29tcC13cmFwcGVyJykuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICAkZWxlLnBhcmVudEVsZW1lbnQudmlydHVhbFNlbGVjdC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIGtlZXBWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXREaXNhYmxlZE9wdGlvbnNNZXRob2Qob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdG9nZ2xlU2VsZWN0QWxsKGlzU2VsZWN0ZWQpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC50b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzQWxsU2VsZWN0ZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkT3B0aW9uTWV0aG9kKGRhdGEpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5hZGRPcHRpb24oZGF0YSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TmV3VmFsdWVNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmdldE5ld1ZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdmVyc2lvbigpIHtcclxuICAgIHJldHVybiB2aXJ0dWFsU2VsZWN0VmVyc2lvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREaXNwbGF5VmFsdWVNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmdldERpc3BsYXlWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG9wZW5NZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0Lm9wZW5Ecm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2xvc2VNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmNsb3NlRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG9uUmVzaXplTWV0aG9kKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzY29tcC13cmFwcGVyJykuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICAkZWxlLnBhcmVudEVsZW1lbnQudmlydHVhbFNlbGVjdC5vblJlc2l6ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8qKiBzdGF0aWMgbWV0aG9kcyAtIGVuZCAqL1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsIFZpcnR1YWxTZWxlY3QucmVzZXRGb3JtKTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIFZpcnR1YWxTZWxlY3Qub25SZXNpemVNZXRob2QpO1xyXG5cclxud2luZG93LlZpcnR1YWxTZWxlY3QgPSBWaXJ0dWFsU2VsZWN0O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9