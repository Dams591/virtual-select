/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{DomUtils:()=>l});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"addClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).add.apply(i,o(e))})))}},{key:"removeClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).remove.apply(i,o(e))})))}},{key:"toggleClass",value:function(t,e,i){var o;if(t)return void 0!==i&&(i=Boolean(i)),this.getElements(t).forEach((function(t){o=t.classList.toggle(e,i)})),o}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=e.left,n=e.top;return{horizontal:s>i-s-e.width?"left":"right",vertical:n>o-n-e.height?"top":"bottom"}}},{key:"getData",value:function(t,e,i){if(t){var o=t?t.dataset[e]:"";return"number"===i?o=parseFloat(o)||0:"true"===o?o=!0:"false"===o&&(o=!1),o}}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"setStyle",value:function(t,e,i){t&&(t.style[e]=i)}},{key:"getElements",value:function(t){if(t)return void 0===t.length&&(t=[t]),t}},{key:"getStyleText",value:function(t,e){var i="";for(var o in t)i+="".concat(o,": ").concat(t[o],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var o=t[i];void 0!==o&&(e+=" ".concat(i,'="').concat(o,'" '))}return e}}],(i=null)&&n(e.prototype,i),s&&n(e,s),t}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(t,e,i)=>{i.r(e),i.d(e,{Utils:()=>o.Utils,DomUtils:()=>s.DomUtils});var o=i(/*! ./utils */"./src/utils/utils.js"),s=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{Utils:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"getString",value:function(t){return t||0===t?t.toString():""}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===n(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length||!e)return t;i&&(t=o(t));var s=t.indexOf(e);return-1!==s&&t.splice(s,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}}],(i=null)&&l(e.prototype,i),s&&l(e,s),t}()}},e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(o),i.d(o,{VirtualSelect:()=>c});var t=i(/*! ./utils */"./src/utils/index.js");function e(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r="{#virtual-select-none-option#}",p={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},c=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);try{this.setProps(t),this.setDisabledOptions(t.disabledOptions),this.setOptions(t.options),this.render()}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var o,n,l;return o=i,l=[{key:"init",value:function(t){var e=t.ele;if(e){var o=!1;if("string"!=typeof e||(e=document.querySelector(e))){void 0===e.length&&(e=[e],o=!0);var s=[];return e.forEach((function(e){t.ele=e,s.push(new i(t))})),o?s[0]:s}}}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t,e){this.virtualSelect.setOptionsMethod(t,e)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.onResize()}))}}],(n=[{key:"render",value:function(){var e=this;if(this.$ele){var i="vscomp-wrapper",o=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),n={"z-index":this.zIndex},l=function(){var t="";return e.additionalClasses&&(t+=" "+e.additionalClasses),e.multiple&&(t+=" multiple",e.disableSelectAll||(t+=" has-select-all")),"top"===e.position&&(t+=" position-top"),e.hideClearButton||(t+=" has-clear-button"),e.keepAlwaysOpen?t+=" keep-always-open opened":t+=" closed",e.showAsPopup?t+=" show-as-popup":e.dropboxWidth&&(n.width=e.dropboxWidth),e.hasSearch&&(t+=" has-search-input"),t};i+=l(),this.guid=t.Utils.generateUUID();var a='<div id="vs-'.concat(this.guid,'" class="vscomp-dropbox-container" ').concat(t.DomUtils.getStyleText(n),'>\n      <div class="vscomp-dropbox">\n        <div class="vscomp-search-wrapper"></div>\n\n        <div class="vscomp-options-container">\n          <div class="vscomp-options-loader"></div>\n\n          <div class="vscomp-options-list">\n            <div class="vscomp-options"></div>\n          </div>\n        </div>\n\n        <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n        <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n        <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n      </div>\n    </div>'),r='<div class="'.concat(i,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(o,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        ').concat(this.keepAlwaysOpen||!this.appendToBody?a:"","\n\n      </div>");if(this.$ele.innerHTML=r,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),!this.keepAlwaysOpen&&this.appendToBody){this.$body.append(document.createRange().createContextualFragment(a)),this.$dropboxContainer=document.querySelector("#vs-".concat(this.guid,".vscomp-dropbox-container")),this.$dropboxEl=document.querySelector("#vs-".concat(this.guid));var p="vscomp-wrapper-body";p+=l(),t.DomUtils.addClass(this.$dropboxEl,"".concat(p))}else this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxEl=this.$ele;this.$search=this.$dropboxEl.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxEl.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxEl.querySelector(".vscomp-options-list"),this.$options=this.$dropboxEl.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$dropboxEl.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxEl.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var e,i=this,o="",s=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),p=t.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(e=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var c=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(c,"></span>")}s.forEach((function(t){var s=t.label,c="vscomp-option",u=i.getTooltipAttrText("",!0),h=n,d="",v="";t.isFocused&&(c+=" focused"),t.isDisabled&&(c+=" disabled"),t.isGroupTitle?(c+=" group-title",h=""):t.isSelected&&(c+=" selected"),t.isGroupOption&&(c+=" group-option"),t.description&&(v='<div class="vscomp-option-description" '.concat(u,">").concat(t.description,"</div>")),t.isCurrentNew?(c+=" current-new",d+=l):a&&!t.isGroupTitle&&(s=s.replace(e,"<mark>$1</mark>")),o+='<div class="'.concat(c,'" data-value="').concat(t.value,'" data-index="').concat(t.index,'" data-visible-index="').concat(t.visibleIndex,'" ').concat(p,">\n          ").concat(h,'\n          <span class="vscomp-option-text ').concat(t.value===r?"none":"",'" ').concat(u,">\n            ").concat(s,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=o;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||t.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),t.DomUtils.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var t="",e="";this.multiple&&!this.disableSelectAll&&(t='<span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>")),this.hasSearch&&(e='<input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n      <span class="vscomp-search-clear">&times;</span>'));var i='<div class="vscomp-search-container">\n        '.concat(t,"\n        ").concat(e,"\n      </div>");this.$search.innerHTML=i,this.$searchInput=this.$dropboxEl.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxEl.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxEl.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"addEvent",value:function(e,i,o){var s=this;e&&(i=t.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(o,"-").concat(i),l=s.events[n];l||(l=s[o].bind(s),s.events[n]=l),(e=t.DomUtils.getElements(e)).forEach((function(t){t.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(e,i){e&&(e=t.DomUtils.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(t){this.appendToBody&&this.multiple&&this.isOpened()&&t.target.closest("#vs-".concat(this.guid))||t.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=p[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)"))}},{key:"onDropboxContainerClick",value:function(t){t.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.isOpened()&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.setOptionsContainerHeight(!0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),t.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(t){t&&this.showAsPopup&&this.setVisibleOptions()}},{key:"setProps",value:function(e){e=this.setDefaultProps(e),this.setPropsFromElementAttr(e);var i=t.Utils.convertToBoolean;this.$ele=e.ele,this.valueKey=e.valueKey,this.labelKey=e.labelKey,this.descriptionKey=e.descriptionKey,this.aliasKey=e.aliasKey,this.optionHeightText=e.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(e.multiple),this.hasSearch=i(e.search),this.hideClearButton=i(e.hideClearButton),this.autoSelectFirstOption=i(e.autoSelectFirstOption),this.hasOptionDescription=i(e.hasOptionDescription),this.silentInitialValueSet=i(e.silentInitialValueSet),this.allowNewOption=i(e.allowNewOption),this.markSearchResults=i(e.markSearchResults),this.showSelectedOptionsFirst=i(e.showSelectedOptionsFirst),this.disableSelectAll=i(e.disableSelectAll),this.keepAlwaysOpen=i(e.keepAlwaysOpen),this.showDropboxAsPopup=i(e.showDropboxAsPopup),this.noOptionsText=e.noOptionsText,this.noSearchResultsText=e.noSearchResultsText,this.selectAllText=e.selectAllText,this.placeholder=e.placeholder,this.position=e.position,this.dropboxWidth=e.dropboxWidth,this.tooltipFontSize=e.tooltipFontSize,this.tooltipAlignment=e.tooltipAlignment,this.tooltipMaxWidth=e.tooltipMaxWidth,this.noOfDisplayValues=parseInt(e.noOfDisplayValues),this.zIndex=parseInt(e.zIndex),this.maxValues=parseInt(e.maxValues),this.name=e.name,this.additionalClasses=e.additionalClasses,this.initialSelectedValue=e.selectedValue,this.popupDropboxBreakpoint=e.popupDropboxBreakpoint,this.onServerSearch=e.onServerSearch,this.searchPlaceholder=e.searchPlaceholder,this.itemsSelectedMessage=e.itemsSelectedMessage,this.allowNoneOption=e.allowNoneOption,this.noneOptionText=e.noneOptionText,this.appendToBody=e.appendToBody,this.selectedValues=[],this.selectedIndexes=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===e.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(e.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None",appendToBody:!1};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint"};for(var o in i){var s=e.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(t[i[o]]=s)}}},{key:"setMethods",value:function(){var t=this.$ele;t.virtualSelect=this,t.value=this.multiple?[]:"",t.reset=i.reset,t.setValue=i.setValueMethod,t.setOptions=i.setOptionsMethod,t.setDisabledOptions=i.setDisabledOptionsMethod,t.toggleSelectAll=i.toggleSelectAll,t.isAllSelected=i.isAllSelected,t.addOption=i.addOptionMethod,t.getNewValue=i.getNewValueMethod,t.getDisplayValue=i.getDisplayValueMethod,t.open=i.openMethod,t.close=i.closeMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i=[],o=[];this.options.forEach((function(e,s){-1===t.indexOf(e.value)||e.isDisabled||e.isGroupTitle?e.isSelected=!1:(e.isSelected=!0,i.push(e.value),o.push(s))})),this.multiple||(i=i[0],o=o[0]),this.beforeValueSet(),this.setValue(i,o,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t,e){var i=t!=this.options;this.setOptions(t),this.afterSetOptions(e,i)}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(e){e||(e=[]);var i=[],o=this.disabledOptions,s=o.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,p=this.aliasKey,c=this.hasOptionDescription,u=t.Utils.getString,h=this.getAlias,d=0,v=!1;!this.multiple&&this.allowNoneOption&&e.unshift({value:r,label:this.noneOptionText}),e.forEach((function t(e){var r=u(e[n]),f=e.options,y=!!f,g={index:d,value:r,label:u(e[l]),alias:h(e[p]),isVisible:!0,isGroupTitle:y};if(s&&(g.isDisabled=-1!==o.indexOf(r)),e.isGroupOption&&(g.isGroupOption=!0,g.groupIndex=e.groupIndex),c&&(g.description=u(e[a])),i.push(g),d++,y){var m=g.index;v=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=m,t(e)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=v,this.setSortedOptions()}},{key:"setServerOptions",value:function(e){this.setOptionsMethod(e,!0),t.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSortedOptions",value:function(){var t=s(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=s(this.sortedOptions),e=2*this.optionsCount,i=this.getVisibleStartIndex(),o=this.getNewOption(),n=i+e-1,l=0;o&&(o.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=i&&l<=n,t.visibleIndex=l,l++),e})),o&&(t=[o].concat(s(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){void 0===e&&(e=this.getVisibleStartIndex());var i=e*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),t.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var e=this,i=this.getVisibleOptions(),o=this.hasOptionDescription;i.forEach((function(i){var s=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));t.DomUtils.setData(s.querySelector(".vscomp-option-text"),"tooltip",i.label),o&&t.DomUtils.setData(s.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(e,i,o){e?Array.isArray(e)?this.selectedValues=s(e):this.selectedValues=[e]:this.selectedValues=[];var n=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=n,this.$hiddenInput.value=n,i?Array.isArray(i)?this.selectedIndexes=s(i):this.selectedIndexes=[i]:this.selectedIndexes=[];var l=this.multiple?this.selectedIndexes:this.selectedIndexes[0]||"";this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===r?t.DomUtils.removeClass(this.$wrapper,"has-value"):t.DomUtils.toggleClass(this.$wrapper,"has-value",t.Utils.isNotEmpty(this.selectedValues)),t.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),o&&this.dispatchEvent(this.$ele,"change")}},{key:"setValueText",value:function(){var i=[],o=[],s=this.selectedValues,n=s.length,l=this.noOfDisplayValues,a=0;if(this.isAllSelected)this.$valueText.innerHTML="".concat(n," ").concat(this.itemsSelectedMessage);else{var p,c=e(this.options);try{for(c.s();!(p=c.n()).done;){var u=p.value;if(!u.isCurrentNew){if(a>50)break;var h=u.value;if(-1!==s.indexOf(h)){var d=u.label;i.push(d),++a<=l&&o.push('<span class="vscomp-value-tag">'.concat(d,"</span>"))}}}}catch(t){c.e(t)}finally{c.f()}var v=n-l;v>0&&o.push('<span class="vscomp-value-tag more-value-count">+ '.concat(v," more...</span>"));var f=i.join(", ");if(""===f||s&&s[0]===r)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=f,this.multiple){var y=this.maxValues;if(t.DomUtils.hasEllipsis(this.$valueText)||y){var g="".concat(n);y&&(g+=" / ".concat(y)),this.$valueText.innerHTML="".concat(g," ").concat(this.itemsSelectedMessage)}else o=[]}}t.DomUtils.setData(this.$valueText,"tooltip",o.join(", "))}},{key:"setSearchValue",value:function(e,i,o){if(e!==this.searchValueOriginal||o){i||(this.$searchInput.value=e);var s=e.toLowerCase().trim();if(this.searchValue=s,this.searchValueOriginal=e,t.DomUtils.toggleClass(this.$wrapper,"has-search-value",e),this.hasServerSearch)this.serverSearch(s);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=r(t,s,a,n);e.isVisible&&l++,a||(a=e.hasExactOption)}})),this.allowNewOption&&(s&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(e){var i;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(t.DomUtils.setStyle(this.$noOptions,"height",i),t.DomUtils.setStyle(this.$noSearchResults,"height",i))),t.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(e)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var e=t.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var o=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,n=parseFloat(this.dropboxWidth),l=o.left+n>s,a=n>o.right;l&&!a&&(i=!0)}if(this.appendToBody){var r=this.$ele.getBoundingClientRect(),p=r.left+window.scrollX,c=r.top+window.scrollY;this.$dropboxEl.style.width="".concat(this.$ele.offsetWidth,"px"),this.$dropboxEl.style.left="".concat(p,"px"),"top"===e.vertical?this.$dropboxEl.style.top="".concat(c-this.$dropboxContainer.offsetHeight-4,"px"):this.$dropboxEl.style.top="".concat(c+this.$ele.offsetHeight+4,"px"),t.DomUtils.toggleClass(this.$dropboxContainer,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$dropboxContainer,"position-left",i)}else t.DomUtils.toggleClass(this.$wrapper,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var o={value:t,label:t,isCurrentNew:!0};this.addOption(o)}}}},{key:"setSelectedProp",value:function(){var t=this.selectedValues;this.options.forEach((function(e){-1!==t.indexOf(e.value)&&(e.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":o};return t.DomUtils.getAttributesText(s)}},{key:"getOptionObj",value:function(e){if(e){var i=t.Utils.getString;return{index:e.index,value:i(e.value),label:i(e.label),description:i(e.description),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,i=[],o=this.selectedValues,s=e(this.options);try{for(s.s();!(t=s.n()).done;){var n=t.value;-1!==o.indexOf(n.value)&&i.push(n.label)}}catch(t){s.e(t)}finally{s.f()}return this.multiple?i:i[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},o=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return o(e,t).isVisible}))})),i}},{key:"getOptionsCount",value:function(t){if(this.showAsPopup){var e=80*window.innerHeight/100-48;this.hasSearchContainer&&(e-=40),t=Math.floor(e/this.optionHeight)}else t=parseInt(t);return t}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(e,i){var o="next"===i?"nextElementSibling":"previousElementSibling";do{e&&(e=e[o])}while(t.DomUtils.hasClass(e,"disabled")||t.DomUtils.hasClass(e,"group-title"));return e}},{key:"openDropbox",value:function(e){var i=this;this.setDropboxPosition(),t.DomUtils.removeClass(this.$wrapper,"closed"),t.DomUtils.removeClass(this.$dropboxEl,"opened"),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"opened"),t.DomUtils.addClass(i.$dropboxEl,"opened"),i.dispatchEvent(i.$ele,"opened"),e||(i.moveSelectedOptionsFirst(),t.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(t.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput())}),0)}},{key:"closeDropbox",value:function(e){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var o=e?0:this.transitionDuration;setTimeout((function(){t.DomUtils.removeClass(i.$wrapper,"opened focused"),t.DomUtils.removeClass(i.$dropboxEl,"opened focused"),i.dispatchEvent(i.$ele,"closed"),i.removeOptionFocus(),e||i.isPopupActive&&(t.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1)}),0),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"closed"),t.DomUtils.removeClass(i.$dropboxEl,"closed"),i.appendToBody&&(i.$dropboxEl.style.left="-200px",i.$dropboxEl.style.top="-200px")}),o)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return t.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(e,i){var o,s=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)o=i;else if(s)o=this.getSibling(s,e);else{var n=this.getFirstVisibleOptionIndex();o=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(t.DomUtils.hasClass(o,"disabled")||t.DomUtils.hasClass(o,"group-title"))&&(o=this.getSibling(o,"next"))}o&&o!==s&&(s&&t.DomUtils.removeClass(s,"focused"),t.DomUtils.addClass(o,"focused"),this.toggleFocusedProp(t.DomUtils.getData(o,"index"),!0),this.moveFocusedOptionToView(o))}},{key:"moveFocusedOptionToView",value:function(e){if(e||(e=this.$dropboxContainer.querySelector(".vscomp-option.focused")),e){var i,o=this.$optionsContainer.getBoundingClientRect(),s=e.getBoundingClientRect(),n=o.top,l=o.bottom,a=o.height,r=s.top,p=s.bottom,c=s.height,u=e.offsetTop,h=t.DomUtils.getData(this.$options,"top","number");n>r?i=u+h:l<p&&(i=u-a+c+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(t.DomUtils.removeClass(e,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){if(e){var i=!t.DomUtils.hasClass(e,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var o=this.selectedValues,s=this.selectedIndexes,n=t.DomUtils.getData(e,"value"),l=t.DomUtils.getData(e,"index");if(this.toggleSelectedProp(l,i),i){if(this.multiple)o.push(n),s.push(l),this.toggleAllOptionsClass();else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[n],s=[l];var a=this.$ele.querySelector(".vscomp-option.selected");a&&t.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}t.DomUtils.toggleClass(e,"selected")}else this.multiple&&(t.DomUtils.toggleClass(e,"selected"),t.Utils.removeItemFromArray(o,n),t.Utils.removeItemFromArray(s,l),this.toggleAllOptionsClass(!1));if(t.DomUtils.hasClass(e,"current-new")&&this.beforeSelectNewValue(),this.setValue(o,s,!0),this.keepAlwaysOpen&&this.showSelectedOptionsFirst){var r=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=r}}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof e&&(e=!t.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],o=[];this.options.forEach((function(t,s){t.isDisabled||t.isCurrentNew||t.isGroupTitle||(t.isSelected=e,e&&(i.push(t.value),o.push(s)))})),this.toggleAllOptionsClass(e),this.setValue(i,o,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){"boolean"!=typeof e&&(e=!1,this.options.length&&(e=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),t.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",e),this.isAllSelected=e}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(t){var e=this.searchValue;t&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.setSearchValue(e,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),t||this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return e.value===r&&t.value!==r?0:t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,o){var s=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==s.indexOf(e);return t.isGroupTitle&&(a=o[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=s===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var o=[];t.options=o,i[t.index]=o,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"serverSearch",value:function(e){t.DomUtils.removeClass(this.$wrapper,"has-no-options"),t.DomUtils.addClass(this.$wrapper,"server-searching"),this.onServerSearch(e,this)}}])&&a(o.prototype,n),l&&a(o,l),i}();document.addEventListener("reset",c.resetForm),window.addEventListener("resize",c.onResizeMethod),window.VirtualSelect=c})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy91dGlscy9kb20tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJEb21VdGlscyIsIiRlbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsInRoaXMiLCJnZXRFbGVtZW50cyIsImZvckVhY2giLCJfdGhpcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImlzQWRkIiwiaXNBZGRlZCIsInVuZGVmaW5lZCIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJjb250YWlucyIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhdmFpbGFibGVXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwibGVmdCIsInRvcEFyZWEiLCJ0b3AiLCJob3Jpem9udGFsIiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImhlaWdodCIsIm5hbWUiLCJ0eXBlIiwidmFsdWUiLCJkYXRhc2V0IiwicGFyc2VGbG9hdCIsInN0eWxlIiwibGVuZ3RoIiwicHJvcHMiLCJza2lwQXR0ck5hbWUiLCJyZXN1bHQiLCJrIiwiZGF0YSIsImh0bWwiLCJVdGlscyIsInRleHQiLCJ0b1N0cmluZyIsImRlZmF1bHRWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlsdGVyIiwiZCIsInJlcGxhY2UiLCJjIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDhBcnJheSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwibm9uZU9wdGlvblZhbHVlIiwia2V5RG93bk1ldGhvZE1hcHBpbmciLCIxMyIsIjI3IiwiMzgiLCI0MCIsIlZpcnR1YWxTZWxlY3QiLCJvcHRpb25zIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCIkZWxlQXJyYXkiLCJlbGUiLCJzaW5nbGVFbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnN0YW5jZXMiLCJwdXNoIiwiJGZvcm0iLCJ0YXJnZXQiLCJjbG9zZXN0IiwicXVlcnlTZWxlY3RvckFsbCIsInBhcmVudEVsZW1lbnQiLCJ2aXJ0dWFsU2VsZWN0IiwicmVzZXQiLCJzaWxlbnRDaGFuZ2UiLCJzZXRWYWx1ZU1ldGhvZCIsImtlZXBWYWx1ZSIsInNldE9wdGlvbnNNZXRob2QiLCJzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QiLCJpc1NlbGVjdGVkIiwidG9nZ2xlQWxsT3B0aW9ucyIsImlzQWxsU2VsZWN0ZWQiLCJhZGRPcHRpb24iLCJnZXROZXdWYWx1ZSIsImdldERpc3BsYXlWYWx1ZSIsIm9wZW5Ecm9wYm94IiwiY2xvc2VEcm9wYm94Iiwib25SZXNpemUiLCJ3cmFwcGVyQ2xhc3NlcyIsInZhbHVlVG9vbHRpcCIsImdldFRvb2x0aXBBdHRyVGV4dCIsIm11bHRpcGxlIiwiY2xlYXJCdXR0b25Ub29sdGlwIiwiZHJvcGJveENvbnRhaW5lclN0eWxlIiwiekluZGV4IiwiZ2V0V3JhcHBlckNsYXNzZXMiLCJjbGFzc2VzIiwiYWRkaXRpb25hbENsYXNzZXMiLCJkaXNhYmxlU2VsZWN0QWxsIiwicG9zaXRpb24iLCJoaWRlQ2xlYXJCdXR0b24iLCJrZWVwQWx3YXlzT3BlbiIsInNob3dBc1BvcHVwIiwiZHJvcGJveFdpZHRoIiwiaGFzU2VhcmNoIiwiZ3VpZCIsImRyb3Bib3hDb250YWluZXIiLCJub09wdGlvbnNUZXh0Iiwibm9TZWFyY2hSZXN1bHRzVGV4dCIsInBsYWNlaG9sZGVyIiwiYXBwZW5kVG9Cb2R5IiwiaW5uZXJIVE1MIiwiJGJvZHkiLCIkd3JhcHBlciIsIiR0b2dnbGVCdXR0b24iLCIkY2xlYXJCdXR0b24iLCIkZHJvcGJveENsb3NlQnV0dG9uIiwiYXBwZW5kIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCIkZHJvcGJveENvbnRhaW5lciIsIiRkcm9wYm94RWwiLCIkc2VhcmNoIiwiJG9wdGlvbnNDb250YWluZXIiLCIkb3B0aW9uc0xpc3QiLCIkb3B0aW9ucyIsIiR2YWx1ZVRleHQiLCIkaGlkZGVuSW5wdXQiLCIkbm9PcHRpb25zIiwiJG5vU2VhcmNoUmVzdWx0cyIsImFmdGVyUmVuZGVyV3JhcHBlciIsInNlYXJjaFJlZ2V4IiwidmlzaWJsZU9wdGlvbnMiLCJnZXRWaXNpYmxlT3B0aW9ucyIsImNoZWNrYm94SHRtbCIsIm5ld09wdGlvbkljb25IdG1sIiwibWFya1NlYXJjaFJlc3VsdHMiLCJzZWFyY2hWYWx1ZSIsInN0eWxlVGV4dCIsIm9wdGlvbkhlaWdodCIsIlJlZ0V4cCIsImFsbG93TmV3T3B0aW9uIiwibmV3T3B0aW9uVG9vbHRpcCIsIm9wdGlvbkxhYmVsIiwibGFiZWwiLCJvcHRpb25DbGFzc2VzIiwib3B0aW9uVG9vbHRpcCIsImxlZnRTZWN0aW9uIiwicmlnaHRTZWN0aW9uIiwiZGVzY3JpcHRpb24iLCJpc0ZvY3VzZWQiLCJpc0Rpc2FibGVkIiwiaXNHcm91cFRpdGxlIiwiaXNHcm91cE9wdGlvbiIsImlzQ3VycmVudE5ldyIsInZpc2libGVJbmRleCIsImhhc05vT3B0aW9ucyIsImhhc05vU2VhcmNoUmVzdWx0cyIsInNldE9wdGlvbnNQb3NpdGlvbiIsInNldE9wdGlvbnNUb29sdGlwIiwiaGFzU2VhcmNoQ29udGFpbmVyIiwic2VhcmNoSW5wdXQiLCJzZWxlY3RBbGxUZXh0Iiwic2VhcmNoUGxhY2Vob2xkZXIiLCIkc2VhcmNoSW5wdXQiLCIkc2VhcmNoQ2xlYXIiLCIkdG9nZ2xlQWxsQnV0dG9uIiwiJHRvZ2dsZUFsbENoZWNrYm94IiwiYWRkRXZlbnQiLCJldmVudHMiLCJtZXRob2QiLCJldmVudCIsImV2ZW50c0tleSIsImNhbGxiYWNrIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImlzT3BlbmVkIiwid2hpY2giLCJrZXlDb2RlIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94Iiwic2V0VmlzaWJsZU9wdGlvbnMiLCJzZWxlY3RPcHRpb24iLCJyZW1vdmVPcHRpb25Gb2N1cyIsInN0b3BQcm9wYWdhdGlvbiIsInNldFNlYXJjaFZhbHVlIiwiZm9jdXNTZWFyY2hJbnB1dCIsInNldE9wdGlvbnNDb250YWluZXJIZWlnaHQiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJTZWFyY2giLCJzZXRPcHRpb25zSGVpZ2h0IiwiYWRkRXZlbnRzIiwic2V0TWV0aG9kcyIsImluaXRpYWxTZWxlY3RlZFZhbHVlIiwic2lsZW50SW5pdGlhbFZhbHVlU2V0IiwiYXV0b1NlbGVjdEZpcnN0T3B0aW9uIiwic2V0RGVmYXVsdFByb3BzIiwic2V0UHJvcHNGcm9tRWxlbWVudEF0dHIiLCJjb252ZXJ0VG9Cb29sZWFuIiwidmFsdWVLZXkiLCJsYWJlbEtleSIsImRlc2NyaXB0aW9uS2V5IiwiYWxpYXNLZXkiLCJvcHRpb25IZWlnaHRUZXh0Iiwic2VhcmNoIiwiaGFzT3B0aW9uRGVzY3JpcHRpb24iLCJzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJzaG93RHJvcGJveEFzUG9wdXAiLCJ0b29sdGlwRm9udFNpemUiLCJ0b29sdGlwQWxpZ25tZW50IiwidG9vbHRpcE1heFdpZHRoIiwibm9PZkRpc3BsYXlWYWx1ZXMiLCJwYXJzZUludCIsIm1heFZhbHVlcyIsInNlbGVjdGVkVmFsdWUiLCJwb3B1cERyb3Bib3hCcmVha3BvaW50Iiwib25TZXJ2ZXJTZWFyY2giLCJpdGVtc1NlbGVjdGVkTWVzc2FnZSIsImFsbG93Tm9uZU9wdGlvbiIsIm5vbmVPcHRpb25UZXh0Iiwic2VsZWN0ZWRWYWx1ZXMiLCJzZWxlY3RlZEluZGV4ZXMiLCJuZXdWYWx1ZXMiLCJ0b29sdGlwRW50ZXJEZWxheSIsInRyYW5zaXRpb25EdXJhdGlvbiIsInNlYXJjaFZhbHVlT3JpZ2luYWwiLCJoYXNTZXJ2ZXJTZWFyY2giLCJvcHRpb25zQ291bnQiLCJnZXRPcHRpb25zQ291bnQiLCJoYWxmT3B0aW9uc0NvdW50IiwiTWF0aCIsImNlaWwiLCJvcHRpb25zSGVpZ2h0IiwiZ2V0T3B0aW9uc0hlaWdodCIsImRlZmF1bHRPcHRpb25zIiwiYXNzaWduIiwibWFwcGluZyIsImdldEF0dHJpYnV0ZSIsInNldFZhbHVlIiwidG9nZ2xlU2VsZWN0QWxsIiwiYWRkT3B0aW9uTWV0aG9kIiwiZ2V0TmV3VmFsdWVNZXRob2QiLCJnZXREaXNwbGF5VmFsdWVNZXRob2QiLCJvcGVuIiwib3Blbk1ldGhvZCIsImNsb3NlIiwiY2xvc2VNZXRob2QiLCJtYXAiLCJ2IiwidmFsaWRWYWx1ZXMiLCJ2YWxpZEluZGV4ZXMiLCJpZHgiLCJiZWZvcmVWYWx1ZVNldCIsImFmdGVyVmFsdWVTZXQiLCJuZXdvcHRpb24iLCJhZnRlclNldE9wdGlvbnMiLCJzZXRPcHRpb25zUHJvcCIsInByZXBhcmVkT3B0aW9ucyIsImhhc0Rpc2FibGVkT3B0aW9ucyIsImdldFN0cmluZyIsImdldEFsaWFzIiwiaGFzT3B0aW9uR3JvdXAiLCJ1bnNoaWZ0IiwicHJlcGFyZU9wdGlvbiIsImNoaWxkT3B0aW9ucyIsIm9wdGlvbiIsImFsaWFzIiwiaXNWaXNpYmxlIiwiZ3JvdXBJbmRleCIsInZpc2libGVPcHRpb25zQ291bnQiLCJsYXN0T3B0aW9uSW5kZXgiLCJzZXRTb3J0ZWRPcHRpb25zIiwic29ydGVkT3B0aW9ucyIsInNvcnRPcHRpb25zR3JvdXAiLCJzb3J0T3B0aW9ucyIsIm1heE9wdGlvbnNUb1Nob3ciLCJzdGFydEluZGV4IiwiZ2V0VmlzaWJsZVN0YXJ0SW5kZXgiLCJuZXdPcHRpb24iLCJnZXROZXdPcHRpb24iLCJlbmRJbmRleCIsImkiLCJpblZpZXciLCJyZW5kZXJPcHRpb25zIiwidHJhbnNmb3JtIiwiJG9wdGlvbkVsZSIsInRyaWdnZXJFdmVudCIsIm5ld1ZhbHVlIiwibmV3SW5kZXgiLCJpc01heFZhbHVlc1NlbGVjdGVkIiwic2V0VmFsdWVUZXh0IiwidmFsdWVUZXh0Iiwic2VsZWN0ZWRMZW5ndGgiLCJzZWxlY3RlZFZhbHVlc0NvdW50IiwibW9yZVNlbGVjdGVkT3B0aW9ucyIsImFnZ3JlZ2F0ZWRWYWx1ZVRleHQiLCJqb2luIiwiY291bnRUZXh0Iiwic2tpcElucHV0U2V0IiwiZm9yY2UiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJzZXJ2ZXJTZWFyY2giLCJ2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyIsImhhc0V4YWN0T3B0aW9uIiwiaXNPcHRpb25WaXNpYmxlIiwiZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmciLCJzZXROZXdPcHRpb24iLCJyZW1vdmVOZXdPcHRpb24iLCJzY3JvbGxUb1RvcCIsImFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsIm1vcmVWaXNpYmxlU2lkZXMiLCJzaG93T25MZWZ0IiwiYnV0dG9uQ29vcmRzIiwidmlld3BvcnRXaWR0aCIsImhpZGRlbk9uUmlnaHQiLCJoaWRkZW5PbkxlZnQiLCJyaWdodCIsImVsZUNvb3JkcyIsIngiLCJzY3JvbGxYIiwieSIsInNjcm9sbFkiLCJvZmZzZXRIZWlnaHQiLCJzZXRPcHRpb25Qcm9wIiwic2Nyb2xsVG9wIiwiZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgiLCJlbGxpcHNpc09ubHkiLCJhbGxvd0h0bWwiLCJsYXN0T3B0aW9uIiwic29tZSIsImRpc3BsYXlWYWx1ZXMiLCJzdHJ1Y3R1cmVPcHRpb25Hcm91cCIsImNvdW50IiwiZmxvb3IiLCJkaXJlY3Rpb24iLCJwcm9wTmFtZSIsImlzU2lsZW50Iiwic2V0RHJvcGJveFBvc2l0aW9uIiwibW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0IiwiaXNQb3B1cEFjdGl2ZSIsImZvY3VzIiwiJG5ld0ZvY3VzZWRFbGUiLCIkZm9jdXNlZEVsZSIsImdldFNpYmxpbmciLCJmaXJzdFZpc2libGVPcHRpb25JbmRleCIsInRvZ2dsZUZvY3VzZWRQcm9wIiwibW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXciLCJuZXdTY3JvbGxUb3AiLCJjb250YWluZXJSZWN0Iiwib3B0aW9uUmVjdCIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImJvdHRvbSIsImNvbnRhaW5lckhlaWdodCIsIm9wdGlvblRvcCIsIm9wdGlvbkJvdHRvbSIsIm9wdGlvbk9mZnNldFRvcCIsIm9mZnNldFRvcCIsIm9wdGlvbnNUb3AiLCJpc0FkZGluZyIsInNlbGVjdGVkSW5kZXgiLCJ0b2dnbGVTZWxlY3RlZFByb3AiLCJ0b2dnbGVBbGxPcHRpb25zQ2xhc3MiLCJnZXRPcHRpb25JbmRleCIsIiRwcmV2U2VsZWN0ZWRPcHRpb24iLCJiZWZvcmVTZWxlY3ROZXdWYWx1ZSIsImxhc3RTY3JvbGxUb3AiLCJmb2N1c2VkT3B0aW9uSW5kZXgiLCJpc0Nsb3NlZCIsImlzUmVzZXQiLCJyZXJlbmRlciIsImdldE9wdGlvbk9iaiIsInJlbW92ZU9wdGlvbiIsInNvcnQiLCJhIiwiYiIsImRlc3RydWN0dXJlT3B0aW9uR3JvdXAiLCJjaGlsZEFycmF5IiwiY29uY2F0IiwicmVzZXRGb3JtIiwib25SZXNpemVNZXRob2QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7NjlCQUFPLElBQU1BLEVBQWIseUIsNEZBQUEsUyxVQUFBLE8sRUFBQSxFLEVBQUEsZ0NBQ2tCQyxFQUFNQyxHQUNmRCxJQUlMQyxFQUFZQSxFQUFVQyxNQUFNLEtBRTVCQyxLQUFLQyxZQUFZSixHQUFNSyxTQUFRLFNBQUNDLEdBQVUsT0FDeEMsRUFBQUEsRUFBTUMsV0FBVUMsSUFBaEIsVUFBdUJQLFVBVDdCLGtDQWFxQkQsRUFBTUMsR0FDbEJELElBSUxDLEVBQVlBLEVBQVVDLE1BQU0sS0FFNUJDLEtBQUtDLFlBQVlKLEdBQU1LLFNBQVEsU0FBQ0MsR0FBVSxPQUN4QyxFQUFBQSxFQUFNQyxXQUFVRSxPQUFoQixVQUEwQlIsVUFyQmhDLGtDQXlCcUJELEVBQU1DLEVBQVdTLEdBU2xDLElBQUlDLEVBUkosR0FBS1gsRUFjTCxZQVZjWSxJQUFWRixJQUNGQSxFQUFRRyxRQUFRSCxJQUtsQlAsS0FBS0MsWUFBWUosR0FBTUssU0FBUSxTQUFDQyxHQUM5QkssRUFBVUwsRUFBTUMsVUFBVU8sT0FBT2IsRUFBV1MsTUFHdkNDLElBeENYLCtCQTJDa0JYLEVBQU1DLEdBQ3BCLFFBQUtELEdBSUVBLEVBQUtPLFVBQVVRLFNBQVNkLEtBaERuQyxrQ0FtRHFCRCxHQUNqQixRQUFLQSxHQUlFQSxFQUFLZ0IsWUFBY2hCLEVBQUtpQixjQXhEbkMsMENBMkQ2QmpCLEdBQ3pCLElBQUtBLEVBQ0gsTUFBTyxHQUdULElBQUlrQixFQUFNbEIs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RCxFQUFNblEsUUFBUTJILElBR3hCWSxJQUFnQjZILElBQ2xCQSxHQUFnRSxJQUFwRDdILEVBQVk4SixjQUFjclMsUUFBUTJILElBR2hEeEgsRUFBRWlRLFVBQVlBLEVBRVRxQyxJQUNIQSxFQUFpQmhVLElBQVVrSixHQUd0QixDQUNMeUksWUFDQXFDLG9CQXY5RE4sMkNBMjlEdUJyUSxHQUNuQixJQUFJcEQsRUFBUyxHQUNUaVIsRUFBZSxHQW9CbkIsT0FqQkE3TixFQUFRekYsU0FBUSxTQUFDd0QsR0FDZixHQUFJQSxFQUFFdUksYUFBYyxDQUNsQixJQUFJeU8sRUFBYSxHQUNqQmhYLEVBQUVpQyxRQUFVK1UsRUFDWmxILEVBQWE5UCxFQUFFSixPQUFTb1gsRUFFeEJuWSxFQUFPb0UsS0FBS2pELE9BS2hCaUMsRUFBUXpGLFNBQVEsU0FBQ3dELEdBQ1hBLEVBQUV3SSxlQUNKc0gsRUFBYTlQLEVBQUVrUSxZQUFZak4sS0FBS2pELE1BSTdCbkIsSUFqL0RYLDZDQW8vRHlCb0QsR0FDckIsSUFBSXBELEVBQVMsR0FPYixPQUxBb0QsRUFBUXpGLFNBQVEsU0FBQ3dELEdBQ2ZuQixFQUFPb0UsS0FBS2pELEdBQ1puQixFQUFTQSxFQUFPb1ksT0FBT2pYLEVBQUVpQyxZQUdwQnBELElBNS9EWCxtQ0ErL0RlMkksR0FDWHRMLHVCQUFxQkksS0FBSzBKLFNBQVUsa0JBQ3BDOUosb0JBQWtCSSxLQUFLMEosU0FBVSxvQkFDakMxSixLQUFLd1EsZUFBZXRGLEVBQWFsTCxXLDJCQWxnRXJDLEtBeW1FQXdHLFNBQVNnSCxpQkFBaUIsUUFBUzlILEVBQWNrVixXQUNqRDFaLE9BQU9zTSxpQkFBaUIsU0FBVTlILEVBQWNtVixnQkFFaEQzWixPQUFPd0UsY0FBZ0JBLEciLCJmaWxlIjoidmlydHVhbC1zZWxlY3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIERvbVV0aWxzIHtcclxuICBzdGF0aWMgYWRkQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgX3RoaXMuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgX3RoaXMuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdG9nZ2xlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lLCBpc0FkZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNBZGQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpc0FkZCA9IEJvb2xlYW4oaXNBZGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGVkO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgaXNBZGRlZCA9IF90aGlzLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBpc0FkZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaXNBZGRlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYXNDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzRWxsaXBzaXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZS5zY3JvbGxXaWR0aCA+ICRlbGUub2Zmc2V0V2lkdGg7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TW9yZVZpc2libGVTaWRlcygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBib3ggPSAkZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGF2YWlsYWJsZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgbGV0IGxlZnRBcmVhID0gYm94LmxlZnQ7XHJcbiAgICBsZXQgdG9wQXJlYSA9IGJveC50b3A7XHJcbiAgICBsZXQgcmlnaHRBcmVhID0gYXZhaWxhYmxlV2lkdGggLSBsZWZ0QXJlYSAtIGJveC53aWR0aDtcclxuICAgIGxldCBib3R0b21BcmVhID0gYXZhaWxhYmxlSGVpZ2h0IC0gdG9wQXJlYSAtIGJveC5oZWlnaHQ7XHJcbiAgICBsZXQgaG9yaXpvbnRhbCA9IGxlZnRBcmVhID4gcmlnaHRBcmVhID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuICAgIGxldCB2ZXJ0aWNhbCA9IHRvcEFyZWEgPiBib3R0b21BcmVhID8gJ3RvcCcgOiAnYm90dG9tJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBob3Jpem9udGFsLFxyXG4gICAgICB2ZXJ0aWNhbCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGF0YSgkZWxlLCBuYW1lLCB0eXBlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB2YWx1ZSA9ICRlbGUgPyAkZWxlLmRhdGFzZXRbbmFtZV0gOiAnJztcclxuXHJcbiAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcclxuICAgICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldERhdGEoJGVsZSwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZS5kYXRhc2V0W25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0U3R5bGUoJGVsZSwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZS5zdHlsZVtuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEVsZW1lbnRzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRlbGUubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZSA9IFskZWxlXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZTtcclxuICB9XHJcblxyXG4gIC8qKiBjb252ZXJ0IG9iamVjdCB0byBzdHlsZSBhdHRyaWJ1dGUgKi9cclxuICBzdGF0aWMgZ2V0U3R5bGVUZXh0KHByb3BzLCBza2lwQXR0ck5hbWUpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XHJcbiAgICAgIHJlc3VsdCArPSBgJHtrfTogJHtwcm9wc1trXX07YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmICFza2lwQXR0ck5hbWUpIHtcclxuICAgICAgcmVzdWx0ID0gYHN0eWxlPVwiJHtyZXN1bHR9XCJgO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKiogY29udmVydCBvYmplY3QgdG8gZG9tIGF0dHJpYnV0ZXMgKi9cclxuICBzdGF0aWMgZ2V0QXR0cmlidXRlc1RleHQoZGF0YSkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuXHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuIGh0bWw7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBkYXRhKSB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IGRhdGFba107XHJcblxyXG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGh0bWwgKz0gYCAke2t9PVwiJHt2YWx1ZX1cIiBgO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVdGlscyB7XHJcbiAgc3RhdGljIGdldFN0cmluZyh0ZXh0KSB7XHJcbiAgICByZXR1cm4gdGV4dCB8fCB0ZXh0ID09PSAwID8gdGV4dC50b1N0cmluZygpIDogJyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29udmVydFRvQm9vbGVhbih2YWx1ZSwgZGVmYXVsdFZhbHVlID0gZmFsc2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNFbXB0eSh2YWx1ZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTm90RW1wdHkodmFsdWUpIHtcclxuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVJdGVtRnJvbUFycmF5KGFycmF5LCB2YWx1ZSwgY2xvbmVBcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoIHx8ICF2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNsb25lQXJyYXkpIHtcclxuICAgICAgYXJyYXkgPSBbLi4uYXJyYXldO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xyXG5cclxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlQXJyYXlFbXB0eShhcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXJyYXkuZmlsdGVyKChkKSA9PiAhIWQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdlbmVyYXRlVVVJRCgpIHtcclxuICAgIHJldHVybiAoWzFlN10gKyAtMWUzICsgLTRlMyArIC04ZTMgKyAtMWUxMSkucmVwbGFjZSgvWzAxOF0vZywgKGMpID0+XHJcbiAgICAgIChcclxuICAgICAgICBjIF5cclxuICAgICAgICAoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJiAoMTUgPj4gKGMgLyA0KSkpXHJcbiAgICAgICkudG9TdHJpbmcoMTYpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBVdGlscywgRG9tVXRpbHMgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmNvbnN0IHZpcnR1YWxTZWxlY3RWZXJzaW9uID0gJ3YxLjAuNic7XHJcbmNvbnN0IGRyb3Bib3hDbG9zZUJ1dHRvbkZ1bGxIZWlnaHQgPSA0ODtcclxuY29uc3Qgc2VhcmNoSGVpZ2h0ID0gNDA7XHJcbmNvbnN0IG5vbmVPcHRpb25WYWx1ZSA9ICd7I3ZpcnR1YWwtc2VsZWN0LW5vbmUtb3B0aW9uI30nO1xyXG5cclxuY29uc3Qga2V5RG93bk1ldGhvZE1hcHBpbmcgPSB7XHJcbiAgMTM6ICdvbkVudGVyUHJlc3MnLFxyXG4gIDI3OiAnb25Fc2NQcmVzcycsXHJcbiAgMzg6ICdvblVwQXJyb3dQcmVzcycsXHJcbiAgNDA6ICdvbkRvd25BcnJvd1ByZXNzJyxcclxufTtcclxuXHJcbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgVmlydHVhbFNlbGVjdCAqL1xyXG5leHBvcnQgY2xhc3MgVmlydHVhbFNlbGVjdCB7XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgVmlydHVhbFNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7KGVsZW1lbnR8c3RyaW5nKX0gZWxlIC0gUGFyZW50IGVsZW1lbnQgdG8gcmVuZGVyIFZpcnR1YWxTZWxlY3RcclxuICAgKiBAcHJvcGVydHkge29iamVjdFtdfSBvcHRpb25zIC0gQXJyYXkgb2Ygb2JqZWN0IHRvIHNob3cgYXMgb3B0aW9uc1xyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10udmFsdWUgLSBWYWx1ZSBvZiB0aGUgb3B0aW9uXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS5sYWJlbCAtIERpc3BsYXkgdGV4dCBvZiB0aGUgb3B0aW9uXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS5kZXNjcmlwdGlvbiAtIFRleHQgdG8gc2hvdyBhbG9uZyB3aXRoIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfGFycmF5KX0gb3B0aW9uc1tdLmFsaWFzIC0gQWx0ZXJuYXRpdmUgbGFiZWxzIHRvIHVzZSBvbiBzZWFyY2guIEFycmF5IG9mIHN0cmluZyBvciBjb21tYSBzZXBhcmF0ZWQgc3RyaW5nLlxyXG4gICAqIEBwcm9wZXJ0eSB7YXJyYXl9IG9wdGlvbnNbXS5vcHRpb25zIC0gTGlzdCBvZiBvcHRpb25zIGZvciBvcHRpb24gZ3JvdXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3ZhbHVlS2V5PXZhbHVlXSAtIE9iamVjdCBrZXkgdG8gdXNlIHRvIGdldCB2YWx1ZSBmcm9tIG9wdGlvbnMgYXJyYXlcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsS2V5PWxhYmVsXSAtIE9iamVjdCBrZXkgdG8gdXNlIHRvIGdldCBsYWJlbCBmcm9tIG9wdGlvbnMgYXJyYXlcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Rlc2NyaXB0aW9uS2V5PWRlc2NyaXB0aW9uXSAtIE9iamVjdCBrZXkgdG8gdXNlIHRvIGdldCBkZXNjcmlwdGlvbiBmcm9tIG9wdGlvbnMgYXJyYXlcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2FsaWFzS2V5PWFsaWFzXSAtIEtleSBuYW1lIHRvIGdldCBhbGlhcyBmcm9tIG9wdGlvbnMgb2JqZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlwbGU9ZmFsc2VdIC0gRW5hYmxlIG11bHRpc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2VhcmNoPWZhbHNlXSAtIEVuYWJsZSBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoaWRlQ2xlYXJCdXR0b249ZmFsc2VdIC0gSGlkZSBjbGVhciBidXR0b25cclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvU2VsZWN0Rmlyc3RPcHRpb249ZmFsc2VdIC0gU2VsZWN0IGZpcnN0IG9wdGlvbiBieSBkZWZhdWx0IG9uIGxvYWRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoYXNPcHRpb25EZXNjcmlwdGlvbj1mYWxzZV0gLSBIYXMgZGVzY3JpcHRpb24gdG8gc2hvdyBhbG9uZyB3aXRoIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbZGlzYWJsZVNlbGVjdEFsbD1mYWxzZV0gLSBEaXNhYmxlIHNlbGVjdCBhbGwgZmVhdHVyZSBvZiBtdWx0aXBsZSBzZWxlY3RcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW29wdGlvbnNDb3VudD01fDRdIC0gTm8ub2Ygb3B0aW9ucyB0byBzaG93IG9uIHZpZXdwb3J0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25IZWlnaHQ9NDBweHw2MHB4XSAtIEhlaWdodCBvZiBlYWNoIGRyb3Bkb3duIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Bvc2l0aW9uPWF1dG9dIC0gUG9zaXRpb24gb2YgZHJvcGJveCAodG9wLCBib3R0b20sIGF1dG8pXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbGFjZWhvbGRlcj1TZWxlY3RdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gb3B0aW9ucyBzZWxlY3RlZFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9PcHRpb25zVGV4dD1ObyBvcHRpb25zIGZvdW5kXSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgdG8gc2hvd1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9TZWFyY2hSZXN1bHRzVGV4dD1ObyByZXN1bHRzIGZvdW5kXSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIHJlc3VsdHMgb24gc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzZWxlY3RBbGxUZXh0PVNlbGVjdCBhbGxdIC0gVGV4dCB0byBzaG93IG5lYXIgc2VsZWN0IGFsbCBjaGVja2JveCB3aGVuIHNlYXJjaCBpcyBkaXNhYmxlZFxyXG4gICAqIEBwcm9wZXJ0eSB7YXJyYXl9IFtkaXNhYmxlZE9wdGlvbnNdIC0gT3B0aW9ucyB0byBkaXNhYmxlIChhcnJheSBvZiB2YWx1ZXMpXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfGFycmF5KX0gW3NlbGVjdGVkVmFsdWVdIC0gU2luZ2xlIHZhbHVlIG9yIGFycmF5IG9mIHZhbHVlcyB0byBzZWxlY3Qgb24gaW5pdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NpbGVudEluaXRpYWxWYWx1ZVNldD1mYWxzZV0gLSBUbyBhdm9pZCBcImNoYW5nZSBldmVudFwiIHRyaWdnZXIgb24gc2V0dGluZyBpbml0aWFsIHZhbHVlXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcm9wYm94V2lkdGhdIC0gQ3VzdG9tIHdpZHRoIGZvciBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXg9MV0gLSBDU1Mgei1pbmRleCB2YWx1ZSBmb3IgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbm9PZkRpc3BsYXlWYWx1ZXM9NTBdIC0gTWF4aW11bSBuby5vZiB2YWx1ZXMgdG8gc2hvdyBpbiB0aGUgdG9vbHRpcCBmb3IgbXVsdGktc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYWxsb3dOZXdPcHRpb249ZmFsc2VdIC0gQWxsb3cgdG8gYWRkIG5ldyBvcHRpb24gYnkgc2VhcmNoaW5nXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbbWFya1NlYXJjaFJlc3VsdHM9ZmFsc2VdIC0gTWFyayBtYXRjaGVkIHRlcm0gaW4gbGFiZWxcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBGb250U2l6ZT0xNHB4XSAtIEZvbnQgc2l6ZSBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcEFsaWdubWVudD1jZW50ZXJdIC0gQ1NTIFRleHQgYWxpZ25tZW50IGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwTWF4V2lkdGg9MzAwcHhdIC0gQ1NTIG1heCB3aWR0aCBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dTZWxlY3RlZE9wdGlvbnNGaXJzdD1mYWxzZV0gLSBTaG93IHNlbGVjdGVkIG9wdGlvbnMgYXQgdGhlIHRvcCBvZiB0aGUgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gLSBOYW1lIGF0dHJpYnV0ZSBmb3IgaGlkZGVuIGlucHV0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBba2VlcEFsd2F5c09wZW5dIC0gS2VlcCBkcm9wYm94IGFsd2F5cyBvcGVuIHdpdGggZml4ZWQgaGVpZ2h0XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhWYWx1ZXM9MF0gLSBNYXhpbXVtIG5vLm9mIG9wdGlvbnMgYWxsb3dlZCB0byBjaG9vc2UgaW4gbXVsdGlwbGUgc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthZGRpdGlvbmFsQ2xhc3Nlc10gLSBBZGRpdGlvbmFsIGNsYXNzZXMgZm9yIHdyYXBwZXIgZWxlbWVudFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dEcm9wYm94QXNQb3B1cD10cnVlXSAtIFNob3cgZHJvcGJveCBhcyBwb3B1cCBvbiBzbWFsbCBzY3JlZW4gbGlrZSBtb2JpbGVcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3BvcHVwRHJvcGJveEJyZWFrcG9pbnQ9NTc2cHhdIC0gTWF4aW11bSBzY3JlZW4gd2lkdGggdGhhdCBhbGxvd2VkIHRvIHNob3cgZHJvcGJveCBhcyBwb3B1cFxyXG4gICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtvblNlcnZlclNlYXJjaF0gLSBDYWxsYmFjayBmdW5jdGlvbiB0byBpbnRlZ3JhdGUgc2VydmVyIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc2VhcmNoUGxhY2Vob2xkZXI9U2VhcmNoLi4uXSAtIFRleHQgdG8gc2hvdyBpbnNpZGUgc2VhcmNoIGlucHV0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYWxsb3dOb25lT3B0aW9uPWZhbHNlXSAtIEluIHNpbmdsZSBzZWxlY3Rpb24gbW9kZSBvbmx5IGFuZCB3aGVuIGtlZXAgYWx3YXlzIG9wZW4gaXMgb246IGRpc3BsYXkgYSBub25lIG9wdGlvbiB0aGF0IGNsZWFycyB0aGUgc2VsZWN0aW9uXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtub25lT3B0aW9uVGV4dD1Ob25lXSAtIFRleHQgdG8gYmUgZGlzcGxheSBpZiBhbGxvd05vbmUgb3B0aW9uIGlzIGFjdGl2ZVxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FwcGVuZFRvQm9keT1mYWxzZV0gLSBXaGVuIHNldCB0byB0cnVlIGFuZCBrZWVwQWx3YXlzIG9wZW4gaXMgb2ZmIHdlIGFyZSBhZGRpbmcgdGhlIGRyb3Bib3ggZWxlbWVudCB0byB0aGUgYm9keVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuc2V0UHJvcHMob3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKG9wdGlvbnMuZGlzYWJsZWRPcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMub3B0aW9ucyk7XHJcbiAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgQ291bGRuJ3QgaW5pdGlhdGUgVmlydHVhbCBTZWxlY3RgKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiByZW5kZXIgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKCF0aGlzLiRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB3cmFwcGVyQ2xhc3NlcyA9ICd2c2NvbXAtd3JhcHBlcic7XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsICF0aGlzLm11bHRpcGxlLCB0cnVlKTtcclxuICAgIGxldCBjbGVhckJ1dHRvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnQ2xlYXInKTtcclxuXHJcbiAgICBsZXQgZHJvcGJveENvbnRhaW5lclN0eWxlID0ge1xyXG4gICAgICAnei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBnZXRXcmFwcGVyQ2xhc3NlcyA9ICgpID0+IHtcclxuICAgICAgbGV0IGNsYXNzZXMgPSAnJztcclxuXHJcbiAgICAgIGlmICh0aGlzLmFkZGl0aW9uYWxDbGFzc2VzKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnICcgKyB0aGlzLmFkZGl0aW9uYWxDbGFzc2VzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBtdWx0aXBsZSc7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlU2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICBjbGFzc2VzICs9ICcgaGFzLXNlbGVjdC1hbGwnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucG9zaXRpb24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIHBvc2l0aW9uLXRvcCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5oaWRlQ2xlYXJCdXR0b24pIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgaGFzLWNsZWFyLWJ1dHRvbic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmtlZXBBbHdheXNPcGVuKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGtlZXAtYWx3YXlzLW9wZW4gb3BlbmVkJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgY2xvc2VkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgc2hvdy1hcy1wb3B1cCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZHJvcGJveFdpZHRoKSB7XHJcbiAgICAgICAgICBkcm9wYm94Q29udGFpbmVyU3R5bGUud2lkdGggPSB0aGlzLmRyb3Bib3hXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NlYXJjaCkge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtc2VhcmNoLWlucHV0JztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGNsYXNzZXM7XHJcbiAgICB9O1xyXG5cclxuICAgIHdyYXBwZXJDbGFzc2VzICs9IGdldFdyYXBwZXJDbGFzc2VzKCk7XHJcblxyXG4gICAgdGhpcy5ndWlkID0gVXRpbHMuZ2VuZXJhdGVVVUlEKCk7XHJcblxyXG4gICAgbGV0IGRyb3Bib3hDb250YWluZXIgPSBgPGRpdiBpZD1cInZzLSR7XHJcbiAgICAgIHRoaXMuZ3VpZFxyXG4gICAgfVwiIGNsYXNzPVwidnNjb21wLWRyb3Bib3gtY29udGFpbmVyXCIgJHtEb21VdGlscy5nZXRTdHlsZVRleHQoXHJcbiAgICAgIGRyb3Bib3hDb250YWluZXJTdHlsZVxyXG4gICAgKX0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtZHJvcGJveFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLXdyYXBwZXJcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zLWxvYWRlclwiPjwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1saXN0XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9uc1wiPjwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtbm8tb3B0aW9uc1wiPiR7dGhpcy5ub09wdGlvbnNUZXh0fTwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtbm8tc2VhcmNoLXJlc3VsdHNcIj4ke3RoaXMubm9TZWFyY2hSZXN1bHRzVGV4dH08L2Rpdj5cclxuXHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtZHJvcGJveC1jbG9zZS1idXR0b25cIj48aSBjbGFzcz1cInZzY29tcC1jbGVhci1pY29uXCI+PC9pPjwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCIke3dyYXBwZXJDbGFzc2VzfVwiIHRhYmluZGV4PVwiMFwiPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIiR7dGhpcy5uYW1lfVwiIGNsYXNzPVwidnNjb21wLWhpZGRlbi1pbnB1dFwiPlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXRvZ2dsZS1idXR0b25cIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtdmFsdWVcIiAke3ZhbHVlVG9vbHRpcH0+XHJcbiAgICAgICAgICAgICR7dGhpcy5wbGFjZWhvbGRlcn1cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtYXJyb3dcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWNsZWFyLWJ1dHRvbiB0b2dnbGUtYnV0dG9uLWNoaWxkXCIgJHtjbGVhckJ1dHRvblRvb2x0aXB9PlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cInZzY29tcC1jbGVhci1pY29uXCI+PC9pPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICR7dGhpcy5rZWVwQWx3YXlzT3BlbiB8fCAhdGhpcy5hcHBlbmRUb0JvZHkgPyBkcm9wYm94Q29udGFpbmVyIDogJyd9XHJcblxyXG4gICAgICA8L2Rpdj5gO1xyXG5cclxuICAgIHRoaXMuJGVsZS5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgdGhpcy4kYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHJcbiAgICB0aGlzLiR3cmFwcGVyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtd3JhcHBlcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdG9nZ2xlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kY2xlYXJCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1jbGVhci1idXR0b24nKTtcclxuICAgIHRoaXMuJGRyb3Bib3hDbG9zZUJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1kcm9wYm94LWNsb3NlLWJ1dHRvbidcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCF0aGlzLmtlZXBBbHdheXNPcGVuICYmIHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgIC8vIEFwcGVuZCB0byBib2R5IChiZXRhKVxyXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgdGhpcy4kYm9keS5hcHBlbmQoXHJcbiAgICAgICAgZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZHJvcGJveENvbnRhaW5lcilcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAjdnMtJHt0aGlzLmd1aWR9LnZzY29tcC1kcm9wYm94LWNvbnRhaW5lcmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN2cy0ke3RoaXMuZ3VpZH1gKTtcclxuXHJcbiAgICAgIGxldCBjbGFzc2VzID0gJ3ZzY29tcC13cmFwcGVyLWJvZHknO1xyXG4gICAgICBjbGFzc2VzICs9IGdldFdyYXBwZXJDbGFzc2VzKCk7XHJcblxyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRkcm9wYm94RWwsIGAke2NsYXNzZXN9YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJy52c2NvbXAtZHJvcGJveC1jb250YWluZXInXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuJGRyb3Bib3hFbCA9IHRoaXMuJGVsZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiRzZWFyY2ggPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtd3JhcHBlcicpO1xyXG4gICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lciA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1vcHRpb25zLWNvbnRhaW5lcidcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy4kb3B0aW9uc0xpc3QgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb25zLWxpc3QnKTtcclxuICAgIHRoaXMuJG9wdGlvbnMgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb25zJyk7XHJcbiAgICB0aGlzLiR2YWx1ZVRleHQgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC12YWx1ZScpO1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1oaWRkZW4taW5wdXQnKTtcclxuICAgIHRoaXMuJG5vT3B0aW9ucyA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW5vLW9wdGlvbnMnKTtcclxuICAgIHRoaXMuJG5vU2VhcmNoUmVzdWx0cyA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1uby1zZWFyY2gtcmVzdWx0cydcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZnRlclJlbmRlcldyYXBwZXIoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlck9wdGlvbnMoKSB7XHJcbiAgICBsZXQgaHRtbCA9ICcnO1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gdGhpcy5nZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgbGV0IGNoZWNrYm94SHRtbCA9ICcnO1xyXG4gICAgbGV0IG5ld09wdGlvbkljb25IdG1sID0gJyc7XHJcbiAgICBsZXQgbWFya1NlYXJjaFJlc3VsdHMgPVxyXG4gICAgICB0aGlzLm1hcmtTZWFyY2hSZXN1bHRzICYmIHRoaXMuc2VhcmNoVmFsdWUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBsZXQgc2VhcmNoUmVnZXg7XHJcblxyXG4gICAgbGV0IHN0eWxlVGV4dCA9IERvbVV0aWxzLmdldFN0eWxlVGV4dCh7XHJcbiAgICAgIGhlaWdodDogdGhpcy5vcHRpb25IZWlnaHQgKyAncHgnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKG1hcmtTZWFyY2hSZXN1bHRzKSB7XHJcbiAgICAgIHNlYXJjaFJlZ2V4ID0gbmV3IFJlZ0V4cChgKCR7dGhpcy5zZWFyY2hWYWx1ZX0pYCwgJ2dpJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgY2hlY2tib3hIdG1sID0gJzxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvblwiPjwvc3Bhbj4nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGxldCBuZXdPcHRpb25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJ05ldyBPcHRpb24nKTtcclxuICAgICAgbmV3T3B0aW9uSWNvbkh0bWwgPSBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtbmV3LW9wdGlvbi1pY29uXCIgJHtuZXdPcHRpb25Ub29sdGlwfT48L3NwYW4+YDtcclxuICAgIH1cclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCBvcHRpb25MYWJlbCA9IGQubGFiZWw7XHJcbiAgICAgIGxldCBvcHRpb25DbGFzc2VzID0gJ3ZzY29tcC1vcHRpb24nO1xyXG4gICAgICBsZXQgb3B0aW9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCcnLCB0cnVlKTtcclxuICAgICAgbGV0IGxlZnRTZWN0aW9uID0gY2hlY2tib3hIdG1sO1xyXG4gICAgICBsZXQgcmlnaHRTZWN0aW9uID0gJyc7XHJcbiAgICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xyXG5cclxuICAgICAgaWYgKGQuaXNGb2N1c2VkKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGZvY3VzZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGRpc2FibGVkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGdyb3VwLXRpdGxlJztcclxuICAgICAgICBsZWZ0U2VjdGlvbiA9ICcnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChkLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBzZWxlY3RlZCc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGdyb3VwLW9wdGlvbic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSBgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb24tZGVzY3JpcHRpb25cIiAke29wdGlvblRvb2x0aXB9PiR7ZC5kZXNjcmlwdGlvbn08L2Rpdj5gO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgY3VycmVudC1uZXcnO1xyXG4gICAgICAgIHJpZ2h0U2VjdGlvbiArPSBuZXdPcHRpb25JY29uSHRtbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAobWFya1NlYXJjaFJlc3VsdHMgJiYgIWQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgICBvcHRpb25MYWJlbCA9IG9wdGlvbkxhYmVsLnJlcGxhY2Uoc2VhcmNoUmVnZXgsICc8bWFyaz4kMTwvbWFyaz4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCIke29wdGlvbkNsYXNzZXN9XCIgZGF0YS12YWx1ZT1cIiR7XHJcbiAgICAgICAgZC52YWx1ZVxyXG4gICAgICB9XCIgZGF0YS1pbmRleD1cIiR7ZC5pbmRleH1cIiBkYXRhLXZpc2libGUtaW5kZXg9XCIke1xyXG4gICAgICAgIGQudmlzaWJsZUluZGV4XHJcbiAgICAgIH1cIiAke3N0eWxlVGV4dH0+XHJcbiAgICAgICAgICAke2xlZnRTZWN0aW9ufVxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtb3B0aW9uLXRleHQgJHtcclxuICAgICAgICAgICAgZC52YWx1ZSA9PT0gbm9uZU9wdGlvblZhbHVlID8gJ25vbmUnIDogJydcclxuICAgICAgICAgIH1cIiAke29wdGlvblRvb2x0aXB9PlxyXG4gICAgICAgICAgICAke29wdGlvbkxhYmVsfVxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgJHtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgICR7cmlnaHRTZWN0aW9ufVxyXG4gICAgICAgIDwvZGl2PmA7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLiRvcHRpb25zLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICBsZXQgaGFzTm9PcHRpb25zID0gIXRoaXMub3B0aW9ucy5sZW5ndGg7XHJcbiAgICBsZXQgaGFzTm9TZWFyY2hSZXN1bHRzID0gIWhhc05vT3B0aW9ucyAmJiAhdmlzaWJsZU9wdGlvbnMubGVuZ3RoO1xyXG5cclxuICAgIGlmICghdGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLFxyXG4gICAgICAgICdoYXMtbm8tc2VhcmNoLXJlc3VsdHMnLFxyXG4gICAgICAgIGhhc05vU2VhcmNoUmVzdWx0c1xyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtbm8tb3B0aW9ucycsIGhhc05vT3B0aW9ucyk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNQb3NpdGlvbigpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zVG9vbHRpcCgpO1xyXG4gICAgLy90aGlzLm1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3KCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJTZWFyY2goKSB7XHJcbiAgICBpZiAoIXRoaXMuaGFzU2VhcmNoQ29udGFpbmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2hlY2tib3hIdG1sID0gJyc7XHJcbiAgICBsZXQgc2VhcmNoSW5wdXQgPSAnJztcclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiAhdGhpcy5kaXNhYmxlU2VsZWN0QWxsKSB7XHJcbiAgICAgIGNoZWNrYm94SHRtbCA9IGA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWxsLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uIHZzY29tcC10b2dnbGUtYWxsLWNoZWNrYm94XCI+PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1sYWJlbFwiPiR7dGhpcy5zZWxlY3RBbGxUZXh0fTwvc3Bhbj5cclxuICAgICAgICA8L3NwYW4+YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZWFyY2gpIHtcclxuICAgICAgc2VhcmNoSW5wdXQgPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWlucHV0XCIgcGxhY2Vob2xkZXI9XCIke3RoaXMuc2VhcmNoUGxhY2Vob2xkZXJ9XCI+XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLXNlYXJjaC1jbGVhclwiPiZ0aW1lczs8L3NwYW4+YDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwidnNjb21wLXNlYXJjaC1jb250YWluZXJcIj5cclxuICAgICAgICAke2NoZWNrYm94SHRtbH1cclxuICAgICAgICAke3NlYXJjaElucHV0fVxyXG4gICAgICA8L2Rpdj5gO1xyXG5cclxuICAgIHRoaXMuJHNlYXJjaC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgdGhpcy4kc2VhcmNoSW5wdXQgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtaW5wdXQnKTtcclxuICAgIHRoaXMuJHNlYXJjaENsZWFyID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWNsZWFyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVBbGxCdXR0b24gPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtdG9nZ2xlLWFsbC1idXR0b24nXHJcbiAgICApO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3ggPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveCdcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRzZWFyY2hJbnB1dCwgJ2tleXVwIGNoYW5nZScsICdvblNlYXJjaCcpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRzZWFyY2hDbGVhciwgJ2NsaWNrJywgJ29uU2VhcmNoQ2xlYXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQWxsQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVBbGxPcHRpb25zJyk7XHJcbiAgfVxyXG5cclxuICAvKiogcmVuZGVyIG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGRvbSBldmVudCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBhZGRFdmVudHMoKSB7XHJcbiAgICB0aGlzLmFkZEV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAnb25Eb2N1bWVudENsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHdyYXBwZXIsICdrZXlkb3duJywgJ29uS2V5RG93bicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVCdXR0b24sICdjbGljaycsICdvblRvZ2dsZUJ1dHRvbkNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGNsZWFyQnV0dG9uLCAnY2xpY2snLCAnb25DbGVhckJ1dHRvbkNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGRyb3Bib3hDb250YWluZXIsICdjbGljaycsICdvbkRyb3Bib3hDb250YWluZXJDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudChcclxuICAgICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uLFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnb25Ecm9wYm94Q2xvc2VCdXR0b25DbGljaydcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLCAnc2Nyb2xsJywgJ29uT3B0aW9uc1Njcm9sbCcpO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ2NsaWNrJywgJ29uT3B0aW9uc0NsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnMsICdtb3VzZW92ZXInLCAnb25PcHRpb25zTW91c2VPdmVyJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnMsICd0b3VjaG1vdmUnLCAnb25PcHRpb25zVG91Y2hNb3ZlJyk7XHJcbiAgfVxyXG5cclxuICBhZGRFdmVudCgkZWxlLCBldmVudHMsIG1ldGhvZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBldmVudHMgPSBVdGlscy5yZW1vdmVBcnJheUVtcHR5KGV2ZW50cy5zcGxpdCgnICcpKTtcclxuXHJcbiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgbGV0IGV2ZW50c0tleSA9IGAke21ldGhvZH0tJHtldmVudH1gO1xyXG4gICAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLmV2ZW50c1tldmVudHNLZXldO1xyXG5cclxuICAgICAgaWYgKCFjYWxsYmFjaykge1xyXG4gICAgICAgIGNhbGxiYWNrID0gdGhpc1ttZXRob2RdLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRzS2V5XSA9IGNhbGxiYWNrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWxlID0gRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hFdmVudCgkZWxlLCBldmVudE5hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoZXZlbnROYW1lLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgb25Eb2N1bWVudENsaWNrKGUpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5hcHBlbmRUb0JvZHkgJiZcclxuICAgICAgdGhpcy5tdWx0aXBsZSAmJlxyXG4gICAgICB0aGlzLmlzT3BlbmVkKCkgJiZcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdChgI3ZzLSR7dGhpcy5ndWlkfWApXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuOyAvLyBEb24ndCBjbG9zZSBkcm9wYm94IGlmIGFwcGVuZCB0byBib2R5LCBtdWx0aXBsZSBhbmQgY2xpY2sgaW5zaWRlIGRyb3Bib3dcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgJGVsZVRvS2VlcE9wZW4gPSBlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLXdyYXBwZXInKTtcclxuXHJcbiAgICBpZiAoJGVsZVRvS2VlcE9wZW4gIT09IHRoaXMuJHdyYXBwZXIpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uS2V5RG93bihlKSB7XHJcbiAgICBsZXQga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7XHJcbiAgICBsZXQgbWV0aG9kID0ga2V5RG93bk1ldGhvZE1hcHBpbmdba2V5XTtcclxuXHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgIHRoaXNbbWV0aG9kXShlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRW50ZXJQcmVzcygpIHtcclxuICAgIGlmICghdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0Rm9jdXNlZE9wdGlvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Fc2NQcmVzcygpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRG93bkFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbignbmV4dCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25VcEFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbigncHJldmlvdXMnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQnV0dG9uQ2xpY2soZSkge1xyXG4gICAgbGV0IGNoaWxkRWxlID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1idXR0b24tY2hpbGQnKTtcclxuXHJcbiAgICBpZiAoY2hpbGRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9nZ2xlRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgb25DbGVhckJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zU2Nyb2xsKCkge1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zQ2xpY2soZSkge1xyXG4gICAgdGhpcy5zZWxlY3RPcHRpb24oXHJcbiAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtb3B0aW9uOm5vdCguZGlzYWJsZWQpOm5vdCguZ3JvdXAtdGl0bGUpJylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDb250YWluZXJDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtZHJvcGJveCcpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDbG9zZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlT3ZlcihlKSB7XHJcbiAgICBsZXQgJGVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKTpub3QoLmdyb3VwLXRpdGxlKSdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCRlbGUgJiYgdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNPcHRpb24obnVsbCwgJGVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNUb3VjaE1vdmUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaChlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZShlLnRhcmdldC52YWx1ZSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaENsZWFyKCkge1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQWxsT3B0aW9ucygpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25SZXNpemUoKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNDb250YWluZXJIZWlnaHQodHJ1ZSk7XHJcbiAgfVxyXG4gIC8qKiBkb20gZXZlbnQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogYWZ0ZXIgZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWZ0ZXJSZW5kZXJXcmFwcGVyKCkge1xyXG4gICAgdGhpcy4kZWxlLnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZSk7XHJcblxyXG4gICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kZWxlLCAndnNjb21wLWVsZScpO1xyXG4gICAgdGhpcy5yZW5kZXJTZWFyY2goKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50cygpO1xyXG4gICAgdGhpcy5zZXRNZXRob2RzKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaW5pdGlhbFNlbGVjdGVkVmFsdWUpIHtcclxuICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChcclxuICAgICAgICB0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlLFxyXG4gICAgICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uICYmIHRoaXMudmlzaWJsZU9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QoXHJcbiAgICAgICAgdGhpcy52aXNpYmxlT3B0aW9uc1swXS52YWx1ZSxcclxuICAgICAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWZ0ZXJTZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHJlc2V0KSB7XHJcbiAgICBpZiAocmVzZXQpIHtcclxuICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqIGFmdGVyIGV2ZW50IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIHNldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBzZXRQcm9wcyhvcHRpb25zKSB7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zZXREZWZhdWx0UHJvcHMob3B0aW9ucyk7XHJcbiAgICB0aGlzLnNldFByb3BzRnJvbUVsZW1lbnRBdHRyKG9wdGlvbnMpO1xyXG5cclxuICAgIGxldCBjb252ZXJ0VG9Cb29sZWFuID0gVXRpbHMuY29udmVydFRvQm9vbGVhbjtcclxuXHJcbiAgICB0aGlzLiRlbGUgPSBvcHRpb25zLmVsZTtcclxuICAgIHRoaXMudmFsdWVLZXkgPSBvcHRpb25zLnZhbHVlS2V5O1xyXG4gICAgdGhpcy5sYWJlbEtleSA9IG9wdGlvbnMubGFiZWxLZXk7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uS2V5ID0gb3B0aW9ucy5kZXNjcmlwdGlvbktleTtcclxuICAgIHRoaXMuYWxpYXNLZXkgPSBvcHRpb25zLmFsaWFzS2V5O1xyXG4gICAgdGhpcy5vcHRpb25IZWlnaHRUZXh0ID0gb3B0aW9ucy5vcHRpb25IZWlnaHQ7XHJcbiAgICB0aGlzLm9wdGlvbkhlaWdodCA9IHBhcnNlRmxvYXQodGhpcy5vcHRpb25IZWlnaHRUZXh0KTtcclxuICAgIHRoaXMubXVsdGlwbGUgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubXVsdGlwbGUpO1xyXG4gICAgdGhpcy5oYXNTZWFyY2ggPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2VhcmNoKTtcclxuICAgIHRoaXMuaGlkZUNsZWFyQnV0dG9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmhpZGVDbGVhckJ1dHRvbik7XHJcbiAgICB0aGlzLmF1dG9TZWxlY3RGaXJzdE9wdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4oXHJcbiAgICAgIG9wdGlvbnMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uXHJcbiAgICApO1xyXG4gICAgdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5oYXNPcHRpb25EZXNjcmlwdGlvbik7XHJcbiAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldCA9IGNvbnZlcnRUb0Jvb2xlYW4oXHJcbiAgICAgIG9wdGlvbnMuc2lsZW50SW5pdGlhbFZhbHVlU2V0XHJcbiAgICApO1xyXG4gICAgdGhpcy5hbGxvd05ld09wdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5hbGxvd05ld09wdGlvbik7XHJcbiAgICB0aGlzLm1hcmtTZWFyY2hSZXN1bHRzID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLm1hcmtTZWFyY2hSZXN1bHRzKTtcclxuICAgIHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0ID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3RcclxuICAgICk7XHJcbiAgICB0aGlzLmRpc2FibGVTZWxlY3RBbGwgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuZGlzYWJsZVNlbGVjdEFsbCk7XHJcbiAgICB0aGlzLmtlZXBBbHdheXNPcGVuID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmtlZXBBbHdheXNPcGVuKTtcclxuICAgIHRoaXMuc2hvd0Ryb3Bib3hBc1BvcHVwID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLnNob3dEcm9wYm94QXNQb3B1cCk7XHJcbiAgICB0aGlzLm5vT3B0aW9uc1RleHQgPSBvcHRpb25zLm5vT3B0aW9uc1RleHQ7XHJcbiAgICB0aGlzLm5vU2VhcmNoUmVzdWx0c1RleHQgPSBvcHRpb25zLm5vU2VhcmNoUmVzdWx0c1RleHQ7XHJcbiAgICB0aGlzLnNlbGVjdEFsbFRleHQgPSBvcHRpb25zLnNlbGVjdEFsbFRleHQ7XHJcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gb3B0aW9ucy5wbGFjZWhvbGRlcjtcclxuICAgIHRoaXMucG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uO1xyXG4gICAgdGhpcy5kcm9wYm94V2lkdGggPSBvcHRpb25zLmRyb3Bib3hXaWR0aDtcclxuICAgIHRoaXMudG9vbHRpcEZvbnRTaXplID0gb3B0aW9ucy50b29sdGlwRm9udFNpemU7XHJcbiAgICB0aGlzLnRvb2x0aXBBbGlnbm1lbnQgPSBvcHRpb25zLnRvb2x0aXBBbGlnbm1lbnQ7XHJcbiAgICB0aGlzLnRvb2x0aXBNYXhXaWR0aCA9IG9wdGlvbnMudG9vbHRpcE1heFdpZHRoO1xyXG4gICAgdGhpcy5ub09mRGlzcGxheVZhbHVlcyA9IHBhcnNlSW50KG9wdGlvbnMubm9PZkRpc3BsYXlWYWx1ZXMpO1xyXG4gICAgdGhpcy56SW5kZXggPSBwYXJzZUludChvcHRpb25zLnpJbmRleCk7XHJcbiAgICB0aGlzLm1heFZhbHVlcyA9IHBhcnNlSW50KG9wdGlvbnMubWF4VmFsdWVzKTtcclxuICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZTtcclxuICAgIHRoaXMuYWRkaXRpb25hbENsYXNzZXMgPSBvcHRpb25zLmFkZGl0aW9uYWxDbGFzc2VzO1xyXG4gICAgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSA9IG9wdGlvbnMuc2VsZWN0ZWRWYWx1ZTtcclxuICAgIHRoaXMucG9wdXBEcm9wYm94QnJlYWtwb2ludCA9IG9wdGlvbnMucG9wdXBEcm9wYm94QnJlYWtwb2ludDtcclxuICAgIHRoaXMub25TZXJ2ZXJTZWFyY2ggPSBvcHRpb25zLm9uU2VydmVyU2VhcmNoO1xyXG4gICAgdGhpcy5zZWFyY2hQbGFjZWhvbGRlciA9IG9wdGlvbnMuc2VhcmNoUGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLml0ZW1zU2VsZWN0ZWRNZXNzYWdlID0gb3B0aW9ucy5pdGVtc1NlbGVjdGVkTWVzc2FnZTtcclxuICAgIHRoaXMuYWxsb3dOb25lT3B0aW9uID0gb3B0aW9ucy5hbGxvd05vbmVPcHRpb247XHJcbiAgICB0aGlzLm5vbmVPcHRpb25UZXh0ID0gb3B0aW9ucy5ub25lT3B0aW9uVGV4dDtcclxuICAgIHRoaXMuYXBwZW5kVG9Cb2R5ID0gb3B0aW9ucy5hcHBlbmRUb0JvZHk7XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuICAgIHRoaXMubmV3VmFsdWVzID0gW107XHJcbiAgICB0aGlzLmV2ZW50cyA9IHt9O1xyXG4gICAgdGhpcy50b29sdGlwRW50ZXJEZWxheSA9IDIwMDtcclxuICAgIHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uID0gMjUwO1xyXG4gICAgdGhpcy5zZWFyY2hWYWx1ZSA9ICcnO1xyXG4gICAgdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsID0gJyc7XHJcbiAgICB0aGlzLmlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIChvcHRpb25zLnNlYXJjaCA9PT0gdW5kZWZpbmVkICYmIHRoaXMubXVsdGlwbGUpIHx8XHJcbiAgICAgIHRoaXMuYWxsb3dOZXdPcHRpb25cclxuICAgICkge1xyXG4gICAgICB0aGlzLmhhc1NlYXJjaCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubWF4VmFsdWVzKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVNlbGVjdEFsbCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5oYXNTZXJ2ZXJTZWFyY2ggPSB0eXBlb2YgdGhpcy5vblNlcnZlclNlYXJjaCA9PT0gJ2Z1bmN0aW9uJztcclxuICAgIHRoaXMuc2hvd0FzUG9wdXAgPVxyXG4gICAgICB0aGlzLnNob3dEcm9wYm94QXNQb3B1cCAmJlxyXG4gICAgICAhdGhpcy5rZWVwQWx3YXlzT3BlbiAmJlxyXG4gICAgICB3aW5kb3cuaW5uZXJXaWR0aCA8PSBwYXJzZUZsb2F0KHRoaXMucG9wdXBEcm9wYm94QnJlYWtwb2ludCk7XHJcbiAgICB0aGlzLmhhc1NlYXJjaENvbnRhaW5lciA9XHJcbiAgICAgIHRoaXMuaGFzU2VhcmNoIHx8ICh0aGlzLm11bHRpcGxlICYmICF0aGlzLmRpc2FibGVTZWxlY3RBbGwpO1xyXG4gICAgdGhpcy5vcHRpb25zQ291bnQgPSB0aGlzLmdldE9wdGlvbnNDb3VudChvcHRpb25zLm9wdGlvbnNDb3VudCk7XHJcbiAgICB0aGlzLmhhbGZPcHRpb25zQ291bnQgPSBNYXRoLmNlaWwodGhpcy5vcHRpb25zQ291bnQgLyAyKTtcclxuICAgIHRoaXMub3B0aW9uc0hlaWdodCA9IHRoaXMuZ2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGVmYXVsdFByb3BzKG9wdGlvbnMpIHtcclxuICAgIGxldCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgdmFsdWVLZXk6ICd2YWx1ZScsXHJcbiAgICAgIGxhYmVsS2V5OiAnbGFiZWwnLFxyXG4gICAgICBkZXNjcmlwdGlvbktleTogJ2Rlc2NyaXB0aW9uJyxcclxuICAgICAgYWxpYXNLZXk6ICdhbGlhcycsXHJcbiAgICAgIG9wdGlvbnNDb3VudDogNSxcclxuICAgICAgbm9PZkRpc3BsYXlWYWx1ZXM6IDUwLFxyXG4gICAgICBvcHRpb25IZWlnaHQ6ICc0MHB4JyxcclxuICAgICAgbXVsdGlwbGU6IGZhbHNlLFxyXG4gICAgICBoaWRlQ2xlYXJCdXR0b246IGZhbHNlLFxyXG4gICAgICBhdXRvU2VsZWN0Rmlyc3RPcHRpb246IGZhbHNlLFxyXG4gICAgICBoYXNPcHRpb25EZXNjcmlwdGlvbjogZmFsc2UsXHJcbiAgICAgIHNpbGVudEluaXRpYWxWYWx1ZVNldDogZmFsc2UsXHJcbiAgICAgIGRpc2FibGVTZWxlY3RBbGw6IGZhbHNlLFxyXG4gICAgICBub09wdGlvbnNUZXh0OiAnTm8gb3B0aW9ucyBmb3VuZCcsXHJcbiAgICAgIG5vU2VhcmNoUmVzdWx0c1RleHQ6ICdObyByZXN1bHRzIGZvdW5kJyxcclxuICAgICAgc2VsZWN0QWxsVGV4dDogJ1NlbGVjdCBBbGwnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCcsXHJcbiAgICAgIHBvc2l0aW9uOiAnYXV0bycsXHJcbiAgICAgIHpJbmRleDogMSxcclxuICAgICAgYWxsb3dOZXdPcHRpb246IGZhbHNlLFxyXG4gICAgICBtYXJrU2VhcmNoUmVzdWx0czogZmFsc2UsXHJcbiAgICAgIHRvb2x0aXBGb250U2l6ZTogJzE0cHgnLFxyXG4gICAgICB0b29sdGlwQWxpZ25tZW50OiAnY2VudGVyJyxcclxuICAgICAgdG9vbHRpcE1heFdpZHRoOiAnMzAwcHgnLFxyXG4gICAgICBzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3Q6IGZhbHNlLFxyXG4gICAgICBuYW1lOiAnJyxcclxuICAgICAgYWRkaXRpb25hbENsYXNzZXM6ICcnLFxyXG4gICAgICBrZWVwQWx3YXlzT3BlbjogZmFsc2UsXHJcbiAgICAgIG1heFZhbHVlczogMCxcclxuICAgICAgc2hvd0Ryb3Bib3hBc1BvcHVwOiB0cnVlLFxyXG4gICAgICBwb3B1cERyb3Bib3hCcmVha3BvaW50OiAnNTc2cHgnLFxyXG4gICAgICBzZWFyY2hQbGFjZWhvbGRlcjogJ1NlYXJjaC4uLicsXHJcbiAgICAgIGl0ZW1zU2VsZWN0ZWRNZXNzYWdlOiAnc2VsZWN0ZWQnLFxyXG4gICAgICBhbGxvd05vbmVPcHRpb246IGZhbHNlLFxyXG4gICAgICBub25lT3B0aW9uVGV4dDogJ05vbmUnLFxyXG4gICAgICBhcHBlbmRUb0JvZHk6IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy5oYXNPcHRpb25EZXNjcmlwdGlvbikge1xyXG4gICAgICBkZWZhdWx0T3B0aW9ucy5vcHRpb25zQ291bnQgPSA0O1xyXG4gICAgICBkZWZhdWx0T3B0aW9ucy5vcHRpb25IZWlnaHQgPSAnNjBweCc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc2V0UHJvcHNGcm9tRWxlbWVudEF0dHIob3B0aW9ucykge1xyXG4gICAgbGV0ICRlbGUgPSBvcHRpb25zLmVsZTtcclxuICAgIGxldCBtYXBwaW5nID0ge1xyXG4gICAgICBtdWx0aXBsZTogJ211bHRpcGxlJyxcclxuICAgICAgcGxhY2Vob2xkZXI6ICdwbGFjZWhvbGRlcicsXHJcbiAgICAgIG5hbWU6ICduYW1lJyxcclxuICAgICAgJ2RhdGEtdmFsdWUta2V5JzogJ3ZhbHVlS2V5JyxcclxuICAgICAgJ2RhdGEtbGFiZWwta2V5JzogJ2xhYmVsS2V5JyxcclxuICAgICAgJ2RhdGEtZGVzY3JpcHRpb24ta2V5JzogJ2Rlc2NyaXB0aW9uS2V5JyxcclxuICAgICAgJ2RhdGEtYWxpYXMta2V5JzogJ2FsaWFzS2V5JyxcclxuICAgICAgJ2RhdGEtc2VhcmNoJzogJ3NlYXJjaCcsXHJcbiAgICAgICdkYXRhLWhpZGUtY2xlYXItYnV0dG9uJzogJ2hpZGVDbGVhckJ1dHRvbicsXHJcbiAgICAgICdkYXRhLWF1dG8tc2VsZWN0LWZpcnN0LW9wdGlvbic6ICdhdXRvU2VsZWN0Rmlyc3RPcHRpb24nLFxyXG4gICAgICAnZGF0YS1oYXMtb3B0aW9uLWRlc2NyaXB0aW9uJzogJ2hhc09wdGlvbkRlc2NyaXB0aW9uJyxcclxuICAgICAgJ2RhdGEtb3B0aW9ucy1jb3VudCc6ICdvcHRpb25zQ291bnQnLFxyXG4gICAgICAnZGF0YS1vcHRpb24taGVpZ2h0JzogJ29wdGlvbkhlaWdodCcsXHJcbiAgICAgICdkYXRhLXBvc2l0aW9uJzogJ3Bvc2l0aW9uJyxcclxuICAgICAgJ2RhdGEtbm8tb3B0aW9ucy10ZXh0JzogJ25vT3B0aW9uc1RleHQnLFxyXG4gICAgICAnZGF0YS1uby1zZWFyY2gtcmVzdWx0cy10ZXh0JzogJ25vU2VhcmNoUmVzdWx0c1RleHQnLFxyXG4gICAgICAnZGF0YS1zZWxlY3QtYWxsLXRleHQnOiAnc2VsZWN0QWxsVGV4dCcsXHJcbiAgICAgICdkYXRhLXNpbGVudC1pbml0aWFsLXZhbHVlLXNldCc6ICdzaWxlbnRJbml0aWFsVmFsdWVTZXQnLFxyXG4gICAgICAnZGF0YS1kcm9wYm94LXdpZHRoJzogJ2Ryb3Bib3hXaWR0aCcsXHJcbiAgICAgICdkYXRhLXotaW5kZXgnOiAnekluZGV4JyxcclxuICAgICAgJ2RhdGEtbm8tb2YtZGlzcGxheS12YWx1ZXMnOiAnbm9PZkRpc3BsYXlWYWx1ZXMnLFxyXG4gICAgICAnZGF0YS1hbGxvdy1uZXctb3B0aW9uJzogJ2FsbG93TmV3T3B0aW9uJyxcclxuICAgICAgJ2RhdGEtbWFyay1zZWFyY2gtcmVzdWx0cyc6ICdtYXJrU2VhcmNoUmVzdWx0cycsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZm9udC1zaXplJzogJ3Rvb2x0aXBGb250U2l6ZScsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtYWxpZ25tZW50JzogJ3Rvb2x0aXBBbGlnbm1lbnQnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLW1heC13aWR0aCc6ICd0b29sdGlwTWF4V2lkdGgnLFxyXG4gICAgICAnZGF0YS1zaG93LXNlbGVjdGVkLW9wdGlvbnMtZmlyc3QnOiAnc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0JyxcclxuICAgICAgJ2RhdGEtZGlzYWJsZS1zZWxlY3QtYWxsJzogJ2Rpc2FibGVTZWxlY3RBbGwnLFxyXG4gICAgICAnZGF0YS1rZWVwLWFsd2F5cy1vcGVuJzogJ2tlZXBBbHdheXNPcGVuJyxcclxuICAgICAgJ2RhdGEtbWF4LXZhbHVlcyc6ICdtYXhWYWx1ZXMnLFxyXG4gICAgICAnZGF0YS1hZGRpdGlvbmFsLWNsYXNzZXMnOiAnYWRkaXRpb25hbENsYXNzZXMnLFxyXG4gICAgICAnZGF0YS1zaG93LWRyb3Bib3gtYXMtcG9wdXAnOiAnc2hvd0Ryb3Bib3hBc1BvcHVwJyxcclxuICAgICAgJ2RhdGEtcG9wdXAtZHJvcGJveC1icmVha3BvaW50JzogJ3BvcHVwRHJvcGJveEJyZWFrcG9pbnQnLFxyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIG1hcHBpbmcpIHtcclxuICAgICAgbGV0IHZhbHVlID0gJGVsZS5nZXRBdHRyaWJ1dGUoayk7XHJcblxyXG4gICAgICBpZiAoayA9PT0gJ211bHRpcGxlJyAmJiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSAndHJ1ZScpKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICBvcHRpb25zW21hcHBpbmdba11dID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1ldGhvZHMoKSB7XHJcbiAgICBsZXQgJGVsZSA9IHRoaXMuJGVsZTtcclxuICAgICRlbGUudmlydHVhbFNlbGVjdCA9IHRoaXM7XHJcbiAgICAkZWxlLnZhbHVlID0gdGhpcy5tdWx0aXBsZSA/IFtdIDogJyc7XHJcbiAgICAkZWxlLnJlc2V0ID0gVmlydHVhbFNlbGVjdC5yZXNldDtcclxuICAgICRlbGUuc2V0VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LnNldFZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5zZXRPcHRpb25zID0gVmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS5zZXREaXNhYmxlZE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldERpc2FibGVkT3B0aW9uc01ldGhvZDtcclxuICAgICRlbGUudG9nZ2xlU2VsZWN0QWxsID0gVmlydHVhbFNlbGVjdC50b2dnbGVTZWxlY3RBbGw7XHJcbiAgICAkZWxlLmlzQWxsU2VsZWN0ZWQgPSBWaXJ0dWFsU2VsZWN0LmlzQWxsU2VsZWN0ZWQ7XHJcbiAgICAkZWxlLmFkZE9wdGlvbiA9IFZpcnR1YWxTZWxlY3QuYWRkT3B0aW9uTWV0aG9kO1xyXG4gICAgJGVsZS5nZXROZXdWYWx1ZSA9IFZpcnR1YWxTZWxlY3QuZ2V0TmV3VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLmdldERpc3BsYXlWYWx1ZSA9IFZpcnR1YWxTZWxlY3QuZ2V0RGlzcGxheVZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5vcGVuID0gVmlydHVhbFNlbGVjdC5vcGVuTWV0aG9kO1xyXG4gICAgJGVsZS5jbG9zZSA9IFZpcnR1YWxTZWxlY3QuY2xvc2VNZXRob2Q7XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHZhbHVlID0gW3ZhbHVlXTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZSA9IHZhbHVlLm1hcCgodikgPT4ge1xyXG4gICAgICByZXR1cm4gdiB8fCB2ID09IDAgPyB2LnRvU3RyaW5nKCkgOiAnJztcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCB2YWxpZFZhbHVlcyA9IFtdO1xyXG4gICAgbGV0IHZhbGlkSW5kZXhlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkLCBpZHgpID0+IHtcclxuICAgICAgbGV0IGlzU2VsZWN0ZWQgPSB2YWx1ZS5pbmRleE9mKGQudmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICAgIGlmIChpc1NlbGVjdGVkICYmICFkLmlzRGlzYWJsZWQgJiYgIWQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB2YWxpZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICAgIHZhbGlkSW5kZXhlcy5wdXNoKGlkeCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICB2YWxpZFZhbHVlcyA9IHZhbGlkVmFsdWVzWzBdO1xyXG4gICAgICB2YWxpZEluZGV4ZXMgPSB2YWxpZEluZGV4ZXNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5iZWZvcmVWYWx1ZVNldCgpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZSh2YWxpZFZhbHVlcywgdmFsaWRJbmRleGVzLCAhc2lsZW50Q2hhbmdlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpIHtcclxuICAgIGxldCBuZXdvcHRpb24gPSBvcHRpb25zICE9IHRoaXMub3B0aW9ucztcclxuICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zKGtlZXBWYWx1ZSwgbmV3b3B0aW9uKTtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChkaXNhYmxlZE9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlTWV0aG9kKG51bGwpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucyA9IFtdLCBzZXRPcHRpb25zUHJvcCA9IGZhbHNlKSB7XHJcbiAgICBkaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubWFwKChkKSA9PiBkLnRvU3RyaW5nKCkpO1xyXG4gICAgdGhpcy5kaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnM7XHJcblxyXG4gICAgaWYgKHNldE9wdGlvbnNQcm9wICYmIGRpc2FibGVkT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICBkLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJlcGFyZWRPcHRpb25zID0gW107XHJcbiAgICBsZXQgZGlzYWJsZWRPcHRpb25zID0gdGhpcy5kaXNhYmxlZE9wdGlvbnM7XHJcbiAgICBsZXQgaGFzRGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCB2YWx1ZUtleSA9IHRoaXMudmFsdWVLZXk7XHJcbiAgICBsZXQgbGFiZWxLZXkgPSB0aGlzLmxhYmVsS2V5O1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uS2V5ID0gdGhpcy5kZXNjcmlwdGlvbktleTtcclxuICAgIGxldCBhbGlhc0tleSA9IHRoaXMuYWxpYXNLZXk7XHJcbiAgICBsZXQgaGFzT3B0aW9uRGVzY3JpcHRpb24gPSB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uO1xyXG4gICAgbGV0IGdldFN0cmluZyA9IFV0aWxzLmdldFN0cmluZztcclxuICAgIGxldCBnZXRBbGlhcyA9IHRoaXMuZ2V0QWxpYXM7XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgbGV0IGhhc09wdGlvbkdyb3VwID0gZmFsc2U7XHJcblxyXG4gICAgbGV0IHByZXBhcmVPcHRpb24gPSAoZCkgPT4ge1xyXG4gICAgICBsZXQgdmFsdWUgPSBnZXRTdHJpbmcoZFt2YWx1ZUtleV0pO1xyXG4gICAgICBsZXQgY2hpbGRPcHRpb25zID0gZC5vcHRpb25zO1xyXG4gICAgICBsZXQgaXNHcm91cFRpdGxlID0gY2hpbGRPcHRpb25zID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICBsZXQgb3B0aW9uID0ge1xyXG4gICAgICAgIGluZGV4LFxyXG4gICAgICAgIHZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiBnZXRTdHJpbmcoZFtsYWJlbEtleV0pLFxyXG4gICAgICAgIGFsaWFzOiBnZXRBbGlhcyhkW2FsaWFzS2V5XSksXHJcbiAgICAgICAgaXNWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGlzR3JvdXBUaXRsZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmIChoYXNEaXNhYmxlZE9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb24uaXNEaXNhYmxlZCA9IGRpc2FibGVkT3B0aW9ucy5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBvcHRpb24uaXNHcm91cE9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgb3B0aW9uLmdyb3VwSW5kZXggPSBkLmdyb3VwSW5kZXg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChoYXNPcHRpb25EZXNjcmlwdGlvbikge1xyXG4gICAgICAgIG9wdGlvbi5kZXNjcmlwdGlvbiA9IGdldFN0cmluZyhkW2Rlc2NyaXB0aW9uS2V5XSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHByZXBhcmVkT3B0aW9ucy5wdXNoKG9wdGlvbik7XHJcbiAgICAgIGluZGV4Kys7XHJcblxyXG4gICAgICBpZiAoaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwSW5kZXggPSBvcHRpb24uaW5kZXg7XHJcbiAgICAgICAgaGFzT3B0aW9uR3JvdXAgPSB0cnVlO1xyXG5cclxuICAgICAgICBjaGlsZE9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICAgICAgZC5pc0dyb3VwT3B0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgIGQuZ3JvdXBJbmRleCA9IGdyb3VwSW5kZXg7XHJcblxyXG4gICAgICAgICAgcHJlcGFyZU9wdGlvbihkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBBZGQgbm9uZSBvcHRpb24gb25seSB3aGVuIGluIGxpc3QgbW9kZSAoYWx3YXlzIG9wZW4gYW5kIG9ubHkpXHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUgJiYgdGhpcy5hbGxvd05vbmVPcHRpb24pIHtcclxuICAgICAgb3B0aW9ucy51bnNoaWZ0KHtcclxuICAgICAgICB2YWx1ZTogbm9uZU9wdGlvblZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiB0aGlzLm5vbmVPcHRpb25UZXh0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2gocHJlcGFyZU9wdGlvbik7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0gcHJlcGFyZWRPcHRpb25zO1xyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gcHJlcGFyZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4ID0gdGhpcy5vcHRpb25zLmxlbmd0aCAtIDE7XHJcbiAgICB0aGlzLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5oYXNPcHRpb25Hcm91cCA9IGhhc09wdGlvbkdyb3VwO1xyXG4gICAgdGhpcy5zZXRTb3J0ZWRPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRTZXJ2ZXJPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCB0cnVlKTtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdzZXJ2ZXItc2VhcmNoaW5nJyk7XHJcbiAgfVxyXG5cclxuICBzZXRTb3J0ZWRPcHRpb25zKCkge1xyXG4gICAgbGV0IHNvcnRlZE9wdGlvbnMgPSBbLi4udGhpcy5vcHRpb25zXTtcclxuXHJcbiAgICBpZiAodGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgJiYgdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgaWYgKHRoaXMuaGFzT3B0aW9uR3JvdXApIHtcclxuICAgICAgICBzb3J0ZWRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9uc0dyb3VwKHNvcnRlZE9wdGlvbnMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNvcnRlZE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zKHNvcnRlZE9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zb3J0ZWRPcHRpb25zID0gc29ydGVkT3B0aW9ucztcclxuICB9XHJcblxyXG4gIHNldFZpc2libGVPcHRpb25zKCkge1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gWy4uLnRoaXMuc29ydGVkT3B0aW9uc107XHJcbiAgICBsZXQgbWF4T3B0aW9uc1RvU2hvdyA9IHRoaXMub3B0aW9uc0NvdW50ICogMjtcclxuICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgbWF4T3B0aW9uc1RvU2hvdyAtIDE7XHJcbiAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBuZXdPcHRpb24udmlzaWJsZUluZGV4ID0gaTtcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zID0gdmlzaWJsZU9wdGlvbnMuZmlsdGVyKChkKSA9PiB7XHJcbiAgICAgIGxldCBpblZpZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmIChkLmlzVmlzaWJsZSAmJiAhZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICBpblZpZXcgPSBpID49IHN0YXJ0SW5kZXggJiYgaSA8PSBlbmRJbmRleDtcclxuICAgICAgICBkLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gaW5WaWV3O1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICB2aXNpYmxlT3B0aW9ucyA9IFtuZXdPcHRpb24sIC4uLnZpc2libGVPcHRpb25zXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zID0gdmlzaWJsZU9wdGlvbnM7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNQb3NpdGlvbihzdGFydEluZGV4KSB7XHJcbiAgICBpZiAoc3RhcnRJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHN0YXJ0SW5kZXggPSB0aGlzLmdldFZpc2libGVTdGFydEluZGV4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRvcCA9IHN0YXJ0SW5kZXggKiB0aGlzLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMuJG9wdGlvbnMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsICR7dG9wfXB4LCAwKWA7XHJcbiAgICBEb21VdGlscy5zZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCB0b3ApO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc1Rvb2x0aXAoKSB7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSB0aGlzLmdldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICBsZXQgaGFzT3B0aW9uRGVzY3JpcHRpb24gPSB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uO1xyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0ICRvcHRpb25FbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYC52c2NvbXAtb3B0aW9uW2RhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCJdYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgRG9tVXRpbHMuc2V0RGF0YShcclxuICAgICAgICAkb3B0aW9uRWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLXRleHQnKSxcclxuICAgICAgICAndG9vbHRpcCcsXHJcbiAgICAgICAgZC5sYWJlbFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgRG9tVXRpbHMuc2V0RGF0YShcclxuICAgICAgICAgICRvcHRpb25FbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24tZGVzY3JpcHRpb24nKSxcclxuICAgICAgICAgICd0b29sdGlwJyxcclxuICAgICAgICAgIGQuZGVzY3JpcHRpb25cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlKHZhbHVlLCBpbmRleCwgdHJpZ2dlckV2ZW50KSB7XHJcbiAgICAvLyBWYWx1ZVxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbLi4udmFsdWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFt2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld1ZhbHVlID0gdGhpcy5tdWx0aXBsZVxyXG4gICAgICA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXNcclxuICAgICAgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdIHx8ICcnO1xyXG5cclxuICAgIHRoaXMuJGVsZS52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQudmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcbiAgICAvLyBJbmRleFxyXG4gICAgaWYgKCFpbmRleCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkSW5kZXhlcyA9IFtdO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGluZGV4KSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkSW5kZXhlcyA9IFsuLi5pbmRleF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkSW5kZXhlcyA9IFtpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld0luZGV4ID0gdGhpcy5tdWx0aXBsZVxyXG4gICAgICA/IHRoaXMuc2VsZWN0ZWRJbmRleGVzXHJcbiAgICAgIDogdGhpcy5zZWxlY3RlZEluZGV4ZXNbMF0gfHwgJyc7XHJcblxyXG4gICAgdGhpcy4kZWxlLmluZGV4ID0gbmV3SW5kZXg7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dC5pbmRleCA9IG5ld0luZGV4O1xyXG5cclxuICAgIHRoaXMuaXNNYXhWYWx1ZXNTZWxlY3RlZCA9XHJcbiAgICAgIHRoaXMubWF4VmFsdWVzICYmIHRoaXMubWF4VmFsdWVzIDw9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoXHJcbiAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgOiBmYWxzZTtcclxuICAgIHRoaXMuc2V0VmFsdWVUZXh0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRWYWx1ZXMgJiYgdGhpcy5zZWxlY3RlZFZhbHVlc1swXSA9PT0gbm9uZU9wdGlvblZhbHVlKSB7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtdmFsdWUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ2hhcy12YWx1ZScsXHJcbiAgICAgICAgVXRpbHMuaXNOb3RFbXB0eSh0aGlzLnNlbGVjdGVkVmFsdWVzKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICB0aGlzLiR3cmFwcGVyLFxyXG4gICAgICAnbWF4LXZhbHVlLXNlbGVjdGVkJyxcclxuICAgICAgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkXHJcbiAgICApO1xyXG5cclxuICAgIGlmICh0cmlnZ2VyRXZlbnQpIHtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ2NoYW5nZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWVUZXh0KCkge1xyXG4gICAgbGV0IHZhbHVlVGV4dCA9IFtdO1xyXG4gICAgbGV0IHZhbHVlVG9vbHRpcCA9IFtdO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGxldCBzZWxlY3RlZExlbmd0aCA9IHNlbGVjdGVkVmFsdWVzLmxlbmd0aDtcclxuICAgIGxldCBub09mRGlzcGxheVZhbHVlcyA9IHRoaXMubm9PZkRpc3BsYXlWYWx1ZXM7XHJcbiAgICBsZXQgbWF4aW11bVZhbHVlc1RvU2hvdyA9IDUwO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzQ291bnQgPSAwO1xyXG5cclxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQpIHtcclxuICAgICAgLy90aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYEFsbCAoJHtzZWxlY3RlZExlbmd0aH0pYDtcclxuICAgICAgdGhpcy4kdmFsdWVUZXh0LmlubmVySFRNTCA9IGAke3NlbGVjdGVkTGVuZ3RofSAke3RoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2V9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50ID4gbWF4aW11bVZhbHVlc1RvU2hvdykge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmFsdWUgPSBkLnZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMuaW5kZXhPZih2YWx1ZSkgIT09IC0xKSB7XHJcbiAgICAgICAgICBsZXQgbGFiZWwgPSBkLmxhYmVsO1xyXG4gICAgICAgICAgdmFsdWVUZXh0LnB1c2gobGFiZWwpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXNDb3VudCsrO1xyXG5cclxuICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50IDw9IG5vT2ZEaXNwbGF5VmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHZhbHVlVG9vbHRpcC5wdXNoKGA8c3BhbiBjbGFzcz1cInZzY29tcC12YWx1ZS10YWdcIj4ke2xhYmVsfTwvc3Bhbj5gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBtb3JlU2VsZWN0ZWRPcHRpb25zID0gc2VsZWN0ZWRMZW5ndGggLSBub09mRGlzcGxheVZhbHVlcztcclxuXHJcbiAgICAgIGlmIChtb3JlU2VsZWN0ZWRPcHRpb25zID4gMCkge1xyXG4gICAgICAgIHZhbHVlVG9vbHRpcC5wdXNoKFxyXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZyBtb3JlLXZhbHVlLWNvdW50XCI+KyAke21vcmVTZWxlY3RlZE9wdGlvbnN9IG1vcmUuLi48L3NwYW4+YFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPSB2YWx1ZVRleHQuam9pbignLCAnKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBhZ2dyZWdhdGVkVmFsdWVUZXh0ID09PSAnJyB8fFxyXG4gICAgICAgIChzZWxlY3RlZFZhbHVlcyAmJiBzZWxlY3RlZFZhbHVlc1swXSA9PT0gbm9uZU9wdGlvblZhbHVlKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYWdncmVnYXRlZFZhbHVlVGV4dDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICAgIGxldCBtYXhWYWx1ZXMgPSB0aGlzLm1heFZhbHVlcztcclxuXHJcbiAgICAgICAgICBpZiAoRG9tVXRpbHMuaGFzRWxsaXBzaXModGhpcy4kdmFsdWVUZXh0KSB8fCBtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgbGV0IGNvdW50VGV4dCA9IGAke3NlbGVjdGVkTGVuZ3RofWA7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF4VmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgY291bnRUZXh0ICs9IGAgLyAke21heFZhbHVlc31gO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiogcmVwbGFjZSBjb21tYSBkZWxpbWl0dGVkIGxpc3Qgb2Ygc2VsZWN0aW9ucyB3aXRoIHNob3J0ZXIgdGV4dCBpbmRpY2F0aW5nIHNlbGVjdGlvbiBjb3VudCAqL1xyXG4gICAgICAgICAgICAvLyB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7Y291bnRUZXh0fSBvcHRpb24ke1xyXG4gICAgICAgICAgICAvLyAgIHNlbGVjdGVkTGVuZ3RoID09PSAxID8gJycgOiAncydcclxuICAgICAgICAgICAgLy8gfSBzZWxlY3RlZGA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7Y291bnRUZXh0fSAke3RoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2V9YDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qKiByZW1vdmluZyB0b29sdGlwIGlmIGZ1bGwgdmFsdWUgdGV4dCBpcyB2aXNpYmxlICovXHJcbiAgICAgICAgICAgIHZhbHVlVG9vbHRpcCA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldERhdGEodGhpcy4kdmFsdWVUZXh0LCAndG9vbHRpcCcsIHZhbHVlVG9vbHRpcC5qb2luKCcsICcpKTtcclxuICB9XHJcblxyXG4gIHNldFNlYXJjaFZhbHVlKHZhbHVlLCBza2lwSW5wdXRTZXQsIGZvcmNlKSB7XHJcbiAgICBpZiAodmFsdWUgPT09IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCAmJiAhZm9yY2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc2tpcElucHV0U2V0KSB7XHJcbiAgICAgIHRoaXMuJHNlYXJjaElucHV0LnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlYXJjaFZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSB2YWx1ZTtcclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLXNlYXJjaC12YWx1ZScsIHZhbHVlKTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZXJ2ZXJTZWFyY2gpIHtcclxuICAgICAgdGhpcy5zZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZpc2libGVPcHRpb25zQ291bnQgPSAwO1xyXG4gICAgbGV0IGhhc0V4YWN0T3B0aW9uID0gZmFsc2U7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmc7XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzT3B0aW9uR3JvdXApIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcgPSB0aGlzLmdldFZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKFxyXG4gICAgICAgIHNlYXJjaFZhbHVlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gaXNPcHRpb25WaXNpYmxlKFxyXG4gICAgICAgIGQsXHJcbiAgICAgICAgc2VhcmNoVmFsdWUsXHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24gPSByZXN1bHQuaGFzRXhhY3RPcHRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiAhaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldE5ld09wdGlvbigpO1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZU5ld09wdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gdmlzaWJsZU9wdGlvbnNDb3VudDtcclxuXHJcbiAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvblByb3AoaW5kZXgsIGtleSwgdmFsdWUpIHtcclxuICAgIGlmICghdGhpcy5vcHRpb25zW2luZGV4XSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zW2luZGV4XVtrZXldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgdGhpcy4kb3B0aW9uc0xpc3Quc3R5bGUuaGVpZ2h0ID1cclxuICAgICAgdGhpcy5vcHRpb25IZWlnaHQgKiB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgbGV0IG9wdGlvbnNIZWlnaHQ7XHJcblxyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zQ291bnQgPSB0aGlzLmdldE9wdGlvbnNDb3VudCgpO1xyXG4gICAgICAgIG9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSBvcHRpb25zSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvcHRpb25zSGVpZ2h0ID0gdGhpcy5vcHRpb25zSGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub09wdGlvbnMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub1NlYXJjaFJlc3VsdHMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG9wdGlvbnNDb250YWluZXIsICdtYXgtaGVpZ2h0Jywgb3B0aW9uc0hlaWdodCk7XHJcblxyXG4gICAgdGhpcy5hZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RHJvcGJveFBvc2l0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMucG9zaXRpb24gIT09ICdhdXRvJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1vcmVWaXNpYmxlU2lkZXMgPSBEb21VdGlscy5nZXRNb3JlVmlzaWJsZVNpZGVzKHRoaXMuJHdyYXBwZXIpO1xyXG4gICAgbGV0IHNob3dPbkxlZnQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogY2hlY2sgdGhhdCBpcyBkcm9wYm94IGhpZGRlbiBvbiByaWdodCBlZGdlIC0gb25seSBpZiBjdXN0b20gd2lkdGggZ2l2ZW4gKi9cclxuICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICBsZXQgYnV0dG9uQ29vcmRzID0gdGhpcy4kdG9nZ2xlQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBsZXQgZHJvcGJveFdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmRyb3Bib3hXaWR0aCk7XHJcbiAgICAgIGxldCBoaWRkZW5PblJpZ2h0ID0gYnV0dG9uQ29vcmRzLmxlZnQgKyBkcm9wYm94V2lkdGggPiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICBsZXQgaGlkZGVuT25MZWZ0ID0gZHJvcGJveFdpZHRoID4gYnV0dG9uQ29vcmRzLnJpZ2h0O1xyXG5cclxuICAgICAgaWYgKGhpZGRlbk9uUmlnaHQgJiYgIWhpZGRlbk9uTGVmdCkge1xyXG4gICAgICAgIHNob3dPbkxlZnQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIC8vIEJFVEFcclxuXHJcbiAgICAgIGxldCBlbGVDb29yZHMgPSB0aGlzLiRlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGxldCB4ID0gZWxlQ29vcmRzLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcclxuICAgICAgbGV0IHkgPSBlbGVDb29yZHMudG9wICsgd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUud2lkdGggPSBgJHt0aGlzLiRlbGUub2Zmc2V0V2lkdGh9cHhgOyAvLyBUT0RPIG9yIGN1c3RvbSBkcm9wZG93biB3aWR0aFxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xyXG5cclxuICAgICAgaWYgKG1vcmVWaXNpYmxlU2lkZXMudmVydGljYWwgPT09ICd0b3AnKSB7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke1xyXG4gICAgICAgICAgeSAtIHRoaXMuJGRyb3Bib3hDb250YWluZXIub2Zmc2V0SGVpZ2h0IC0gNFxyXG4gICAgICAgIH1weGA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgKyB0aGlzLiRlbGUub2Zmc2V0SGVpZ2h0ICsgNH1weGA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE5ld09wdGlvbigpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbC50cmltKCk7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnbGFiZWwnLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogdmFsdWUsXHJcbiAgICAgICAgaXNDdXJyZW50TmV3OiB0cnVlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRPcHRpb24oZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3RlZFByb3AoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGdldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBnZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2libGVPcHRpb25zIHx8IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIC8gdGhpcy5vcHRpb25IZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKSB7XHJcbiAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IC0gdGhpcy5oYWxmT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4IDwgMCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhcnRJbmRleDtcclxuICB9XHJcblxyXG4gIGdldFRvb2x0aXBBdHRyVGV4dCh0ZXh0LCBlbGxpcHNpc09ubHkgPSBmYWxzZSwgYWxsb3dIdG1sID0gZmFsc2UpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAnZGF0YS10b29sdGlwJzogdGV4dCB8fCAnJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbnRlci1kZWxheSc6IHRoaXMudG9vbHRpcEVudGVyRGVsYXksXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6IHRoaXMudG9vbHRpcEZvbnRTaXplLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6IHRoaXMudG9vbHRpcEFsaWdubWVudCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiB0aGlzLnRvb2x0aXBNYXhXaWR0aCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbGxpcHNpcy1vbmx5JzogZWxsaXBzaXNPbmx5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsbG93LWh0bWwnOiBhbGxvd0h0bWwsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBEb21VdGlscy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0ge1xyXG4gICAgICBpbmRleDogZGF0YS5pbmRleCxcclxuICAgICAgdmFsdWU6IGdldFN0cmluZyhkYXRhLnZhbHVlKSxcclxuICAgICAgbGFiZWw6IGdldFN0cmluZyhkYXRhLmxhYmVsKSxcclxuICAgICAgZGVzY3JpcHRpb246IGdldFN0cmluZyhkYXRhLmRlc2NyaXB0aW9uKSxcclxuICAgICAgYWxpYXM6IHRoaXMuZ2V0QWxpYXMoZGF0YS5hbGlhcyksXHJcbiAgICAgIGlzQ3VycmVudE5ldzogZGF0YS5pc0N1cnJlbnROZXcgfHwgZmFsc2UsXHJcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ld09wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE5ld09wdGlvbigpIHtcclxuICAgIGxldCBsYXN0T3B0aW9uID0gdGhpcy5vcHRpb25zW3RoaXMubGFzdE9wdGlvbkluZGV4XTtcclxuXHJcbiAgICBpZiAoIWxhc3RPcHRpb24gfHwgIWxhc3RPcHRpb24uaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGFzdE9wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbkluZGV4KHZhbHVlKSB7XHJcbiAgICBsZXQgaW5kZXg7XHJcblxyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgaWYgKGQudmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgIGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIGdldE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld1ZhbHVlcyA9IHRoaXMubmV3VmFsdWVzO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMuZmlsdGVyKChkKSA9PiBuZXdWYWx1ZXMuaW5kZXhPZihkKSAhPT0gLTEpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gcmVzdWx0IDogcmVzdWx0WzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxpYXMoYWxpYXMpIHtcclxuICAgIGlmIChhbGlhcykge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGlhcykpIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLmpvaW4oJywnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhbGlhcyA9IGFsaWFzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGlhcyA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhbGlhcztcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlWYWx1ZSgpIHtcclxuICAgIGxldCBkaXNwbGF5VmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGRpc3BsYXlWYWx1ZXMucHVzaChkLmxhYmVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gZGlzcGxheVZhbHVlcyA6IGRpc3BsYXlWYWx1ZXNbMF0gfHwgJyc7XHJcbiAgfVxyXG5cclxuICBnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0W2QuaW5kZXhdID0gZC5vcHRpb25zLnNvbWUoXHJcbiAgICAgICAgKGUpID0+IGlzT3B0aW9uVmlzaWJsZShlLCBzZWFyY2hWYWx1ZSkuaXNWaXNpYmxlXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uc0NvdW50KGNvdW50KSB7XHJcbiAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID1cclxuICAgICAgICAod2luZG93LmlubmVySGVpZ2h0ICogODApIC8gMTAwIC0gZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgIGF2YWlsYWJsZUhlaWdodCAtPSBzZWFyY2hIZWlnaHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvdW50ID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyB0aGlzLm9wdGlvbkhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudCA9IHBhcnNlSW50KGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc0NvdW50ICogdGhpcy5vcHRpb25IZWlnaHQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2libGluZygkZWxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBwcm9wTmFtZSA9XHJcbiAgICAgIGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ25leHRFbGVtZW50U2libGluZycgOiAncHJldmlvdXNFbGVtZW50U2libGluZyc7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoJGVsZSkge1xyXG4gICAgICAgICRlbGUgPSAkZWxlW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoXHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdncm91cC10aXRsZScpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiAkZWxlO1xyXG4gIH1cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgb3BlbkRyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIHRoaXMuc2V0RHJvcGJveFBvc2l0aW9uKCk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ29wZW5lZCcpO1xyXG5cclxuICAgICAgaWYgKCFpc1NpbGVudCkge1xyXG4gICAgICAgIHRoaXMubW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCk7XHJcbiAgICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2ZvY3VzZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGJvZHksICd2c2NvbXAtcG9wdXAtYWN0aXZlJyk7XHJcbiAgICAgICAgICB0aGlzLmlzUG9wdXBBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEcm9wYm94KGlzU2lsZW50KSB7XHJcbiAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHJhbnNpdGlvbkR1cmF0aW9uID0gaXNTaWxlbnQgPyAwIDogdGhpcy50cmFuc2l0aW9uRHVyYXRpb247XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2xvc2VkJyk7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwQWN0aXZlKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2Nsb3NlZCcpO1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdjbG9zZWQnKTtcclxuICAgICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgICAgLy8gSGlkZSBkcm9wYm94IHNvbWV3aGVyZSBmYXJycnJycnIgYXdheVxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYC0yMDBweGA7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAtMjAwcHhgO1xyXG4gICAgICB9XHJcbiAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgbW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCkge1xyXG4gICAgaWYgKCF0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTb3J0ZWRPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKCF0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCB8fCAhdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRHJvcGJveCgpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT3BlbmVkKCkge1xyXG4gICAgcmV0dXJuIERvbVV0aWxzLmhhc0NsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQnKTtcclxuICB9XHJcblxyXG4gIGZvY3VzU2VhcmNoSW5wdXQoKSB7XHJcbiAgICBsZXQgJGVsZSA9IHRoaXMuJHNlYXJjaElucHV0O1xyXG5cclxuICAgIGlmICgkZWxlKSB7XHJcbiAgICAgICRlbGUuZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvY3VzT3B0aW9uKGRpcmVjdGlvbiwgZWxlKSB7XHJcbiAgICBsZXQgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbi5mb2N1c2VkJ1xyXG4gICAgKTtcclxuICAgIGxldCAkbmV3Rm9jdXNlZEVsZTtcclxuXHJcbiAgICBpZiAoZWxlKSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gZWxlO1xyXG4gICAgfSBlbHNlIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgLyogaWYgbm8gZWxlbWVudCBvbiBmb2N1cyBjaG9vc2UgZmlyc3QgdmlzaWJsZSBvbmUgKi9cclxuICAgICAgbGV0IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4ID0gdGhpcy5nZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpO1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLnZzY29tcC1vcHRpb25bZGF0YS12aXNpYmxlLWluZGV4PVwiJHtmaXJzdFZpc2libGVPcHRpb25JbmRleH1cIl1gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdncm91cC10aXRsZScpXHJcbiAgICAgICkge1xyXG4gICAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRuZXdGb2N1c2VkRWxlLCAnbmV4dCcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuZ2V0U2libGluZygkZm9jdXNlZEVsZSwgZGlyZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJG5ld0ZvY3VzZWRFbGUgJiYgJG5ld0ZvY3VzZWRFbGUgIT09ICRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIGlmICgkZm9jdXNlZEVsZSkge1xyXG4gICAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChEb21VdGlscy5nZXREYXRhKCRuZXdGb2N1c2VkRWxlLCAnaW5kZXgnKSwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMubW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoJG5ld0ZvY3VzZWRFbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoJGZvY3VzZWRFbGUpIHtcclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld1Njcm9sbFRvcDtcclxuICAgIGxldCBjb250YWluZXJSZWN0ID0gdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBvcHRpb25SZWN0ID0gJGZvY3VzZWRFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgY29udGFpbmVyVG9wID0gY29udGFpbmVyUmVjdC50b3A7XHJcbiAgICBsZXQgY29udGFpbmVyQm90dG9tID0gY29udGFpbmVyUmVjdC5ib3R0b207XHJcbiAgICBsZXQgY29udGFpbmVySGVpZ2h0ID0gY29udGFpbmVyUmVjdC5oZWlnaHQ7XHJcbiAgICBsZXQgb3B0aW9uVG9wID0gb3B0aW9uUmVjdC50b3A7XHJcbiAgICBsZXQgb3B0aW9uQm90dG9tID0gb3B0aW9uUmVjdC5ib3R0b207XHJcbiAgICBsZXQgb3B0aW9uSGVpZ2h0ID0gb3B0aW9uUmVjdC5oZWlnaHQ7XHJcbiAgICBsZXQgb3B0aW9uT2Zmc2V0VG9wID0gJGZvY3VzZWRFbGUub2Zmc2V0VG9wO1xyXG4gICAgbGV0IG9wdGlvbnNUb3AgPSBEb21VdGlscy5nZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCAnbnVtYmVyJyk7XHJcblxyXG4gICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiB0b3AgKi9cclxuICAgIGlmIChjb250YWluZXJUb3AgPiBvcHRpb25Ub3ApIHtcclxuICAgICAgbmV3U2Nyb2xsVG9wID0gb3B0aW9uT2Zmc2V0VG9wICsgb3B0aW9uc1RvcDtcclxuICAgIH0gZWxzZSBpZiAoY29udGFpbmVyQm90dG9tIDwgb3B0aW9uQm90dG9tKSB7XHJcbiAgICAgIC8qIGlmIG9wdGlvbiBoaWRkZW4gb24gYm90dG9tICovXHJcbiAgICAgIG5ld1Njcm9sbFRvcCA9XHJcbiAgICAgICAgb3B0aW9uT2Zmc2V0VG9wIC0gY29udGFpbmVySGVpZ2h0ICsgb3B0aW9uSGVpZ2h0ICsgb3B0aW9uc1RvcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3U2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBuZXdTY3JvbGxUb3A7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVPcHRpb25Gb2N1cygpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChudWxsKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdE9wdGlvbigkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGluZyA9ICFEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICBpZiAoaXNBZGRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvKiogb24gc2VsZWN0aW5nIHNhbWUgdmFsdWUgaW4gc2luZ2xlIHNlbGVjdCAqL1xyXG4gICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleGVzID0gdGhpcy5zZWxlY3RlZEluZGV4ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ3ZhbHVlJyk7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleCA9IERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ2luZGV4Jyk7XHJcblxyXG4gICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3Aoc2VsZWN0ZWRJbmRleCwgaXNBZGRpbmcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzLnB1c2goc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkUHJvcChcclxuICAgICAgICAgICAgdGhpcy5nZXRPcHRpb25JbmRleChzZWxlY3RlZFZhbHVlc1swXSksXHJcbiAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBbc2VsZWN0ZWRWYWx1ZV07XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzID0gW3NlbGVjdGVkSW5kZXhdO1xyXG4gICAgICAgIGxldCAkcHJldlNlbGVjdGVkT3B0aW9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAnLnZzY29tcC1vcHRpb24uc2VsZWN0ZWQnXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCRwcmV2U2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRwcmV2U2VsZWN0ZWRPcHRpb24sICdzZWxlY3RlZCcsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICBVdGlscy5yZW1vdmVJdGVtRnJvbUFycmF5KHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICBVdGlscy5yZW1vdmVJdGVtRnJvbUFycmF5KHNlbGVjdGVkSW5kZXhlcywgc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdjdXJyZW50LW5ldycpKSB7XHJcbiAgICAgIHRoaXMuYmVmb3JlU2VsZWN0TmV3VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZEluZGV4ZXMsIHRydWUpO1xyXG5cclxuICAgIC8vIEluICdMaXN0JyBvbmx5XHJcbiAgICAvLyBpbW1lZGlhdGVseSBtb3ZlIGl0ZW0gdG8gdG9wIGlmIG9wdGlvbnMgaXMgb24uXHJcbiAgICAvLyBEcm9wZG93biBtb2RlIHdpbGwgd2FpdCB1bnRpbCB0aGUgbmV4dCByZW9wZW4gdG8gZG8gc28uXHJcbiAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3BlbiAmJiB0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICBjb25zdCBsYXN0U2Nyb2xsVG9wID0gdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3A7XHJcbiAgICAgIHRoaXMubW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCk7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gbGFzdFNjcm9sbFRvcDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdEZvY3VzZWRPcHRpb24oKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihcclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi5mb2N1c2VkJylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpIHtcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSB8fCB0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgaXNTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzU2VsZWN0ZWQgPSAhRG9tVXRpbHMuaGFzQ2xhc3ModGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3gsICdjaGVja2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleGVzID0gW107XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQsIGlkeCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkIHx8IGQuaXNDdXJyZW50TmV3IHx8IGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBpc1NlbGVjdGVkO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKGlkeCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzQWxsU2VsZWN0ZWQpIHtcclxuICAgIGlmICh0eXBlb2YgaXNBbGxTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgaXNBbGxTZWxlY3RlZCA9ICF0aGlzLm9wdGlvbnMuc29tZSgoZCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICFkLmlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR0b2dnbGVBbGxDaGVja2JveCwgJ2NoZWNrZWQnLCBpc0FsbFNlbGVjdGVkKTtcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVGb2N1c2VkUHJvcChpbmRleCwgaXNGb2N1c2VkID0gZmFsc2UpIHtcclxuICAgIGlmICh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCkge1xyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AodGhpcy5mb2N1c2VkT3B0aW9uSW5kZXgsICdpc0ZvY3VzZWQnLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKGluZGV4LCAnaXNGb2N1c2VkJywgaXNGb2N1c2VkKTtcclxuICAgIHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4ID0gaW5kZXg7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTZWxlY3RlZFByb3AoaW5kZXgsIGlzU2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKGluZGV4LCAnaXNTZWxlY3RlZCcsIGlzU2VsZWN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9Ub3AoKSB7XHJcbiAgICBsZXQgaXNDbG9zZWQgPSAhdGhpcy5pc09wZW5lZCgpO1xyXG5cclxuICAgIGlmIChpc0Nsb3NlZCkge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzY3JvbGxUb3AgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHJcbiAgICBpZiAoc2Nyb2xsVG9wID4gMCkge1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYmVmb3JlVmFsdWVTZXQodHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlKG51bGwsIG51bGwsIHRydWUpO1xyXG4gICAgdGhpcy5hZnRlclZhbHVlU2V0KCk7XHJcbiAgfVxyXG5cclxuICBiZWZvcmVWYWx1ZVNldChpc1Jlc2V0KSB7XHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhpc1Jlc2V0ID8gZmFsc2UgOiB1bmRlZmluZWQpO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJWYWx1ZVNldCgpIHtcclxuICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclNldE9wdGlvbnMoa2VlcFZhbHVlKSB7XHJcbiAgICBsZXQgc2VhcmNoID0gdGhpcy5zZWFyY2hWYWx1ZTsgLy8gTmVlZCB0byBiZSBzdG9yZWQgYmVjYXVzZSBzZXRWYWx1ZU1ldGhvZCB3aWxsIGVtcHR5IHRoaXMuc2VhcmNoVmFsdWVcclxuXHJcbiAgICBpZiAoa2VlcFZhbHVlKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnModGhpcy5pc0FsbFNlbGVjdGVkKTsgLy8gSWYgc2VsZWN0IGFsbCB3YXMgb24gbGV0IHNlbGVjdCBhbGwgb25cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKHRoaXMuc2VsZWN0ZWRWYWx1ZXMsIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0KTsgLy8gUmVzZWxlY3QgdmFsaWQgdmFsdWVzXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoc2VhcmNoLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKCFrZWVwVmFsdWUpIHtcclxuICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkT3B0aW9uKGRhdGEsIHJlcmVuZGVyKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4Kys7XHJcbiAgICBkYXRhLmluZGV4ID0gdGhpcy5sYXN0T3B0aW9uSW5kZXg7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXRPcHRpb25PYmooZGF0YSk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucy5wdXNoKG5ld09wdGlvbik7XHJcblxyXG4gICAgaWYgKHJlcmVuZGVyKSB7XHJcbiAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB0aGlzLmFmdGVyU2V0T3B0aW9ucygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT3B0aW9uKGluZGV4KSB7XHJcbiAgICBpZiAoIWluZGV4ICYmIGluZGV4ICE9IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXgtLTtcclxuICB9XHJcblxyXG4gIHJlbW92ZU5ld09wdGlvbigpIHtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb24obmV3T3B0aW9uLmluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJlZm9yZVNlbGVjdE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgdGhpcy5uZXdWYWx1ZXMucHVzaChuZXdPcHRpb24udmFsdWUpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNDdXJyZW50TmV3JywgZmFsc2UpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNOZXcnLCB0cnVlKTtcclxuXHJcbiAgICAvKiogdXNpbmcgc2V0VGltZW91dCB0byBmaXggdGhlIGlzc3VlIG9mIGRyb3Bib3ggZ2V0dGluZyBjbG9zZWQgb24gc2VsZWN0ICovXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBzb3J0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gb3B0aW9ucy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmIChiLnZhbHVlID09PSBub25lT3B0aW9uVmFsdWUgJiYgYS52YWx1ZSAhPT0gbm9uZU9wdGlvblZhbHVlKSB7XHJcbiAgICAgICAgLy8gTm9uZSBpcyBhbHdheXMgZmlyc3RcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIGlmICghYS5pc1NlbGVjdGVkICYmICFiLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIGlmIChhLmlzU2VsZWN0ZWQgJiYgKCFiLmlzU2VsZWN0ZWQgfHwgYS5pbmRleCA8IGIuaW5kZXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNvcnRPcHRpb25zR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHNvcnRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucztcclxuICAgIG9wdGlvbnMgPSB0aGlzLnN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgY2hpbGRPcHRpb25zID0gZC5vcHRpb25zO1xyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBjaGlsZE9wdGlvbnMuc29tZSgoZSkgPT4gZS5pc1NlbGVjdGVkKTtcclxuXHJcbiAgICAgIGlmIChkLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICBzb3J0T3B0aW9ucyhjaGlsZE9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzb3J0T3B0aW9ucyhvcHRpb25zKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5kZXN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgaXNPcHRpb25WaXNpYmxlKGQsIHNlYXJjaFZhbHVlLCBoYXNFeGFjdE9wdGlvbiwgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcpIHtcclxuICAgIGxldCB2YWx1ZSA9IGQubGFiZWwudG9Mb3dlckNhc2UoKTtcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGQuZGVzY3JpcHRpb247XHJcbiAgICBsZXQgYWxpYXMgPSBkLmFsaWFzO1xyXG4gICAgbGV0IGlzVmlzaWJsZSA9IHZhbHVlLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdbZC5pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFsaWFzICYmICFpc1Zpc2libGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gYWxpYXMuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkZXNjcmlwdGlvbiAmJiAhaXNWaXNpYmxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IGRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIGQuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xyXG5cclxuICAgIGlmICghaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgaGFzRXhhY3RPcHRpb24gPSB2YWx1ZSA9PT0gc2VhcmNoVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNWaXNpYmxlLFxyXG4gICAgICBoYXNFeGFjdE9wdGlvbixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBsZXQgY2hpbGRPcHRpb25zID0ge307XHJcblxyXG4gICAgLyoqIGdldHRpbmcgYWxsIGdyb3VwIHRpdGxlICovXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgbGV0IGNoaWxkQXJyYXkgPSBbXTtcclxuICAgICAgICBkLm9wdGlvbnMgPSBjaGlsZEFycmF5O1xyXG4gICAgICAgIGNoaWxkT3B0aW9uc1tkLmluZGV4XSA9IGNoaWxkQXJyYXk7XHJcblxyXG4gICAgICAgIHJlc3VsdC5wdXNoKGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiogZ2V0dGluZyBhbGwgZ3JvdXAgb3B0aW9ucyAqL1xyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBjaGlsZE9wdGlvbnNbZC5ncm91cEluZGV4XS5wdXNoKGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZGVzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKGQpO1xyXG4gICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGQub3B0aW9ucyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgc2VydmVyU2VhcmNoKHNlYXJjaFZhbHVlKSB7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLW9wdGlvbnMnKTtcclxuICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdzZXJ2ZXItc2VhcmNoaW5nJyk7XHJcbiAgICB0aGlzLm9uU2VydmVyU2VhcmNoKHNlYXJjaFZhbHVlLCB0aGlzKTtcclxuICB9XHJcblxyXG4gIC8qKiBzdGF0aWMgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgc3RhdGljIGluaXQob3B0aW9ucykge1xyXG4gICAgbGV0ICRlbGVBcnJheSA9IG9wdGlvbnMuZWxlO1xyXG5cclxuICAgIGlmICghJGVsZUFycmF5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2luZ2xlRWxlID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKHR5cGVvZiAkZWxlQXJyYXkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICRlbGVBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJGVsZUFycmF5KTtcclxuXHJcbiAgICAgIGlmICghJGVsZUFycmF5KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRlbGVBcnJheS5sZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAkZWxlQXJyYXkgPSBbJGVsZUFycmF5XTtcclxuICAgICAgc2luZ2xlRWxlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW5zdGFuY2VzID0gW107XHJcbiAgICAkZWxlQXJyYXkuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICBvcHRpb25zLmVsZSA9ICRlbGU7XHJcbiAgICAgIGluc3RhbmNlcy5wdXNoKG5ldyBWaXJ0dWFsU2VsZWN0KG9wdGlvbnMpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBzaW5nbGVFbGUgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVzZXRGb3JtKGUpIHtcclxuICAgIGxldCAkZm9ybSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKTtcclxuXHJcbiAgICBpZiAoISRmb3JtKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcudnNjb21wLXdyYXBwZXInKS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgICRlbGUucGFyZW50RWxlbWVudC52aXJ0dWFsU2VsZWN0LnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZXNldCgpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIGtlZXBWYWx1ZSkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywga2VlcFZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXREaXNhYmxlZE9wdGlvbnNNZXRob2Qob3B0aW9ucykge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnNldERpc2FibGVkT3B0aW9uc01ldGhvZChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB0b2dnbGVTZWxlY3RBbGwoaXNTZWxlY3RlZCkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnRvZ2dsZUFsbE9wdGlvbnMoaXNTZWxlY3RlZCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNBbGxTZWxlY3RlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3QuaXNBbGxTZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRPcHRpb25NZXRob2QoZGF0YSkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LmFkZE9wdGlvbihkYXRhLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXROZXdWYWx1ZU1ldGhvZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3QuZ2V0TmV3VmFsdWUoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB2ZXJzaW9uKCkge1xyXG4gICAgcmV0dXJuIHZpcnR1YWxTZWxlY3RWZXJzaW9uO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldERpc3BsYXlWYWx1ZU1ldGhvZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3QuZ2V0RGlzcGxheVZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgb3Blbk1ldGhvZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3Qub3BlbkRyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjbG9zZU1ldGhvZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3QuY2xvc2VEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgb25SZXNpemVNZXRob2QoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudnNjb21wLXdyYXBwZXInKS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgICRlbGUucGFyZW50RWxlbWVudC52aXJ0dWFsU2VsZWN0Lm9uUmVzaXplKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gZW5kICovXHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgVmlydHVhbFNlbGVjdC5yZXNldEZvcm0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgVmlydHVhbFNlbGVjdC5vblJlc2l6ZU1ldGhvZCk7XHJcblxyXG53aW5kb3cuVmlydHVhbFNlbGVjdCA9IFZpcnR1YWxTZWxlY3Q7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=