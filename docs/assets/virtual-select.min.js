/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{DomUtils:()=>l});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"addClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).add.apply(i,o(e))})))}},{key:"removeClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).remove.apply(i,o(e))})))}},{key:"toggleClass",value:function(t,e,i){var o;if(t)return void 0!==i&&(i=Boolean(i)),this.getElements(t).forEach((function(t){o=t.classList.toggle(e,i)})),o}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=e.left,n=e.top;return{horizontal:s>i-s-e.width?"left":"right",vertical:n>o-n-e.height?"top":"bottom"}}},{key:"getData",value:function(t,e,i){if(t){var o=t?t.dataset[e]:"";return"number"===i?o=parseFloat(o)||0:"true"===o?o=!0:"false"===o&&(o=!1),o}}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"setStyle",value:function(t,e,i){t&&(t.style[e]=i)}},{key:"getElements",value:function(t){if(t)return void 0===t.length&&(t=[t]),t}},{key:"getStyleText",value:function(t,e){var i="";for(var o in t)i+="".concat(o,": ").concat(t[o],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var o=t[i];void 0!==o&&(e+=" ".concat(i,'="').concat(o,'" '))}return e}}],(i=null)&&n(e.prototype,i),s&&n(e,s),t}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(t,e,i)=>{i.r(e),i.d(e,{Utils:()=>o.Utils,DomUtils:()=>s.DomUtils});var o=i(/*! ./utils */"./src/utils/utils.js"),s=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{Utils:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"getString",value:function(t){return t||0===t?t.toString():""}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===n(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length||void 0===e)return t;i&&(t=o(t));var s=t.indexOf(e);return-1!==s&&t.splice(s,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}}],(i=null)&&l(e.prototype,i),s&&l(e,s),t}()}},e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(o),i.d(o,{VirtualSelect:()=>c});var t=i(/*! ./utils */"./src/utils/index.js");function e(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r="{#virtual-select-none-option#}",p={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},c=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);try{this.setProps(t),this.setDisabledOptions(t.disabledOptions),this.setOptions(t.options),this.render()}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var o,n,l;return o=i,l=[{key:"init",value:function(t){var e=t.ele;if(e){var o=!1;if("string"!=typeof e||(e=document.querySelector(e))){void 0===e.length&&(e=[e],o=!0);var s=[];return e.forEach((function(e){t.ele=e,s.push(new i(t))})),o?s[0]:s}}}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t,e){this.virtualSelect.setOptionsMethod(t,e)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.onResize()}))}}],(n=[{key:"render",value:function(){var e=this;if(this.$ele){var i="vscomp-wrapper",o=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),n={"z-index":this.zIndex},l=function(){var t="";return e.additionalClasses&&(t+=" "+e.additionalClasses),e.multiple&&(t+=" multiple",e.disableSelectAll||(t+=" has-select-all")),"top"===e.position&&(t+=" position-top"),e.hideClearButton||(t+=" has-clear-button"),e.keepAlwaysOpen?t+=" keep-always-open opened":t+=" closed",e.showAsPopup?t+=" show-as-popup":e.dropboxWidth&&(n.width=e.dropboxWidth),e.hasSearch&&(t+=" has-search-input"),t};i+=l(),this.guid=t.Utils.generateUUID();var a='<div id="vs-'.concat(this.guid,'" class="vscomp-dropbox-container" ').concat(t.DomUtils.getStyleText(n),'>\n      <div class="vscomp-dropbox">\n        <div class="vscomp-search-wrapper"></div>\n\n        <div class="vscomp-options-container">\n          <div class="vscomp-options-loader"></div>\n\n          <div class="vscomp-options-list">\n            <div class="vscomp-options"></div>\n          </div>\n        </div>\n\n        <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n        <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n        <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n      </div>\n    </div>'),r='<div class="'.concat(i,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(o,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        ').concat(this.keepAlwaysOpen||!this.appendToBody?a:"","\n\n      </div>");if(this.$ele.innerHTML=r,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),!this.keepAlwaysOpen&&this.appendToBody){this.$body.append(document.createRange().createContextualFragment(a)),this.$dropboxContainer=document.querySelector("#vs-".concat(this.guid,".vscomp-dropbox-container")),this.$dropboxEl=document.querySelector("#vs-".concat(this.guid));var p="vscomp-wrapper-body";p+=l(),t.DomUtils.addClass(this.$dropboxEl,"".concat(p))}else this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxEl=this.$ele;this.$search=this.$dropboxEl.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxEl.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxEl.querySelector(".vscomp-options-list"),this.$options=this.$dropboxEl.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$dropboxEl.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxEl.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var e,i=this,o="",s=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),p=t.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(e=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var c=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(c,"></span>")}s.forEach((function(t){var s=t.label,c="vscomp-option",u=i.getTooltipAttrText("",!0),h=n,d="",v="";t.isFocused&&(c+=" focused"),t.isDisabled&&(c+=" disabled"),t.isGroupTitle?(c+=" group-title",h=""):t.isSelected&&(c+=" selected"),t.isGroupOption&&(c+=" group-option"),t.description&&(v='<div class="vscomp-option-description" '.concat(u,">").concat(t.description,"</div>")),t.isCurrentNew?(c+=" current-new",d+=l):a&&!t.isGroupTitle&&(s=s.replace(e,"<mark>$1</mark>")),o+='<div class="'.concat(c,'" data-value="').concat(t.value,'" data-index="').concat(t.index,'" data-visible-index="').concat(t.visibleIndex,'" ').concat(p,">\n          ").concat(h,'\n          <span class="vscomp-option-text ').concat(t.value===r?"none":"",'" ').concat(u,">\n            ").concat(s,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=o;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||(t.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-no-search-results",h)),t.DomUtils.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var t="",e="";this.multiple&&!this.disableSelectAll&&(t='<span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>")),this.hasSearch&&(e='<input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n      <span class="vscomp-search-clear">&times;</span>'));var i='<div class="vscomp-search-container">\n        '.concat(t,"\n        ").concat(e,"\n      </div>");this.$search.innerHTML=i,this.$searchInput=this.$dropboxEl.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxEl.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxEl.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"addEvent",value:function(e,i,o){var s=this;e&&(i=t.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(o,"-").concat(i),l=s.events[n];l||(l=s[o].bind(s),s.events[n]=l),(e=t.DomUtils.getElements(e)).forEach((function(t){t.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(e,i){e&&(e=t.DomUtils.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(t){this.appendToBody&&this.multiple&&this.isOpened()&&t.target.closest("#vs-".concat(this.guid))||t.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=p[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){if(this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)")),this.multiple&&this.showSelectedOptionsFirst)return t.stopPropagation(),!1}},{key:"onDropboxContainerClick",value:function(t){t.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.isOpened()&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.appendToBody?this.isOpened()&&this.closeDropbox(!0):this.setOptionsContainerHeight(!0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),t.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(t){t&&this.showAsPopup&&this.setVisibleOptions()}},{key:"setProps",value:function(e){e=this.setDefaultProps(e),this.setPropsFromElementAttr(e);var i=t.Utils.convertToBoolean;this.$ele=e.ele,this.valueKey=e.valueKey,this.labelKey=e.labelKey,this.descriptionKey=e.descriptionKey,this.aliasKey=e.aliasKey,this.optionHeightText=e.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(e.multiple),this.hasSearch=i(e.search),this.hideClearButton=i(e.hideClearButton),this.autoSelectFirstOption=i(e.autoSelectFirstOption),this.hasOptionDescription=i(e.hasOptionDescription),this.silentInitialValueSet=i(e.silentInitialValueSet),this.allowNewOption=i(e.allowNewOption),this.markSearchResults=i(e.markSearchResults),this.showSelectedOptionsFirst=i(e.showSelectedOptionsFirst),this.disableSelectAll=i(e.disableSelectAll),this.keepAlwaysOpen=i(e.keepAlwaysOpen),this.showDropboxAsPopup=i(e.showDropboxAsPopup),this.noOptionsText=e.noOptionsText,this.noSearchResultsText=e.noSearchResultsText,this.selectAllText=e.selectAllText,this.placeholder=e.placeholder,this.position=e.position,this.dropboxWidth=e.dropboxWidth,this.tooltipFontSize=e.tooltipFontSize,this.tooltipAlignment=e.tooltipAlignment,this.tooltipMaxWidth=e.tooltipMaxWidth,this.noOfDisplayValues=parseInt(e.noOfDisplayValues),this.zIndex=parseInt(e.zIndex),this.maxValues=parseInt(e.maxValues),this.name=e.name,this.additionalClasses=e.additionalClasses,this.initialSelectedValue=e.selectedValue,this.popupDropboxBreakpoint=e.popupDropboxBreakpoint,this.onServerSearch=e.onServerSearch,this.searchPlaceholder=e.searchPlaceholder,this.itemsSelectedMessage=e.itemsSelectedMessage,this.allowNoneOption=e.allowNoneOption,this.noneOptionText=e.noneOptionText,this.appendToBody=e.appendToBody,this.selectedValues=[],this.selectedIndexes=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===e.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(e.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None",appendToBody:!1};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint"};for(var o in i){var s=e.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(t[i[o]]=s)}}},{key:"setMethods",value:function(){var t=this.$ele;t.virtualSelect=this,t.value=this.multiple?[]:"",t.reset=i.reset,t.setValue=i.setValueMethod,t.setOptions=i.setOptionsMethod,t.setDisabledOptions=i.setDisabledOptionsMethod,t.toggleSelectAll=i.toggleSelectAll,t.isAllSelected=i.isAllSelected,t.addOption=i.addOptionMethod,t.getNewValue=i.getNewValueMethod,t.getDisplayValue=i.getDisplayValueMethod,t.open=i.openMethod,t.close=i.closeMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i,o=[],n=[],l=s(this.options);try{for(l.s();!(i=l.n()).done;){var a=i.value;if(-1===t.indexOf(a.value)||a.isDisabled||a.isGroupTitle)a.isSelected=!1;else{if(-1!==o.indexOf(a.value)&&this.multiple)break;if(a.isSelected=!0,o.push(a.value),n.push(a.index),!this.multiple)break}}}catch(t){l.e(t)}finally{l.f()}this.multiple||(o=o[0],n=n[0]),this.beforeValueSet(),this.setValue(o,n,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t,e){var i=t!=this.options;this.setOptions(t),this.afterSetOptions(e,i)}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(e){e||(e=[]);var i=[],o=this.disabledOptions,s=o.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,p=this.aliasKey,c=this.hasOptionDescription,u=t.Utils.getString,h=this.getAlias,d=0,v=!1;!this.multiple&&this.allowNoneOption&&e.unshift({value:r,label:this.noneOptionText}),e.forEach((function t(e){var r=u(e[n]),f=e.options,y=!!f,g={index:d,value:r,label:u(e[l]),alias:h(e[p]),isVisible:!0,isGroupTitle:y};if(s&&(g.isDisabled=-1!==o.indexOf(r)),e.isGroupOption&&(g.isGroupOption=!0,g.groupIndex=e.groupIndex),c&&(g.description=u(e[a])),i.push(g),d++,y){var m=g.index;v=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=m,t(e)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=v,this.setSortedOptions()}},{key:"setServerOptions",value:function(e){this.setOptionsMethod(e,!0),t.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSortedOptions",value:function(){var t=e(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=e(this.sortedOptions),i=2*this.optionsCount,o=this.getVisibleStartIndex(),s=this.getNewOption(),n=o+i-1,l=0;s&&(s.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=o&&l<=n,t.visibleIndex=l,l++),e})),s&&(t=[s].concat(e(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){void 0===e&&(e=this.getVisibleStartIndex());var i=e*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),t.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var e=this,i=this.getVisibleOptions(),o=this.hasOptionDescription;i.forEach((function(i){var s=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));t.DomUtils.setData(s.querySelector(".vscomp-option-text"),"tooltip",i.label),o&&t.DomUtils.setData(s.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(i,o,s){i?Array.isArray(i)?this.selectedValues=e(i):this.selectedValues=[i]:this.selectedValues=[];var n=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=n,this.$hiddenInput.value=n,o?Array.isArray(o)?this.selectedIndexes=e(o):this.selectedIndexes=[o]:this.selectedIndexes=[];var l=this.multiple?this.selectedIndexes:this.selectedIndexes[0]||"";if(this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===r?t.DomUtils.removeClass(this.$wrapper,"has-value"):t.DomUtils.toggleClass(this.$wrapper,"has-value",t.Utils.isNotEmpty(this.selectedValues)),t.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),s&&this.dispatchEvent(this.$ele,"change"),this.showSelectedOptionsFirst){var a=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=a}}},{key:"setValueText",value:function(){var e=[],i=[],o=this.selectedValues,n=this.selectedIndexes,l=o.length,a=this.noOfDisplayValues,p=0;if(this.isAllSelected)this.$valueText.innerHTML="".concat(l," ").concat(this.itemsSelectedMessage);else{var c,u=s(this.options);try{for(u.s();!(c=u.n()).done;){var h=c.value;if(!h.isCurrentNew){if(p>50||!this.multiple&&1===p)break;var d=h.value,v=h.label,f=h.index;if(-1!==o.indexOf(d)&&-1!==n.indexOf(f)){if(p>=o.length)break;e.push(v),++p<=a&&i.push('<span class="vscomp-value-tag">'.concat(v,"</span>"))}}}}catch(t){u.e(t)}finally{u.f()}var y=l-a;y>0&&i.push('<span class="vscomp-value-tag more-value-count">+ '.concat(y," more...</span>"));var g=e.join(", ");if(""===g||o&&o[0]===r)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=g,this.multiple){var m=this.maxValues;if(t.DomUtils.hasEllipsis(this.$valueText)||m){var b="".concat(l);m&&(b+=" / ".concat(m)),this.$valueText.innerHTML="".concat(b," ").concat(this.itemsSelectedMessage)}else i=[]}}t.DomUtils.setData(this.$valueText,"tooltip",i.join(", "))}},{key:"setSearchValue",value:function(e,i,o){if(e!==this.searchValueOriginal||o){i||(this.$searchInput.value=e);var s=e.toLowerCase().trim();if(this.searchValue=s,this.searchValueOriginal=e,t.DomUtils.toggleClass(this.$wrapper,"has-search-value",e),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-search-value",e),this.hasServerSearch)this.serverSearch(s);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=r(t,s,a,n);e.isVisible&&l++,a||(a=e.hasExactOption)}})),this.allowNewOption&&(s&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(e){var i;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(t.DomUtils.setStyle(this.$noOptions,"height",i),t.DomUtils.setStyle(this.$noSearchResults,"height",i))),t.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(e)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var e=t.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var o=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,n=parseFloat(this.dropboxWidth),l=o.left+n>s,a=n>o.right;l&&!a&&(i=!0)}if(this.appendToBody){var r=this.$ele.getBoundingClientRect(),p=r.left+window.scrollX,c=r.top+window.scrollY;this.$dropboxEl.style.width="".concat(this.$ele.offsetWidth,"px"),this.$dropboxEl.style.left="".concat(p,"px"),"top"===e.vertical?this.$dropboxEl.style.top="".concat(c-this.$dropboxContainer.offsetHeight-4,"px"):this.$dropboxEl.style.top="".concat(c+this.$ele.offsetHeight+4,"px"),t.DomUtils.toggleClass(this.$dropboxContainer,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$dropboxContainer,"position-left",i)}else t.DomUtils.toggleClass(this.$wrapper,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var o={value:t,label:t,isCurrentNew:!0};this.addOption(o)}}}},{key:"setSelectedProp",value:function(){var t=this.selectedValues;this.options.forEach((function(e){-1!==t.indexOf(e.value)&&(e.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":o};return t.DomUtils.getAttributesText(s)}},{key:"getOptionObj",value:function(e){if(e){var i=t.Utils.getString;return{index:e.index,value:i(e.value),label:i(e.label),description:i(e.description),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,e=[],i=this.selectedValues,o=s(this.options);try{for(o.s();!(t=o.n()).done;){var n=t.value;-1!==i.indexOf(n.value)&&e.push(n.label)}}catch(t){o.e(t)}finally{o.f()}return this.multiple?e:e[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},o=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return o(e,t).isVisible}))})),i}},{key:"getOptionsCount",value:function(t){if(this.showAsPopup){var e=80*window.innerHeight/100-48;this.hasSearchContainer&&(e-=40),t=Math.floor(e/this.optionHeight)}else t=parseInt(t);return t}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(e,i){var o="next"===i?"nextElementSibling":"previousElementSibling";do{e&&(e=e[o])}while(t.DomUtils.hasClass(e,"disabled")||t.DomUtils.hasClass(e,"group-title"));return e}},{key:"openDropbox",value:function(e){var i=this;this.setDropboxPosition(),t.DomUtils.removeClass(this.$wrapper,"closed"),t.DomUtils.removeClass(this.$dropboxEl,"opened"),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"opened"),t.DomUtils.addClass(i.$dropboxEl,"opened"),i.dispatchEvent(i.$ele,"opened"),e||(i.moveSelectedOptionsFirst(),t.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(t.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput())}),0)}},{key:"closeDropbox",value:function(e){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var o=e?0:this.transitionDuration;setTimeout((function(){t.DomUtils.removeClass(i.$wrapper,"opened focused"),t.DomUtils.removeClass(i.$dropboxEl,"opened focused"),i.dispatchEvent(i.$ele,"closed"),i.removeOptionFocus(),e||i.isPopupActive&&(t.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1)}),0),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"closed"),t.DomUtils.removeClass(i.$dropboxEl,"closed"),i.appendToBody&&(i.$dropboxEl.style.left="-200px",i.$dropboxEl.style.top="-200px")}),o)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return t.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(e,i){var o,s=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)o=i;else if(s)o=this.getSibling(s,e);else{var n=this.getFirstVisibleOptionIndex();o=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(t.DomUtils.hasClass(o,"disabled")||t.DomUtils.hasClass(o,"group-title"))&&(o=this.getSibling(o,"next"))}o&&o!==s&&(s&&t.DomUtils.removeClass(s,"focused"),t.DomUtils.addClass(o,"focused"),this.toggleFocusedProp(t.DomUtils.getData(o,"index"),!0),e&&this.moveFocusedOptionToView(o))}},{key:"moveFocusedOptionToView",value:function(e){if(e||(e=this.$dropboxContainer.querySelector(".vscomp-option.focused")),e){var i,o=this.$optionsContainer.getBoundingClientRect(),s=e.getBoundingClientRect(),n=o.top,l=o.bottom,a=o.height,r=s.top,p=s.bottom,c=s.height,u=e.offsetTop,h=t.DomUtils.getData(this.$options,"top","number");n>r?i=u+h:l<p&&(i=u-a+c+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(t.DomUtils.removeClass(e,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){if(e){var i=!t.DomUtils.hasClass(e,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var o=this.selectedValues,s=this.selectedIndexes,n=t.DomUtils.getData(e,"value"),l=parseInt(t.DomUtils.getData(e,"index"));if(this.toggleSelectedProp(l,i),i){if(this.multiple)o.push(n),s.push(l),this.toggleAllOptionsClass();else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[n],s=[l];var a=this.$ele.querySelector(".vscomp-option.selected");a&&t.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}t.DomUtils.toggleClass(e,"selected")}else this.multiple&&(t.DomUtils.toggleClass(e,"selected"),t.Utils.removeItemFromArray(o,n),t.Utils.removeItemFromArray(s,l),this.toggleAllOptionsClass(!1));t.DomUtils.hasClass(e,"current-new")&&this.beforeSelectNewValue(),this.setValue(o,s,!0)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof e&&(e=!t.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],o=[];this.options.forEach((function(t,s){t.isDisabled||t.isCurrentNew||t.isGroupTitle||(t.isSelected=e,e&&(i.push(t.value),o.push(s)))})),this.toggleAllOptionsClass(e),this.setValue(i,o,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){"boolean"!=typeof e&&(e=!1,this.options.length&&(e=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),t.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",e),this.isAllSelected=e}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(t){var e=this.searchValue;t&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.search&&this.setSearchValue(e,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),t||this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return e.value===r&&t.value!==r?0:t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,o){var s=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==s.indexOf(e);return t.isGroupTitle&&(a=o[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=s===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var o=[];t.options=o,i[t.index]=o,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"serverSearch",value:function(e){t.DomUtils.removeClass(this.$wrapper,"has-no-options"),t.DomUtils.addClass(this.$wrapper,"server-searching"),this.onServerSearch(e,this)}}])&&a(o.prototype,n),l&&a(o,l),i}();document.addEventListener("reset",c.resetForm),window.addEventListener("resize",c.onResizeMethod),window.VirtualSelect=c})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy91dGlscy9kb20tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJEb21VdGlscyIsIiRlbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsInRoaXMiLCJnZXRFbGVtZW50cyIsImZvckVhY2giLCJfdGhpcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImlzQWRkIiwiaXNBZGRlZCIsInVuZGVmaW5lZCIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJjb250YWlucyIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhdmFpbGFibGVXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwibGVmdCIsInRvcEFyZWEiLCJ0b3AiLCJob3Jpem9udGFsIiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImhlaWdodCIsIm5hbWUiLCJ0eXBlIiwidmFsdWUiLCJkYXRhc2V0IiwicGFyc2VGbG9hdCIsInN0eWxlIiwibGVuZ3RoIiwicHJvcHMiLCJza2lwQXR0ck5hbWUiLCJyZXN1bHQiLCJrIiwiZGF0YSIsImh0bWwiLCJVdGlscyIsInRleHQiLCJ0b1N0cmluZyIsImRlZmF1bHRWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlsdGVyIiwiZCIsInJlcGxhY2UiLCJjIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDhBcnJheSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwibm9uZU9wdGlvblZhbHVlIiwia2V5RG93bk1ldGhvZE1hcHBpbmciLCIxMyIsIjI3IiwiMzgiLCI0MCIsIlZpcnR1YWxTZWxlY3QiLCJvcHRpb25zIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCIkZWxlQXJyYXkiLCJlbGUiLCJzaW5nbGVFbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnN0YW5jZXMiLCJwdXNoIiwiJGZvcm0iLCJ0YXJnZXQiLCJjbG9zZXN0IiwicXVlcnlTZWxlY3RvckFsbCIsInBhcmVudEVsZW1lbnQiLCJ2aXJ0dWFsU2VsZWN0IiwicmVzZXQiLCJzaWxlbnRDaGFuZ2UiLCJzZXRWYWx1ZU1ldGhvZCIsImtlZXBWYWx1ZSIsInNldE9wdGlvbnNNZXRob2QiLCJzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QiLCJpc1NlbGVjdGVkIiwidG9nZ2xlQWxsT3B0aW9ucyIsImlzQWxsU2VsZWN0ZWQiLCJhZGRPcHRpb24iLCJnZXROZXdWYWx1ZSIsImdldERpc3BsYXlWYWx1ZSIsIm9wZW5Ecm9wYm94IiwiY2xvc2VEcm9wYm94Iiwib25SZXNpemUiLCJ3cmFwcGVyQ2xhc3NlcyIsInZhbHVlVG9vbHRpcCIsImdldFRvb2x0aXBBdHRyVGV4dCIsIm11bHRpcGxlIiwiY2xlYXJCdXR0b25Ub29sdGlwIiwiZHJvcGJveENvbnRhaW5lclN0eWxlIiwiekluZGV4IiwiZ2V0V3JhcHBlckNsYXNzZXMiLCJjbGFzc2VzIiwiYWRkaXRpb25hbENsYXNzZXMiLCJkaXNhYmxlU2VsZWN0QWxsIiwicG9zaXRpb24iLCJoaWRlQ2xlYXJCdXR0b24iLCJrZWVwQWx3YXlzT3BlbiIsInNob3dBc1BvcHVwIiwiZHJvcGJveFdpZHRoIiwiaGFzU2VhcmNoIiwiZ3VpZCIsImRyb3Bib3hDb250YWluZXIiLCJub09wdGlvbnNUZXh0Iiwibm9TZWFyY2hSZXN1bHRzVGV4dCIsInBsYWNlaG9sZGVyIiwiYXBwZW5kVG9Cb2R5IiwiaW5uZXJIVE1MIiwiJGJvZHkiLCIkd3JhcHBlciIsIiR0b2dnbGVCdXR0b24iLCIkY2xlYXJCdXR0b24iLCIkZHJvcGJveENsb3NlQnV0dG9uIiwiYXBwZW5kIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCIkZHJvcGJveENvbnRhaW5lciIsIiRkcm9wYm94RWwiLCIkc2VhcmNoIiwiJG9wdGlvbnNDb250YWluZXIiLCIkb3B0aW9uc0xpc3QiLCIkb3B0aW9ucyIsIiR2YWx1ZVRleHQiLCIkaGlkZGVuSW5wdXQiLCIkbm9PcHRpb25zIiwiJG5vU2VhcmNoUmVzdWx0cyIsImFmdGVyUmVuZGVyV3JhcHBlciIsInNlYXJjaFJlZ2V4IiwidmlzaWJsZU9wdGlvbnMiLCJnZXRWaXNpYmxlT3B0aW9ucyIsImNoZWNrYm94SHRtbCIsIm5ld09wdGlvbkljb25IdG1sIiwibWFya1NlYXJjaFJlc3VsdHMiLCJzZWFyY2hWYWx1ZSIsInN0eWxlVGV4dCIsIm9wdGlvbkhlaWdodCIsIlJlZ0V4cCIsImFsbG93TmV3T3B0aW9uIiwibmV3T3B0aW9uVG9vbHRpcCIsIm9wdGlvbkxhYmVsIiwibGFiZWwiLCJvcHRpb25DbGFzc2VzIiwib3B0aW9uVG9vbHRpcCIsImxlZnRTZWN0aW9uIiwicmlnaHRTZWN0aW9uIiwiZGVzY3JpcHRpb24iLCJpc0ZvY3VzZWQiLCJpc0Rpc2FibGVkIiwiaXNHcm91cFRpdGxlIiwiaXNHcm91cE9wdGlvbiIsImlzQ3VycmVudE5ldyIsInZpc2libGVJbmRleCIsImhhc05vT3B0aW9ucyIsImhhc05vU2VhcmNoUmVzdWx0cyIsInNldE9wdGlvbnNQb3NpdGlvbiIsInNldE9wdGlvbnNUb29sdGlwIiwiaGFzU2VhcmNoQ29udGFpbmVyIiwic2VhcmNoSW5wdXQiLCJzZWxlY3RBbGxUZXh0Iiwic2VhcmNoUGxhY2Vob2xkZXIiLCIkc2VhcmNoSW5wdXQiLCIkc2VhcmNoQ2xlYXIiLCIkdG9nZ2xlQWxsQnV0dG9uIiwiJHRvZ2dsZUFsbENoZWNrYm94IiwiYWRkRXZlbnQiLCJldmVudHMiLCJtZXRob2QiLCJldmVudCIsImV2ZW50c0tleSIsImNhbGxiYWNrIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImlzT3BlbmVkIiwid2hpY2giLCJrZXlDb2RlIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94Iiwic2V0VmlzaWJsZU9wdGlvbnMiLCJzZWxlY3RPcHRpb24iLCJzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVPcHRpb25Gb2N1cyIsInNldFNlYXJjaFZhbHVlIiwiZm9jdXNTZWFyY2hJbnB1dCIsInNldE9wdGlvbnNDb250YWluZXJIZWlnaHQiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJTZWFyY2giLCJzZXRPcHRpb25zSGVpZ2h0IiwiYWRkRXZlbnRzIiwic2V0TWV0aG9kcyIsImluaXRpYWxTZWxlY3RlZFZhbHVlIiwic2lsZW50SW5pdGlhbFZhbHVlU2V0IiwiYXV0b1NlbGVjdEZpcnN0T3B0aW9uIiwic2V0RGVmYXVsdFByb3BzIiwic2V0UHJvcHNGcm9tRWxlbWVudEF0dHIiLCJjb252ZXJ0VG9Cb29sZWFuIiwidmFsdWVLZXkiLCJsYWJlbEtleSIsImRlc2NyaXB0aW9uS2V5IiwiYWxpYXNLZXkiLCJvcHRpb25IZWlnaHRUZXh0Iiwic2VhcmNoIiwiaGFzT3B0aW9uRGVzY3JpcHRpb24iLCJzaG93RHJvcGJveEFzUG9wdXAiLCJ0b29sdGlwRm9udFNpemUiLCJ0b29sdGlwQWxpZ25tZW50IiwidG9vbHRpcE1heFdpZHRoIiwibm9PZkRpc3BsYXlWYWx1ZXMiLCJwYXJzZUludCIsIm1heFZhbHVlcyIsInNlbGVjdGVkVmFsdWUiLCJwb3B1cERyb3Bib3hCcmVha3BvaW50Iiwib25TZXJ2ZXJTZWFyY2giLCJpdGVtc1NlbGVjdGVkTWVzc2FnZSIsImFsbG93Tm9uZU9wdGlvbiIsIm5vbmVPcHRpb25UZXh0Iiwic2VsZWN0ZWRWYWx1ZXMiLCJzZWxlY3RlZEluZGV4ZXMiLCJuZXdWYWx1ZXMiLCJ0b29sdGlwRW50ZXJEZWxheSIsInRyYW5zaXRpb25EdXJhdGlvbiIsInNlYXJjaFZhbHVlT3JpZ2luYWwiLCJoYXNTZXJ2ZXJTZWFyY2giLCJvcHRpb25zQ291bnQiLCJnZXRPcHRpb25zQ291bnQiLCJoYWxmT3B0aW9uc0NvdW50IiwiTWF0aCIsImNlaWwiLCJvcHRpb25zSGVpZ2h0IiwiZ2V0T3B0aW9uc0hlaWdodCIsImRlZmF1bHRPcHRpb25zIiwiYXNzaWduIiwibWFwcGluZyIsImdldEF0dHJpYnV0ZSIsInNldFZhbHVlIiwidG9nZ2xlU2VsZWN0QWxsIiwiYWRkT3B0aW9uTWV0aG9kIiwiZ2V0TmV3VmFsdWVNZXRob2QiLCJnZXREaXNwbGF5VmFsdWVNZXRob2QiLCJvcGVuIiwib3Blbk1ldGhvZCIsImNsb3NlIiwiY2xvc2VNZXRob2QiLCJtYXAiLCJ2IiwidmFsaWRWYWx1ZXMiLCJ2YWxpZEluZGV4ZXMiLCJiZWZvcmVWYWx1ZVNldCIsImFmdGVyVmFsdWVTZXQiLCJuZXdvcHRpb24iLCJhZnRlclNldE9wdGlvbnMiLCJzZXRPcHRpb25zUHJvcCIsInByZXBhcmVkT3B0aW9ucyIsImhhc0Rpc2FibGVkT3B0aW9ucyIsImdldFN0cmluZyIsImdldEFsaWFzIiwiaGFzT3B0aW9uR3JvdXAiLCJ1bnNoaWZ0IiwicHJlcGFyZU9wdGlvbiIsImNoaWxkT3B0aW9ucyIsIm9wdGlvbiIsImFsaWFzIiwiaXNWaXNpYmxlIiwiZ3JvdXBJbmRleCIsInZpc2libGVPcHRpb25zQ291bnQiLCJsYXN0T3B0aW9uSW5kZXgiLCJzZXRTb3J0ZWRPcHRpb25zIiwic29ydGVkT3B0aW9ucyIsInNvcnRPcHRpb25zR3JvdXAiLCJzb3J0T3B0aW9ucyIsIm1heE9wdGlvbnNUb1Nob3ciLCJzdGFydEluZGV4IiwiZ2V0VmlzaWJsZVN0YXJ0SW5kZXgiLCJuZXdPcHRpb24iLCJnZXROZXdPcHRpb24iLCJlbmRJbmRleCIsImkiLCJpblZpZXciLCJyZW5kZXJPcHRpb25zIiwidHJhbnNmb3JtIiwiJG9wdGlvbkVsZSIsInRyaWdnZXJFdmVudCIsIm5ld1ZhbHVlIiwibmV3SW5kZXgiLCJpc01heFZhbHVlc1NlbGVjdGVkIiwic2V0VmFsdWVUZXh0IiwibGFzdFNjcm9sbFRvcCIsInNjcm9sbFRvcCIsIm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCIsInZhbHVlVGV4dCIsInNlbGVjdGVkTGVuZ3RoIiwic2VsZWN0ZWRWYWx1ZXNDb3VudCIsIm1vcmVTZWxlY3RlZE9wdGlvbnMiLCJhZ2dyZWdhdGVkVmFsdWVUZXh0Iiwiam9pbiIsImNvdW50VGV4dCIsInNraXBJbnB1dFNldCIsImZvcmNlIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwic2VydmVyU2VhcmNoIiwidmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmciLCJoYXNFeGFjdE9wdGlvbiIsImlzT3B0aW9uVmlzaWJsZSIsImdldFZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nIiwic2V0TmV3T3B0aW9uIiwicmVtb3ZlTmV3T3B0aW9uIiwic2Nyb2xsVG9Ub3AiLCJhZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQiLCJtb3JlVmlzaWJsZVNpZGVzIiwic2hvd09uTGVmdCIsImJ1dHRvbkNvb3JkcyIsInZpZXdwb3J0V2lkdGgiLCJoaWRkZW5PblJpZ2h0IiwiaGlkZGVuT25MZWZ0IiwicmlnaHQiLCJlbGVDb29yZHMiLCJ4Iiwic2Nyb2xsWCIsInkiLCJzY3JvbGxZIiwib2Zmc2V0SGVpZ2h0Iiwic2V0T3B0aW9uUHJvcCIsImdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IiwiZWxsaXBzaXNPbmx5IiwiYWxsb3dIdG1sIiwibGFzdE9wdGlvbiIsInNvbWUiLCJkaXNwbGF5VmFsdWVzIiwic3RydWN0dXJlT3B0aW9uR3JvdXAiLCJjb3VudCIsImZsb29yIiwiZGlyZWN0aW9uIiwicHJvcE5hbWUiLCJpc1NpbGVudCIsInNldERyb3Bib3hQb3NpdGlvbiIsImlzUG9wdXBBY3RpdmUiLCJmb2N1cyIsIiRuZXdGb2N1c2VkRWxlIiwiJGZvY3VzZWRFbGUiLCJnZXRTaWJsaW5nIiwiZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgiLCJ0b2dnbGVGb2N1c2VkUHJvcCIsIm1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3IiwibmV3U2Nyb2xsVG9wIiwiY29udGFpbmVyUmVjdCIsIm9wdGlvblJlY3QiLCJjb250YWluZXJUb3AiLCJjb250YWluZXJCb3R0b20iLCJib3R0b20iLCJjb250YWluZXJIZWlnaHQiLCJvcHRpb25Ub3AiLCJvcHRpb25Cb3R0b20iLCJvcHRpb25PZmZzZXRUb3AiLCJvZmZzZXRUb3AiLCJvcHRpb25zVG9wIiwiaXNBZGRpbmciLCJzZWxlY3RlZEluZGV4IiwidG9nZ2xlU2VsZWN0ZWRQcm9wIiwidG9nZ2xlQWxsT3B0aW9uc0NsYXNzIiwiZ2V0T3B0aW9uSW5kZXgiLCIkcHJldlNlbGVjdGVkT3B0aW9uIiwiYmVmb3JlU2VsZWN0TmV3VmFsdWUiLCJpZHgiLCJmb2N1c2VkT3B0aW9uSW5kZXgiLCJpc0Nsb3NlZCIsImlzUmVzZXQiLCJyZXJlbmRlciIsImdldE9wdGlvbk9iaiIsInJlbW92ZU9wdGlvbiIsInNvcnQiLCJhIiwiYiIsImRlc3RydWN0dXJlT3B0aW9uR3JvdXAiLCJjaGlsZEFycmF5IiwiY29uY2F0IiwicmVzZXRGb3JtIiwib25SZXNpemVNZXRob2QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7NjlCQUFPLElBQU1BLEVBQWIseUIsNEZBQUEsUyxVQUFBLE8sRUFBQSxFLEVBQUEsZ0NBQ2tCQyxFQUFNQyxHQUNmRCxJQUlMQyxFQUFZQSxFQUFVQyxNQUFNLEtBRTVCQyxLQUFLQyxZQUFZSixHQUFNSyxTQUFRLFNBQUNDLEdBQVUsT0FDeEMsRUFBQUEsRUFBTUMsV0FBVUMsSUFBaEIsVUFBdUJQLFVBVDdCLGtDQWFxQkQsRUFBTUMsR0FDbEJELElBSUxDLEVBQVlBLEVBQVVDLE1BQU0sS0FFNUJDLEtBQUtDLFlBQVlKLEdBQU1LLFNBQVEsU0FBQ0MsR0FBVSxPQUN4QyxFQUFBQSxFQUFNQyxXQUFVRSxPQUFoQixVQUEwQlIsVUFyQmhDLGtDQXlCcUJELEVBQU1DLEVBQVdTLEdBU2xDLElBQUlDLEVBUkosR0FBS1gsRUFjTCxZQVZjWSxJQUFWRixJQUNGQSxFQUFRRyxRQUFRSCxJQUtsQlAsS0FBS0MsWUFBWUosR0FBTUssU0FBUSxTQUFDQyxHQUM5QkssRUFBVUwsRUFBTUMsVUFBVU8sT0FBT2IsRUFBV1MsTUFHdkNDLElBeENYLCtCQTJDa0JYLEVBQU1DLEdBQ3BCLFFBQUtELEdBSUVBLEVBQUtPLFVBQVVRLFNBQVNkLEtBaERuQyxrQ0FtRHFCRCxHQUNqQixRQUFLQSxHQUlFQSxFQUFLZ0IsWUFBY2hCLEVBQUtpQixjQXhEbkMsMENBMkQ2QmpCLEdBQ3pCLElBQUtBLEVBQ0gsTUFBTyxHQUdULElBQUlrQixFQUFNbEIs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LElBL2dFWCw2Q0FraEV5Qm9ELEdBQ3JCLElBQUlwRCxFQUFTLEdBT2IsT0FMQW9ELEVBQVF6RixTQUFRLFNBQUN3RCxHQUNmbkIsRUFBT29FLEtBQUtqRCxHQUNabkIsRUFBU0EsRUFBT29ZLE9BQU9qWCxFQUFFaUMsWUFHcEJwRCxJQTFoRVgsbUNBNmhFZTJJLEdBQ1h0TCx1QkFBcUJJLEtBQUswSixTQUFVLGtCQUNwQzlKLG9CQUFrQkksS0FBSzBKLFNBQVUsb0JBQ2pDMUosS0FBS3dRLGVBQWV0RixFQUFhbEwsVywyQkFoaUVyQyxLQXVvRUF3RyxTQUFTZ0gsaUJBQWlCLFFBQVM5SCxFQUFja1YsV0FDakQxWixPQUFPc00saUJBQWlCLFNBQVU5SCxFQUFjbVYsZ0JBRWhEM1osT0FBT3dFLGNBQWdCQSxHIiwiZmlsZSI6InZpcnR1YWwtc2VsZWN0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEb21VdGlscyB7XHJcbiAgc3RhdGljIGFkZENsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIF90aGlzLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIF90aGlzLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSwgaXNBZGQpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQWRkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgaXNBZGQgPSBCb29sZWFuKGlzQWRkKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNBZGRlZDtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIGlzQWRkZWQgPSBfdGhpcy5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgaXNBZGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlzQWRkZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAkZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhc0VsbGlwc2lzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuc2Nyb2xsV2lkdGggPiAkZWxlLm9mZnNldFdpZHRoO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE1vcmVWaXNpYmxlU2lkZXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYm94ID0gJGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBhdmFpbGFibGVXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgbGV0IGF2YWlsYWJsZUhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIGxldCBsZWZ0QXJlYSA9IGJveC5sZWZ0O1xyXG4gICAgbGV0IHRvcEFyZWEgPSBib3gudG9wO1xyXG4gICAgbGV0IHJpZ2h0QXJlYSA9IGF2YWlsYWJsZVdpZHRoIC0gbGVmdEFyZWEgLSBib3gud2lkdGg7XHJcbiAgICBsZXQgYm90dG9tQXJlYSA9IGF2YWlsYWJsZUhlaWdodCAtIHRvcEFyZWEgLSBib3guaGVpZ2h0O1xyXG4gICAgbGV0IGhvcml6b250YWwgPSBsZWZ0QXJlYSA+IHJpZ2h0QXJlYSA/ICdsZWZ0JyA6ICdyaWdodCc7XHJcbiAgICBsZXQgdmVydGljYWwgPSB0b3BBcmVhID4gYm90dG9tQXJlYSA/ICd0b3AnIDogJ2JvdHRvbSc7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaG9yaXpvbnRhbCxcclxuICAgICAgdmVydGljYWwsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldERhdGEoJGVsZSwgbmFtZSwgdHlwZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmFsdWUgPSAkZWxlID8gJGVsZS5kYXRhc2V0W25hbWVdIDogJyc7XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXREYXRhKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuZGF0YXNldFtuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFN0eWxlKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRFbGVtZW50cygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGUgPSBbJGVsZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICAvKiogY29udmVydCBvYmplY3QgdG8gc3R5bGUgYXR0cmlidXRlICovXHJcbiAgc3RhdGljIGdldFN0eWxlVGV4dChwcm9wcywgc2tpcEF0dHJOYW1lKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gJyc7XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBwcm9wcykge1xyXG4gICAgICByZXN1bHQgKz0gYCR7a306ICR7cHJvcHNba119O2A7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdCAmJiAhc2tpcEF0dHJOYW1lKSB7XHJcbiAgICAgIHJlc3VsdCA9IGBzdHlsZT1cIiR7cmVzdWx0fVwiYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqIGNvbnZlcnQgb2JqZWN0IHRvIGRvbSBhdHRyaWJ1dGVzICovXHJcbiAgc3RhdGljIGdldEF0dHJpYnV0ZXNUZXh0KGRhdGEpIHtcclxuICAgIGxldCBodG1sID0gJyc7XHJcblxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGsgaW4gZGF0YSkge1xyXG4gICAgICBsZXQgdmFsdWUgPSBkYXRhW2tdO1xyXG5cclxuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBodG1sICs9IGAgJHtrfT1cIiR7dmFsdWV9XCIgYDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBodG1sO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXRpbHMge1xyXG4gIHN0YXRpYyBnZXRTdHJpbmcodGV4dCkge1xyXG4gICAgcmV0dXJuIHRleHQgfHwgdGV4dCA9PT0gMCA/IHRleHQudG9TdHJpbmcoKSA6ICcnO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUsIGRlZmF1bHRWYWx1ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzRW1wdHkodmFsdWUpIHtcclxuICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc05vdEVtcHR5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuaXNFbXB0eSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlSXRlbUZyb21BcnJheShhcnJheSwgdmFsdWUsIGNsb25lQXJyYXkpIHtcclxuICAgIGlmIChcclxuICAgICAgIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8XHJcbiAgICAgICFhcnJheS5sZW5ndGggfHxcclxuICAgICAgdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJ1xyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2xvbmVBcnJheSkge1xyXG4gICAgICBhcnJheSA9IFsuLi5hcnJheV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XHJcblxyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVBcnJheUVtcHR5KGFycmF5KSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheS5maWx0ZXIoKGQpID0+ICEhZCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2VuZXJhdGVVVUlEKCkge1xyXG4gICAgcmV0dXJuIChbMWU3XSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCAoYykgPT5cclxuICAgICAgKFxyXG4gICAgICAgIGMgXlxyXG4gICAgICAgIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmICgxNSA+PiAoYyAvIDQpKSlcclxuICAgICAgKS50b1N0cmluZygxNilcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IFV0aWxzLCBEb21VdGlscyB9IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuY29uc3QgdmlydHVhbFNlbGVjdFZlcnNpb24gPSAndjEuMC42JztcclxuY29uc3QgZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodCA9IDQ4O1xyXG5jb25zdCBzZWFyY2hIZWlnaHQgPSA0MDtcclxuY29uc3Qgbm9uZU9wdGlvblZhbHVlID0gJ3sjdmlydHVhbC1zZWxlY3Qtbm9uZS1vcHRpb24jfSc7XHJcblxyXG5jb25zdCBrZXlEb3duTWV0aG9kTWFwcGluZyA9IHtcclxuICAxMzogJ29uRW50ZXJQcmVzcycsXHJcbiAgMjc6ICdvbkVzY1ByZXNzJyxcclxuICAzODogJ29uVXBBcnJvd1ByZXNzJyxcclxuICA0MDogJ29uRG93bkFycm93UHJlc3MnLFxyXG59O1xyXG5cclxuLyoqIENsYXNzIHJlcHJlc2VudGluZyBWaXJ0dWFsU2VsZWN0ICovXHJcbmV4cG9ydCBjbGFzcyBWaXJ0dWFsU2VsZWN0IHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHsoZWxlbWVudHxzdHJpbmcpfSBlbGUgLSBQYXJlbnQgZWxlbWVudCB0byByZW5kZXIgVmlydHVhbFNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IG9wdGlvbnMgLSBBcnJheSBvZiBvYmplY3QgdG8gc2hvdyBhcyBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS52YWx1ZSAtIFZhbHVlIG9mIHRoZSBvcHRpb25cclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLmxhYmVsIC0gRGlzcGxheSB0ZXh0IG9mIHRoZSBvcHRpb25cclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLmRlc2NyaXB0aW9uIC0gVGV4dCB0byBzaG93IGFsb25nIHdpdGggbGFiZWxcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8YXJyYXkpfSBvcHRpb25zW10uYWxpYXMgLSBBbHRlcm5hdGl2ZSBsYWJlbHMgdG8gdXNlIG9uIHNlYXJjaC4gQXJyYXkgb2Ygc3RyaW5nIG9yIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcuXHJcbiAgICogQHByb3BlcnR5IHthcnJheX0gb3B0aW9uc1tdLm9wdGlvbnMgLSBMaXN0IG9mIG9wdGlvbnMgZm9yIG9wdGlvbiBncm91cFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdmFsdWVLZXk9dmFsdWVdIC0gT2JqZWN0IGtleSB0byB1c2UgdG8gZ2V0IHZhbHVlIGZyb20gb3B0aW9ucyBhcnJheVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGFiZWxLZXk9bGFiZWxdIC0gT2JqZWN0IGtleSB0byB1c2UgdG8gZ2V0IGxhYmVsIGZyb20gb3B0aW9ucyBhcnJheVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZGVzY3JpcHRpb25LZXk9ZGVzY3JpcHRpb25dIC0gT2JqZWN0IGtleSB0byB1c2UgdG8gZ2V0IGRlc2NyaXB0aW9uIGZyb20gb3B0aW9ucyBhcnJheVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYWxpYXNLZXk9YWxpYXNdIC0gS2V5IG5hbWUgdG8gZ2V0IGFsaWFzIGZyb20gb3B0aW9ucyBvYmplY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFttdWx0aXBsZT1mYWxzZV0gLSBFbmFibGUgbXVsdGlzZWxlY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzZWFyY2g9ZmFsc2VdIC0gRW5hYmxlIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hpZGVDbGVhckJ1dHRvbj1mYWxzZV0gLSBIaWRlIGNsZWFyIGJ1dHRvblxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F1dG9TZWxlY3RGaXJzdE9wdGlvbj1mYWxzZV0gLSBTZWxlY3QgZmlyc3Qgb3B0aW9uIGJ5IGRlZmF1bHQgb24gbG9hZFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hhc09wdGlvbkRlc2NyaXB0aW9uPWZhbHNlXSAtIEhhcyBkZXNjcmlwdGlvbiB0byBzaG93IGFsb25nIHdpdGggbGFiZWxcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkaXNhYmxlU2VsZWN0QWxsPWZhbHNlXSAtIERpc2FibGUgc2VsZWN0IGFsbCBmZWF0dXJlIG9mIG11bHRpcGxlIHNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb3B0aW9uc0NvdW50PTV8NF0gLSBOby5vZiBvcHRpb25zIHRvIHNob3cgb24gdmlld3BvcnRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW29wdGlvbkhlaWdodD00MHB4fDYwcHhdIC0gSGVpZ2h0IG9mIGVhY2ggZHJvcGRvd24gb3B0aW9uc1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcG9zaXRpb249YXV0b10gLSBQb3NpdGlvbiBvZiBkcm9wYm94ICh0b3AsIGJvdHRvbSwgYXV0bylcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3BsYWNlaG9sZGVyPVNlbGVjdF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyBvcHRpb25zIHNlbGVjdGVkXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtub09wdGlvbnNUZXh0PU5vIG9wdGlvbnMgZm91bmRdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gb3B0aW9ucyB0byBzaG93XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtub1NlYXJjaFJlc3VsdHNUZXh0PU5vIHJlc3VsdHMgZm91bmRdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gcmVzdWx0cyBvbiBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3NlbGVjdEFsbFRleHQ9U2VsZWN0IGFsbF0gLSBUZXh0IHRvIHNob3cgbmVhciBzZWxlY3QgYWxsIGNoZWNrYm94IHdoZW4gc2VhcmNoIGlzIGRpc2FibGVkXHJcbiAgICogQHByb3BlcnR5IHthcnJheX0gW2Rpc2FibGVkT3B0aW9uc10gLSBPcHRpb25zIHRvIGRpc2FibGUgKGFycmF5IG9mIHZhbHVlcylcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8YXJyYXkpfSBbc2VsZWN0ZWRWYWx1ZV0gLSBTaW5nbGUgdmFsdWUgb3IgYXJyYXkgb2YgdmFsdWVzIHRvIHNlbGVjdCBvbiBpbml0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2lsZW50SW5pdGlhbFZhbHVlU2V0PWZhbHNlXSAtIFRvIGF2b2lkIFwiY2hhbmdlIGV2ZW50XCIgdHJpZ2dlciBvbiBzZXR0aW5nIGluaXRpYWwgdmFsdWVcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Ryb3Bib3hXaWR0aF0gLSBDdXN0b20gd2lkdGggZm9yIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleD0xXSAtIENTUyB6LWluZGV4IHZhbHVlIGZvciBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtub09mRGlzcGxheVZhbHVlcz01MF0gLSBNYXhpbXVtIG5vLm9mIHZhbHVlcyB0byBzaG93IGluIHRoZSB0b29sdGlwIGZvciBtdWx0aS1zZWxlY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbGxvd05ld09wdGlvbj1mYWxzZV0gLSBBbGxvdyB0byBhZGQgbmV3IG9wdGlvbiBieSBzZWFyY2hpbmdcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFttYXJrU2VhcmNoUmVzdWx0cz1mYWxzZV0gLSBNYXJrIG1hdGNoZWQgdGVybSBpbiBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcEZvbnRTaXplPTE0cHhdIC0gRm9udCBzaXplIGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwQWxpZ25tZW50PWNlbnRlcl0gLSBDU1MgVGV4dCBhbGlnbm1lbnQgZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBNYXhXaWR0aD0zMDBweF0gLSBDU1MgbWF4IHdpZHRoIGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0PWZhbHNlXSAtIFNob3cgc2VsZWN0ZWQgb3B0aW9ucyBhdCB0aGUgdG9wIG9mIHRoZSBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtuYW1lXSAtIE5hbWUgYXR0cmlidXRlIGZvciBoaWRkZW4gaW5wdXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZWVwQWx3YXlzT3Blbl0gLSBLZWVwIGRyb3Bib3ggYWx3YXlzIG9wZW4gd2l0aCBmaXhlZCBoZWlnaHRcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW21heFZhbHVlcz0wXSAtIE1heGltdW0gbm8ub2Ygb3B0aW9ucyBhbGxvd2VkIHRvIGNob29zZSBpbiBtdWx0aXBsZSBzZWxlY3RcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2FkZGl0aW9uYWxDbGFzc2VzXSAtIEFkZGl0aW9uYWwgY2xhc3NlcyBmb3Igd3JhcHBlciBlbGVtZW50XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2hvd0Ryb3Bib3hBc1BvcHVwPXRydWVdIC0gU2hvdyBkcm9wYm94IGFzIHBvcHVwIG9uIHNtYWxsIHNjcmVlbiBsaWtlIG1vYmlsZVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcG9wdXBEcm9wYm94QnJlYWtwb2ludD01NzZweF0gLSBNYXhpbXVtIHNjcmVlbiB3aWR0aCB0aGF0IGFsbG93ZWQgdG8gc2hvdyBkcm9wYm94IGFzIHBvcHVwXHJcbiAgICogQHByb3BlcnR5IHtmdW5jdGlvbn0gW29uU2VydmVyU2VhcmNoXSAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGludGVncmF0ZSBzZXJ2ZXIgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzZWFyY2hQbGFjZWhvbGRlcj1TZWFyY2guLi5dIC0gVGV4dCB0byBzaG93IGluc2lkZSBzZWFyY2ggaW5wdXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbGxvd05vbmVPcHRpb249ZmFsc2VdIC0gSW4gc2luZ2xlIHNlbGVjdGlvbiBtb2RlIG9ubHkgYW5kIHdoZW4ga2VlcCBhbHdheXMgb3BlbiBpcyBvbjogZGlzcGxheSBhIG5vbmUgb3B0aW9uIHRoYXQgY2xlYXJzIHRoZSBzZWxlY3Rpb25cclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vbmVPcHRpb25UZXh0PU5vbmVdIC0gVGV4dCB0byBiZSBkaXNwbGF5IGlmIGFsbG93Tm9uZSBvcHRpb24gaXMgYWN0aXZlXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXBwZW5kVG9Cb2R5PWZhbHNlXSAtIFdoZW4gc2V0IHRvIHRydWUgYW5kIGtlZXBBbHdheXMgb3BlbiBpcyBvZmYgd2UgYXJlIGFkZGluZyB0aGUgZHJvcGJveCBlbGVtZW50IHRvIHRoZSBib2R5XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5zZXRQcm9wcyhvcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMob3B0aW9ucy5kaXNhYmxlZE9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucy5vcHRpb25zKTtcclxuICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKGBDb3VsZG4ndCBpbml0aWF0ZSBWaXJ0dWFsIFNlbGVjdGApO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIHJlbmRlciBtZXRob2RzIC0gc3RhcnQgKi9cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHdyYXBwZXJDbGFzc2VzID0gJ3ZzY29tcC13cmFwcGVyJztcclxuICAgIGxldCB2YWx1ZVRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnJywgIXRoaXMubXVsdGlwbGUsIHRydWUpO1xyXG4gICAgbGV0IGNsZWFyQnV0dG9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdDbGVhcicpO1xyXG5cclxuICAgIGxldCBkcm9wYm94Q29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICAgICd6LWluZGV4JzogdGhpcy56SW5kZXgsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGdldFdyYXBwZXJDbGFzc2VzID0gKCkgPT4ge1xyXG4gICAgICBsZXQgY2xhc3NlcyA9ICcnO1xyXG5cclxuICAgICAgaWYgKHRoaXMuYWRkaXRpb25hbENsYXNzZXMpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgJyArIHRoaXMuYWRkaXRpb25hbENsYXNzZXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIG11bHRpcGxlJztcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtc2VsZWN0LWFsbCc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcG9zaXRpb24tdG9wJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLmhpZGVDbGVhckJ1dHRvbikge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtY2xlYXItYnV0dG9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcga2VlcC1hbHdheXMtb3BlbiBvcGVuZWQnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBjbG9zZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBzaG93LWFzLXBvcHVwJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5kcm9wYm94V2lkdGgpIHtcclxuICAgICAgICAgIGRyb3Bib3hDb250YWluZXJTdHlsZS53aWR0aCA9IHRoaXMuZHJvcGJveFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1zZWFyY2gtaW5wdXQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY2xhc3NlcztcclxuICAgIH07XHJcblxyXG4gICAgd3JhcHBlckNsYXNzZXMgKz0gZ2V0V3JhcHBlckNsYXNzZXMoKTtcclxuXHJcbiAgICB0aGlzLmd1aWQgPSBVdGlscy5nZW5lcmF0ZVVVSUQoKTtcclxuXHJcbiAgICBsZXQgZHJvcGJveENvbnRhaW5lciA9IGA8ZGl2IGlkPVwidnMtJHtcclxuICAgICAgdGhpcy5ndWlkXHJcbiAgICB9XCIgY2xhc3M9XCJ2c2NvbXAtZHJvcGJveC1jb250YWluZXJcIiAke0RvbVV0aWxzLmdldFN0eWxlVGV4dChcclxuICAgICAgZHJvcGJveENvbnRhaW5lclN0eWxlXHJcbiAgICApfT5cclxuICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1kcm9wYm94XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtd3JhcHBlclwiPjwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbG9hZGVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zLWxpc3RcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zXCI+PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1vcHRpb25zXCI+JHt0aGlzLm5vT3B0aW9uc1RleHR9PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1zZWFyY2gtcmVzdWx0c1wiPiR7dGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0fTwvZGl2PlxyXG5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1kcm9wYm94LWNsb3NlLWJ1dHRvblwiPjxpIGNsYXNzPVwidnNjb21wLWNsZWFyLWljb25cIj48L2k+PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmA7XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cIiR7d3JhcHBlckNsYXNzZXN9XCIgdGFiaW5kZXg9XCIwXCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJHt0aGlzLm5hbWV9XCIgY2xhc3M9XCJ2c2NvbXAtaGlkZGVuLWlucHV0XCI+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC12YWx1ZVwiICR7dmFsdWVUb29sdGlwfT5cclxuICAgICAgICAgICAgJHt0aGlzLnBsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1hcnJvd1wiPjwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtY2xlYXItYnV0dG9uIHRvZ2dsZS1idXR0b24tY2hpbGRcIiAke2NsZWFyQnV0dG9uVG9vbHRpcH0+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwidnNjb21wLWNsZWFyLWljb25cIj48L2k+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgJHt0aGlzLmtlZXBBbHdheXNPcGVuIHx8ICF0aGlzLmFwcGVuZFRvQm9keSA/IGRyb3Bib3hDb250YWluZXIgOiAnJ31cclxuXHJcbiAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgdGhpcy4kZWxlLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB0aGlzLiRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5cclxuICAgIHRoaXMuJHdyYXBwZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC10b2dnbGUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLiRjbGVhckJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWNsZWFyLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXRoaXMua2VlcEFsd2F5c09wZW4gJiYgdGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgLy8gQXBwZW5kIHRvIGJvZHkgKGJldGEpXHJcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICB0aGlzLiRib2R5LmFwcGVuZChcclxuICAgICAgICBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChkcm9wYm94Q29udGFpbmVyKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCN2cy0ke3RoaXMuZ3VpZH0udnNjb21wLWRyb3Bib3gtY29udGFpbmVyYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3ZzLSR7dGhpcy5ndWlkfWApO1xyXG5cclxuICAgICAgbGV0IGNsYXNzZXMgPSAndnNjb21wLXdyYXBwZXItYm9keSc7XHJcbiAgICAgIGNsYXNzZXMgKz0gZ2V0V3JhcHBlckNsYXNzZXMoKTtcclxuXHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGRyb3Bib3hFbCwgYCR7Y2xhc3Nlc31gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAnLnZzY29tcC1kcm9wYm94LWNvbnRhaW5lcidcclxuICAgICAgKTtcclxuICAgICAgdGhpcy4kZHJvcGJveEVsID0gdGhpcy4kZWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJHNlYXJjaCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbnMtY29udGFpbmVyJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLiRvcHRpb25zTGlzdCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMtbGlzdCcpO1xyXG4gICAgdGhpcy4kb3B0aW9ucyA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMnKTtcclxuICAgIHRoaXMuJHZhbHVlVGV4dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXZhbHVlJyk7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWhpZGRlbi1pbnB1dCcpO1xyXG4gICAgdGhpcy4kbm9PcHRpb25zID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtbm8tb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kbm9TZWFyY2hSZXN1bHRzID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW5vLXNlYXJjaC1yZXN1bHRzJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFmdGVyUmVuZGVyV3JhcHBlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyT3B0aW9ucygpIHtcclxuICAgIGxldCBodG1sID0gJyc7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSB0aGlzLmdldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICBsZXQgY2hlY2tib3hIdG1sID0gJyc7XHJcbiAgICBsZXQgbmV3T3B0aW9uSWNvbkh0bWwgPSAnJztcclxuICAgIGxldCBtYXJrU2VhcmNoUmVzdWx0cyA9XHJcbiAgICAgIHRoaXMubWFya1NlYXJjaFJlc3VsdHMgJiYgdGhpcy5zZWFyY2hWYWx1ZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIGxldCBzZWFyY2hSZWdleDtcclxuXHJcbiAgICBsZXQgc3R5bGVUZXh0ID0gRG9tVXRpbHMuZ2V0U3R5bGVUZXh0KHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLm9wdGlvbkhlaWdodCArICdweCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobWFya1NlYXJjaFJlc3VsdHMpIHtcclxuICAgICAgc2VhcmNoUmVnZXggPSBuZXcgUmVnRXhwKGAoJHt0aGlzLnNlYXJjaFZhbHVlfSlgLCAnZ2knKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uXCI+PC9zcGFuPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgbGV0IG5ld09wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnTmV3IE9wdGlvbicpO1xyXG4gICAgICBuZXdPcHRpb25JY29uSHRtbCA9IGA8c3BhbiBjbGFzcz1cInZzY29tcC1uZXctb3B0aW9uLWljb25cIiAke25ld09wdGlvblRvb2x0aXB9Pjwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IG9wdGlvbkxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgbGV0IG9wdGlvbkNsYXNzZXMgPSAndnNjb21wLW9wdGlvbic7XHJcbiAgICAgIGxldCBvcHRpb25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsIHRydWUpO1xyXG4gICAgICBsZXQgbGVmdFNlY3Rpb24gPSBjaGVja2JveEh0bWw7XHJcbiAgICAgIGxldCByaWdodFNlY3Rpb24gPSAnJztcclxuICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcblxyXG4gICAgICBpZiAoZC5pc0ZvY3VzZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZm9jdXNlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZGlzYWJsZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtdGl0bGUnO1xyXG4gICAgICAgIGxlZnRTZWN0aW9uID0gJyc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIHNlbGVjdGVkJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtb3B0aW9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuZGVzY3JpcHRpb24pIHtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IGA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvblwiICR7b3B0aW9uVG9vbHRpcH0+JHtkLmRlc2NyaXB0aW9ufTwvZGl2PmA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBjdXJyZW50LW5ldyc7XHJcbiAgICAgICAgcmlnaHRTZWN0aW9uICs9IG5ld09wdGlvbkljb25IdG1sO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cyAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICAgIG9wdGlvbkxhYmVsID0gb3B0aW9uTGFiZWwucmVwbGFjZShzZWFyY2hSZWdleCwgJzxtYXJrPiQxPC9tYXJrPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIiR7b3B0aW9uQ2xhc3Nlc31cIiBkYXRhLXZhbHVlPVwiJHtcclxuICAgICAgICBkLnZhbHVlXHJcbiAgICAgIH1cIiBkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiIGRhdGEtdmlzaWJsZS1pbmRleD1cIiR7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXhcclxuICAgICAgfVwiICR7c3R5bGVUZXh0fT5cclxuICAgICAgICAgICR7bGVmdFNlY3Rpb259XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1vcHRpb24tdGV4dCAke1xyXG4gICAgICAgICAgICBkLnZhbHVlID09PSBub25lT3B0aW9uVmFsdWUgPyAnbm9uZScgOiAnJ1xyXG4gICAgICAgICAgfVwiICR7b3B0aW9uVG9vbHRpcH0+XHJcbiAgICAgICAgICAgICR7b3B0aW9uTGFiZWx9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAke2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgJHtyaWdodFNlY3Rpb259XHJcbiAgICAgICAgPC9kaXY+YDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuJG9wdGlvbnMuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIGxldCBoYXNOb09wdGlvbnMgPSAhdGhpcy5vcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCBoYXNOb1NlYXJjaFJlc3VsdHMgPSAhaGFzTm9PcHRpb25zICYmICF2aXNpYmxlT3B0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKCF0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ2hhcy1uby1zZWFyY2gtcmVzdWx0cycsXHJcbiAgICAgICAgaGFzTm9TZWFyY2hSZXN1bHRzXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAodGhpcy5hcHBlbmRUb0JvZHkpXHJcbiAgICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgICB0aGlzLiRkcm9wYm94RWwsXHJcbiAgICAgICAgICAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJyxcclxuICAgICAgICAgIGhhc05vU2VhcmNoUmVzdWx0c1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy1uby1vcHRpb25zJywgaGFzTm9PcHRpb25zKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Bvc2l0aW9uKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNUb29sdGlwKCk7XHJcbiAgICAvL3RoaXMubW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclNlYXJjaCgpIHtcclxuICAgIGlmICghdGhpcy5oYXNTZWFyY2hDb250YWluZXIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBzZWFyY2hJbnB1dCA9ICcnO1xyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlICYmICF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgY2hlY2tib3hIdG1sID0gYDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtYnV0dG9uXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNoZWNrYm94LWljb24gdnNjb21wLXRvZ2dsZS1hbGwtY2hlY2tib3hcIj48L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWxsLWxhYmVsXCI+JHt0aGlzLnNlbGVjdEFsbFRleHR9PC9zcGFuPlxyXG4gICAgICAgIDwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmhhc1NlYXJjaCkge1xyXG4gICAgICBzZWFyY2hJbnB1dCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInZzY29tcC1zZWFyY2gtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIiR7dGhpcy5zZWFyY2hQbGFjZWhvbGRlcn1cIj5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNsZWFyXCI+JnRpbWVzOzwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICR7Y2hlY2tib3hIdG1sfVxyXG4gICAgICAgICR7c2VhcmNoSW5wdXR9XHJcbiAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgdGhpcy4kc2VhcmNoLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB0aGlzLiRzZWFyY2hJbnB1dCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC1pbnB1dCcpO1xyXG4gICAgdGhpcy4kc2VhcmNoQ2xlYXIgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtY2xlYXInKTtcclxuICAgIHRoaXMuJHRvZ2dsZUFsbEJ1dHRvbiA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC10b2dnbGUtYWxsLWJ1dHRvbidcclxuICAgICk7XHJcbiAgICB0aGlzLiR0b2dnbGVBbGxDaGVja2JveCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC10b2dnbGUtYWxsLWNoZWNrYm94J1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaElucHV0LCAna2V5dXAgY2hhbmdlJywgJ29uU2VhcmNoJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaENsZWFyLCAnY2xpY2snLCAnb25TZWFyY2hDbGVhcicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVBbGxCdXR0b24sICdjbGljaycsICdvblRvZ2dsZUFsbE9wdGlvbnMnKTtcclxuICB9XHJcblxyXG4gIC8qKiByZW5kZXIgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogZG9tIGV2ZW50IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIGFkZEV2ZW50cygpIHtcclxuICAgIHRoaXMuYWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsICdvbkRvY3VtZW50Q2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kd3JhcHBlciwgJ2tleWRvd24nLCAnb25LZXlEb3duJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHRvZ2dsZUJ1dHRvbiwgJ2NsaWNrJywgJ29uVG9nZ2xlQnV0dG9uQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kY2xlYXJCdXR0b24sICdjbGljaycsICdvbkNsZWFyQnV0dG9uQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ2NsaWNrJywgJ29uRHJvcGJveENvbnRhaW5lckNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KFxyXG4gICAgICB0aGlzLiRkcm9wYm94Q2xvc2VCdXR0b24sXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICdvbkRyb3Bib3hDbG9zZUJ1dHRvbkNsaWNrJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnNDb250YWluZXIsICdzY3JvbGwnLCAnb25PcHRpb25zU2Nyb2xsJyk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAnY2xpY2snLCAnb25PcHRpb25zQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ21vdXNlb3ZlcicsICdvbk9wdGlvbnNNb3VzZU92ZXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ3RvdWNobW92ZScsICdvbk9wdGlvbnNUb3VjaE1vdmUnKTtcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50KCRlbGUsIGV2ZW50cywgbWV0aG9kKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50cyA9IFV0aWxzLnJlbW92ZUFycmF5RW1wdHkoZXZlbnRzLnNwbGl0KCcgJykpO1xyXG5cclxuICAgIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xyXG4gICAgICBsZXQgZXZlbnRzS2V5ID0gYCR7bWV0aG9kfS0ke2V2ZW50fWA7XHJcbiAgICAgIGxldCBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50c0tleV07XHJcblxyXG4gICAgICBpZiAoIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgY2FsbGJhY2sgPSB0aGlzW21ldGhvZF0uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudHNLZXldID0gY2FsbGJhY2s7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRlbGUgPSBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKTtcclxuXHJcbiAgICAgICRlbGUuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNwYXRjaEV2ZW50KCRlbGUsIGV2ZW50TmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZWxlID0gRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICRlbGUuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChldmVudE5hbWUsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBvbkRvY3VtZW50Q2xpY2soZSkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmFwcGVuZFRvQm9keSAmJlxyXG4gICAgICB0aGlzLm11bHRpcGxlICYmXHJcbiAgICAgIHRoaXMuaXNPcGVuZWQoKSAmJlxyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KGAjdnMtJHt0aGlzLmd1aWR9YClcclxuICAgICkge1xyXG4gICAgICByZXR1cm47IC8vIERvbid0IGNsb3NlIGRyb3Bib3ggaWYgYXBwZW5kIHRvIGJvZHksIG11bHRpcGxlIGFuZCBjbGljayBpbnNpZGUgZHJvcGJvd1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCAkZWxlVG9LZWVwT3BlbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtd3JhcHBlcicpO1xyXG5cclxuICAgIGlmICgkZWxlVG9LZWVwT3BlbiAhPT0gdGhpcy4kd3JhcHBlcikge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25LZXlEb3duKGUpIHtcclxuICAgIGxldCBrZXkgPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcclxuICAgIGxldCBtZXRob2QgPSBrZXlEb3duTWV0aG9kTWFwcGluZ1trZXldO1xyXG5cclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgdGhpc1ttZXRob2RdKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25FbnRlclByZXNzKCkge1xyXG4gICAgaWYgKCF0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkVzY1ByZXNzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Eb3duQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCduZXh0Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblVwQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCdwcmV2aW91cycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ub2dnbGVCdXR0b25DbGljayhlKSB7XHJcbiAgICBsZXQgY2hpbGRFbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLWJ1dHRvbi1jaGlsZCcpO1xyXG5cclxuICAgIGlmIChjaGlsZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNTY3JvbGwoKSB7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNDbGljayhlKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnZzY29tcC1vcHRpb246bm90KC5kaXNhYmxlZCk6bm90KC5ncm91cC10aXRsZSknKVxyXG4gICAgKTtcclxuICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIC8vIE1vdmUgc2VsZWN0ZWQgdG8gdG9wIHdhcyB0cmlnZ2VyaW5nIGNsb3NlRHJvcGJvdyBiZWFjYXVzZSBvZiBvbkRyb3Bib3hDb250YWluZXJDbGlja1xyXG4gICAgICAvLyBXaGVuIHNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCBpcyBvblxyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDb250YWluZXJDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtZHJvcGJveCcpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDbG9zZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlT3ZlcihlKSB7XHJcbiAgICBsZXQgJGVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKTpub3QoLmdyb3VwLXRpdGxlKSdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCRlbGUgJiYgdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNPcHRpb24obnVsbCwgJGVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNUb3VjaE1vdmUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaChlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZShlLnRhcmdldC52YWx1ZSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaENsZWFyKCkge1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQWxsT3B0aW9ucygpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25SZXNpemUoKSB7XHJcbiAgICBpZiAodGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgdGhpcy5zZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHRydWUpO1xyXG4gIH1cclxuICAvKiogZG9tIGV2ZW50IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGFmdGVyIGV2ZW50IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIGFmdGVyUmVuZGVyV3JhcHBlcigpIHtcclxuICAgIHRoaXMuJGVsZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCB0aGlzLm5hbWUpO1xyXG5cclxuICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGVsZSwgJ3ZzY29tcC1lbGUnKTtcclxuICAgIHRoaXMucmVuZGVyU2VhcmNoKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCgpO1xyXG4gICAgdGhpcy5hZGRFdmVudHMoKTtcclxuICAgIHRoaXMuc2V0TWV0aG9kcygpO1xyXG5cclxuICAgIGlmICh0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlKSB7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QoXHJcbiAgICAgICAgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSxcclxuICAgICAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dG9TZWxlY3RGaXJzdE9wdGlvbiAmJiB0aGlzLnZpc2libGVPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKFxyXG4gICAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNbMF0udmFsdWUsXHJcbiAgICAgICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKiBhZnRlciBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBzZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgc2V0UHJvcHMob3B0aW9ucykge1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc2V0RGVmYXVsdFByb3BzKG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKTtcclxuXHJcbiAgICBsZXQgY29udmVydFRvQm9vbGVhbiA9IFV0aWxzLmNvbnZlcnRUb0Jvb2xlYW47XHJcblxyXG4gICAgdGhpcy4kZWxlID0gb3B0aW9ucy5lbGU7XHJcbiAgICB0aGlzLnZhbHVlS2V5ID0gb3B0aW9ucy52YWx1ZUtleTtcclxuICAgIHRoaXMubGFiZWxLZXkgPSBvcHRpb25zLmxhYmVsS2V5O1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbktleSA9IG9wdGlvbnMuZGVzY3JpcHRpb25LZXk7XHJcbiAgICB0aGlzLmFsaWFzS2V5ID0gb3B0aW9ucy5hbGlhc0tleTtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0VGV4dCA9IG9wdGlvbnMub3B0aW9uSGVpZ2h0O1xyXG4gICAgdGhpcy5vcHRpb25IZWlnaHQgPSBwYXJzZUZsb2F0KHRoaXMub3B0aW9uSGVpZ2h0VGV4dCk7XHJcbiAgICB0aGlzLm11bHRpcGxlID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLm11bHRpcGxlKTtcclxuICAgIHRoaXMuaGFzU2VhcmNoID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLnNlYXJjaCk7XHJcbiAgICB0aGlzLmhpZGVDbGVhckJ1dHRvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5oaWRlQ2xlYXJCdXR0b24pO1xyXG4gICAgdGhpcy5hdXRvU2VsZWN0Rmlyc3RPcHRpb24gPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLmF1dG9TZWxlY3RGaXJzdE9wdGlvblxyXG4gICAgKTtcclxuICAgIHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuaGFzT3B0aW9uRGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXQgPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgKTtcclxuICAgIHRoaXMuYWxsb3dOZXdPcHRpb24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuYWxsb3dOZXdPcHRpb24pO1xyXG4gICAgdGhpcy5tYXJrU2VhcmNoUmVzdWx0cyA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5tYXJrU2VhcmNoUmVzdWx0cyk7XHJcbiAgICB0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCA9IGNvbnZlcnRUb0Jvb2xlYW4oXHJcbiAgICAgIG9wdGlvbnMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0XHJcbiAgICApO1xyXG4gICAgdGhpcy5kaXNhYmxlU2VsZWN0QWxsID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmRpc2FibGVTZWxlY3RBbGwpO1xyXG4gICAgdGhpcy5rZWVwQWx3YXlzT3BlbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5rZWVwQWx3YXlzT3Blbik7XHJcbiAgICB0aGlzLnNob3dEcm9wYm94QXNQb3B1cCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zaG93RHJvcGJveEFzUG9wdXApO1xyXG4gICAgdGhpcy5ub09wdGlvbnNUZXh0ID0gb3B0aW9ucy5ub09wdGlvbnNUZXh0O1xyXG4gICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0ID0gb3B0aW9ucy5ub1NlYXJjaFJlc3VsdHNUZXh0O1xyXG4gICAgdGhpcy5zZWxlY3RBbGxUZXh0ID0gb3B0aW9ucy5zZWxlY3RBbGxUZXh0O1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IG9wdGlvbnMucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcclxuICAgIHRoaXMuZHJvcGJveFdpZHRoID0gb3B0aW9ucy5kcm9wYm94V2lkdGg7XHJcbiAgICB0aGlzLnRvb2x0aXBGb250U2l6ZSA9IG9wdGlvbnMudG9vbHRpcEZvbnRTaXplO1xyXG4gICAgdGhpcy50b29sdGlwQWxpZ25tZW50ID0gb3B0aW9ucy50b29sdGlwQWxpZ25tZW50O1xyXG4gICAgdGhpcy50b29sdGlwTWF4V2lkdGggPSBvcHRpb25zLnRvb2x0aXBNYXhXaWR0aDtcclxuICAgIHRoaXMubm9PZkRpc3BsYXlWYWx1ZXMgPSBwYXJzZUludChvcHRpb25zLm5vT2ZEaXNwbGF5VmFsdWVzKTtcclxuICAgIHRoaXMuekluZGV4ID0gcGFyc2VJbnQob3B0aW9ucy56SW5kZXgpO1xyXG4gICAgdGhpcy5tYXhWYWx1ZXMgPSBwYXJzZUludChvcHRpb25zLm1heFZhbHVlcyk7XHJcbiAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWU7XHJcbiAgICB0aGlzLmFkZGl0aW9uYWxDbGFzc2VzID0gb3B0aW9ucy5hZGRpdGlvbmFsQ2xhc3NlcztcclxuICAgIHRoaXMuaW5pdGlhbFNlbGVjdGVkVmFsdWUgPSBvcHRpb25zLnNlbGVjdGVkVmFsdWU7XHJcbiAgICB0aGlzLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQgPSBvcHRpb25zLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQ7XHJcbiAgICB0aGlzLm9uU2VydmVyU2VhcmNoID0gb3B0aW9ucy5vblNlcnZlclNlYXJjaDtcclxuICAgIHRoaXMuc2VhcmNoUGxhY2Vob2xkZXIgPSBvcHRpb25zLnNlYXJjaFBsYWNlaG9sZGVyO1xyXG4gICAgdGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZSA9IG9wdGlvbnMuaXRlbXNTZWxlY3RlZE1lc3NhZ2U7XHJcbiAgICB0aGlzLmFsbG93Tm9uZU9wdGlvbiA9IG9wdGlvbnMuYWxsb3dOb25lT3B0aW9uO1xyXG4gICAgdGhpcy5ub25lT3B0aW9uVGV4dCA9IG9wdGlvbnMubm9uZU9wdGlvblRleHQ7XHJcbiAgICB0aGlzLmFwcGVuZFRvQm9keSA9IG9wdGlvbnMuYXBwZW5kVG9Cb2R5O1xyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW107XHJcbiAgICB0aGlzLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgIHRoaXMudG9vbHRpcEVudGVyRGVsYXkgPSAyMDA7XHJcbiAgICB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbiA9IDI1MDtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJztcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9ICcnO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAob3B0aW9ucy5zZWFyY2ggPT09IHVuZGVmaW5lZCAmJiB0aGlzLm11bHRpcGxlKSB8fFxyXG4gICAgICB0aGlzLmFsbG93TmV3T3B0aW9uXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5oYXNTZWFyY2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm1heFZhbHVlcykge1xyXG4gICAgICB0aGlzLmRpc2FibGVTZWxlY3RBbGwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaGFzU2VydmVyU2VhcmNoID0gdHlwZW9mIHRoaXMub25TZXJ2ZXJTZWFyY2ggPT09ICdmdW5jdGlvbic7XHJcbiAgICB0aGlzLnNob3dBc1BvcHVwID1cclxuICAgICAgdGhpcy5zaG93RHJvcGJveEFzUG9wdXAgJiZcclxuICAgICAgIXRoaXMua2VlcEFsd2F5c09wZW4gJiZcclxuICAgICAgd2luZG93LmlubmVyV2lkdGggPD0gcGFyc2VGbG9hdCh0aGlzLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQpO1xyXG4gICAgdGhpcy5oYXNTZWFyY2hDb250YWluZXIgPVxyXG4gICAgICB0aGlzLmhhc1NlYXJjaCB8fCAodGhpcy5tdWx0aXBsZSAmJiAhdGhpcy5kaXNhYmxlU2VsZWN0QWxsKTtcclxuICAgIHRoaXMub3B0aW9uc0NvdW50ID0gdGhpcy5nZXRPcHRpb25zQ291bnQob3B0aW9ucy5vcHRpb25zQ291bnQpO1xyXG4gICAgdGhpcy5oYWxmT3B0aW9uc0NvdW50ID0gTWF0aC5jZWlsKHRoaXMub3B0aW9uc0NvdW50IC8gMik7XHJcbiAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICB9XHJcblxyXG4gIHNldERlZmF1bHRQcm9wcyhvcHRpb25zKSB7XHJcbiAgICBsZXQgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgIHZhbHVlS2V5OiAndmFsdWUnLFxyXG4gICAgICBsYWJlbEtleTogJ2xhYmVsJyxcclxuICAgICAgZGVzY3JpcHRpb25LZXk6ICdkZXNjcmlwdGlvbicsXHJcbiAgICAgIGFsaWFzS2V5OiAnYWxpYXMnLFxyXG4gICAgICBvcHRpb25zQ291bnQ6IDUsXHJcbiAgICAgIG5vT2ZEaXNwbGF5VmFsdWVzOiA1MCxcclxuICAgICAgb3B0aW9uSGVpZ2h0OiAnNDBweCcsXHJcbiAgICAgIG11bHRpcGxlOiBmYWxzZSxcclxuICAgICAgaGlkZUNsZWFyQnV0dG9uOiBmYWxzZSxcclxuICAgICAgYXV0b1NlbGVjdEZpcnN0T3B0aW9uOiBmYWxzZSxcclxuICAgICAgaGFzT3B0aW9uRGVzY3JpcHRpb246IGZhbHNlLFxyXG4gICAgICBzaWxlbnRJbml0aWFsVmFsdWVTZXQ6IGZhbHNlLFxyXG4gICAgICBkaXNhYmxlU2VsZWN0QWxsOiBmYWxzZSxcclxuICAgICAgbm9PcHRpb25zVGV4dDogJ05vIG9wdGlvbnMgZm91bmQnLFxyXG4gICAgICBub1NlYXJjaFJlc3VsdHNUZXh0OiAnTm8gcmVzdWx0cyBmb3VuZCcsXHJcbiAgICAgIHNlbGVjdEFsbFRleHQ6ICdTZWxlY3QgQWxsJyxcclxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWxlY3QnLFxyXG4gICAgICBwb3NpdGlvbjogJ2F1dG8nLFxyXG4gICAgICB6SW5kZXg6IDEsXHJcbiAgICAgIGFsbG93TmV3T3B0aW9uOiBmYWxzZSxcclxuICAgICAgbWFya1NlYXJjaFJlc3VsdHM6IGZhbHNlLFxyXG4gICAgICB0b29sdGlwRm9udFNpemU6ICcxNHB4JyxcclxuICAgICAgdG9vbHRpcEFsaWdubWVudDogJ2NlbnRlcicsXHJcbiAgICAgIHRvb2x0aXBNYXhXaWR0aDogJzMwMHB4JyxcclxuICAgICAgc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0OiBmYWxzZSxcclxuICAgICAgbmFtZTogJycsXHJcbiAgICAgIGFkZGl0aW9uYWxDbGFzc2VzOiAnJyxcclxuICAgICAga2VlcEFsd2F5c09wZW46IGZhbHNlLFxyXG4gICAgICBtYXhWYWx1ZXM6IDAsXHJcbiAgICAgIHNob3dEcm9wYm94QXNQb3B1cDogdHJ1ZSxcclxuICAgICAgcG9wdXBEcm9wYm94QnJlYWtwb2ludDogJzU3NnB4JyxcclxuICAgICAgc2VhcmNoUGxhY2Vob2xkZXI6ICdTZWFyY2guLi4nLFxyXG4gICAgICBpdGVtc1NlbGVjdGVkTWVzc2FnZTogJ3NlbGVjdGVkJyxcclxuICAgICAgYWxsb3dOb25lT3B0aW9uOiBmYWxzZSxcclxuICAgICAgbm9uZU9wdGlvblRleHQ6ICdOb25lJyxcclxuICAgICAgYXBwZW5kVG9Cb2R5OiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgZGVmYXVsdE9wdGlvbnMub3B0aW9uc0NvdW50ID0gNDtcclxuICAgICAgZGVmYXVsdE9wdGlvbnMub3B0aW9uSGVpZ2h0ID0gJzYwcHgnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHNldFByb3BzRnJvbUVsZW1lbnRBdHRyKG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlID0gb3B0aW9ucy5lbGU7XHJcbiAgICBsZXQgbWFwcGluZyA9IHtcclxuICAgICAgbXVsdGlwbGU6ICdtdWx0aXBsZScsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAncGxhY2Vob2xkZXInLFxyXG4gICAgICBuYW1lOiAnbmFtZScsXHJcbiAgICAgICdkYXRhLXZhbHVlLWtleSc6ICd2YWx1ZUtleScsXHJcbiAgICAgICdkYXRhLWxhYmVsLWtleSc6ICdsYWJlbEtleScsXHJcbiAgICAgICdkYXRhLWRlc2NyaXB0aW9uLWtleSc6ICdkZXNjcmlwdGlvbktleScsXHJcbiAgICAgICdkYXRhLWFsaWFzLWtleSc6ICdhbGlhc0tleScsXHJcbiAgICAgICdkYXRhLXNlYXJjaCc6ICdzZWFyY2gnLFxyXG4gICAgICAnZGF0YS1oaWRlLWNsZWFyLWJ1dHRvbic6ICdoaWRlQ2xlYXJCdXR0b24nLFxyXG4gICAgICAnZGF0YS1hdXRvLXNlbGVjdC1maXJzdC1vcHRpb24nOiAnYXV0b1NlbGVjdEZpcnN0T3B0aW9uJyxcclxuICAgICAgJ2RhdGEtaGFzLW9wdGlvbi1kZXNjcmlwdGlvbic6ICdoYXNPcHRpb25EZXNjcmlwdGlvbicsXHJcbiAgICAgICdkYXRhLW9wdGlvbnMtY291bnQnOiAnb3B0aW9uc0NvdW50JyxcclxuICAgICAgJ2RhdGEtb3B0aW9uLWhlaWdodCc6ICdvcHRpb25IZWlnaHQnLFxyXG4gICAgICAnZGF0YS1wb3NpdGlvbic6ICdwb3NpdGlvbicsXHJcbiAgICAgICdkYXRhLW5vLW9wdGlvbnMtdGV4dCc6ICdub09wdGlvbnNUZXh0JyxcclxuICAgICAgJ2RhdGEtbm8tc2VhcmNoLXJlc3VsdHMtdGV4dCc6ICdub1NlYXJjaFJlc3VsdHNUZXh0JyxcclxuICAgICAgJ2RhdGEtc2VsZWN0LWFsbC10ZXh0JzogJ3NlbGVjdEFsbFRleHQnLFxyXG4gICAgICAnZGF0YS1zaWxlbnQtaW5pdGlhbC12YWx1ZS1zZXQnOiAnc2lsZW50SW5pdGlhbFZhbHVlU2V0JyxcclxuICAgICAgJ2RhdGEtZHJvcGJveC13aWR0aCc6ICdkcm9wYm94V2lkdGgnLFxyXG4gICAgICAnZGF0YS16LWluZGV4JzogJ3pJbmRleCcsXHJcbiAgICAgICdkYXRhLW5vLW9mLWRpc3BsYXktdmFsdWVzJzogJ25vT2ZEaXNwbGF5VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWxsb3ctbmV3LW9wdGlvbic6ICdhbGxvd05ld09wdGlvbicsXHJcbiAgICAgICdkYXRhLW1hcmstc2VhcmNoLXJlc3VsdHMnOiAnbWFya1NlYXJjaFJlc3VsdHMnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6ICd0b29sdGlwRm9udFNpemUnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6ICd0b29sdGlwQWxpZ25tZW50JyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiAndG9vbHRpcE1heFdpZHRoJyxcclxuICAgICAgJ2RhdGEtc2hvdy1zZWxlY3RlZC1vcHRpb25zLWZpcnN0JzogJ3Nob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCcsXHJcbiAgICAgICdkYXRhLWRpc2FibGUtc2VsZWN0LWFsbCc6ICdkaXNhYmxlU2VsZWN0QWxsJyxcclxuICAgICAgJ2RhdGEta2VlcC1hbHdheXMtb3Blbic6ICdrZWVwQWx3YXlzT3BlbicsXHJcbiAgICAgICdkYXRhLW1heC12YWx1ZXMnOiAnbWF4VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWRkaXRpb25hbC1jbGFzc2VzJzogJ2FkZGl0aW9uYWxDbGFzc2VzJyxcclxuICAgICAgJ2RhdGEtc2hvdy1kcm9wYm94LWFzLXBvcHVwJzogJ3Nob3dEcm9wYm94QXNQb3B1cCcsXHJcbiAgICAgICdkYXRhLXBvcHVwLWRyb3Bib3gtYnJlYWtwb2ludCc6ICdwb3B1cERyb3Bib3hCcmVha3BvaW50JyxcclxuICAgIH07XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBtYXBwaW5nKSB7XHJcbiAgICAgIGxldCB2YWx1ZSA9ICRlbGUuZ2V0QXR0cmlidXRlKGspO1xyXG5cclxuICAgICAgaWYgKGsgPT09ICdtdWx0aXBsZScgJiYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gJ3RydWUnKSkge1xyXG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgb3B0aW9uc1ttYXBwaW5nW2tdXSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRNZXRob2RzKCkge1xyXG4gICAgbGV0ICRlbGUgPSB0aGlzLiRlbGU7XHJcbiAgICAkZWxlLnZpcnR1YWxTZWxlY3QgPSB0aGlzO1xyXG4gICAgJGVsZS52YWx1ZSA9IHRoaXMubXVsdGlwbGUgPyBbXSA6ICcnO1xyXG4gICAgJGVsZS5yZXNldCA9IFZpcnR1YWxTZWxlY3QucmVzZXQ7XHJcbiAgICAkZWxlLnNldFZhbHVlID0gVmlydHVhbFNlbGVjdC5zZXRWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUuc2V0T3B0aW9ucyA9IFZpcnR1YWxTZWxlY3Quc2V0T3B0aW9uc01ldGhvZDtcclxuICAgICRlbGUuc2V0RGlzYWJsZWRPcHRpb25zID0gVmlydHVhbFNlbGVjdC5zZXREaXNhYmxlZE9wdGlvbnNNZXRob2Q7XHJcbiAgICAkZWxlLnRvZ2dsZVNlbGVjdEFsbCA9IFZpcnR1YWxTZWxlY3QudG9nZ2xlU2VsZWN0QWxsO1xyXG4gICAgJGVsZS5pc0FsbFNlbGVjdGVkID0gVmlydHVhbFNlbGVjdC5pc0FsbFNlbGVjdGVkO1xyXG4gICAgJGVsZS5hZGRPcHRpb24gPSBWaXJ0dWFsU2VsZWN0LmFkZE9wdGlvbk1ldGhvZDtcclxuICAgICRlbGUuZ2V0TmV3VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LmdldE5ld1ZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5nZXREaXNwbGF5VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LmdldERpc3BsYXlWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUub3BlbiA9IFZpcnR1YWxTZWxlY3Qub3Blbk1ldGhvZDtcclxuICAgICRlbGUuY2xvc2UgPSBWaXJ0dWFsU2VsZWN0LmNsb3NlTWV0aG9kO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB2YWx1ZSA9IFt2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgdmFsdWUgPSB2YWx1ZS5tYXAoKHYpID0+IHtcclxuICAgICAgcmV0dXJuIHYgfHwgdiA9PSAwID8gdi50b1N0cmluZygpIDogJyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgdmFsaWRWYWx1ZXMgPSBbXTtcclxuICAgIGxldCB2YWxpZEluZGV4ZXMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBkIG9mIHRoaXMub3B0aW9ucykge1xyXG4gICAgICBsZXQgaXNTZWxlY3RlZCA9IHZhbHVlLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBpZiAodmFsaWRWYWx1ZXMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTEgJiYgdGhpcy5tdWx0aXBsZSkgYnJlYWs7IC8vIElmIG11bHRpcGxlIHNlbGVjdGlvbiB3aXRoIHNhbWUgdmFsdWUgb25seSBzZWxlY3Qgb25lLlxyXG5cclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZhbGlkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgICAgdmFsaWRJbmRleGVzLnB1c2goZC5pbmRleCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSBicmVhazsgLy8gaWYgc2luZ2xlIHNlbGVjdGlvbiBvbmx5IHNlbGVjdCBvbmUuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgdmFsaWRWYWx1ZXMgPSB2YWxpZFZhbHVlc1swXTtcclxuICAgICAgdmFsaWRJbmRleGVzID0gdmFsaWRJbmRleGVzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYmVmb3JlVmFsdWVTZXQoKTtcclxuICAgIHRoaXMuc2V0VmFsdWUodmFsaWRWYWx1ZXMsIHZhbGlkSW5kZXhlcywgIXNpbGVudENoYW5nZSk7XHJcbiAgICB0aGlzLmFmdGVyVmFsdWVTZXQoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywga2VlcFZhbHVlKSB7XHJcbiAgICBsZXQgbmV3b3B0aW9uID0gb3B0aW9ucyAhPSB0aGlzLm9wdGlvbnM7XHJcbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICB0aGlzLmFmdGVyU2V0T3B0aW9ucyhrZWVwVmFsdWUsIG5ld29wdGlvbik7XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QoZGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldERpc2FibGVkT3B0aW9ucyhkaXNhYmxlZE9wdGlvbnMsIHRydWUpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChudWxsKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkT3B0aW9ucyhkaXNhYmxlZE9wdGlvbnMgPSBbXSwgc2V0T3B0aW9uc1Byb3AgPSBmYWxzZSkge1xyXG4gICAgZGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLm1hcCgoZCkgPT4gZC50b1N0cmluZygpKTtcclxuICAgIHRoaXMuZGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zO1xyXG5cclxuICAgIGlmIChzZXRPcHRpb25zUHJvcCAmJiBkaXNhYmxlZE9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgICAgZC5pc0Rpc2FibGVkID0gZGlzYWJsZWRPcHRpb25zLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xO1xyXG5cclxuICAgICAgICByZXR1cm4gZDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByZXBhcmVkT3B0aW9ucyA9IFtdO1xyXG4gICAgbGV0IGRpc2FibGVkT3B0aW9ucyA9IHRoaXMuZGlzYWJsZWRPcHRpb25zO1xyXG4gICAgbGV0IGhhc0Rpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucy5sZW5ndGg7XHJcbiAgICBsZXQgdmFsdWVLZXkgPSB0aGlzLnZhbHVlS2V5O1xyXG4gICAgbGV0IGxhYmVsS2V5ID0gdGhpcy5sYWJlbEtleTtcclxuICAgIGxldCBkZXNjcmlwdGlvbktleSA9IHRoaXMuZGVzY3JpcHRpb25LZXk7XHJcbiAgICBsZXQgYWxpYXNLZXkgPSB0aGlzLmFsaWFzS2V5O1xyXG4gICAgbGV0IGhhc09wdGlvbkRlc2NyaXB0aW9uID0gdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbjtcclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgZ2V0QWxpYXMgPSB0aGlzLmdldEFsaWFzO1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIGxldCBoYXNPcHRpb25Hcm91cCA9IGZhbHNlO1xyXG5cclxuICAgIGxldCBwcmVwYXJlT3B0aW9uID0gKGQpID0+IHtcclxuICAgICAgbGV0IHZhbHVlID0gZ2V0U3RyaW5nKGRbdmFsdWVLZXldKTtcclxuICAgICAgbGV0IGNoaWxkT3B0aW9ucyA9IGQub3B0aW9ucztcclxuICAgICAgbGV0IGlzR3JvdXBUaXRsZSA9IGNoaWxkT3B0aW9ucyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgbGV0IG9wdGlvbiA9IHtcclxuICAgICAgICBpbmRleCxcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogZ2V0U3RyaW5nKGRbbGFiZWxLZXldKSxcclxuICAgICAgICBhbGlhczogZ2V0QWxpYXMoZFthbGlhc0tleV0pLFxyXG4gICAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBpc0dyb3VwVGl0bGUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoaGFzRGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzR3JvdXBPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbi5ncm91cEluZGV4ID0gZC5ncm91cEluZGV4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICBvcHRpb24uZGVzY3JpcHRpb24gPSBnZXRTdHJpbmcoZFtkZXNjcmlwdGlvbktleV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmVwYXJlZE9wdGlvbnMucHVzaChvcHRpb24pO1xyXG4gICAgICBpbmRleCsrO1xyXG5cclxuICAgICAgaWYgKGlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBncm91cEluZGV4ID0gb3B0aW9uLmluZGV4O1xyXG4gICAgICAgIGhhc09wdGlvbkdyb3VwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY2hpbGRPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICAgIGQuaXNHcm91cE9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICBkLmdyb3VwSW5kZXggPSBncm91cEluZGV4O1xyXG5cclxuICAgICAgICAgIHByZXBhcmVPcHRpb24oZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gQWRkIG5vbmUgb3B0aW9uIG9ubHkgd2hlbiBpbiBsaXN0IG1vZGUgKGFsd2F5cyBvcGVuIGFuZCBvbmx5KVxyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlICYmIHRoaXMuYWxsb3dOb25lT3B0aW9uKSB7XHJcbiAgICAgIG9wdGlvbnMudW5zaGlmdCh7XHJcbiAgICAgICAgdmFsdWU6IG5vbmVPcHRpb25WYWx1ZSxcclxuICAgICAgICBsYWJlbDogdGhpcy5ub25lT3B0aW9uVGV4dCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKHByZXBhcmVPcHRpb24pO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IHByZXBhcmVkT3B0aW9ucztcclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IHByZXBhcmVkT3B0aW9ucy5sZW5ndGg7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCA9IHRoaXMub3B0aW9ucy5sZW5ndGggLSAxO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuaGFzT3B0aW9uR3JvdXAgPSBoYXNPcHRpb25Hcm91cDtcclxuICAgIHRoaXMuc2V0U29ydGVkT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VydmVyT3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywgdHJ1ZSk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnc2VydmVyLXNlYXJjaGluZycpO1xyXG4gIH1cclxuXHJcbiAgc2V0U29ydGVkT3B0aW9ucygpIHtcclxuICAgIGxldCBzb3J0ZWRPcHRpb25zID0gWy4uLnRoaXMub3B0aW9uc107XHJcblxyXG4gICAgaWYgKHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0ICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgIGlmICh0aGlzLmhhc09wdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgc29ydGVkT3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnNHcm91cChzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzb3J0ZWRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucyhzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucyA9IHNvcnRlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBzZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IFsuLi50aGlzLnNvcnRlZE9wdGlvbnNdO1xyXG4gICAgbGV0IG1heE9wdGlvbnNUb1Nob3cgPSB0aGlzLm9wdGlvbnNDb3VudCAqIDI7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IHRoaXMuZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKTtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIG1heE9wdGlvbnNUb1Nob3cgLSAxO1xyXG4gICAgbGV0IGkgPSAwO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgbmV3T3B0aW9uLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zLmZpbHRlcigoZCkgPT4ge1xyXG4gICAgICBsZXQgaW5WaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoZC5pc1Zpc2libGUgJiYgIWQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgaW5WaWV3ID0gaSA+PSBzdGFydEluZGV4ICYmIGkgPD0gZW5kSW5kZXg7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXggPSBpO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGluVmlldztcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbnMgPSBbbmV3T3B0aW9uLCAuLi52aXNpYmxlT3B0aW9uc107XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zUG9zaXRpb24oc3RhcnRJbmRleCkge1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0b3AgPSBzdGFydEluZGV4ICogdGhpcy5vcHRpb25IZWlnaHQ7XHJcbiAgICB0aGlzLiRvcHRpb25zLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAke3RvcH1weCwgMClgO1xyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiRvcHRpb25zLCAndG9wJywgdG9wKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNUb29sdGlwKCkge1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gdGhpcy5nZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgbGV0IGhhc09wdGlvbkRlc2NyaXB0aW9uID0gdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbjtcclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCAkb3B0aW9uRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAudnNjb21wLW9wdGlvbltkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiXWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIERvbVV0aWxzLnNldERhdGEoXHJcbiAgICAgICAgJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi10ZXh0JyksXHJcbiAgICAgICAgJ3Rvb2x0aXAnLFxyXG4gICAgICAgIGQubGFiZWxcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYXNPcHRpb25EZXNjcmlwdGlvbikge1xyXG4gICAgICAgIERvbVV0aWxzLnNldERhdGEoXHJcbiAgICAgICAgICAkb3B0aW9uRWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLWRlc2NyaXB0aW9uJyksXHJcbiAgICAgICAgICAndG9vbHRpcCcsXHJcbiAgICAgICAgICBkLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZSh2YWx1ZSwgaW5kZXgsIHRyaWdnZXJFdmVudCkge1xyXG4gICAgLy8gVmFsdWVcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gWy4uLnZhbHVlXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdWYWx1ZSA9IHRoaXMubXVsdGlwbGVcclxuICAgICAgPyB0aGlzLnNlbGVjdGVkVmFsdWVzXHJcbiAgICAgIDogdGhpcy5zZWxlY3RlZFZhbHVlc1swXSB8fCAnJztcclxuXHJcbiAgICB0aGlzLiRlbGUudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0LnZhbHVlID0gbmV3VmFsdWU7XHJcblxyXG4gICAgLy8gSW5kZXhcclxuICAgIGlmICghaW5kZXgpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbmRleCkpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbLi4uaW5kZXhdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdJbmRleCA9IHRoaXMubXVsdGlwbGVcclxuICAgICAgPyB0aGlzLnNlbGVjdGVkSW5kZXhlc1xyXG4gICAgICA6IHRoaXMuc2VsZWN0ZWRJbmRleGVzWzBdIHx8ICcnO1xyXG5cclxuICAgIHRoaXMuJGVsZS5pbmRleCA9IG5ld0luZGV4O1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQuaW5kZXggPSBuZXdJbmRleDtcclxuXHJcbiAgICB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWQgPVxyXG4gICAgICB0aGlzLm1heFZhbHVlcyAmJiB0aGlzLm1heFZhbHVlcyA8PSB0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aFxyXG4gICAgICAgID8gdHJ1ZVxyXG4gICAgICAgIDogZmFsc2U7XHJcbiAgICB0aGlzLnNldFZhbHVlVGV4dCgpO1xyXG5cclxuICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWVzICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF0gPT09IG5vbmVPcHRpb25WYWx1ZSkge1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLXZhbHVlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLFxyXG4gICAgICAgICdoYXMtdmFsdWUnLFxyXG4gICAgICAgIFV0aWxzLmlzTm90RW1wdHkodGhpcy5zZWxlY3RlZFZhbHVlcylcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgJ21heC12YWx1ZS1zZWxlY3RlZCcsXHJcbiAgICAgIHRoaXMuaXNNYXhWYWx1ZXNTZWxlY3RlZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodHJpZ2dlckV2ZW50KSB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLiRlbGUsICdjaGFuZ2UnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpbW1lZGlhdGVseSBtb3ZlIGl0ZW0gdG8gdG9wIGlmIG9wdGlvbnMgaXMgb24uXHJcbiAgICBpZiAodGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QpIHtcclxuICAgICAgY29uc3QgbGFzdFNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG4gICAgICB0aGlzLm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCgpO1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IGxhc3RTY3JvbGxUb3A7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZVRleHQoKSB7XHJcbiAgICBsZXQgdmFsdWVUZXh0ID0gW107XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXhlcyA9IHRoaXMuc2VsZWN0ZWRJbmRleGVzO1xyXG4gICAgbGV0IHNlbGVjdGVkTGVuZ3RoID0gc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoO1xyXG4gICAgbGV0IG5vT2ZEaXNwbGF5VmFsdWVzID0gdGhpcy5ub09mRGlzcGxheVZhbHVlcztcclxuICAgIGxldCBtYXhpbXVtVmFsdWVzVG9TaG93ID0gNTA7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXNDb3VudCA9IDA7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAvL3RoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgQWxsICgke3NlbGVjdGVkTGVuZ3RofSlgO1xyXG4gICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7c2VsZWN0ZWRMZW5ndGh9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXNDb3VudCA+IG1heGltdW1WYWx1ZXNUb1Nob3cgfHxcclxuICAgICAgICAgICghdGhpcy5tdWx0aXBsZSAmJiBzZWxlY3RlZFZhbHVlc0NvdW50ID09PSAxKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmFsdWUgPSBkLnZhbHVlO1xyXG4gICAgICAgIGxldCBsYWJlbCA9IGQubGFiZWw7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMuaW5kZXhPZih2YWx1ZSkgIT09IC0xICYmXHJcbiAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMuaW5kZXhPZihpbmRleCkgIT09IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXNDb3VudCA+PSBzZWxlY3RlZFZhbHVlcy5sZW5ndGgpIGJyZWFrOyAvLyBkbyBub3QgYWRkIHNhbWUgdmFsdWVzIG11bHRpcGxlXHJcblxyXG4gICAgICAgICAgdmFsdWVUZXh0LnB1c2gobGFiZWwpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXNDb3VudCsrO1xyXG5cclxuICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50IDw9IG5vT2ZEaXNwbGF5VmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHZhbHVlVG9vbHRpcC5wdXNoKGA8c3BhbiBjbGFzcz1cInZzY29tcC12YWx1ZS10YWdcIj4ke2xhYmVsfTwvc3Bhbj5gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBtb3JlU2VsZWN0ZWRPcHRpb25zID0gc2VsZWN0ZWRMZW5ndGggLSBub09mRGlzcGxheVZhbHVlcztcclxuXHJcbiAgICAgIGlmIChtb3JlU2VsZWN0ZWRPcHRpb25zID4gMCkge1xyXG4gICAgICAgIHZhbHVlVG9vbHRpcC5wdXNoKFxyXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZyBtb3JlLXZhbHVlLWNvdW50XCI+KyAke21vcmVTZWxlY3RlZE9wdGlvbnN9IG1vcmUuLi48L3NwYW4+YFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPSB2YWx1ZVRleHQuam9pbignLCAnKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBhZ2dyZWdhdGVkVmFsdWVUZXh0ID09PSAnJyB8fFxyXG4gICAgICAgIChzZWxlY3RlZFZhbHVlcyAmJiBzZWxlY3RlZFZhbHVlc1swXSA9PT0gbm9uZU9wdGlvblZhbHVlKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYWdncmVnYXRlZFZhbHVlVGV4dDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICAgIGxldCBtYXhWYWx1ZXMgPSB0aGlzLm1heFZhbHVlcztcclxuXHJcbiAgICAgICAgICBpZiAoRG9tVXRpbHMuaGFzRWxsaXBzaXModGhpcy4kdmFsdWVUZXh0KSB8fCBtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgbGV0IGNvdW50VGV4dCA9IGAke3NlbGVjdGVkTGVuZ3RofWA7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF4VmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgY291bnRUZXh0ICs9IGAgLyAke21heFZhbHVlc31gO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiogcmVwbGFjZSBjb21tYSBkZWxpbWl0dGVkIGxpc3Qgb2Ygc2VsZWN0aW9ucyB3aXRoIHNob3J0ZXIgdGV4dCBpbmRpY2F0aW5nIHNlbGVjdGlvbiBjb3VudCAqL1xyXG4gICAgICAgICAgICAvLyB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7Y291bnRUZXh0fSBvcHRpb24ke1xyXG4gICAgICAgICAgICAvLyAgIHNlbGVjdGVkTGVuZ3RoID09PSAxID8gJycgOiAncydcclxuICAgICAgICAgICAgLy8gfSBzZWxlY3RlZGA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7Y291bnRUZXh0fSAke3RoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2V9YDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qKiByZW1vdmluZyB0b29sdGlwIGlmIGZ1bGwgdmFsdWUgdGV4dCBpcyB2aXNpYmxlICovXHJcbiAgICAgICAgICAgIHZhbHVlVG9vbHRpcCA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldERhdGEodGhpcy4kdmFsdWVUZXh0LCAndG9vbHRpcCcsIHZhbHVlVG9vbHRpcC5qb2luKCcsICcpKTtcclxuICB9XHJcblxyXG4gIHNldFNlYXJjaFZhbHVlKHZhbHVlLCBza2lwSW5wdXRTZXQsIGZvcmNlKSB7XHJcbiAgICBpZiAodmFsdWUgPT09IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCAmJiAhZm9yY2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc2tpcElucHV0U2V0KSB7XHJcbiAgICAgIHRoaXMuJHNlYXJjaElucHV0LnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlYXJjaFZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSB2YWx1ZTtcclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLXNlYXJjaC12YWx1ZScsIHZhbHVlKTtcclxuICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSlcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnaGFzLXNlYXJjaC12YWx1ZScsIHZhbHVlKTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZXJ2ZXJTZWFyY2gpIHtcclxuICAgICAgdGhpcy5zZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZpc2libGVPcHRpb25zQ291bnQgPSAwO1xyXG4gICAgbGV0IGhhc0V4YWN0T3B0aW9uID0gZmFsc2U7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmc7XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzT3B0aW9uR3JvdXApIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcgPSB0aGlzLmdldFZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKFxyXG4gICAgICAgIHNlYXJjaFZhbHVlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gaXNPcHRpb25WaXNpYmxlKFxyXG4gICAgICAgIGQsXHJcbiAgICAgICAgc2VhcmNoVmFsdWUsXHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24gPSByZXN1bHQuaGFzRXhhY3RPcHRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiAhaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldE5ld09wdGlvbigpO1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZU5ld09wdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gdmlzaWJsZU9wdGlvbnNDb3VudDtcclxuXHJcbiAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvblByb3AoaW5kZXgsIGtleSwgdmFsdWUpIHtcclxuICAgIGlmICghdGhpcy5vcHRpb25zW2luZGV4XSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zW2luZGV4XVtrZXldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgdGhpcy4kb3B0aW9uc0xpc3Quc3R5bGUuaGVpZ2h0ID1cclxuICAgICAgdGhpcy5vcHRpb25IZWlnaHQgKiB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgbGV0IG9wdGlvbnNIZWlnaHQ7XHJcblxyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zQ291bnQgPSB0aGlzLmdldE9wdGlvbnNDb3VudCgpO1xyXG4gICAgICAgIG9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSBvcHRpb25zSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvcHRpb25zSGVpZ2h0ID0gdGhpcy5vcHRpb25zSGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub09wdGlvbnMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub1NlYXJjaFJlc3VsdHMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG9wdGlvbnNDb250YWluZXIsICdtYXgtaGVpZ2h0Jywgb3B0aW9uc0hlaWdodCk7XHJcblxyXG4gICAgdGhpcy5hZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RHJvcGJveFBvc2l0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMucG9zaXRpb24gIT09ICdhdXRvJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1vcmVWaXNpYmxlU2lkZXMgPSBEb21VdGlscy5nZXRNb3JlVmlzaWJsZVNpZGVzKHRoaXMuJHdyYXBwZXIpO1xyXG4gICAgbGV0IHNob3dPbkxlZnQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogY2hlY2sgdGhhdCBpcyBkcm9wYm94IGhpZGRlbiBvbiByaWdodCBlZGdlIC0gb25seSBpZiBjdXN0b20gd2lkdGggZ2l2ZW4gKi9cclxuICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICBsZXQgYnV0dG9uQ29vcmRzID0gdGhpcy4kdG9nZ2xlQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBsZXQgZHJvcGJveFdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmRyb3Bib3hXaWR0aCk7XHJcbiAgICAgIGxldCBoaWRkZW5PblJpZ2h0ID0gYnV0dG9uQ29vcmRzLmxlZnQgKyBkcm9wYm94V2lkdGggPiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICBsZXQgaGlkZGVuT25MZWZ0ID0gZHJvcGJveFdpZHRoID4gYnV0dG9uQ29vcmRzLnJpZ2h0O1xyXG5cclxuICAgICAgaWYgKGhpZGRlbk9uUmlnaHQgJiYgIWhpZGRlbk9uTGVmdCkge1xyXG4gICAgICAgIHNob3dPbkxlZnQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIC8vIEJFVEFcclxuXHJcbiAgICAgIGxldCBlbGVDb29yZHMgPSB0aGlzLiRlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGxldCB4ID0gZWxlQ29vcmRzLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcclxuICAgICAgbGV0IHkgPSBlbGVDb29yZHMudG9wICsgd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUud2lkdGggPSBgJHt0aGlzLiRlbGUub2Zmc2V0V2lkdGh9cHhgOyAvLyBUT0RPIG9yIGN1c3RvbSBkcm9wZG93biB3aWR0aFxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xyXG5cclxuICAgICAgaWYgKG1vcmVWaXNpYmxlU2lkZXMudmVydGljYWwgPT09ICd0b3AnKSB7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke1xyXG4gICAgICAgICAgeSAtIHRoaXMuJGRyb3Bib3hDb250YWluZXIub2Zmc2V0SGVpZ2h0IC0gNFxyXG4gICAgICAgIH1weGA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgKyB0aGlzLiRlbGUub2Zmc2V0SGVpZ2h0ICsgNH1weGA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE5ld09wdGlvbigpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbC50cmltKCk7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnbGFiZWwnLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogdmFsdWUsXHJcbiAgICAgICAgaXNDdXJyZW50TmV3OiB0cnVlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRPcHRpb24oZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3RlZFByb3AoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGdldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBnZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2libGVPcHRpb25zIHx8IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIC8gdGhpcy5vcHRpb25IZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKSB7XHJcbiAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IC0gdGhpcy5oYWxmT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4IDwgMCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhcnRJbmRleDtcclxuICB9XHJcblxyXG4gIGdldFRvb2x0aXBBdHRyVGV4dCh0ZXh0LCBlbGxpcHNpc09ubHkgPSBmYWxzZSwgYWxsb3dIdG1sID0gZmFsc2UpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAnZGF0YS10b29sdGlwJzogdGV4dCB8fCAnJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbnRlci1kZWxheSc6IHRoaXMudG9vbHRpcEVudGVyRGVsYXksXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6IHRoaXMudG9vbHRpcEZvbnRTaXplLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6IHRoaXMudG9vbHRpcEFsaWdubWVudCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiB0aGlzLnRvb2x0aXBNYXhXaWR0aCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbGxpcHNpcy1vbmx5JzogZWxsaXBzaXNPbmx5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsbG93LWh0bWwnOiBhbGxvd0h0bWwsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBEb21VdGlscy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0ge1xyXG4gICAgICBpbmRleDogZGF0YS5pbmRleCxcclxuICAgICAgdmFsdWU6IGdldFN0cmluZyhkYXRhLnZhbHVlKSxcclxuICAgICAgbGFiZWw6IGdldFN0cmluZyhkYXRhLmxhYmVsKSxcclxuICAgICAgZGVzY3JpcHRpb246IGdldFN0cmluZyhkYXRhLmRlc2NyaXB0aW9uKSxcclxuICAgICAgYWxpYXM6IHRoaXMuZ2V0QWxpYXMoZGF0YS5hbGlhcyksXHJcbiAgICAgIGlzQ3VycmVudE5ldzogZGF0YS5pc0N1cnJlbnROZXcgfHwgZmFsc2UsXHJcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ld09wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE5ld09wdGlvbigpIHtcclxuICAgIGxldCBsYXN0T3B0aW9uID0gdGhpcy5vcHRpb25zW3RoaXMubGFzdE9wdGlvbkluZGV4XTtcclxuXHJcbiAgICBpZiAoIWxhc3RPcHRpb24gfHwgIWxhc3RPcHRpb24uaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGFzdE9wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbkluZGV4KHZhbHVlKSB7XHJcbiAgICBsZXQgaW5kZXg7XHJcblxyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgaWYgKGQudmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgIGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIGdldE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld1ZhbHVlcyA9IHRoaXMubmV3VmFsdWVzO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMuZmlsdGVyKChkKSA9PiBuZXdWYWx1ZXMuaW5kZXhPZihkKSAhPT0gLTEpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gcmVzdWx0IDogcmVzdWx0WzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxpYXMoYWxpYXMpIHtcclxuICAgIGlmIChhbGlhcykge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGlhcykpIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLmpvaW4oJywnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhbGlhcyA9IGFsaWFzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGlhcyA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhbGlhcztcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlWYWx1ZSgpIHtcclxuICAgIGxldCBkaXNwbGF5VmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGRpc3BsYXlWYWx1ZXMucHVzaChkLmxhYmVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gZGlzcGxheVZhbHVlcyA6IGRpc3BsYXlWYWx1ZXNbMF0gfHwgJyc7XHJcbiAgfVxyXG5cclxuICBnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0W2QuaW5kZXhdID0gZC5vcHRpb25zLnNvbWUoXHJcbiAgICAgICAgKGUpID0+IGlzT3B0aW9uVmlzaWJsZShlLCBzZWFyY2hWYWx1ZSkuaXNWaXNpYmxlXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uc0NvdW50KGNvdW50KSB7XHJcbiAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID1cclxuICAgICAgICAod2luZG93LmlubmVySGVpZ2h0ICogODApIC8gMTAwIC0gZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgIGF2YWlsYWJsZUhlaWdodCAtPSBzZWFyY2hIZWlnaHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvdW50ID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyB0aGlzLm9wdGlvbkhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudCA9IHBhcnNlSW50KGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc0NvdW50ICogdGhpcy5vcHRpb25IZWlnaHQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2libGluZygkZWxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBwcm9wTmFtZSA9XHJcbiAgICAgIGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ25leHRFbGVtZW50U2libGluZycgOiAncHJldmlvdXNFbGVtZW50U2libGluZyc7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoJGVsZSkge1xyXG4gICAgICAgICRlbGUgPSAkZWxlW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoXHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdncm91cC10aXRsZScpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiAkZWxlO1xyXG4gIH1cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgb3BlbkRyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIHRoaXMuc2V0RHJvcGJveFBvc2l0aW9uKCk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ29wZW5lZCcpO1xyXG5cclxuICAgICAgaWYgKCFpc1NpbGVudCkge1xyXG4gICAgICAgIHRoaXMubW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCk7XHJcbiAgICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2ZvY3VzZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGJvZHksICd2c2NvbXAtcG9wdXAtYWN0aXZlJyk7XHJcbiAgICAgICAgICB0aGlzLmlzUG9wdXBBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEcm9wYm94KGlzU2lsZW50KSB7XHJcbiAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHJhbnNpdGlvbkR1cmF0aW9uID0gaXNTaWxlbnQgPyAwIDogdGhpcy50cmFuc2l0aW9uRHVyYXRpb247XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2xvc2VkJyk7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwQWN0aXZlKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2Nsb3NlZCcpO1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdjbG9zZWQnKTtcclxuICAgICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgICAgLy8gSGlkZSBkcm9wYm94IHNvbWV3aGVyZSBmYXJycnJycnIgYXdheVxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYC0yMDBweGA7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAtMjAwcHhgO1xyXG4gICAgICB9XHJcbiAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgbW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCkge1xyXG4gICAgaWYgKCF0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTb3J0ZWRPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKCF0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCB8fCAhdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRHJvcGJveCgpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT3BlbmVkKCkge1xyXG4gICAgcmV0dXJuIERvbVV0aWxzLmhhc0NsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQnKTtcclxuICB9XHJcblxyXG4gIGZvY3VzU2VhcmNoSW5wdXQoKSB7XHJcbiAgICBsZXQgJGVsZSA9IHRoaXMuJHNlYXJjaElucHV0O1xyXG5cclxuICAgIGlmICgkZWxlKSB7XHJcbiAgICAgICRlbGUuZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvY3VzT3B0aW9uKGRpcmVjdGlvbiwgZWxlKSB7XHJcbiAgICBsZXQgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbi5mb2N1c2VkJ1xyXG4gICAgKTtcclxuICAgIGxldCAkbmV3Rm9jdXNlZEVsZTtcclxuXHJcbiAgICBpZiAoZWxlKSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gZWxlO1xyXG4gICAgfSBlbHNlIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgLyogaWYgbm8gZWxlbWVudCBvbiBmb2N1cyBjaG9vc2UgZmlyc3QgdmlzaWJsZSBvbmUgKi9cclxuICAgICAgbGV0IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4ID0gdGhpcy5nZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpO1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLnZzY29tcC1vcHRpb25bZGF0YS12aXNpYmxlLWluZGV4PVwiJHtmaXJzdFZpc2libGVPcHRpb25JbmRleH1cIl1gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdncm91cC10aXRsZScpXHJcbiAgICAgICkge1xyXG4gICAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRuZXdGb2N1c2VkRWxlLCAnbmV4dCcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuZ2V0U2libGluZygkZm9jdXNlZEVsZSwgZGlyZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJG5ld0ZvY3VzZWRFbGUgJiYgJG5ld0ZvY3VzZWRFbGUgIT09ICRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIGlmICgkZm9jdXNlZEVsZSkge1xyXG4gICAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChEb21VdGlscy5nZXREYXRhKCRuZXdGb2N1c2VkRWxlLCAnaW5kZXgnKSwgdHJ1ZSk7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24pIHRoaXMubW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoJG5ld0ZvY3VzZWRFbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoJGZvY3VzZWRFbGUpIHtcclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld1Njcm9sbFRvcDtcclxuICAgIGxldCBjb250YWluZXJSZWN0ID0gdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBvcHRpb25SZWN0ID0gJGZvY3VzZWRFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgY29udGFpbmVyVG9wID0gY29udGFpbmVyUmVjdC50b3A7XHJcbiAgICBsZXQgY29udGFpbmVyQm90dG9tID0gY29udGFpbmVyUmVjdC5ib3R0b207XHJcbiAgICBsZXQgY29udGFpbmVySGVpZ2h0ID0gY29udGFpbmVyUmVjdC5oZWlnaHQ7XHJcbiAgICBsZXQgb3B0aW9uVG9wID0gb3B0aW9uUmVjdC50b3A7XHJcbiAgICBsZXQgb3B0aW9uQm90dG9tID0gb3B0aW9uUmVjdC5ib3R0b207XHJcbiAgICBsZXQgb3B0aW9uSGVpZ2h0ID0gb3B0aW9uUmVjdC5oZWlnaHQ7XHJcbiAgICBsZXQgb3B0aW9uT2Zmc2V0VG9wID0gJGZvY3VzZWRFbGUub2Zmc2V0VG9wO1xyXG4gICAgbGV0IG9wdGlvbnNUb3AgPSBEb21VdGlscy5nZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCAnbnVtYmVyJyk7XHJcblxyXG4gICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiB0b3AgKi9cclxuICAgIGlmIChjb250YWluZXJUb3AgPiBvcHRpb25Ub3ApIHtcclxuICAgICAgbmV3U2Nyb2xsVG9wID0gb3B0aW9uT2Zmc2V0VG9wICsgb3B0aW9uc1RvcDtcclxuICAgIH0gZWxzZSBpZiAoY29udGFpbmVyQm90dG9tIDwgb3B0aW9uQm90dG9tKSB7XHJcbiAgICAgIC8qIGlmIG9wdGlvbiBoaWRkZW4gb24gYm90dG9tICovXHJcbiAgICAgIG5ld1Njcm9sbFRvcCA9XHJcbiAgICAgICAgb3B0aW9uT2Zmc2V0VG9wIC0gY29udGFpbmVySGVpZ2h0ICsgb3B0aW9uSGVpZ2h0ICsgb3B0aW9uc1RvcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3U2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBuZXdTY3JvbGxUb3A7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVPcHRpb25Gb2N1cygpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChudWxsKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdE9wdGlvbigkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGluZyA9ICFEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICBpZiAoaXNBZGRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvKiogb24gc2VsZWN0aW5nIHNhbWUgdmFsdWUgaW4gc2luZ2xlIHNlbGVjdCAqL1xyXG4gICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleGVzID0gdGhpcy5zZWxlY3RlZEluZGV4ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ3ZhbHVlJyk7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleCA9IHBhcnNlSW50KERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ2luZGV4JykpO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRQcm9wKHNlbGVjdGVkSW5kZXgsIGlzQWRkaW5nKTtcclxuXHJcbiAgICBpZiAoaXNBZGRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKHNlbGVjdGVkVmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3AoXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0T3B0aW9uSW5kZXgoc2VsZWN0ZWRWYWx1ZXNbMF0pLFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzID0gW3NlbGVjdGVkVmFsdWVdO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcyA9IFtzZWxlY3RlZEluZGV4XTtcclxuICAgICAgICBsZXQgJHByZXZTZWxlY3RlZE9wdGlvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgJy52c2NvbXAtb3B0aW9uLnNlbGVjdGVkJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICgkcHJldlNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkcHJldlNlbGVjdGVkT3B0aW9uLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoJGVsZSwgJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZEluZGV4ZXMsIHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnY3VycmVudC1uZXcnKSkge1xyXG4gICAgICB0aGlzLmJlZm9yZVNlbGVjdE5ld1ZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEZvY3VzZWRPcHRpb24oKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihcclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi5mb2N1c2VkJylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpIHtcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSB8fCB0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgaXNTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzU2VsZWN0ZWQgPSAhRG9tVXRpbHMuaGFzQ2xhc3ModGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3gsICdjaGVja2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleGVzID0gW107XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQsIGlkeCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkIHx8IGQuaXNDdXJyZW50TmV3IHx8IGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBpc1NlbGVjdGVkO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKGlkeCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzQWxsU2VsZWN0ZWQpIHtcclxuICAgIGlmICh0eXBlb2YgaXNBbGxTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgaXNBbGxTZWxlY3RlZCA9ICF0aGlzLm9wdGlvbnMuc29tZSgoZCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICFkLmlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR0b2dnbGVBbGxDaGVja2JveCwgJ2NoZWNrZWQnLCBpc0FsbFNlbGVjdGVkKTtcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVGb2N1c2VkUHJvcChpbmRleCwgaXNGb2N1c2VkID0gZmFsc2UpIHtcclxuICAgIGlmICh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCkge1xyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AodGhpcy5mb2N1c2VkT3B0aW9uSW5kZXgsICdpc0ZvY3VzZWQnLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKGluZGV4LCAnaXNGb2N1c2VkJywgaXNGb2N1c2VkKTtcclxuICAgIHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4ID0gaW5kZXg7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTZWxlY3RlZFByb3AoaW5kZXgsIGlzU2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKGluZGV4LCAnaXNTZWxlY3RlZCcsIGlzU2VsZWN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9Ub3AoKSB7XHJcbiAgICBsZXQgaXNDbG9zZWQgPSAhdGhpcy5pc09wZW5lZCgpO1xyXG5cclxuICAgIGlmIChpc0Nsb3NlZCkge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzY3JvbGxUb3AgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHJcbiAgICBpZiAoc2Nyb2xsVG9wID4gMCkge1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYmVmb3JlVmFsdWVTZXQodHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlKG51bGwsIG51bGwsIHRydWUpO1xyXG4gICAgdGhpcy5hZnRlclZhbHVlU2V0KCk7XHJcbiAgfVxyXG5cclxuICBiZWZvcmVWYWx1ZVNldChpc1Jlc2V0KSB7XHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhpc1Jlc2V0ID8gZmFsc2UgOiB1bmRlZmluZWQpO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJWYWx1ZVNldCgpIHtcclxuICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclNldE9wdGlvbnMoa2VlcFZhbHVlKSB7XHJcbiAgICBsZXQgc2VhcmNoID0gdGhpcy5zZWFyY2hWYWx1ZTsgLy8gTmVlZCB0byBiZSBzdG9yZWQgYmVjYXVzZSBzZXRWYWx1ZU1ldGhvZCB3aWxsIGVtcHR5IHRoaXMuc2VhcmNoVmFsdWVcclxuXHJcbiAgICBpZiAoa2VlcFZhbHVlKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnModGhpcy5pc0FsbFNlbGVjdGVkKTsgLy8gSWYgc2VsZWN0IGFsbCB3YXMgb24gbGV0IHNlbGVjdCBhbGwgb25cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKHRoaXMuc2VsZWN0ZWRWYWx1ZXMsIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0KTsgLy8gUmVzZWxlY3QgdmFsaWQgdmFsdWVzXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnNlYXJjaCkgdGhpcy5zZXRTZWFyY2hWYWx1ZShzZWFyY2gsIGZhbHNlLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAoIWtlZXBWYWx1ZSkge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRPcHRpb24oZGF0YSwgcmVyZW5kZXIpIHtcclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXgrKztcclxuICAgIGRhdGEuaW5kZXggPSB0aGlzLmxhc3RPcHRpb25JbmRleDtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE9wdGlvbk9iaihkYXRhKTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMucHVzaChuZXdPcHRpb24pO1xyXG4gICAgdGhpcy5zb3J0ZWRPcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcclxuXHJcbiAgICBpZiAocmVyZW5kZXIpIHtcclxuICAgICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVPcHRpb24oaW5kZXgpIHtcclxuICAgIGlmICghaW5kZXggJiYgaW5kZXggIT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleC0tO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbihuZXdPcHRpb24uaW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmVmb3JlU2VsZWN0TmV3VmFsdWUoKSB7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuICAgIGxldCBuZXdJbmRleCA9IG5ld09wdGlvbi5pbmRleDtcclxuXHJcbiAgICB0aGlzLm5ld1ZhbHVlcy5wdXNoKG5ld09wdGlvbi52YWx1ZSk7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdpc0N1cnJlbnROZXcnLCBmYWxzZSk7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdpc05ldycsIHRydWUpO1xyXG5cclxuICAgIC8qKiB1c2luZyBzZXRUaW1lb3V0IHRvIGZpeCB0aGUgaXNzdWUgb2YgZHJvcGJveCBnZXR0aW5nIGNsb3NlZCBvbiBzZWxlY3QgKi9cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIHNvcnRPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBvcHRpb25zLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgaWYgKGIudmFsdWUgPT09IG5vbmVPcHRpb25WYWx1ZSAmJiBhLnZhbHVlICE9PSBub25lT3B0aW9uVmFsdWUpIHtcclxuICAgICAgICAvLyBOb25lIGlzIGFsd2F5cyBmaXJzdFxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2UgaWYgKCFhLmlzU2VsZWN0ZWQgJiYgIWIuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2UgaWYgKGEuaXNTZWxlY3RlZCAmJiAoIWIuaXNTZWxlY3RlZCB8fCBhLmluZGV4IDwgYi5pbmRleCkpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc29ydE9wdGlvbnNHcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgc29ydE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zO1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCBjaGlsZE9wdGlvbnMgPSBkLm9wdGlvbnM7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGNoaWxkT3B0aW9ucy5zb21lKChlKSA9PiBlLmlzU2VsZWN0ZWQpO1xyXG5cclxuICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHNvcnRPcHRpb25zKGNoaWxkT3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNvcnRPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmRlc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBpc09wdGlvblZpc2libGUoZCwgc2VhcmNoVmFsdWUsIGhhc0V4YWN0T3B0aW9uLCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZykge1xyXG4gICAgbGV0IHZhbHVlID0gZC5sYWJlbC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gZC5kZXNjcmlwdGlvbjtcclxuICAgIGxldCBhbGlhcyA9IGQuYWxpYXM7XHJcbiAgICBsZXQgaXNWaXNpYmxlID0gdmFsdWUuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG5cclxuICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZ1tkLmluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWxpYXMgJiYgIWlzVmlzaWJsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSBhbGlhcy5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICYmICFpc1Zpc2libGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZC5pc1Zpc2libGUgPSBpc1Zpc2libGU7XHJcblxyXG4gICAgaWYgKCFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICBoYXNFeGFjdE9wdGlvbiA9IHZhbHVlID09PSBzZWFyY2hWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1Zpc2libGUsXHJcbiAgICAgIGhhc0V4YWN0T3B0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBjaGlsZE9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAvKiogZ2V0dGluZyBhbGwgZ3JvdXAgdGl0bGUgKi9cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBsZXQgY2hpbGRBcnJheSA9IFtdO1xyXG4gICAgICAgIGQub3B0aW9ucyA9IGNoaWxkQXJyYXk7XHJcbiAgICAgICAgY2hpbGRPcHRpb25zW2QuaW5kZXhdID0gY2hpbGRBcnJheTtcclxuXHJcbiAgICAgICAgcmVzdWx0LnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKiBnZXR0aW5nIGFsbCBncm91cCBvcHRpb25zICovXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIGNoaWxkT3B0aW9uc1tkLmdyb3VwSW5kZXhdLnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBkZXN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0LnB1c2goZCk7XHJcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoZC5vcHRpb25zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUpIHtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtbm8tb3B0aW9ucycpO1xyXG4gICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3NlcnZlci1zZWFyY2hpbmcnKTtcclxuICAgIHRoaXMub25TZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUsIHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBzdGF0aWMgaW5pdChvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZUFycmF5ID0gb3B0aW9ucy5lbGU7XHJcblxyXG4gICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzaW5nbGVFbGUgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodHlwZW9mICRlbGVBcnJheSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgJGVsZUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigkZWxlQXJyYXkpO1xyXG5cclxuICAgICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoJGVsZUFycmF5Lmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGVBcnJheSA9IFskZWxlQXJyYXldO1xyXG4gICAgICBzaW5nbGVFbGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbnN0YW5jZXMgPSBbXTtcclxuICAgICRlbGVBcnJheS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgIG9wdGlvbnMuZWxlID0gJGVsZTtcclxuICAgICAgaW5zdGFuY2VzLnB1c2gobmV3IFZpcnR1YWxTZWxlY3Qob3B0aW9ucykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNpbmdsZUVsZSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZXNldEZvcm0oZSkge1xyXG4gICAgbGV0ICRmb3JtID0gZS50YXJnZXQuY2xvc2VzdCgnZm9ybScpO1xyXG5cclxuICAgIGlmICghJGZvcm0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgJGVsZS5wYXJlbnRFbGVtZW50LnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0KCkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywga2VlcFZhbHVlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZVNlbGVjdEFsbChpc1NlbGVjdGVkKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QudG9nZ2xlQWxsT3B0aW9ucyhpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0FsbFNlbGVjdGVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5pc0FsbFNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZE9wdGlvbk1ldGhvZChkYXRhKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QuYWRkT3B0aW9uKGRhdGEsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE5ld1ZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHZlcnNpb24oKSB7XHJcbiAgICByZXR1cm4gdmlydHVhbFNlbGVjdFZlcnNpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGlzcGxheVZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWUoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvcGVuTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5vcGVuRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNsb3NlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvblJlc2l6ZU1ldGhvZCgpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgJGVsZS5wYXJlbnRFbGVtZW50LnZpcnR1YWxTZWxlY3Qub25SZXNpemUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBlbmQgKi9cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBWaXJ0dWFsU2VsZWN0LnJlc2V0Rm9ybSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBWaXJ0dWFsU2VsZWN0Lm9uUmVzaXplTWV0aG9kKTtcclxuXHJcbndpbmRvdy5WaXJ0dWFsU2VsZWN0ID0gVmlydHVhbFNlbGVjdDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==