/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{DomUtils:()=>l});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"addClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).add.apply(i,o(e))})))}},{key:"removeClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).remove.apply(i,o(e))})))}},{key:"toggleClass",value:function(t,e,i){var o;if(t)return void 0!==i&&(i=Boolean(i)),this.getElements(t).forEach((function(t){o=t.classList.toggle(e,i)})),o}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=e.left,n=e.top;return{horizontal:s>i-s-e.width?"left":"right",vertical:n>o-n-e.height?"top":"bottom"}}},{key:"getData",value:function(t,e,i){if(t){var o=t?t.dataset[e]:"";return"number"===i?o=parseFloat(o)||0:"true"===o?o=!0:"false"===o&&(o=!1),o}}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"setStyle",value:function(t,e,i){t&&(t.style[e]=i)}},{key:"getElements",value:function(t){if(t)return void 0===t.length&&(t=[t]),t}},{key:"getStyleText",value:function(t,e){var i="";for(var o in t)i+="".concat(o,": ").concat(t[o],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var o=t[i];void 0!==o&&(e+=" ".concat(i,'="').concat(o,'" '))}return e}}],(i=null)&&n(e.prototype,i),s&&n(e,s),t}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(t,e,i)=>{i.r(e),i.d(e,{Utils:()=>o.Utils,DomUtils:()=>s.DomUtils});var o=i(/*! ./utils */"./src/utils/utils.js"),s=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{Utils:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"getString",value:function(t){return t||0===t?t.toString():""}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===n(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length||!e)return t;i&&(t=o(t));var s=t.indexOf(e);return-1!==s&&t.splice(s,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}}],(i=null)&&l(e.prototype,i),s&&l(e,s),t}()}},e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(o),i.d(o,{VirtualSelect:()=>c});var t=i(/*! ./utils */"./src/utils/index.js");function e(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r="{#virtual-select-none-option#}",p={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},c=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);try{this.setProps(t),this.setDisabledOptions(t.disabledOptions),this.setOptions(t.options),this.render()}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var o,n,l;return o=i,l=[{key:"init",value:function(t){var e=t.ele;if(e){var o=!1;if("string"!=typeof e||(e=document.querySelector(e))){void 0===e.length&&(e=[e],o=!0);var s=[];return e.forEach((function(e){t.ele=e,s.push(new i(t))})),o?s[0]:s}}}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t,e){this.virtualSelect.setOptionsMethod(t,e)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.onResize()}))}}],(n=[{key:"render",value:function(){var e=this;if(this.$ele){var i="vscomp-wrapper",o=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),n={"z-index":this.zIndex},l=function(){var t="";return e.additionalClasses&&(t+=" "+e.additionalClasses),e.multiple&&(t+=" multiple",e.disableSelectAll||(t+=" has-select-all")),"top"===e.position&&(t+=" position-top"),e.hideClearButton||(t+=" has-clear-button"),e.keepAlwaysOpen?t+=" keep-always-open opened":t+=" closed",e.showAsPopup?t+=" show-as-popup":e.dropboxWidth&&(n.width=e.dropboxWidth),e.hasSearch&&(t+=" has-search-input"),t};i+=l(),this.guid=t.Utils.generateUUID();var a='<div id="vs-'.concat(this.guid,'" class="vscomp-dropbox-container" ').concat(t.DomUtils.getStyleText(n),'>\n      <div class="vscomp-dropbox">\n        <div class="vscomp-search-wrapper"></div>\n\n        <div class="vscomp-options-container">\n          <div class="vscomp-options-loader"></div>\n\n          <div class="vscomp-options-list">\n            <div class="vscomp-options"></div>\n          </div>\n        </div>\n\n        <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n        <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n        <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n      </div>\n    </div>'),r='<div class="'.concat(i,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(o,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        ').concat(this.keepAlwaysOpen||!this.appendToBody?a:"","\n\n      </div>");if(this.$ele.innerHTML=r,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),!this.keepAlwaysOpen&&this.appendToBody){this.$body.append(document.createRange().createContextualFragment(a)),this.$dropboxContainer=document.querySelector("#vs-".concat(this.guid,".vscomp-dropbox-container")),this.$dropboxEl=document.querySelector("#vs-".concat(this.guid));var p="vscomp-wrapper-body";p+=l(),t.DomUtils.addClass(this.$dropboxEl,"".concat(p))}else this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxEl=this.$ele;this.$search=this.$dropboxEl.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxEl.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxEl.querySelector(".vscomp-options-list"),this.$options=this.$dropboxEl.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$dropboxEl.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxEl.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var e,i=this,o="",s=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),p=t.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(e=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var c=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(c,"></span>")}s.forEach((function(t){var s=t.label,c="vscomp-option",u=i.getTooltipAttrText("",!0),h=n,d="",v="";t.isFocused&&(c+=" focused"),t.isDisabled&&(c+=" disabled"),t.isGroupTitle?(c+=" group-title",h=""):t.isSelected&&(c+=" selected"),t.isGroupOption&&(c+=" group-option"),t.description&&(v='<div class="vscomp-option-description" '.concat(u,">").concat(t.description,"</div>")),t.isCurrentNew?(c+=" current-new",d+=l):a&&!t.isGroupTitle&&(s=s.replace(e,"<mark>$1</mark>")),o+='<div class="'.concat(c,'" data-value="').concat(t.value,'" data-index="').concat(t.index,'" data-visible-index="').concat(t.visibleIndex,'" ').concat(p,">\n          ").concat(h,'\n          <span class="vscomp-option-text ').concat(t.value===r?"none":"",'" ').concat(u,">\n            ").concat(s,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=o;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||(t.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-no-search-results",h)),t.DomUtils.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var t="",e="";this.multiple&&!this.disableSelectAll&&(t='<span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>")),this.hasSearch&&(e='<input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n      <span class="vscomp-search-clear">&times;</span>'));var i='<div class="vscomp-search-container">\n        '.concat(t,"\n        ").concat(e,"\n      </div>");this.$search.innerHTML=i,this.$searchInput=this.$dropboxEl.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxEl.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxEl.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"addEvent",value:function(e,i,o){var s=this;e&&(i=t.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(o,"-").concat(i),l=s.events[n];l||(l=s[o].bind(s),s.events[n]=l),(e=t.DomUtils.getElements(e)).forEach((function(t){t.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(e,i){e&&(e=t.DomUtils.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(t){this.appendToBody&&this.multiple&&this.isOpened()&&t.target.closest("#vs-".concat(this.guid))||t.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=p[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)"))}},{key:"onDropboxContainerClick",value:function(t){t.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.isOpened()&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.appendToBody?this.isOpened()&&this.closeDropbox(!0):this.setOptionsContainerHeight(!0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),t.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(t){t&&this.showAsPopup&&this.setVisibleOptions()}},{key:"setProps",value:function(e){e=this.setDefaultProps(e),this.setPropsFromElementAttr(e);var i=t.Utils.convertToBoolean;this.$ele=e.ele,this.valueKey=e.valueKey,this.labelKey=e.labelKey,this.descriptionKey=e.descriptionKey,this.aliasKey=e.aliasKey,this.optionHeightText=e.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(e.multiple),this.hasSearch=i(e.search),this.hideClearButton=i(e.hideClearButton),this.autoSelectFirstOption=i(e.autoSelectFirstOption),this.hasOptionDescription=i(e.hasOptionDescription),this.silentInitialValueSet=i(e.silentInitialValueSet),this.allowNewOption=i(e.allowNewOption),this.markSearchResults=i(e.markSearchResults),this.showSelectedOptionsFirst=i(e.showSelectedOptionsFirst),this.disableSelectAll=i(e.disableSelectAll),this.keepAlwaysOpen=i(e.keepAlwaysOpen),this.showDropboxAsPopup=i(e.showDropboxAsPopup),this.noOptionsText=e.noOptionsText,this.noSearchResultsText=e.noSearchResultsText,this.selectAllText=e.selectAllText,this.placeholder=e.placeholder,this.position=e.position,this.dropboxWidth=e.dropboxWidth,this.tooltipFontSize=e.tooltipFontSize,this.tooltipAlignment=e.tooltipAlignment,this.tooltipMaxWidth=e.tooltipMaxWidth,this.noOfDisplayValues=parseInt(e.noOfDisplayValues),this.zIndex=parseInt(e.zIndex),this.maxValues=parseInt(e.maxValues),this.name=e.name,this.additionalClasses=e.additionalClasses,this.initialSelectedValue=e.selectedValue,this.popupDropboxBreakpoint=e.popupDropboxBreakpoint,this.onServerSearch=e.onServerSearch,this.searchPlaceholder=e.searchPlaceholder,this.itemsSelectedMessage=e.itemsSelectedMessage,this.allowNoneOption=e.allowNoneOption,this.noneOptionText=e.noneOptionText,this.appendToBody=e.appendToBody,this.selectedValues=[],this.selectedIndexes=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===e.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(e.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None",appendToBody:!1};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint"};for(var o in i){var s=e.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(t[i[o]]=s)}}},{key:"setMethods",value:function(){var t=this.$ele;t.virtualSelect=this,t.value=this.multiple?[]:"",t.reset=i.reset,t.setValue=i.setValueMethod,t.setOptions=i.setOptionsMethod,t.setDisabledOptions=i.setDisabledOptionsMethod,t.toggleSelectAll=i.toggleSelectAll,t.isAllSelected=i.isAllSelected,t.addOption=i.addOptionMethod,t.getNewValue=i.getNewValueMethod,t.getDisplayValue=i.getDisplayValueMethod,t.open=i.openMethod,t.close=i.closeMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i=[],o=[];this.options.forEach((function(e,s){-1===t.indexOf(e.value)||e.isDisabled||e.isGroupTitle?e.isSelected=!1:(e.isSelected=!0,i.push(e.value),o.push(s))})),this.multiple||(i=i[0],o=o[0]),this.beforeValueSet(),this.setValue(i,o,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t,e){var i=t!=this.options;this.setOptions(t),this.afterSetOptions(e,i)}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(e){e||(e=[]);var i=[],o=this.disabledOptions,s=o.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,p=this.aliasKey,c=this.hasOptionDescription,u=t.Utils.getString,h=this.getAlias,d=0,v=!1;!this.multiple&&this.allowNoneOption&&e.unshift({value:r,label:this.noneOptionText}),e.forEach((function t(e){var r=u(e[n]),f=e.options,y=!!f,g={index:d,value:r,label:u(e[l]),alias:h(e[p]),isVisible:!0,isGroupTitle:y};if(s&&(g.isDisabled=-1!==o.indexOf(r)),e.isGroupOption&&(g.isGroupOption=!0,g.groupIndex=e.groupIndex),c&&(g.description=u(e[a])),i.push(g),d++,y){var m=g.index;v=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=m,t(e)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=v,this.setSortedOptions()}},{key:"setServerOptions",value:function(e){this.setOptionsMethod(e,!0),t.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSortedOptions",value:function(){var t=s(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=s(this.sortedOptions),e=2*this.optionsCount,i=this.getVisibleStartIndex(),o=this.getNewOption(),n=i+e-1,l=0;o&&(o.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=i&&l<=n,t.visibleIndex=l,l++),e})),o&&(t=[o].concat(s(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){void 0===e&&(e=this.getVisibleStartIndex());var i=e*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),t.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var e=this,i=this.getVisibleOptions(),o=this.hasOptionDescription;i.forEach((function(i){var s=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));t.DomUtils.setData(s.querySelector(".vscomp-option-text"),"tooltip",i.label),o&&t.DomUtils.setData(s.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(e,i,o){e?Array.isArray(e)?this.selectedValues=s(e):this.selectedValues=[e]:this.selectedValues=[];var n=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=n,this.$hiddenInput.value=n,i?Array.isArray(i)?this.selectedIndexes=s(i):this.selectedIndexes=[i]:this.selectedIndexes=[];var l=this.multiple?this.selectedIndexes:this.selectedIndexes[0]||"";this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===r?t.DomUtils.removeClass(this.$wrapper,"has-value"):t.DomUtils.toggleClass(this.$wrapper,"has-value",t.Utils.isNotEmpty(this.selectedValues)),t.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),o&&this.dispatchEvent(this.$ele,"change")}},{key:"setValueText",value:function(){var i=[],o=[],s=this.selectedValues,n=s.length,l=this.noOfDisplayValues,a=0;if(this.isAllSelected)this.$valueText.innerHTML="".concat(n," ").concat(this.itemsSelectedMessage);else{var p,c=e(this.options);try{for(c.s();!(p=c.n()).done;){var u=p.value;if(!u.isCurrentNew){if(a>50)break;var h=u.value;if(-1!==s.indexOf(h)){var d=u.label;i.push(d),++a<=l&&o.push('<span class="vscomp-value-tag">'.concat(d,"</span>"))}}}}catch(t){c.e(t)}finally{c.f()}var v=n-l;v>0&&o.push('<span class="vscomp-value-tag more-value-count">+ '.concat(v," more...</span>"));var f=i.join(", ");if(""===f||s&&s[0]===r)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=f,this.multiple){var y=this.maxValues;if(t.DomUtils.hasEllipsis(this.$valueText)||y){var g="".concat(n);y&&(g+=" / ".concat(y)),this.$valueText.innerHTML="".concat(g," ").concat(this.itemsSelectedMessage)}else o=[]}}t.DomUtils.setData(this.$valueText,"tooltip",o.join(", "))}},{key:"setSearchValue",value:function(e,i,o){if(e!==this.searchValueOriginal||o){i||(this.$searchInput.value=e);var s=e.toLowerCase().trim();if(this.searchValue=s,this.searchValueOriginal=e,t.DomUtils.toggleClass(this.$wrapper,"has-search-value",e),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-search-value",e),this.hasServerSearch)this.serverSearch(s);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=r(t,s,a,n);e.isVisible&&l++,a||(a=e.hasExactOption)}})),this.allowNewOption&&(s&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(e){var i;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(t.DomUtils.setStyle(this.$noOptions,"height",i),t.DomUtils.setStyle(this.$noSearchResults,"height",i))),t.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(e)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var e=t.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var o=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,n=parseFloat(this.dropboxWidth),l=o.left+n>s,a=n>o.right;l&&!a&&(i=!0)}if(this.appendToBody){var r=this.$ele.getBoundingClientRect(),p=r.left+window.scrollX,c=r.top+window.scrollY;this.$dropboxEl.style.width="".concat(this.$ele.offsetWidth,"px"),this.$dropboxEl.style.left="".concat(p,"px"),"top"===e.vertical?this.$dropboxEl.style.top="".concat(c-this.$dropboxContainer.offsetHeight-4,"px"):this.$dropboxEl.style.top="".concat(c+this.$ele.offsetHeight+4,"px"),t.DomUtils.toggleClass(this.$dropboxContainer,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$dropboxContainer,"position-left",i)}else t.DomUtils.toggleClass(this.$wrapper,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var o={value:t,label:t,isCurrentNew:!0};this.addOption(o)}}}},{key:"setSelectedProp",value:function(){var t=this.selectedValues;this.options.forEach((function(e){-1!==t.indexOf(e.value)&&(e.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":o};return t.DomUtils.getAttributesText(s)}},{key:"getOptionObj",value:function(e){if(e){var i=t.Utils.getString;return{index:e.index,value:i(e.value),label:i(e.label),description:i(e.description),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,i=[],o=this.selectedValues,s=e(this.options);try{for(s.s();!(t=s.n()).done;){var n=t.value;-1!==o.indexOf(n.value)&&i.push(n.label)}}catch(t){s.e(t)}finally{s.f()}return this.multiple?i:i[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},o=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return o(e,t).isVisible}))})),i}},{key:"getOptionsCount",value:function(t){if(this.showAsPopup){var e=80*window.innerHeight/100-48;this.hasSearchContainer&&(e-=40),t=Math.floor(e/this.optionHeight)}else t=parseInt(t);return t}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(e,i){var o="next"===i?"nextElementSibling":"previousElementSibling";do{e&&(e=e[o])}while(t.DomUtils.hasClass(e,"disabled")||t.DomUtils.hasClass(e,"group-title"));return e}},{key:"openDropbox",value:function(e){var i=this;this.setDropboxPosition(),t.DomUtils.removeClass(this.$wrapper,"closed"),t.DomUtils.removeClass(this.$dropboxEl,"opened"),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"opened"),t.DomUtils.addClass(i.$dropboxEl,"opened"),i.dispatchEvent(i.$ele,"opened"),e||(i.moveSelectedOptionsFirst(),t.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(t.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput())}),0)}},{key:"closeDropbox",value:function(e){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var o=e?0:this.transitionDuration;setTimeout((function(){t.DomUtils.removeClass(i.$wrapper,"opened focused"),t.DomUtils.removeClass(i.$dropboxEl,"opened focused"),i.dispatchEvent(i.$ele,"closed"),i.removeOptionFocus(),e||i.isPopupActive&&(t.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1)}),0),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"closed"),t.DomUtils.removeClass(i.$dropboxEl,"closed"),i.appendToBody&&(i.$dropboxEl.style.left="-200px",i.$dropboxEl.style.top="-200px")}),o)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return t.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(e,i){var o,s=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)o=i;else if(s)o=this.getSibling(s,e);else{var n=this.getFirstVisibleOptionIndex();o=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(t.DomUtils.hasClass(o,"disabled")||t.DomUtils.hasClass(o,"group-title"))&&(o=this.getSibling(o,"next"))}o&&o!==s&&(s&&t.DomUtils.removeClass(s,"focused"),t.DomUtils.addClass(o,"focused"),this.toggleFocusedProp(t.DomUtils.getData(o,"index"),!0),this.moveFocusedOptionToView(o))}},{key:"moveFocusedOptionToView",value:function(e){if(e||(e=this.$dropboxContainer.querySelector(".vscomp-option.focused")),e){var i,o=this.$optionsContainer.getBoundingClientRect(),s=e.getBoundingClientRect(),n=o.top,l=o.bottom,a=o.height,r=s.top,p=s.bottom,c=s.height,u=e.offsetTop,h=t.DomUtils.getData(this.$options,"top","number");n>r?i=u+h:l<p&&(i=u-a+c+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(t.DomUtils.removeClass(e,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){if(e){var i=!t.DomUtils.hasClass(e,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var o=this.selectedValues,s=this.selectedIndexes,n=t.DomUtils.getData(e,"value"),l=t.DomUtils.getData(e,"index");if(this.toggleSelectedProp(l,i),i){if(this.multiple)o.push(n),s.push(l),this.toggleAllOptionsClass();else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[n],s=[l];var a=this.$ele.querySelector(".vscomp-option.selected");a&&t.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}t.DomUtils.toggleClass(e,"selected")}else this.multiple&&(t.DomUtils.toggleClass(e,"selected"),t.Utils.removeItemFromArray(o,n),t.Utils.removeItemFromArray(s,l),this.toggleAllOptionsClass(!1));if(t.DomUtils.hasClass(e,"current-new")&&this.beforeSelectNewValue(),this.setValue(o,s,!0),this.keepAlwaysOpen&&this.showSelectedOptionsFirst){var r=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=r}}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof e&&(e=!t.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],o=[];this.options.forEach((function(t,s){t.isDisabled||t.isCurrentNew||t.isGroupTitle||(t.isSelected=e,e&&(i.push(t.value),o.push(s)))})),this.toggleAllOptionsClass(e),this.setValue(i,o,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){"boolean"!=typeof e&&(e=!1,this.options.length&&(e=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),t.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",e),this.isAllSelected=e}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(t){var e=this.searchValue;t&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.setSearchValue(e,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),t||this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return e.value===r&&t.value!==r?0:t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,o){var s=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==s.indexOf(e);return t.isGroupTitle&&(a=o[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=s===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var o=[];t.options=o,i[t.index]=o,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"serverSearch",value:function(e){t.DomUtils.removeClass(this.$wrapper,"has-no-options"),t.DomUtils.addClass(this.$wrapper,"server-searching"),this.onServerSearch(e,this)}}])&&a(o.prototype,n),l&&a(o,l),i}();document.addEventListener("reset",c.resetForm),window.addEventListener("resize",c.onResizeMethod),window.VirtualSelect=c})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy91dGlscy9kb20tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJEb21VdGlscyIsIiRlbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsInRoaXMiLCJnZXRFbGVtZW50cyIsImZvckVhY2giLCJfdGhpcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImlzQWRkIiwiaXNBZGRlZCIsInVuZGVmaW5lZCIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJjb250YWlucyIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhdmFpbGFibGVXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwibGVmdCIsInRvcEFyZWEiLCJ0b3AiLCJob3Jpem9udGFsIiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImhlaWdodCIsIm5hbWUiLCJ0eXBlIiwidmFsdWUiLCJkYXRhc2V0IiwicGFyc2VGbG9hdCIsInN0eWxlIiwibGVuZ3RoIiwicHJvcHMiLCJza2lwQXR0ck5hbWUiLCJyZXN1bHQiLCJrIiwiZGF0YSIsImh0bWwiLCJVdGlscyIsInRleHQiLCJ0b1N0cmluZyIsImRlZmF1bHRWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlsdGVyIiwiZCIsInJlcGxhY2UiLCJjIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDhBcnJheSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwibm9uZU9wdGlvblZhbHVlIiwia2V5RG93bk1ldGhvZE1hcHBpbmciLCIxMyIsIjI3IiwiMzgiLCI0MCIsIlZpcnR1YWxTZWxlY3QiLCJvcHRpb25zIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCIkZWxlQXJyYXkiLCJlbGUiLCJzaW5nbGVFbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnN0YW5jZXMiLCJwdXNoIiwiJGZvcm0iLCJ0YXJnZXQiLCJjbG9zZXN0IiwicXVlcnlTZWxlY3RvckFsbCIsInBhcmVudEVsZW1lbnQiLCJ2aXJ0dWFsU2VsZWN0IiwicmVzZXQiLCJzaWxlbnRDaGFuZ2UiLCJzZXRWYWx1ZU1ldGhvZCIsImtlZXBWYWx1ZSIsInNldE9wdGlvbnNNZXRob2QiLCJzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QiLCJpc1NlbGVjdGVkIiwidG9nZ2xlQWxsT3B0aW9ucyIsImlzQWxsU2VsZWN0ZWQiLCJhZGRPcHRpb24iLCJnZXROZXdWYWx1ZSIsImdldERpc3BsYXlWYWx1ZSIsIm9wZW5Ecm9wYm94IiwiY2xvc2VEcm9wYm94Iiwib25SZXNpemUiLCJ3cmFwcGVyQ2xhc3NlcyIsInZhbHVlVG9vbHRpcCIsImdldFRvb2x0aXBBdHRyVGV4dCIsIm11bHRpcGxlIiwiY2xlYXJCdXR0b25Ub29sdGlwIiwiZHJvcGJveENvbnRhaW5lclN0eWxlIiwiekluZGV4IiwiZ2V0V3JhcHBlckNsYXNzZXMiLCJjbGFzc2VzIiwiYWRkaXRpb25hbENsYXNzZXMiLCJkaXNhYmxlU2VsZWN0QWxsIiwicG9zaXRpb24iLCJoaWRlQ2xlYXJCdXR0b24iLCJrZWVwQWx3YXlzT3BlbiIsInNob3dBc1BvcHVwIiwiZHJvcGJveFdpZHRoIiwiaGFzU2VhcmNoIiwiZ3VpZCIsImRyb3Bib3hDb250YWluZXIiLCJub09wdGlvbnNUZXh0Iiwibm9TZWFyY2hSZXN1bHRzVGV4dCIsInBsYWNlaG9sZGVyIiwiYXBwZW5kVG9Cb2R5IiwiaW5uZXJIVE1MIiwiJGJvZHkiLCIkd3JhcHBlciIsIiR0b2dnbGVCdXR0b24iLCIkY2xlYXJCdXR0b24iLCIkZHJvcGJveENsb3NlQnV0dG9uIiwiYXBwZW5kIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCIkZHJvcGJveENvbnRhaW5lciIsIiRkcm9wYm94RWwiLCIkc2VhcmNoIiwiJG9wdGlvbnNDb250YWluZXIiLCIkb3B0aW9uc0xpc3QiLCIkb3B0aW9ucyIsIiR2YWx1ZVRleHQiLCIkaGlkZGVuSW5wdXQiLCIkbm9PcHRpb25zIiwiJG5vU2VhcmNoUmVzdWx0cyIsImFmdGVyUmVuZGVyV3JhcHBlciIsInNlYXJjaFJlZ2V4IiwidmlzaWJsZU9wdGlvbnMiLCJnZXRWaXNpYmxlT3B0aW9ucyIsImNoZWNrYm94SHRtbCIsIm5ld09wdGlvbkljb25IdG1sIiwibWFya1NlYXJjaFJlc3VsdHMiLCJzZWFyY2hWYWx1ZSIsInN0eWxlVGV4dCIsIm9wdGlvbkhlaWdodCIsIlJlZ0V4cCIsImFsbG93TmV3T3B0aW9uIiwibmV3T3B0aW9uVG9vbHRpcCIsIm9wdGlvbkxhYmVsIiwibGFiZWwiLCJvcHRpb25DbGFzc2VzIiwib3B0aW9uVG9vbHRpcCIsImxlZnRTZWN0aW9uIiwicmlnaHRTZWN0aW9uIiwiZGVzY3JpcHRpb24iLCJpc0ZvY3VzZWQiLCJpc0Rpc2FibGVkIiwiaXNHcm91cFRpdGxlIiwiaXNHcm91cE9wdGlvbiIsImlzQ3VycmVudE5ldyIsInZpc2libGVJbmRleCIsImhhc05vT3B0aW9ucyIsImhhc05vU2VhcmNoUmVzdWx0cyIsInNldE9wdGlvbnNQb3NpdGlvbiIsInNldE9wdGlvbnNUb29sdGlwIiwiaGFzU2VhcmNoQ29udGFpbmVyIiwic2VhcmNoSW5wdXQiLCJzZWxlY3RBbGxUZXh0Iiwic2VhcmNoUGxhY2Vob2xkZXIiLCIkc2VhcmNoSW5wdXQiLCIkc2VhcmNoQ2xlYXIiLCIkdG9nZ2xlQWxsQnV0dG9uIiwiJHRvZ2dsZUFsbENoZWNrYm94IiwiYWRkRXZlbnQiLCJldmVudHMiLCJtZXRob2QiLCJldmVudCIsImV2ZW50c0tleSIsImNhbGxiYWNrIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImlzT3BlbmVkIiwid2hpY2giLCJrZXlDb2RlIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94Iiwic2V0VmlzaWJsZU9wdGlvbnMiLCJzZWxlY3RPcHRpb24iLCJyZW1vdmVPcHRpb25Gb2N1cyIsInN0b3BQcm9wYWdhdGlvbiIsInNldFNlYXJjaFZhbHVlIiwiZm9jdXNTZWFyY2hJbnB1dCIsInNldE9wdGlvbnNDb250YWluZXJIZWlnaHQiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJTZWFyY2giLCJzZXRPcHRpb25zSGVpZ2h0IiwiYWRkRXZlbnRzIiwic2V0TWV0aG9kcyIsImluaXRpYWxTZWxlY3RlZFZhbHVlIiwic2lsZW50SW5pdGlhbFZhbHVlU2V0IiwiYXV0b1NlbGVjdEZpcnN0T3B0aW9uIiwic2V0RGVmYXVsdFByb3BzIiwic2V0UHJvcHNGcm9tRWxlbWVudEF0dHIiLCJjb252ZXJ0VG9Cb29sZWFuIiwidmFsdWVLZXkiLCJsYWJlbEtleSIsImRlc2NyaXB0aW9uS2V5IiwiYWxpYXNLZXkiLCJvcHRpb25IZWlnaHRUZXh0Iiwic2VhcmNoIiwiaGFzT3B0aW9uRGVzY3JpcHRpb24iLCJzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJzaG93RHJvcGJveEFzUG9wdXAiLCJ0b29sdGlwRm9udFNpemUiLCJ0b29sdGlwQWxpZ25tZW50IiwidG9vbHRpcE1heFdpZHRoIiwibm9PZkRpc3BsYXlWYWx1ZXMiLCJwYXJzZUludCIsIm1heFZhbHVlcyIsInNlbGVjdGVkVmFsdWUiLCJwb3B1cERyb3Bib3hCcmVha3BvaW50Iiwib25TZXJ2ZXJTZWFyY2giLCJpdGVtc1NlbGVjdGVkTWVzc2FnZSIsImFsbG93Tm9uZU9wdGlvbiIsIm5vbmVPcHRpb25UZXh0Iiwic2VsZWN0ZWRWYWx1ZXMiLCJzZWxlY3RlZEluZGV4ZXMiLCJuZXdWYWx1ZXMiLCJ0b29sdGlwRW50ZXJEZWxheSIsInRyYW5zaXRpb25EdXJhdGlvbiIsInNlYXJjaFZhbHVlT3JpZ2luYWwiLCJoYXNTZXJ2ZXJTZWFyY2giLCJvcHRpb25zQ291bnQiLCJnZXRPcHRpb25zQ291bnQiLCJoYWxmT3B0aW9uc0NvdW50IiwiTWF0aCIsImNlaWwiLCJvcHRpb25zSGVpZ2h0IiwiZ2V0T3B0aW9uc0hlaWdodCIsImRlZmF1bHRPcHRpb25zIiwiYXNzaWduIiwibWFwcGluZyIsImdldEF0dHJpYnV0ZSIsInNldFZhbHVlIiwidG9nZ2xlU2VsZWN0QWxsIiwiYWRkT3B0aW9uTWV0aG9kIiwiZ2V0TmV3VmFsdWVNZXRob2QiLCJnZXREaXNwbGF5VmFsdWVNZXRob2QiLCJvcGVuIiwib3Blbk1ldGhvZCIsImNsb3NlIiwiY2xvc2VNZXRob2QiLCJtYXAiLCJ2IiwidmFsaWRWYWx1ZXMiLCJ2YWxpZEluZGV4ZXMiLCJpZHgiLCJiZWZvcmVWYWx1ZVNldCIsImFmdGVyVmFsdWVTZXQiLCJuZXdvcHRpb24iLCJhZnRlclNldE9wdGlvbnMiLCJzZXRPcHRpb25zUHJvcCIsInByZXBhcmVkT3B0aW9ucyIsImhhc0Rpc2FibGVkT3B0aW9ucyIsImdldFN0cmluZyIsImdldEFsaWFzIiwiaGFzT3B0aW9uR3JvdXAiLCJ1bnNoaWZ0IiwicHJlcGFyZU9wdGlvbiIsImNoaWxkT3B0aW9ucyIsIm9wdGlvbiIsImFsaWFzIiwiaXNWaXNpYmxlIiwiZ3JvdXBJbmRleCIsInZpc2libGVPcHRpb25zQ291bnQiLCJsYXN0T3B0aW9uSW5kZXgiLCJzZXRTb3J0ZWRPcHRpb25zIiwic29ydGVkT3B0aW9ucyIsInNvcnRPcHRpb25zR3JvdXAiLCJzb3J0T3B0aW9ucyIsIm1heE9wdGlvbnNUb1Nob3ciLCJzdGFydEluZGV4IiwiZ2V0VmlzaWJsZVN0YXJ0SW5kZXgiLCJuZXdPcHRpb24iLCJnZXROZXdPcHRpb24iLCJlbmRJbmRleCIsImkiLCJpblZpZXciLCJyZW5kZXJPcHRpb25zIiwidHJhbnNmb3JtIiwiJG9wdGlvbkVsZSIsInRyaWdnZXJFdmVudCIsIm5ld1ZhbHVlIiwibmV3SW5kZXgiLCJpc01heFZhbHVlc1NlbGVjdGVkIiwic2V0VmFsdWVUZXh0IiwidmFsdWVUZXh0Iiwic2VsZWN0ZWRMZW5ndGgiLCJzZWxlY3RlZFZhbHVlc0NvdW50IiwibW9yZVNlbGVjdGVkT3B0aW9ucyIsImFnZ3JlZ2F0ZWRWYWx1ZVRleHQiLCJqb2luIiwiY291bnRUZXh0Iiwic2tpcElucHV0U2V0IiwiZm9yY2UiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJzZXJ2ZXJTZWFyY2giLCJ2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyIsImhhc0V4YWN0T3B0aW9uIiwiaXNPcHRpb25WaXNpYmxlIiwiZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmciLCJzZXROZXdPcHRpb24iLCJyZW1vdmVOZXdPcHRpb24iLCJzY3JvbGxUb1RvcCIsImFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsIm1vcmVWaXNpYmxlU2lkZXMiLCJzaG93T25MZWZ0IiwiYnV0dG9uQ29vcmRzIiwidmlld3BvcnRXaWR0aCIsImhpZGRlbk9uUmlnaHQiLCJoaWRkZW5PbkxlZnQiLCJyaWdodCIsImVsZUNvb3JkcyIsIngiLCJzY3JvbGxYIiwieSIsInNjcm9sbFkiLCJvZmZzZXRIZWlnaHQiLCJzZXRPcHRpb25Qcm9wIiwic2Nyb2xsVG9wIiwiZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgiLCJlbGxpcHNpc09ubHkiLCJhbGxvd0h0bWwiLCJsYXN0T3B0aW9uIiwic29tZSIsImRpc3BsYXlWYWx1ZXMiLCJzdHJ1Y3R1cmVPcHRpb25Hcm91cCIsImNvdW50IiwiZmxvb3IiLCJkaXJlY3Rpb24iLCJwcm9wTmFtZSIsImlzU2lsZW50Iiwic2V0RHJvcGJveFBvc2l0aW9uIiwibW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0IiwiaXNQb3B1cEFjdGl2ZSIsImZvY3VzIiwiJG5ld0ZvY3VzZWRFbGUiLCIkZm9jdXNlZEVsZSIsImdldFNpYmxpbmciLCJmaXJzdFZpc2libGVPcHRpb25JbmRleCIsInRvZ2dsZUZvY3VzZWRQcm9wIiwibW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXciLCJuZXdTY3JvbGxUb3AiLCJjb250YWluZXJSZWN0Iiwib3B0aW9uUmVjdCIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImJvdHRvbSIsImNvbnRhaW5lckhlaWdodCIsIm9wdGlvblRvcCIsIm9wdGlvbkJvdHRvbSIsIm9wdGlvbk9mZnNldFRvcCIsIm9mZnNldFRvcCIsIm9wdGlvbnNUb3AiLCJpc0FkZGluZyIsInNlbGVjdGVkSW5kZXgiLCJ0b2dnbGVTZWxlY3RlZFByb3AiLCJ0b2dnbGVBbGxPcHRpb25zQ2xhc3MiLCJnZXRPcHRpb25JbmRleCIsIiRwcmV2U2VsZWN0ZWRPcHRpb24iLCJiZWZvcmVTZWxlY3ROZXdWYWx1ZSIsImxhc3RTY3JvbGxUb3AiLCJmb2N1c2VkT3B0aW9uSW5kZXgiLCJpc0Nsb3NlZCIsImlzUmVzZXQiLCJyZXJlbmRlciIsImdldE9wdGlvbk9iaiIsInJlbW92ZU9wdGlvbiIsInNvcnQiLCJhIiwiYiIsImRlc3RydWN0dXJlT3B0aW9uR3JvdXAiLCJjaGlsZEFycmF5IiwiY29uY2F0IiwicmVzZXRGb3JtIiwib25SZXNpemVNZXRob2QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7NjlCQUFPLElBQU1BLEVBQWIseUIsNEZBQUEsUyxVQUFBLE8sRUFBQSxFLEVBQUEsZ0NBQ2tCQyxFQUFNQyxHQUNmRCxJQUlMQyxFQUFZQSxFQUFVQyxNQUFNLEtBRTVCQyxLQUFLQyxZQUFZSixHQUFNSyxTQUFRLFNBQUNDLEdBQVUsT0FDeEMsRUFBQUEsRUFBTUMsV0FBVUMsSUFBaEIsVUFBdUJQLFVBVDdCLGtDQWFxQkQsRUFBTUMsR0FDbEJELElBSUxDLEVBQVlBLEVBQVVDLE1BQU0sS0FFNUJDLEtBQUtDLFlBQVlKLEdBQU1LLFNBQVEsU0FBQ0MsR0FBVSxPQUN4QyxFQUFBQSxFQUFNQyxXQUFVRSxPQUFoQixVQUEwQlIsVUFyQmhDLGtDQXlCcUJELEVBQU1DLEVBQVdTLEdBU2xDLElBQUlDLEVBUkosR0FBS1gsRUFjTCxZQVZjWSxJQUFWRixJQUNGQSxFQUFRRyxRQUFRSCxJQUtsQlAsS0FBS0MsWUFBWUosR0FBTUssU0FBUSxTQUFDQyxHQUM5QkssRUFBVUwsRUFBTUMsVUFBVU8sT0FBT2IsRUFBV1MsTUFHdkNDLElBeENYLCtCQTJDa0JYLEVBQU1DLEdBQ3BCLFFBQUtELEdBSUVBLEVBQUtPLFVBQVVRLFNBQVNkLEtBaERuQyxrQ0FtRHFCRCxHQUNqQixRQUFLQSxHQUlFQSxFQUFLZ0IsWUFBY2hCLEVBQUtpQixjQXhEbkMsMENBMkQ2QmpCLEdBQ3pCLElBQUtBLEVBQ0gsTUFBTyxHQUdULElBQUlrQixFQUFNbEIs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LGNBQWdCQSxHIiwiZmlsZSI6InZpcnR1YWwtc2VsZWN0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEb21VdGlscyB7XHJcbiAgc3RhdGljIGFkZENsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIF90aGlzLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIF90aGlzLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSwgaXNBZGQpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQWRkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgaXNBZGQgPSBCb29sZWFuKGlzQWRkKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNBZGRlZDtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIGlzQWRkZWQgPSBfdGhpcy5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgaXNBZGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlzQWRkZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAkZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhc0VsbGlwc2lzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuc2Nyb2xsV2lkdGggPiAkZWxlLm9mZnNldFdpZHRoO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE1vcmVWaXNpYmxlU2lkZXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYm94ID0gJGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBhdmFpbGFibGVXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgbGV0IGF2YWlsYWJsZUhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIGxldCBsZWZ0QXJlYSA9IGJveC5sZWZ0O1xyXG4gICAgbGV0IHRvcEFyZWEgPSBib3gudG9wO1xyXG4gICAgbGV0IHJpZ2h0QXJlYSA9IGF2YWlsYWJsZVdpZHRoIC0gbGVmdEFyZWEgLSBib3gud2lkdGg7XHJcbiAgICBsZXQgYm90dG9tQXJlYSA9IGF2YWlsYWJsZUhlaWdodCAtIHRvcEFyZWEgLSBib3guaGVpZ2h0O1xyXG4gICAgbGV0IGhvcml6b250YWwgPSBsZWZ0QXJlYSA+IHJpZ2h0QXJlYSA/ICdsZWZ0JyA6ICdyaWdodCc7XHJcbiAgICBsZXQgdmVydGljYWwgPSB0b3BBcmVhID4gYm90dG9tQXJlYSA/ICd0b3AnIDogJ2JvdHRvbSc7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaG9yaXpvbnRhbCxcclxuICAgICAgdmVydGljYWwsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldERhdGEoJGVsZSwgbmFtZSwgdHlwZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmFsdWUgPSAkZWxlID8gJGVsZS5kYXRhc2V0W25hbWVdIDogJyc7XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXREYXRhKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuZGF0YXNldFtuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFN0eWxlKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRFbGVtZW50cygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGUgPSBbJGVsZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICAvKiogY29udmVydCBvYmplY3QgdG8gc3R5bGUgYXR0cmlidXRlICovXHJcbiAgc3RhdGljIGdldFN0eWxlVGV4dChwcm9wcywgc2tpcEF0dHJOYW1lKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gJyc7XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBwcm9wcykge1xyXG4gICAgICByZXN1bHQgKz0gYCR7a306ICR7cHJvcHNba119O2A7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdCAmJiAhc2tpcEF0dHJOYW1lKSB7XHJcbiAgICAgIHJlc3VsdCA9IGBzdHlsZT1cIiR7cmVzdWx0fVwiYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqIGNvbnZlcnQgb2JqZWN0IHRvIGRvbSBhdHRyaWJ1dGVzICovXHJcbiAgc3RhdGljIGdldEF0dHJpYnV0ZXNUZXh0KGRhdGEpIHtcclxuICAgIGxldCBodG1sID0gJyc7XHJcblxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGsgaW4gZGF0YSkge1xyXG4gICAgICBsZXQgdmFsdWUgPSBkYXRhW2tdO1xyXG5cclxuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBodG1sICs9IGAgJHtrfT1cIiR7dmFsdWV9XCIgYDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBodG1sO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXRpbHMge1xyXG4gIHN0YXRpYyBnZXRTdHJpbmcodGV4dCkge1xyXG4gICAgcmV0dXJuIHRleHQgfHwgdGV4dCA9PT0gMCA/IHRleHQudG9TdHJpbmcoKSA6ICcnO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUsIGRlZmF1bHRWYWx1ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzRW1wdHkodmFsdWUpIHtcclxuICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc05vdEVtcHR5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuaXNFbXB0eSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlSXRlbUZyb21BcnJheShhcnJheSwgdmFsdWUsIGNsb25lQXJyYXkpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheSkgfHwgIWFycmF5Lmxlbmd0aCB8fCAhdmFsdWUpIHtcclxuICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjbG9uZUFycmF5KSB7XHJcbiAgICAgIGFycmF5ID0gWy4uLmFycmF5XTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW5kZXggPSBhcnJheS5pbmRleE9mKHZhbHVlKTtcclxuXHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUFycmF5RW1wdHkoYXJyYXkpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheSkgfHwgIWFycmF5Lmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5LmZpbHRlcigoZCkgPT4gISFkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZW5lcmF0ZVVVSUQoKSB7XHJcbiAgICByZXR1cm4gKFsxZTddICsgLTFlMyArIC00ZTMgKyAtOGUzICsgLTFlMTEpLnJlcGxhY2UoL1swMThdL2csIChjKSA9PlxyXG4gICAgICAoXHJcbiAgICAgICAgYyBeXHJcbiAgICAgICAgKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMSkpWzBdICYgKDE1ID4+IChjIC8gNCkpKVxyXG4gICAgICApLnRvU3RyaW5nKDE2KVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgVXRpbHMsIERvbVV0aWxzIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5jb25zdCB2aXJ0dWFsU2VsZWN0VmVyc2lvbiA9ICd2MS4wLjYnO1xyXG5jb25zdCBkcm9wYm94Q2xvc2VCdXR0b25GdWxsSGVpZ2h0ID0gNDg7XHJcbmNvbnN0IHNlYXJjaEhlaWdodCA9IDQwO1xyXG5jb25zdCBub25lT3B0aW9uVmFsdWUgPSAneyN2aXJ0dWFsLXNlbGVjdC1ub25lLW9wdGlvbiN9JztcclxuXHJcbmNvbnN0IGtleURvd25NZXRob2RNYXBwaW5nID0ge1xyXG4gIDEzOiAnb25FbnRlclByZXNzJyxcclxuICAyNzogJ29uRXNjUHJlc3MnLFxyXG4gIDM4OiAnb25VcEFycm93UHJlc3MnLFxyXG4gIDQwOiAnb25Eb3duQXJyb3dQcmVzcycsXHJcbn07XHJcblxyXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIFZpcnR1YWxTZWxlY3QgKi9cclxuZXhwb3J0IGNsYXNzIFZpcnR1YWxTZWxlY3Qge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIFZpcnR1YWxTZWxlY3RcclxuICAgKiBAcHJvcGVydHkgeyhlbGVtZW50fHN0cmluZyl9IGVsZSAtIFBhcmVudCBlbGVtZW50IHRvIHJlbmRlciBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gb3B0aW9ucyAtIEFycmF5IG9mIG9iamVjdCB0byBzaG93IGFzIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLnZhbHVlIC0gVmFsdWUgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10ubGFiZWwgLSBEaXNwbGF5IHRleHQgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10uZGVzY3JpcHRpb24gLSBUZXh0IHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IG9wdGlvbnNbXS5hbGlhcyAtIEFsdGVybmF0aXZlIGxhYmVscyB0byB1c2Ugb24gc2VhcmNoLiBBcnJheSBvZiBzdHJpbmcgb3IgY29tbWEgc2VwYXJhdGVkIHN0cmluZy5cclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBvcHRpb25zW10ub3B0aW9ucyAtIExpc3Qgb2Ygb3B0aW9ucyBmb3Igb3B0aW9uIGdyb3VwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt2YWx1ZUtleT12YWx1ZV0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgdmFsdWUgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtsYWJlbEtleT1sYWJlbF0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgbGFiZWwgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkZXNjcmlwdGlvbktleT1kZXNjcmlwdGlvbl0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgZGVzY3JpcHRpb24gZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthbGlhc0tleT1hbGlhc10gLSBLZXkgbmFtZSB0byBnZXQgYWxpYXMgZnJvbSBvcHRpb25zIG9iamVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpcGxlPWZhbHNlXSAtIEVuYWJsZSBtdWx0aXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NlYXJjaD1mYWxzZV0gLSBFbmFibGUgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGlkZUNsZWFyQnV0dG9uPWZhbHNlXSAtIEhpZGUgY2xlYXIgYnV0dG9uXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b1NlbGVjdEZpcnN0T3B0aW9uPWZhbHNlXSAtIFNlbGVjdCBmaXJzdCBvcHRpb24gYnkgZGVmYXVsdCBvbiBsb2FkXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGFzT3B0aW9uRGVzY3JpcHRpb249ZmFsc2VdIC0gSGFzIGRlc2NyaXB0aW9uIHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVTZWxlY3RBbGw9ZmFsc2VdIC0gRGlzYWJsZSBzZWxlY3QgYWxsIGZlYXR1cmUgb2YgbXVsdGlwbGUgc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25zQ291bnQ9NXw0XSAtIE5vLm9mIG9wdGlvbnMgdG8gc2hvdyBvbiB2aWV3cG9ydFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb3B0aW9uSGVpZ2h0PTQwcHh8NjBweF0gLSBIZWlnaHQgb2YgZWFjaCBkcm9wZG93biBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3NpdGlvbj1hdXRvXSAtIFBvc2l0aW9uIG9mIGRyb3Bib3ggKHRvcCwgYm90dG9tLCBhdXRvKVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2Vob2xkZXI9U2VsZWN0XSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgc2VsZWN0ZWRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vT3B0aW9uc1RleHQ9Tm8gb3B0aW9ucyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyBvcHRpb25zIHRvIHNob3dcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vU2VhcmNoUmVzdWx0c1RleHQ9Tm8gcmVzdWx0cyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyByZXN1bHRzIG9uIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc2VsZWN0QWxsVGV4dD1TZWxlY3QgYWxsXSAtIFRleHQgdG8gc2hvdyBuZWFyIHNlbGVjdCBhbGwgY2hlY2tib3ggd2hlbiBzZWFyY2ggaXMgZGlzYWJsZWRcclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBbZGlzYWJsZWRPcHRpb25zXSAtIE9wdGlvbnMgdG8gZGlzYWJsZSAoYXJyYXkgb2YgdmFsdWVzKVxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IFtzZWxlY3RlZFZhbHVlXSAtIFNpbmdsZSB2YWx1ZSBvciBhcnJheSBvZiB2YWx1ZXMgdG8gc2VsZWN0IG9uIGluaXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaWxlbnRJbml0aWFsVmFsdWVTZXQ9ZmFsc2VdIC0gVG8gYXZvaWQgXCJjaGFuZ2UgZXZlbnRcIiB0cmlnZ2VyIG9uIHNldHRpbmcgaW5pdGlhbCB2YWx1ZVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZHJvcGJveFdpZHRoXSAtIEN1c3RvbSB3aWR0aCBmb3IgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4PTFdIC0gQ1NTIHotaW5kZXggdmFsdWUgZm9yIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW25vT2ZEaXNwbGF5VmFsdWVzPTUwXSAtIE1heGltdW0gbm8ub2YgdmFsdWVzIHRvIHNob3cgaW4gdGhlIHRvb2x0aXAgZm9yIG11bHRpLXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsbG93TmV3T3B0aW9uPWZhbHNlXSAtIEFsbG93IHRvIGFkZCBuZXcgb3B0aW9uIGJ5IHNlYXJjaGluZ1xyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21hcmtTZWFyY2hSZXN1bHRzPWZhbHNlXSAtIE1hcmsgbWF0Y2hlZCB0ZXJtIGluIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwRm9udFNpemU9MTRweF0gLSBGb250IHNpemUgZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBBbGlnbm1lbnQ9Y2VudGVyXSAtIENTUyBUZXh0IGFsaWdubWVudCBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcE1heFdpZHRoPTMwMHB4XSAtIENTUyBtYXggd2lkdGggZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3Q9ZmFsc2VdIC0gU2hvdyBzZWxlY3RlZCBvcHRpb25zIGF0IHRoZSB0b3Agb2YgdGhlIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25hbWVdIC0gTmFtZSBhdHRyaWJ1dGUgZm9yIGhpZGRlbiBpbnB1dFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tlZXBBbHdheXNPcGVuXSAtIEtlZXAgZHJvcGJveCBhbHdheXMgb3BlbiB3aXRoIGZpeGVkIGhlaWdodFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4VmFsdWVzPTBdIC0gTWF4aW11bSBuby5vZiBvcHRpb25zIGFsbG93ZWQgdG8gY2hvb3NlIGluIG11bHRpcGxlIHNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYWRkaXRpb25hbENsYXNzZXNdIC0gQWRkaXRpb25hbCBjbGFzc2VzIGZvciB3cmFwcGVyIGVsZW1lbnRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93RHJvcGJveEFzUG9wdXA9dHJ1ZV0gLSBTaG93IGRyb3Bib3ggYXMgcG9wdXAgb24gc21hbGwgc2NyZWVuIGxpa2UgbW9iaWxlXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3B1cERyb3Bib3hCcmVha3BvaW50PTU3NnB4XSAtIE1heGltdW0gc2NyZWVuIHdpZHRoIHRoYXQgYWxsb3dlZCB0byBzaG93IGRyb3Bib3ggYXMgcG9wdXBcclxuICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbb25TZXJ2ZXJTZWFyY2hdIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gaW50ZWdyYXRlIHNlcnZlciBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3NlYXJjaFBsYWNlaG9sZGVyPVNlYXJjaC4uLl0gLSBUZXh0IHRvIHNob3cgaW5zaWRlIHNlYXJjaCBpbnB1dFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsbG93Tm9uZU9wdGlvbj1mYWxzZV0gLSBJbiBzaW5nbGUgc2VsZWN0aW9uIG1vZGUgb25seSBhbmQgd2hlbiBrZWVwIGFsd2F5cyBvcGVuIGlzIG9uOiBkaXNwbGF5IGEgbm9uZSBvcHRpb24gdGhhdCBjbGVhcnMgdGhlIHNlbGVjdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9uZU9wdGlvblRleHQ9Tm9uZV0gLSBUZXh0IHRvIGJlIGRpc3BsYXkgaWYgYWxsb3dOb25lIG9wdGlvbiBpcyBhY3RpdmVcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthcHBlbmRUb0JvZHk9ZmFsc2VdIC0gV2hlbiBzZXQgdG8gdHJ1ZSBhbmQga2VlcEFsd2F5cyBvcGVuIGlzIG9mZiB3ZSBhcmUgYWRkaW5nIHRoZSBkcm9wYm94IGVsZW1lbnQgdG8gdGhlIGJvZHlcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnNldFByb3BzKG9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnNldERpc2FibGVkT3B0aW9ucyhvcHRpb25zLmRpc2FibGVkT3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zLm9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkbid0IGluaXRpYXRlIFZpcnR1YWwgU2VsZWN0YCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogcmVuZGVyIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHJlbmRlcigpIHtcclxuICAgIGlmICghdGhpcy4kZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd3JhcHBlckNsYXNzZXMgPSAndnNjb21wLXdyYXBwZXInO1xyXG4gICAgbGV0IHZhbHVlVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCcnLCAhdGhpcy5tdWx0aXBsZSwgdHJ1ZSk7XHJcbiAgICBsZXQgY2xlYXJCdXR0b25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJ0NsZWFyJyk7XHJcblxyXG4gICAgbGV0IGRyb3Bib3hDb250YWluZXJTdHlsZSA9IHtcclxuICAgICAgJ3otaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZ2V0V3JhcHBlckNsYXNzZXMgPSAoKSA9PiB7XHJcbiAgICAgIGxldCBjbGFzc2VzID0gJyc7XHJcblxyXG4gICAgICBpZiAodGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcykge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyAnICsgdGhpcy5hZGRpdGlvbmFsQ2xhc3NlcztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgbXVsdGlwbGUnO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1zZWxlY3QtYWxsJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBwb3NpdGlvbi10b3AnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuaGlkZUNsZWFyQnV0dG9uKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1jbGVhci1idXR0b24nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBrZWVwLWFsd2F5cy1vcGVuIG9wZW5lZCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGNsb3NlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIHNob3ctYXMtcG9wdXAnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICAgICAgZHJvcGJveENvbnRhaW5lclN0eWxlLndpZHRoID0gdGhpcy5kcm9wYm94V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5oYXNTZWFyY2gpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgaGFzLXNlYXJjaC1pbnB1dCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBjbGFzc2VzO1xyXG4gICAgfTtcclxuXHJcbiAgICB3cmFwcGVyQ2xhc3NlcyArPSBnZXRXcmFwcGVyQ2xhc3NlcygpO1xyXG5cclxuICAgIHRoaXMuZ3VpZCA9IFV0aWxzLmdlbmVyYXRlVVVJRCgpO1xyXG5cclxuICAgIGxldCBkcm9wYm94Q29udGFpbmVyID0gYDxkaXYgaWQ9XCJ2cy0ke1xyXG4gICAgICB0aGlzLmd1aWRcclxuICAgIH1cIiBjbGFzcz1cInZzY29tcC1kcm9wYm94LWNvbnRhaW5lclwiICR7RG9tVXRpbHMuZ2V0U3R5bGVUZXh0KFxyXG4gICAgICBkcm9wYm94Q29udGFpbmVyU3R5bGVcclxuICAgICl9PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWRyb3Bib3hcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXNlYXJjaC13cmFwcGVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1sb2FkZXJcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbGlzdFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnNcIj48L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLW9wdGlvbnNcIj4ke3RoaXMubm9PcHRpb25zVGV4dH08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLXNlYXJjaC1yZXN1bHRzXCI+JHt0aGlzLm5vU2VhcmNoUmVzdWx0c1RleHR9PC9kaXY+XHJcblxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uXCI+PGkgY2xhc3M9XCJ2c2NvbXAtY2xlYXItaWNvblwiPjwvaT48L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YDtcclxuXHJcbiAgICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwiJHt3cmFwcGVyQ2xhc3Nlc31cIiB0YWJpbmRleD1cIjBcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCIke3RoaXMubmFtZX1cIiBjbGFzcz1cInZzY29tcC1oaWRkZW4taW5wdXRcIj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC10b2dnbGUtYnV0dG9uXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXZhbHVlXCIgJHt2YWx1ZVRvb2x0aXB9PlxyXG4gICAgICAgICAgICAke3RoaXMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWFycm93XCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1jbGVhci1idXR0b24gdG9nZ2xlLWJ1dHRvbi1jaGlsZFwiICR7Y2xlYXJCdXR0b25Ub29sdGlwfT5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJ2c2NvbXAtY2xlYXItaWNvblwiPjwvaT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAke3RoaXMua2VlcEFsd2F5c09wZW4gfHwgIXRoaXMuYXBwZW5kVG9Cb2R5ID8gZHJvcGJveENvbnRhaW5lciA6ICcnfVxyXG5cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRlbGUuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcblxyXG4gICAgdGhpcy4kd3JhcHBlciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXdyYXBwZXInKTtcclxuICAgIHRoaXMuJHRvZ2dsZUJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXRvZ2dsZS1idXR0b24nKTtcclxuICAgIHRoaXMuJGNsZWFyQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtY2xlYXItYnV0dG9uJyk7XHJcbiAgICB0aGlzLiRkcm9wYm94Q2xvc2VCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtZHJvcGJveC1jbG9zZS1idXR0b24nXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghdGhpcy5rZWVwQWx3YXlzT3BlbiAmJiB0aGlzLmFwcGVuZFRvQm9keSkge1xyXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAvLyBBcHBlbmQgdG8gYm9keSAoYmV0YSlcclxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgIHRoaXMuJGJvZHkuYXBwZW5kKFxyXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGRyb3Bib3hDb250YWluZXIpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgI3ZzLSR7dGhpcy5ndWlkfS52c2NvbXAtZHJvcGJveC1jb250YWluZXJgXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjdnMtJHt0aGlzLmd1aWR9YCk7XHJcblxyXG4gICAgICBsZXQgY2xhc3NlcyA9ICd2c2NvbXAtd3JhcHBlci1ib2R5JztcclxuICAgICAgY2xhc3NlcyArPSBnZXRXcmFwcGVyQ2xhc3NlcygpO1xyXG5cclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kZHJvcGJveEVsLCBgJHtjbGFzc2VzfWApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICcudnNjb21wLWRyb3Bib3gtY29udGFpbmVyJ1xyXG4gICAgICApO1xyXG4gICAgICB0aGlzLiRkcm9wYm94RWwgPSB0aGlzLiRlbGU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kc2VhcmNoID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLXdyYXBwZXInKTtcclxuICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9ucy1jb250YWluZXInXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0ID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucy1saXN0Jyk7XHJcbiAgICB0aGlzLiRvcHRpb25zID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kdmFsdWVUZXh0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdmFsdWUnKTtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtaGlkZGVuLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRub09wdGlvbnMgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1uby1vcHRpb25zJyk7XHJcbiAgICB0aGlzLiRub1NlYXJjaFJlc3VsdHMgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtbm8tc2VhcmNoLXJlc3VsdHMnXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWZ0ZXJSZW5kZXJXcmFwcGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJPcHRpb25zKCkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBuZXdPcHRpb25JY29uSHRtbCA9ICcnO1xyXG4gICAgbGV0IG1hcmtTZWFyY2hSZXN1bHRzID1cclxuICAgICAgdGhpcy5tYXJrU2VhcmNoUmVzdWx0cyAmJiB0aGlzLnNlYXJjaFZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgbGV0IHNlYXJjaFJlZ2V4O1xyXG5cclxuICAgIGxldCBzdHlsZVRleHQgPSBEb21VdGlscy5nZXRTdHlsZVRleHQoe1xyXG4gICAgICBoZWlnaHQ6IHRoaXMub3B0aW9uSGVpZ2h0ICsgJ3B4JyxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cykge1xyXG4gICAgICBzZWFyY2hSZWdleCA9IG5ldyBSZWdFeHAoYCgke3RoaXMuc2VhcmNoVmFsdWV9KWAsICdnaScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIGNoZWNrYm94SHRtbCA9ICc8c3BhbiBjbGFzcz1cImNoZWNrYm94LWljb25cIj48L3NwYW4+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3T3B0aW9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdOZXcgT3B0aW9uJyk7XHJcbiAgICAgIG5ld09wdGlvbkljb25IdG1sID0gYDxzcGFuIGNsYXNzPVwidnNjb21wLW5ldy1vcHRpb24taWNvblwiICR7bmV3T3B0aW9uVG9vbHRpcH0+PC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgb3B0aW9uTGFiZWwgPSBkLmxhYmVsO1xyXG4gICAgICBsZXQgb3B0aW9uQ2xhc3NlcyA9ICd2c2NvbXAtb3B0aW9uJztcclxuICAgICAgbGV0IG9wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnJywgdHJ1ZSk7XHJcbiAgICAgIGxldCBsZWZ0U2VjdGlvbiA9IGNoZWNrYm94SHRtbDtcclxuICAgICAgbGV0IHJpZ2h0U2VjdGlvbiA9ICcnO1xyXG4gICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuXHJcbiAgICAgIGlmIChkLmlzRm9jdXNlZCkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBmb2N1c2VkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNEaXNhYmxlZCkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBkaXNhYmxlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBncm91cC10aXRsZSc7XHJcbiAgICAgICAgbGVmdFNlY3Rpb24gPSAnJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgc2VsZWN0ZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBncm91cC1vcHRpb24nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9uLWRlc2NyaXB0aW9uXCIgJHtvcHRpb25Ub29sdGlwfT4ke2QuZGVzY3JpcHRpb259PC9kaXY+YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGN1cnJlbnQtbmV3JztcclxuICAgICAgICByaWdodFNlY3Rpb24gKz0gbmV3T3B0aW9uSWNvbkh0bWw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG1hcmtTZWFyY2hSZXN1bHRzICYmICFkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgICAgb3B0aW9uTGFiZWwgPSBvcHRpb25MYWJlbC5yZXBsYWNlKHNlYXJjaFJlZ2V4LCAnPG1hcms+JDE8L21hcms+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwiJHtvcHRpb25DbGFzc2VzfVwiIGRhdGEtdmFsdWU9XCIke1xyXG4gICAgICAgIGQudmFsdWVcclxuICAgICAgfVwiIGRhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCIgZGF0YS12aXNpYmxlLWluZGV4PVwiJHtcclxuICAgICAgICBkLnZpc2libGVJbmRleFxyXG4gICAgICB9XCIgJHtzdHlsZVRleHR9PlxyXG4gICAgICAgICAgJHtsZWZ0U2VjdGlvbn1cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLW9wdGlvbi10ZXh0ICR7XHJcbiAgICAgICAgICAgIGQudmFsdWUgPT09IG5vbmVPcHRpb25WYWx1ZSA/ICdub25lJyA6ICcnXHJcbiAgICAgICAgICB9XCIgJHtvcHRpb25Ub29sdGlwfT5cclxuICAgICAgICAgICAgJHtvcHRpb25MYWJlbH1cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICR7ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAke3JpZ2h0U2VjdGlvbn1cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy4kb3B0aW9ucy5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgbGV0IGhhc05vT3B0aW9ucyA9ICF0aGlzLm9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IGhhc05vU2VhcmNoUmVzdWx0cyA9ICFoYXNOb09wdGlvbnMgJiYgIXZpc2libGVPcHRpb25zLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoIXRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJyxcclxuICAgICAgICBoYXNOb1NlYXJjaFJlc3VsdHNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSlcclxuICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICAgIHRoaXMuJGRyb3Bib3hFbCxcclxuICAgICAgICAgICdoYXMtbm8tc2VhcmNoLXJlc3VsdHMnLFxyXG4gICAgICAgICAgaGFzTm9TZWFyY2hSZXN1bHRzXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLW9wdGlvbnMnLCBoYXNOb09wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zUG9zaXRpb24oKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Rvb2x0aXAoKTtcclxuICAgIC8vdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VhcmNoKCkge1xyXG4gICAgaWYgKCF0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoZWNrYm94SHRtbCA9ICcnO1xyXG4gICAgbGV0IHNlYXJjaElucHV0ID0gJyc7XHJcblxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1idXR0b25cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvbiB2c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveFwiPjwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtbGFiZWxcIj4ke3RoaXMuc2VsZWN0QWxsVGV4dH08L3NwYW4+XHJcbiAgICAgICAgPC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgIHNlYXJjaElucHV0ID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidnNjb21wLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaFBsYWNlaG9sZGVyfVwiPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY29udGFpbmVyXCI+XHJcbiAgICAgICAgJHtjaGVja2JveEh0bWx9XHJcbiAgICAgICAgJHtzZWFyY2hJbnB1dH1cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRzZWFyY2guaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJHNlYXJjaElucHV0ID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRzZWFyY2hDbGVhciA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC1jbGVhcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWxsQnV0dG9uID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLXRvZ2dsZS1hbGwtYnV0dG9uJ1xyXG4gICAgKTtcclxuICAgIHRoaXMuJHRvZ2dsZUFsbENoZWNrYm94ID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLXRvZ2dsZS1hbGwtY2hlY2tib3gnXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kc2VhcmNoSW5wdXQsICdrZXl1cCBjaGFuZ2UnLCAnb25TZWFyY2gnKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kc2VhcmNoQ2xlYXIsICdjbGljaycsICdvblNlYXJjaENsZWFyJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHRvZ2dsZUFsbEJ1dHRvbiwgJ2NsaWNrJywgJ29uVG9nZ2xlQWxsT3B0aW9ucycpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHJlbmRlciBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBkb20gZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWRkRXZlbnRzKCkge1xyXG4gICAgdGhpcy5hZGRFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgJ29uRG9jdW1lbnRDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR3cmFwcGVyLCAna2V5ZG93bicsICdvbktleURvd24nKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRjbGVhckJ1dHRvbiwgJ2NsaWNrJywgJ29uQ2xlYXJCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRkcm9wYm94Q29udGFpbmVyLCAnY2xpY2snLCAnb25Ecm9wYm94Q29udGFpbmVyQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQoXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDbG9zZUJ1dHRvbixcclxuICAgICAgJ2NsaWNrJyxcclxuICAgICAgJ29uRHJvcGJveENsb3NlQnV0dG9uQ2xpY2snXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9uc0NvbnRhaW5lciwgJ3Njcm9sbCcsICdvbk9wdGlvbnNTY3JvbGwnKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnMsICdjbGljaycsICdvbk9wdGlvbnNDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAnbW91c2VvdmVyJywgJ29uT3B0aW9uc01vdXNlT3ZlcicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAndG91Y2htb3ZlJywgJ29uT3B0aW9uc1RvdWNoTW92ZScpO1xyXG4gIH1cclxuXHJcbiAgYWRkRXZlbnQoJGVsZSwgZXZlbnRzLCBtZXRob2QpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRzID0gVXRpbHMucmVtb3ZlQXJyYXlFbXB0eShldmVudHMuc3BsaXQoJyAnKSk7XHJcblxyXG4gICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBldmVudHNLZXkgPSBgJHttZXRob2R9LSR7ZXZlbnR9YDtcclxuICAgICAgbGV0IGNhbGxiYWNrID0gdGhpcy5ldmVudHNbZXZlbnRzS2V5XTtcclxuXHJcbiAgICAgIGlmICghY2FsbGJhY2spIHtcclxuICAgICAgICBjYWxsYmFjayA9IHRoaXNbbWV0aG9kXS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50c0tleV0gPSBjYWxsYmFjaztcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgICAgJGVsZS5mb3JFYWNoKChfdGhpcykgPT4ge1xyXG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc3BhdGNoRXZlbnQoJGVsZSwgZXZlbnROYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUgPSBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgJGVsZS5mb3JFYWNoKChfdGhpcykgPT4ge1xyXG4gICAgICAgIF90aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KGV2ZW50TmFtZSwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgfSk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIG9uRG9jdW1lbnRDbGljayhlKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuYXBwZW5kVG9Cb2R5ICYmXHJcbiAgICAgIHRoaXMubXVsdGlwbGUgJiZcclxuICAgICAgdGhpcy5pc09wZW5lZCgpICYmXHJcbiAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoYCN2cy0ke3RoaXMuZ3VpZH1gKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybjsgLy8gRG9uJ3QgY2xvc2UgZHJvcGJveCBpZiBhcHBlbmQgdG8gYm9keSwgbXVsdGlwbGUgYW5kIGNsaWNrIGluc2lkZSBkcm9wYm93XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0ICRlbGVUb0tlZXBPcGVuID0gZS50YXJnZXQuY2xvc2VzdCgnLnZzY29tcC13cmFwcGVyJyk7XHJcblxyXG4gICAgaWYgKCRlbGVUb0tlZXBPcGVuICE9PSB0aGlzLiR3cmFwcGVyKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbktleURvd24oZSkge1xyXG4gICAgbGV0IGtleSA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xyXG4gICAgbGV0IG1ldGhvZCA9IGtleURvd25NZXRob2RNYXBwaW5nW2tleV07XHJcblxyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICB0aGlzW21ldGhvZF0oZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkVudGVyUHJlc3MoKSB7XHJcbiAgICBpZiAoIXRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdEZvY3VzZWRPcHRpb24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRXNjUHJlc3MoKSB7XHJcbiAgICBpZiAodGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRvd25BcnJvd1ByZXNzKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNPcHRpb24oJ25leHQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVXBBcnJvd1ByZXNzKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNPcHRpb24oJ3ByZXZpb3VzJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblRvZ2dsZUJ1dHRvbkNsaWNrKGUpIHtcclxuICAgIGxldCBjaGlsZEVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtYnV0dG9uLWNoaWxkJyk7XHJcblxyXG4gICAgaWYgKGNoaWxkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZ2dsZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIG9uQ2xlYXJCdXR0b25DbGljaygpIHtcclxuICAgIHRoaXMucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc1Njcm9sbCgpIHtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc0NsaWNrKGUpIHtcclxuICAgIHRoaXMuc2VsZWN0T3B0aW9uKFxyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKTpub3QoLmdyb3VwLXRpdGxlKScpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb25Ecm9wYm94Q29udGFpbmVyQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLWRyb3Bib3gnKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ecm9wYm94Q2xvc2VCdXR0b25DbGljaygpIHtcclxuICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNNb3VzZU92ZXIoZSkge1xyXG4gICAgbGV0ICRlbGUgPSBlLnRhcmdldC5jbG9zZXN0KFxyXG4gICAgICAnLnZzY29tcC1vcHRpb246bm90KC5kaXNhYmxlZCk6bm90KC5ncm91cC10aXRsZSknXHJcbiAgICApO1xyXG5cclxuICAgIGlmICgkZWxlICYmIHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKG51bGwsICRlbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zVG91Y2hNb3ZlKCkge1xyXG4gICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgb25TZWFyY2goZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoZS50YXJnZXQudmFsdWUsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgb25TZWFyY2hDbGVhcigpIHtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgfVxyXG5cclxuICBvblRvZ2dsZUFsbE9wdGlvbnMoKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIG9uUmVzaXplKCkge1xyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHRoaXMuc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCh0cnVlKTtcclxuICB9XHJcbiAgLyoqIGRvbSBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBhZnRlciBldmVudCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBhZnRlclJlbmRlcldyYXBwZXIoKSB7XHJcbiAgICB0aGlzLiRlbGUuc2V0QXR0cmlidXRlKCduYW1lJywgdGhpcy5uYW1lKTtcclxuXHJcbiAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRlbGUsICd2c2NvbXAtZWxlJyk7XHJcbiAgICB0aGlzLnJlbmRlclNlYXJjaCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNDb250YWluZXJIZWlnaHQoKTtcclxuICAgIHRoaXMuYWRkRXZlbnRzKCk7XHJcbiAgICB0aGlzLnNldE1ldGhvZHMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKFxyXG4gICAgICAgIHRoaXMuaW5pdGlhbFNlbGVjdGVkVmFsdWUsXHJcbiAgICAgICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRvU2VsZWN0Rmlyc3RPcHRpb24gJiYgdGhpcy52aXNpYmxlT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChcclxuICAgICAgICB0aGlzLnZpc2libGVPcHRpb25zWzBdLnZhbHVlLFxyXG4gICAgICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpIHtcclxuICAgIGlmIChyZXNldCkge1xyXG4gICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKiogYWZ0ZXIgZXZlbnQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogc2V0IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHNldFByb3BzKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSB0aGlzLnNldERlZmF1bHRQcm9wcyhvcHRpb25zKTtcclxuICAgIHRoaXMuc2V0UHJvcHNGcm9tRWxlbWVudEF0dHIob3B0aW9ucyk7XHJcblxyXG4gICAgbGV0IGNvbnZlcnRUb0Jvb2xlYW4gPSBVdGlscy5jb252ZXJ0VG9Cb29sZWFuO1xyXG5cclxuICAgIHRoaXMuJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgdGhpcy52YWx1ZUtleSA9IG9wdGlvbnMudmFsdWVLZXk7XHJcbiAgICB0aGlzLmxhYmVsS2V5ID0gb3B0aW9ucy5sYWJlbEtleTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb25LZXkgPSBvcHRpb25zLmRlc2NyaXB0aW9uS2V5O1xyXG4gICAgdGhpcy5hbGlhc0tleSA9IG9wdGlvbnMuYWxpYXNLZXk7XHJcbiAgICB0aGlzLm9wdGlvbkhlaWdodFRleHQgPSBvcHRpb25zLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0ID0gcGFyc2VGbG9hdCh0aGlzLm9wdGlvbkhlaWdodFRleHQpO1xyXG4gICAgdGhpcy5tdWx0aXBsZSA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5tdWx0aXBsZSk7XHJcbiAgICB0aGlzLmhhc1NlYXJjaCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zZWFyY2gpO1xyXG4gICAgdGhpcy5oaWRlQ2xlYXJCdXR0b24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuaGlkZUNsZWFyQnV0dG9uKTtcclxuICAgIHRoaXMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5hdXRvU2VsZWN0Rmlyc3RPcHRpb25cclxuICAgICk7XHJcbiAgICB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKTtcclxuICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0ID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICk7XHJcbiAgICB0aGlzLmFsbG93TmV3T3B0aW9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmFsbG93TmV3T3B0aW9uKTtcclxuICAgIHRoaXMubWFya1NlYXJjaFJlc3VsdHMgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubWFya1NlYXJjaFJlc3VsdHMpO1xyXG4gICAgdGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdFxyXG4gICAgKTtcclxuICAgIHRoaXMuZGlzYWJsZVNlbGVjdEFsbCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5kaXNhYmxlU2VsZWN0QWxsKTtcclxuICAgIHRoaXMua2VlcEFsd2F5c09wZW4gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMua2VlcEFsd2F5c09wZW4pO1xyXG4gICAgdGhpcy5zaG93RHJvcGJveEFzUG9wdXAgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2hvd0Ryb3Bib3hBc1BvcHVwKTtcclxuICAgIHRoaXMubm9PcHRpb25zVGV4dCA9IG9wdGlvbnMubm9PcHRpb25zVGV4dDtcclxuICAgIHRoaXMubm9TZWFyY2hSZXN1bHRzVGV4dCA9IG9wdGlvbnMubm9TZWFyY2hSZXN1bHRzVGV4dDtcclxuICAgIHRoaXMuc2VsZWN0QWxsVGV4dCA9IG9wdGlvbnMuc2VsZWN0QWxsVGV4dDtcclxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSBvcHRpb25zLnBsYWNlaG9sZGVyO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb247XHJcbiAgICB0aGlzLmRyb3Bib3hXaWR0aCA9IG9wdGlvbnMuZHJvcGJveFdpZHRoO1xyXG4gICAgdGhpcy50b29sdGlwRm9udFNpemUgPSBvcHRpb25zLnRvb2x0aXBGb250U2l6ZTtcclxuICAgIHRoaXMudG9vbHRpcEFsaWdubWVudCA9IG9wdGlvbnMudG9vbHRpcEFsaWdubWVudDtcclxuICAgIHRoaXMudG9vbHRpcE1heFdpZHRoID0gb3B0aW9ucy50b29sdGlwTWF4V2lkdGg7XHJcbiAgICB0aGlzLm5vT2ZEaXNwbGF5VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5ub09mRGlzcGxheVZhbHVlcyk7XHJcbiAgICB0aGlzLnpJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMuekluZGV4KTtcclxuICAgIHRoaXMubWF4VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5tYXhWYWx1ZXMpO1xyXG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xyXG4gICAgdGhpcy5hZGRpdGlvbmFsQ2xhc3NlcyA9IG9wdGlvbnMuYWRkaXRpb25hbENsYXNzZXM7XHJcbiAgICB0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlID0gb3B0aW9ucy5zZWxlY3RlZFZhbHVlO1xyXG4gICAgdGhpcy5wb3B1cERyb3Bib3hCcmVha3BvaW50ID0gb3B0aW9ucy5wb3B1cERyb3Bib3hCcmVha3BvaW50O1xyXG4gICAgdGhpcy5vblNlcnZlclNlYXJjaCA9IG9wdGlvbnMub25TZXJ2ZXJTZWFyY2g7XHJcbiAgICB0aGlzLnNlYXJjaFBsYWNlaG9sZGVyID0gb3B0aW9ucy5zZWFyY2hQbGFjZWhvbGRlcjtcclxuICAgIHRoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2UgPSBvcHRpb25zLml0ZW1zU2VsZWN0ZWRNZXNzYWdlO1xyXG4gICAgdGhpcy5hbGxvd05vbmVPcHRpb24gPSBvcHRpb25zLmFsbG93Tm9uZU9wdGlvbjtcclxuICAgIHRoaXMubm9uZU9wdGlvblRleHQgPSBvcHRpb25zLm5vbmVPcHRpb25UZXh0O1xyXG4gICAgdGhpcy5hcHBlbmRUb0JvZHkgPSBvcHRpb25zLmFwcGVuZFRvQm9keTtcclxuXHJcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkSW5kZXhlcyA9IFtdO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB0aGlzLnRvb2x0aXBFbnRlckRlbGF5ID0gMjAwO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uRHVyYXRpb24gPSAyNTA7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gJyc7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSAnJztcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgKG9wdGlvbnMuc2VhcmNoID09PSB1bmRlZmluZWQgJiYgdGhpcy5tdWx0aXBsZSkgfHxcclxuICAgICAgdGhpcy5hbGxvd05ld09wdGlvblxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuaGFzU2VhcmNoID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tYXhWYWx1ZXMpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU2VsZWN0QWxsID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhhc1NlcnZlclNlYXJjaCA9IHR5cGVvZiB0aGlzLm9uU2VydmVyU2VhcmNoID09PSAnZnVuY3Rpb24nO1xyXG4gICAgdGhpcy5zaG93QXNQb3B1cCA9XHJcbiAgICAgIHRoaXMuc2hvd0Ryb3Bib3hBc1BvcHVwICYmXHJcbiAgICAgICF0aGlzLmtlZXBBbHdheXNPcGVuICYmXHJcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIDw9IHBhcnNlRmxvYXQodGhpcy5wb3B1cERyb3Bib3hCcmVha3BvaW50KTtcclxuICAgIHRoaXMuaGFzU2VhcmNoQ29udGFpbmVyID1cclxuICAgICAgdGhpcy5oYXNTZWFyY2ggfHwgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCk7XHJcbiAgICB0aGlzLm9wdGlvbnNDb3VudCA9IHRoaXMuZ2V0T3B0aW9uc0NvdW50KG9wdGlvbnMub3B0aW9uc0NvdW50KTtcclxuICAgIHRoaXMuaGFsZk9wdGlvbnNDb3VudCA9IE1hdGguY2VpbCh0aGlzLm9wdGlvbnNDb3VudCAvIDIpO1xyXG4gICAgdGhpcy5vcHRpb25zSGVpZ2h0ID0gdGhpcy5nZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgfVxyXG5cclxuICBzZXREZWZhdWx0UHJvcHMob3B0aW9ucykge1xyXG4gICAgbGV0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICB2YWx1ZUtleTogJ3ZhbHVlJyxcclxuICAgICAgbGFiZWxLZXk6ICdsYWJlbCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uS2V5OiAnZGVzY3JpcHRpb24nLFxyXG4gICAgICBhbGlhc0tleTogJ2FsaWFzJyxcclxuICAgICAgb3B0aW9uc0NvdW50OiA1LFxyXG4gICAgICBub09mRGlzcGxheVZhbHVlczogNTAsXHJcbiAgICAgIG9wdGlvbkhlaWdodDogJzQwcHgnLFxyXG4gICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgIGhpZGVDbGVhckJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIGF1dG9TZWxlY3RGaXJzdE9wdGlvbjogZmFsc2UsXHJcbiAgICAgIGhhc09wdGlvbkRlc2NyaXB0aW9uOiBmYWxzZSxcclxuICAgICAgc2lsZW50SW5pdGlhbFZhbHVlU2V0OiBmYWxzZSxcclxuICAgICAgZGlzYWJsZVNlbGVjdEFsbDogZmFsc2UsXHJcbiAgICAgIG5vT3B0aW9uc1RleHQ6ICdObyBvcHRpb25zIGZvdW5kJyxcclxuICAgICAgbm9TZWFyY2hSZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgZm91bmQnLFxyXG4gICAgICBzZWxlY3RBbGxUZXh0OiAnU2VsZWN0IEFsbCcsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAnU2VsZWN0JyxcclxuICAgICAgcG9zaXRpb246ICdhdXRvJyxcclxuICAgICAgekluZGV4OiAxLFxyXG4gICAgICBhbGxvd05ld09wdGlvbjogZmFsc2UsXHJcbiAgICAgIG1hcmtTZWFyY2hSZXN1bHRzOiBmYWxzZSxcclxuICAgICAgdG9vbHRpcEZvbnRTaXplOiAnMTRweCcsXHJcbiAgICAgIHRvb2x0aXBBbGlnbm1lbnQ6ICdjZW50ZXInLFxyXG4gICAgICB0b29sdGlwTWF4V2lkdGg6ICczMDBweCcsXHJcbiAgICAgIHNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdDogZmFsc2UsXHJcbiAgICAgIG5hbWU6ICcnLFxyXG4gICAgICBhZGRpdGlvbmFsQ2xhc3NlczogJycsXHJcbiAgICAgIGtlZXBBbHdheXNPcGVuOiBmYWxzZSxcclxuICAgICAgbWF4VmFsdWVzOiAwLFxyXG4gICAgICBzaG93RHJvcGJveEFzUG9wdXA6IHRydWUsXHJcbiAgICAgIHBvcHVwRHJvcGJveEJyZWFrcG9pbnQ6ICc1NzZweCcsXHJcbiAgICAgIHNlYXJjaFBsYWNlaG9sZGVyOiAnU2VhcmNoLi4uJyxcclxuICAgICAgaXRlbXNTZWxlY3RlZE1lc3NhZ2U6ICdzZWxlY3RlZCcsXHJcbiAgICAgIGFsbG93Tm9uZU9wdGlvbjogZmFsc2UsXHJcbiAgICAgIG5vbmVPcHRpb25UZXh0OiAnTm9uZScsXHJcbiAgICAgIGFwcGVuZFRvQm9keTogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbnNDb3VudCA9IDQ7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbkhlaWdodCA9ICc2MHB4JztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgbGV0IG1hcHBpbmcgPSB7XHJcbiAgICAgIG11bHRpcGxlOiAnbXVsdGlwbGUnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ3BsYWNlaG9sZGVyJyxcclxuICAgICAgbmFtZTogJ25hbWUnLFxyXG4gICAgICAnZGF0YS12YWx1ZS1rZXknOiAndmFsdWVLZXknLFxyXG4gICAgICAnZGF0YS1sYWJlbC1rZXknOiAnbGFiZWxLZXknLFxyXG4gICAgICAnZGF0YS1kZXNjcmlwdGlvbi1rZXknOiAnZGVzY3JpcHRpb25LZXknLFxyXG4gICAgICAnZGF0YS1hbGlhcy1rZXknOiAnYWxpYXNLZXknLFxyXG4gICAgICAnZGF0YS1zZWFyY2gnOiAnc2VhcmNoJyxcclxuICAgICAgJ2RhdGEtaGlkZS1jbGVhci1idXR0b24nOiAnaGlkZUNsZWFyQnV0dG9uJyxcclxuICAgICAgJ2RhdGEtYXV0by1zZWxlY3QtZmlyc3Qtb3B0aW9uJzogJ2F1dG9TZWxlY3RGaXJzdE9wdGlvbicsXHJcbiAgICAgICdkYXRhLWhhcy1vcHRpb24tZGVzY3JpcHRpb24nOiAnaGFzT3B0aW9uRGVzY3JpcHRpb24nLFxyXG4gICAgICAnZGF0YS1vcHRpb25zLWNvdW50JzogJ29wdGlvbnNDb3VudCcsXHJcbiAgICAgICdkYXRhLW9wdGlvbi1oZWlnaHQnOiAnb3B0aW9uSGVpZ2h0JyxcclxuICAgICAgJ2RhdGEtcG9zaXRpb24nOiAncG9zaXRpb24nLFxyXG4gICAgICAnZGF0YS1uby1vcHRpb25zLXRleHQnOiAnbm9PcHRpb25zVGV4dCcsXHJcbiAgICAgICdkYXRhLW5vLXNlYXJjaC1yZXN1bHRzLXRleHQnOiAnbm9TZWFyY2hSZXN1bHRzVGV4dCcsXHJcbiAgICAgICdkYXRhLXNlbGVjdC1hbGwtdGV4dCc6ICdzZWxlY3RBbGxUZXh0JyxcclxuICAgICAgJ2RhdGEtc2lsZW50LWluaXRpYWwtdmFsdWUtc2V0JzogJ3NpbGVudEluaXRpYWxWYWx1ZVNldCcsXHJcbiAgICAgICdkYXRhLWRyb3Bib3gtd2lkdGgnOiAnZHJvcGJveFdpZHRoJyxcclxuICAgICAgJ2RhdGEtei1pbmRleCc6ICd6SW5kZXgnLFxyXG4gICAgICAnZGF0YS1uby1vZi1kaXNwbGF5LXZhbHVlcyc6ICdub09mRGlzcGxheVZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFsbG93LW5ldy1vcHRpb24nOiAnYWxsb3dOZXdPcHRpb24nLFxyXG4gICAgICAnZGF0YS1tYXJrLXNlYXJjaC1yZXN1bHRzJzogJ21hcmtTZWFyY2hSZXN1bHRzJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1mb250LXNpemUnOiAndG9vbHRpcEZvbnRTaXplJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGlnbm1lbnQnOiAndG9vbHRpcEFsaWdubWVudCcsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtbWF4LXdpZHRoJzogJ3Rvb2x0aXBNYXhXaWR0aCcsXHJcbiAgICAgICdkYXRhLXNob3ctc2VsZWN0ZWQtb3B0aW9ucy1maXJzdCc6ICdzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QnLFxyXG4gICAgICAnZGF0YS1kaXNhYmxlLXNlbGVjdC1hbGwnOiAnZGlzYWJsZVNlbGVjdEFsbCcsXHJcbiAgICAgICdkYXRhLWtlZXAtYWx3YXlzLW9wZW4nOiAna2VlcEFsd2F5c09wZW4nLFxyXG4gICAgICAnZGF0YS1tYXgtdmFsdWVzJzogJ21heFZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFkZGl0aW9uYWwtY2xhc3Nlcyc6ICdhZGRpdGlvbmFsQ2xhc3NlcycsXHJcbiAgICAgICdkYXRhLXNob3ctZHJvcGJveC1hcy1wb3B1cCc6ICdzaG93RHJvcGJveEFzUG9wdXAnLFxyXG4gICAgICAnZGF0YS1wb3B1cC1kcm9wYm94LWJyZWFrcG9pbnQnOiAncG9wdXBEcm9wYm94QnJlYWtwb2ludCcsXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGsgaW4gbWFwcGluZykge1xyXG4gICAgICBsZXQgdmFsdWUgPSAkZWxlLmdldEF0dHJpYnV0ZShrKTtcclxuXHJcbiAgICAgIGlmIChrID09PSAnbXVsdGlwbGUnICYmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09ICd0cnVlJykpIHtcclxuICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIG9wdGlvbnNbbWFwcGluZ1trXV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TWV0aG9kcygpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kZWxlO1xyXG4gICAgJGVsZS52aXJ0dWFsU2VsZWN0ID0gdGhpcztcclxuICAgICRlbGUudmFsdWUgPSB0aGlzLm11bHRpcGxlID8gW10gOiAnJztcclxuICAgICRlbGUucmVzZXQgPSBWaXJ0dWFsU2VsZWN0LnJlc2V0O1xyXG4gICAgJGVsZS5zZXRWYWx1ZSA9IFZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLnNldE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldE9wdGlvbnNNZXRob2Q7XHJcbiAgICAkZWxlLnNldERpc2FibGVkT3B0aW9ucyA9IFZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS50b2dnbGVTZWxlY3RBbGwgPSBWaXJ0dWFsU2VsZWN0LnRvZ2dsZVNlbGVjdEFsbDtcclxuICAgICRlbGUuaXNBbGxTZWxlY3RlZCA9IFZpcnR1YWxTZWxlY3QuaXNBbGxTZWxlY3RlZDtcclxuICAgICRlbGUuYWRkT3B0aW9uID0gVmlydHVhbFNlbGVjdC5hZGRPcHRpb25NZXRob2Q7XHJcbiAgICAkZWxlLmdldE5ld1ZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUuZ2V0RGlzcGxheVZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLm9wZW4gPSBWaXJ0dWFsU2VsZWN0Lm9wZW5NZXRob2Q7XHJcbiAgICAkZWxlLmNsb3NlID0gVmlydHVhbFNlbGVjdC5jbG9zZU1ldGhvZDtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdmFsdWUgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlID0gdmFsdWUubWFwKCh2KSA9PiB7XHJcbiAgICAgIHJldHVybiB2IHx8IHYgPT0gMCA/IHYudG9TdHJpbmcoKSA6ICcnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHZhbGlkVmFsdWVzID0gW107XHJcbiAgICBsZXQgdmFsaWRJbmRleGVzID0gW107XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQsIGlkeCkgPT4ge1xyXG4gICAgICBsZXQgaXNTZWxlY3RlZCA9IHZhbHVlLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZhbGlkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgICAgdmFsaWRJbmRleGVzLnB1c2goaWR4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHZhbGlkVmFsdWVzID0gdmFsaWRWYWx1ZXNbMF07XHJcbiAgICAgIHZhbGlkSW5kZXhlcyA9IHZhbGlkSW5kZXhlc1swXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJlZm9yZVZhbHVlU2V0KCk7XHJcbiAgICB0aGlzLnNldFZhbHVlKHZhbGlkVmFsdWVzLCB2YWxpZEluZGV4ZXMsICFzaWxlbnRDaGFuZ2UpO1xyXG4gICAgdGhpcy5hZnRlclZhbHVlU2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIGtlZXBWYWx1ZSkge1xyXG4gICAgbGV0IG5ld29wdGlvbiA9IG9wdGlvbnMgIT0gdGhpcy5vcHRpb25zO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgdGhpcy5hZnRlclNldE9wdGlvbnMoa2VlcFZhbHVlLCBuZXdvcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKGRpc2FibGVkT3B0aW9ucykge1xyXG4gICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMoZGlzYWJsZWRPcHRpb25zLCB0cnVlKTtcclxuICAgIHRoaXMuc2V0VmFsdWVNZXRob2QobnVsbCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZE9wdGlvbnMoZGlzYWJsZWRPcHRpb25zID0gW10sIHNldE9wdGlvbnNQcm9wID0gZmFsc2UpIHtcclxuICAgIGRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucy5tYXAoKGQpID0+IGQudG9TdHJpbmcoKSk7XHJcbiAgICB0aGlzLmRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucztcclxuXHJcbiAgICBpZiAoc2V0T3B0aW9uc1Byb3AgJiYgZGlzYWJsZWRPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICAgIGQuaXNEaXNhYmxlZCA9IGRpc2FibGVkT3B0aW9ucy5pbmRleE9mKGQudmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgb3B0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcmVwYXJlZE9wdGlvbnMgPSBbXTtcclxuICAgIGxldCBkaXNhYmxlZE9wdGlvbnMgPSB0aGlzLmRpc2FibGVkT3B0aW9ucztcclxuICAgIGxldCBoYXNEaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IHZhbHVlS2V5ID0gdGhpcy52YWx1ZUtleTtcclxuICAgIGxldCBsYWJlbEtleSA9IHRoaXMubGFiZWxLZXk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb25LZXkgPSB0aGlzLmRlc2NyaXB0aW9uS2V5O1xyXG4gICAgbGV0IGFsaWFzS2V5ID0gdGhpcy5hbGlhc0tleTtcclxuICAgIGxldCBoYXNPcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb247XHJcbiAgICBsZXQgZ2V0U3RyaW5nID0gVXRpbHMuZ2V0U3RyaW5nO1xyXG4gICAgbGV0IGdldEFsaWFzID0gdGhpcy5nZXRBbGlhcztcclxuICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICBsZXQgaGFzT3B0aW9uR3JvdXAgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgcHJlcGFyZU9wdGlvbiA9IChkKSA9PiB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IGdldFN0cmluZyhkW3ZhbHVlS2V5XSk7XHJcbiAgICAgIGxldCBjaGlsZE9wdGlvbnMgPSBkLm9wdGlvbnM7XHJcbiAgICAgIGxldCBpc0dyb3VwVGl0bGUgPSBjaGlsZE9wdGlvbnMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIGxldCBvcHRpb24gPSB7XHJcbiAgICAgICAgaW5kZXgsXHJcbiAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgbGFiZWw6IGdldFN0cmluZyhkW2xhYmVsS2V5XSksXHJcbiAgICAgICAgYWxpYXM6IGdldEFsaWFzKGRbYWxpYXNLZXldKSxcclxuICAgICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgaXNHcm91cFRpdGxlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKGhhc0Rpc2FibGVkT3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbi5pc0Rpc2FibGVkID0gZGlzYWJsZWRPcHRpb25zLmluZGV4T2YodmFsdWUpICE9PSAtMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIG9wdGlvbi5pc0dyb3VwT3B0aW9uID0gdHJ1ZTtcclxuICAgICAgICBvcHRpb24uZ3JvdXBJbmRleCA9IGQuZ3JvdXBJbmRleDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uLmRlc2NyaXB0aW9uID0gZ2V0U3RyaW5nKGRbZGVzY3JpcHRpb25LZXldKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHJlcGFyZWRPcHRpb25zLnB1c2gob3B0aW9uKTtcclxuICAgICAgaW5kZXgrKztcclxuXHJcbiAgICAgIGlmIChpc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBsZXQgZ3JvdXBJbmRleCA9IG9wdGlvbi5pbmRleDtcclxuICAgICAgICBoYXNPcHRpb25Hcm91cCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNoaWxkT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgICAgICBkLmlzR3JvdXBPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgZC5ncm91cEluZGV4ID0gZ3JvdXBJbmRleDtcclxuXHJcbiAgICAgICAgICBwcmVwYXJlT3B0aW9uKGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEFkZCBub25lIG9wdGlvbiBvbmx5IHdoZW4gaW4gbGlzdCBtb2RlIChhbHdheXMgb3BlbiBhbmQgb25seSlcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSAmJiB0aGlzLmFsbG93Tm9uZU9wdGlvbikge1xyXG4gICAgICBvcHRpb25zLnVuc2hpZnQoe1xyXG4gICAgICAgIHZhbHVlOiBub25lT3B0aW9uVmFsdWUsXHJcbiAgICAgICAgbGFiZWw6IHRoaXMubm9uZU9wdGlvblRleHQsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaChwcmVwYXJlT3B0aW9uKTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMgPSBwcmVwYXJlZE9wdGlvbnM7XHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgPSBwcmVwYXJlZE9wdGlvbnMubGVuZ3RoO1xyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXggPSB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMTtcclxuICAgIHRoaXMubmV3VmFsdWVzID0gW107XHJcbiAgICB0aGlzLmhhc09wdGlvbkdyb3VwID0gaGFzT3B0aW9uR3JvdXA7XHJcbiAgICB0aGlzLnNldFNvcnRlZE9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldFNlcnZlck9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgdGhpcy5zZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIHRydWUpO1xyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3NlcnZlci1zZWFyY2hpbmcnKTtcclxuICB9XHJcblxyXG4gIHNldFNvcnRlZE9wdGlvbnMoKSB7XHJcbiAgICBsZXQgc29ydGVkT3B0aW9ucyA9IFsuLi50aGlzLm9wdGlvbnNdO1xyXG5cclxuICAgIGlmICh0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCAmJiB0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICAgIHNvcnRlZE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zR3JvdXAoc29ydGVkT3B0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc29ydGVkT3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnMoc29ydGVkT3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNvcnRlZE9wdGlvbnMgPSBzb3J0ZWRPcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgc2V0VmlzaWJsZU9wdGlvbnMoKSB7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSBbLi4udGhpcy5zb3J0ZWRPcHRpb25zXTtcclxuICAgIGxldCBtYXhPcHRpb25zVG9TaG93ID0gdGhpcy5vcHRpb25zQ291bnQgKiAyO1xyXG4gICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmdldFZpc2libGVTdGFydEluZGV4KCk7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuICAgIGxldCBlbmRJbmRleCA9IHN0YXJ0SW5kZXggKyBtYXhPcHRpb25zVG9TaG93IC0gMTtcclxuICAgIGxldCBpID0gMDtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIG5ld09wdGlvbi52aXNpYmxlSW5kZXggPSBpO1xyXG4gICAgICBpKys7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMgPSB2aXNpYmxlT3B0aW9ucy5maWx0ZXIoKGQpID0+IHtcclxuICAgICAgbGV0IGluVmlldyA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKGQuaXNWaXNpYmxlICYmICFkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIGluVmlldyA9IGkgPj0gc3RhcnRJbmRleCAmJiBpIDw9IGVuZEluZGV4O1xyXG4gICAgICAgIGQudmlzaWJsZUluZGV4ID0gaTtcclxuICAgICAgICBpKys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBpblZpZXc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIHZpc2libGVPcHRpb25zID0gW25ld09wdGlvbiwgLi4udmlzaWJsZU9wdGlvbnNdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnMgPSB2aXNpYmxlT3B0aW9ucztcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc1Bvc2l0aW9uKHN0YXJ0SW5kZXgpIHtcclxuICAgIGlmIChzdGFydEluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgc3RhcnRJbmRleCA9IHRoaXMuZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdG9wID0gc3RhcnRJbmRleCAqIHRoaXMub3B0aW9uSGVpZ2h0O1xyXG4gICAgdGhpcy4kb3B0aW9ucy5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwgJHt0b3B9cHgsIDApYDtcclxuICAgIERvbVV0aWxzLnNldERhdGEodGhpcy4kb3B0aW9ucywgJ3RvcCcsIHRvcCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zVG9vbHRpcCgpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBoYXNPcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb247XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgJG9wdGlvbkVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLnZzY29tcC1vcHRpb25bZGF0YS1pbmRleD1cIiR7ZC5pbmRleH1cIl1gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBEb21VdGlscy5zZXREYXRhKFxyXG4gICAgICAgICRvcHRpb25FbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24tdGV4dCcpLFxyXG4gICAgICAgICd0b29sdGlwJyxcclxuICAgICAgICBkLmxhYmVsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICBEb21VdGlscy5zZXREYXRhKFxyXG4gICAgICAgICAgJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvbicpLFxyXG4gICAgICAgICAgJ3Rvb2x0aXAnLFxyXG4gICAgICAgICAgZC5kZXNjcmlwdGlvblxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWUodmFsdWUsIGluZGV4LCB0cmlnZ2VyRXZlbnQpIHtcclxuICAgIC8vIFZhbHVlXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFsuLi52YWx1ZV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW3ZhbHVlXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3VmFsdWUgPSB0aGlzLm11bHRpcGxlXHJcbiAgICAgID8gdGhpcy5zZWxlY3RlZFZhbHVlc1xyXG4gICAgICA6IHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF0gfHwgJyc7XHJcblxyXG4gICAgdGhpcy4kZWxlLnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dC52YWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuICAgIC8vIEluZGV4XHJcbiAgICBpZiAoIWluZGV4KSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5kZXgpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gWy4uLmluZGV4XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3SW5kZXggPSB0aGlzLm11bHRpcGxlXHJcbiAgICAgID8gdGhpcy5zZWxlY3RlZEluZGV4ZXNcclxuICAgICAgOiB0aGlzLnNlbGVjdGVkSW5kZXhlc1swXSB8fCAnJztcclxuXHJcbiAgICB0aGlzLiRlbGUuaW5kZXggPSBuZXdJbmRleDtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0LmluZGV4ID0gbmV3SW5kZXg7XHJcblxyXG4gICAgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkID1cclxuICAgICAgdGhpcy5tYXhWYWx1ZXMgJiYgdGhpcy5tYXhWYWx1ZXMgPD0gdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGhcclxuICAgICAgICA/IHRydWVcclxuICAgICAgICA6IGZhbHNlO1xyXG4gICAgdGhpcy5zZXRWYWx1ZVRleHQoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZFZhbHVlcyAmJiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpIHtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy12YWx1ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLXZhbHVlJyxcclxuICAgICAgICBVdGlscy5pc05vdEVtcHR5KHRoaXMuc2VsZWN0ZWRWYWx1ZXMpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICdtYXgtdmFsdWUtc2VsZWN0ZWQnLFxyXG4gICAgICB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWRcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRyaWdnZXJFdmVudCkge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2hhbmdlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZVRleHQoKSB7XHJcbiAgICBsZXQgdmFsdWVUZXh0ID0gW107XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkTGVuZ3RoID0gc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoO1xyXG4gICAgbGV0IG5vT2ZEaXNwbGF5VmFsdWVzID0gdGhpcy5ub09mRGlzcGxheVZhbHVlcztcclxuICAgIGxldCBtYXhpbXVtVmFsdWVzVG9TaG93ID0gNTA7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXNDb3VudCA9IDA7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAvL3RoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgQWxsICgke3NlbGVjdGVkTGVuZ3RofSlgO1xyXG4gICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7c2VsZWN0ZWRMZW5ndGh9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPiBtYXhpbXVtVmFsdWVzVG9TaG93KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZSA9IGQudmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICAgIGxldCBsYWJlbCA9IGQubGFiZWw7XHJcbiAgICAgICAgICB2YWx1ZVRleHQucHVzaChsYWJlbCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50Kys7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPD0gbm9PZkRpc3BsYXlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZ1wiPiR7bGFiZWx9PC9zcGFuPmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1vcmVTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZExlbmd0aCAtIG5vT2ZEaXNwbGF5VmFsdWVzO1xyXG5cclxuICAgICAgaWYgKG1vcmVTZWxlY3RlZE9wdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goXHJcbiAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdmFsdWUtdGFnIG1vcmUtdmFsdWUtY291bnRcIj4rICR7bW9yZVNlbGVjdGVkT3B0aW9uc30gbW9yZS4uLjwvc3Bhbj5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYWdncmVnYXRlZFZhbHVlVGV4dCA9IHZhbHVlVGV4dC5qb2luKCcsICcpO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPT09ICcnIHx8XHJcbiAgICAgICAgKHNlbGVjdGVkVmFsdWVzICYmIHNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBhZ2dyZWdhdGVkVmFsdWVUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgbGV0IG1heFZhbHVlcyA9IHRoaXMubWF4VmFsdWVzO1xyXG5cclxuICAgICAgICAgIGlmIChEb21VdGlscy5oYXNFbGxpcHNpcyh0aGlzLiR2YWx1ZVRleHQpIHx8IG1heFZhbHVlcykge1xyXG4gICAgICAgICAgICBsZXQgY291bnRUZXh0ID0gYCR7c2VsZWN0ZWRMZW5ndGh9YDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICBjb3VudFRleHQgKz0gYCAvICR7bWF4VmFsdWVzfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKiByZXBsYWNlIGNvbW1hIGRlbGltaXR0ZWQgbGlzdCBvZiBzZWxlY3Rpb25zIHdpdGggc2hvcnRlciB0ZXh0IGluZGljYXRpbmcgc2VsZWN0aW9uIGNvdW50ICovXHJcbiAgICAgICAgICAgIC8vIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9IG9wdGlvbiR7XHJcbiAgICAgICAgICAgIC8vICAgc2VsZWN0ZWRMZW5ndGggPT09IDEgPyAnJyA6ICdzJ1xyXG4gICAgICAgICAgICAvLyB9IHNlbGVjdGVkYDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLyoqIHJlbW92aW5nIHRvb2x0aXAgaWYgZnVsbCB2YWx1ZSB0ZXh0IGlzIHZpc2libGUgKi9cclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiR2YWx1ZVRleHQsICd0b29sdGlwJywgdmFsdWVUb29sdGlwLmpvaW4oJywgJykpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VhcmNoVmFsdWUodmFsdWUsIHNraXBJbnB1dFNldCwgZm9yY2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsICYmICFmb3JjZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFza2lwSW5wdXRTZXQpIHtcclxuICAgICAgdGhpcy4kc2VhcmNoSW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VhcmNoVmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBzZWFyY2hWYWx1ZTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9IHZhbHVlO1xyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KVxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG5cclxuICAgIGlmICh0aGlzLmhhc1NlcnZlclNlYXJjaCkge1xyXG4gICAgICB0aGlzLnNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnNDb3VudCA9IDA7XHJcbiAgICBsZXQgaGFzRXhhY3RPcHRpb24gPSBmYWxzZTtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZztcclxuICAgIGxldCBpc09wdGlvblZpc2libGUgPSB0aGlzLmlzT3B0aW9uVmlzaWJsZTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcoXHJcbiAgICAgICAgc2VhcmNoVmFsdWVcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCByZXN1bHQgPSBpc09wdGlvblZpc2libGUoXHJcbiAgICAgICAgZCxcclxuICAgICAgICBzZWFyY2hWYWx1ZSxcclxuICAgICAgICBoYXNFeGFjdE9wdGlvbixcclxuICAgICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZ1xyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKHJlc3VsdC5pc1Zpc2libGUpIHtcclxuICAgICAgICB2aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICBoYXNFeGFjdE9wdGlvbiA9IHJlc3VsdC5oYXNFeGFjdE9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgaWYgKHNlYXJjaFZhbHVlICYmICFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICAgIHRoaXMuc2V0TmV3T3B0aW9uKCk7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTmV3T3B0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgPSB2aXNpYmxlT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uUHJvcChpbmRleCwga2V5LCB2YWx1ZSkge1xyXG4gICAgaWYgKCF0aGlzLm9wdGlvbnNbaW5kZXhdKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnNbaW5kZXhdW2tleV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNIZWlnaHQoKSB7XHJcbiAgICB0aGlzLiRvcHRpb25zTGlzdC5zdHlsZS5oZWlnaHQgPVxyXG4gICAgICB0aGlzLm9wdGlvbkhlaWdodCAqIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCArICdweCc7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHJlc2V0KSB7XHJcbiAgICBsZXQgb3B0aW9uc0hlaWdodDtcclxuXHJcbiAgICBpZiAocmVzZXQpIHtcclxuICAgICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnNDb3VudCA9IHRoaXMuZ2V0T3B0aW9uc0NvdW50KCk7XHJcbiAgICAgICAgb3B0aW9uc0hlaWdodCA9IHRoaXMuZ2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgICAgIHRoaXMub3B0aW9uc0hlaWdodCA9IG9wdGlvbnNIZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9wdGlvbnNIZWlnaHQgPSB0aGlzLm9wdGlvbnNIZWlnaHQ7XHJcblxyXG4gICAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG5vT3B0aW9ucywgJ2hlaWdodCcsIG9wdGlvbnNIZWlnaHQpO1xyXG4gICAgICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG5vU2VhcmNoUmVzdWx0cywgJ2hlaWdodCcsIG9wdGlvbnNIZWlnaHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMuc2V0U3R5bGUodGhpcy4kb3B0aW9uc0NvbnRhaW5lciwgJ21heC1oZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuXHJcbiAgICB0aGlzLmFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCk7XHJcbiAgfVxyXG5cclxuICBzZXREcm9wYm94UG9zaXRpb24oKSB7XHJcbiAgICBpZiAodGhpcy5wb3NpdGlvbiAhPT0gJ2F1dG8nKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbW9yZVZpc2libGVTaWRlcyA9IERvbVV0aWxzLmdldE1vcmVWaXNpYmxlU2lkZXModGhpcy4kd3JhcHBlcik7XHJcbiAgICBsZXQgc2hvd09uTGVmdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBjaGVjayB0aGF0IGlzIGRyb3Bib3ggaGlkZGVuIG9uIHJpZ2h0IGVkZ2UgLSBvbmx5IGlmIGN1c3RvbSB3aWR0aCBnaXZlbiAqL1xyXG4gICAgaWYgKHRoaXMuZHJvcGJveFdpZHRoKSB7XHJcbiAgICAgIGxldCBidXR0b25Db29yZHMgPSB0aGlzLiR0b2dnbGVCdXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGxldCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgIGxldCBkcm9wYm94V2lkdGggPSBwYXJzZUZsb2F0KHRoaXMuZHJvcGJveFdpZHRoKTtcclxuICAgICAgbGV0IGhpZGRlbk9uUmlnaHQgPSBidXR0b25Db29yZHMubGVmdCArIGRyb3Bib3hXaWR0aCA+IHZpZXdwb3J0V2lkdGg7XHJcbiAgICAgIGxldCBoaWRkZW5PbkxlZnQgPSBkcm9wYm94V2lkdGggPiBidXR0b25Db29yZHMucmlnaHQ7XHJcblxyXG4gICAgICBpZiAoaGlkZGVuT25SaWdodCAmJiAhaGlkZGVuT25MZWZ0KSB7XHJcbiAgICAgICAgc2hvd09uTGVmdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgLy8gQkVUQVxyXG5cclxuICAgICAgbGV0IGVsZUNvb3JkcyA9IHRoaXMuJGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgbGV0IHggPSBlbGVDb29yZHMubGVmdCArIHdpbmRvdy5zY3JvbGxYO1xyXG4gICAgICBsZXQgeSA9IGVsZUNvb3Jkcy50b3AgKyB3aW5kb3cuc2Nyb2xsWTtcclxuXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS53aWR0aCA9IGAke3RoaXMuJGVsZS5vZmZzZXRXaWR0aH1weGA7IC8vIFRPRE8gb3IgY3VzdG9tIGRyb3Bkb3duIHdpZHRoXHJcbiAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XHJcblxyXG4gICAgICBpZiAobW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCcpIHtcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYCR7XHJcbiAgICAgICAgICB5IC0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5vZmZzZXRIZWlnaHQgLSA0XHJcbiAgICAgICAgfXB4YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYCR7eSArIHRoaXMuJGVsZS5vZmZzZXRIZWlnaHQgKyA0fXB4YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lcixcclxuICAgICAgICAncG9zaXRpb24tdG9wJyxcclxuICAgICAgICBtb3JlVmlzaWJsZVNpZGVzLnZlcnRpY2FsID09PSAndG9wJ1xyXG4gICAgICApO1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiRkcm9wYm94Q29udGFpbmVyLCAncG9zaXRpb24tbGVmdCcsIHNob3dPbkxlZnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAncG9zaXRpb24tdG9wJyxcclxuICAgICAgICBtb3JlVmlzaWJsZVNpZGVzLnZlcnRpY2FsID09PSAndG9wJ1xyXG4gICAgICApO1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAncG9zaXRpb24tbGVmdCcsIHNob3dPbkxlZnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IHZhbHVlID0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsLnRyaW0oKTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIGxldCBuZXdJbmRleCA9IG5ld09wdGlvbi5pbmRleDtcclxuXHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdsYWJlbCcsIHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIHZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiB2YWx1ZSxcclxuICAgICAgICBpc0N1cnJlbnROZXc6IHRydWUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmFkZE9wdGlvbihkYXRhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFNlbGVjdGVkUHJvcCgpIHtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xKSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8qKiBzZXQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIGdldFZpc2libGVPcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlzaWJsZU9wdGlvbnMgfHwgW107XHJcbiAgfVxyXG5cclxuICBnZXRWYWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gdGhpcy5zZWxlY3RlZFZhbHVlcyA6IHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF07XHJcbiAgfVxyXG5cclxuICBnZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpIHtcclxuICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgLyB0aGlzLm9wdGlvbkhlaWdodCk7XHJcbiAgfVxyXG5cclxuICBnZXRWaXNpYmxlU3RhcnRJbmRleCgpIHtcclxuICAgIGxldCBmaXJzdFZpc2libGVPcHRpb25JbmRleCA9IHRoaXMuZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKTtcclxuICAgIGxldCBzdGFydEluZGV4ID0gZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggLSB0aGlzLmhhbGZPcHRpb25zQ291bnQ7XHJcblxyXG4gICAgaWYgKHN0YXJ0SW5kZXggPCAwKSB7XHJcbiAgICAgIHN0YXJ0SW5kZXggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzdGFydEluZGV4O1xyXG4gIH1cclxuXHJcbiAgZ2V0VG9vbHRpcEF0dHJUZXh0KHRleHQsIGVsbGlwc2lzT25seSA9IGZhbHNlLCBhbGxvd0h0bWwgPSBmYWxzZSkge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICdkYXRhLXRvb2x0aXAnOiB0ZXh0IHx8ICcnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWVudGVyLWRlbGF5JzogdGhpcy50b29sdGlwRW50ZXJEZWxheSxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC16LWluZGV4JzogdGhpcy56SW5kZXgsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZm9udC1zaXplJzogdGhpcy50b29sdGlwRm9udFNpemUsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtYWxpZ25tZW50JzogdGhpcy50b29sdGlwQWxpZ25tZW50LFxyXG4gICAgICAnZGF0YS10b29sdGlwLW1heC13aWR0aCc6IHRoaXMudG9vbHRpcE1heFdpZHRoLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWVsbGlwc2lzLW9ubHknOiBlbGxpcHNpc09ubHksXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtYWxsb3ctaHRtbCc6IGFsbG93SHRtbCxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIERvbVV0aWxzLmdldEF0dHJpYnV0ZXNUZXh0KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uT2JqKGRhdGEpIHtcclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdldFN0cmluZyA9IFV0aWxzLmdldFN0cmluZztcclxuICAgIGxldCBuZXdPcHRpb24gPSB7XHJcbiAgICAgIGluZGV4OiBkYXRhLmluZGV4LFxyXG4gICAgICB2YWx1ZTogZ2V0U3RyaW5nKGRhdGEudmFsdWUpLFxyXG4gICAgICBsYWJlbDogZ2V0U3RyaW5nKGRhdGEubGFiZWwpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogZ2V0U3RyaW5nKGRhdGEuZGVzY3JpcHRpb24pLFxyXG4gICAgICBhbGlhczogdGhpcy5nZXRBbGlhcyhkYXRhLmFsaWFzKSxcclxuICAgICAgaXNDdXJyZW50TmV3OiBkYXRhLmlzQ3VycmVudE5ldyB8fCBmYWxzZSxcclxuICAgICAgaXNWaXNpYmxlOiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3T3B0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IGxhc3RPcHRpb24gPSB0aGlzLm9wdGlvbnNbdGhpcy5sYXN0T3B0aW9uSW5kZXhdO1xyXG5cclxuICAgIGlmICghbGFzdE9wdGlvbiB8fCAhbGFzdE9wdGlvbi5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsYXN0T3B0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uSW5kZXgodmFsdWUpIHtcclxuICAgIGxldCBpbmRleDtcclxuXHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLnNvbWUoKGQpID0+IHtcclxuICAgICAgICBpZiAoZC52YWx1ZSA9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgaW5kZXggPSBkLmluZGV4O1xyXG5cclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV3VmFsdWUoKSB7XHJcbiAgICBsZXQgbmV3VmFsdWVzID0gdGhpcy5uZXdWYWx1ZXM7XHJcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5zZWxlY3RlZFZhbHVlcy5maWx0ZXIoKGQpID0+IG5ld1ZhbHVlcy5pbmRleE9mKGQpICE9PSAtMSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyByZXN1bHQgOiByZXN1bHRbMF07XHJcbiAgfVxyXG5cclxuICBnZXRBbGlhcyhhbGlhcykge1xyXG4gICAgaWYgKGFsaWFzKSB7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsaWFzKSkge1xyXG4gICAgICAgIGFsaWFzID0gYWxpYXMuam9pbignLCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFsaWFzID0gYWxpYXMudG9TdHJpbmcoKS50cmltKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFsaWFzID0gYWxpYXMudG9Mb3dlckNhc2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFsaWFzID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFsaWFzO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlzcGxheVZhbHVlKCkge1xyXG4gICAgbGV0IGRpc3BsYXlWYWx1ZXMgPSBbXTtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcblxyXG4gICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xKSB7XHJcbiAgICAgICAgZGlzcGxheVZhbHVlcy5wdXNoKGQubGFiZWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyBkaXNwbGF5VmFsdWVzIDogZGlzcGxheVZhbHVlc1swXSB8fCAnJztcclxuICB9XHJcblxyXG4gIGdldFZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKHNlYXJjaFZhbHVlKSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuICAgIGxldCByZXN1bHQgPSB7fTtcclxuICAgIGxldCBpc09wdGlvblZpc2libGUgPSB0aGlzLmlzT3B0aW9uVmlzaWJsZTtcclxuICAgIG9wdGlvbnMgPSB0aGlzLnN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICByZXN1bHRbZC5pbmRleF0gPSBkLm9wdGlvbnMuc29tZShcclxuICAgICAgICAoZSkgPT4gaXNPcHRpb25WaXNpYmxlKGUsIHNlYXJjaFZhbHVlKS5pc1Zpc2libGVcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25zQ291bnQoY291bnQpIHtcclxuICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgIGxldCBhdmFpbGFibGVIZWlnaHQgPVxyXG4gICAgICAgICh3aW5kb3cuaW5uZXJIZWlnaHQgKiA4MCkgLyAxMDAgLSBkcm9wYm94Q2xvc2VCdXR0b25GdWxsSGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMuaGFzU2VhcmNoQ29udGFpbmVyKSB7XHJcbiAgICAgICAgYXZhaWxhYmxlSGVpZ2h0IC09IHNlYXJjaEhlaWdodDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY291bnQgPSBNYXRoLmZsb29yKGF2YWlsYWJsZUhlaWdodCAvIHRoaXMub3B0aW9uSGVpZ2h0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvdW50ID0gcGFyc2VJbnQoY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb3VudDtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbnNIZWlnaHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zQ291bnQgKiB0aGlzLm9wdGlvbkhlaWdodCArICdweCc7XHJcbiAgfVxyXG5cclxuICBnZXRTaWJsaW5nKCRlbGUsIGRpcmVjdGlvbikge1xyXG4gICAgbGV0IHByb3BOYW1lID1cclxuICAgICAgZGlyZWN0aW9uID09PSAnbmV4dCcgPyAnbmV4dEVsZW1lbnRTaWJsaW5nJyA6ICdwcmV2aW91c0VsZW1lbnRTaWJsaW5nJztcclxuXHJcbiAgICBkbyB7XHJcbiAgICAgIGlmICgkZWxlKSB7XHJcbiAgICAgICAgJGVsZSA9ICRlbGVbcHJvcE5hbWVdO1xyXG4gICAgICB9XHJcbiAgICB9IHdoaWxlIChcclxuICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJGVsZSwgJ2Rpc2FibGVkJykgfHxcclxuICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJGVsZSwgJ2dyb3VwLXRpdGxlJylcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG4gIC8qKiBnZXQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICBvcGVuRHJvcGJveChpc1NpbGVudCkge1xyXG4gICAgdGhpcy5zZXREcm9wYm94UG9zaXRpb24oKTtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdjbG9zZWQnKTtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJGRyb3Bib3hFbCwgJ29wZW5lZCcpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnb3BlbmVkJyk7XHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGRyb3Bib3hFbCwgJ29wZW5lZCcpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnb3BlbmVkJyk7XHJcblxyXG4gICAgICBpZiAoIWlzU2lsZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKTtcclxuICAgICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnZm9jdXNlZCcpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kYm9keSwgJ3ZzY29tcC1wb3B1cC1hY3RpdmUnKTtcclxuICAgICAgICAgIHRoaXMuaXNQb3B1cEFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZURyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIGlmICh0aGlzLmtlZXBBbHdheXNPcGVuKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0cmFuc2l0aW9uRHVyYXRpb24gPSBpc1NpbGVudCA/IDAgOiB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbjtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCBmb2N1c2VkJyk7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJGRyb3Bib3hFbCwgJ29wZW5lZCBmb2N1c2VkJyk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLiRlbGUsICdjbG9zZWQnKTtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG5cclxuICAgICAgaWYgKCFpc1NpbGVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUG9wdXBBY3RpdmUpIHtcclxuICAgICAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJGJvZHksICd2c2NvbXAtcG9wdXAtYWN0aXZlJyk7XHJcbiAgICAgICAgICB0aGlzLmlzUG9wdXBBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIDApO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJGRyb3Bib3hFbCwgJ2Nsb3NlZCcpO1xyXG4gICAgICBpZiAodGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgICAvLyBIaWRlIGRyb3Bib3ggc29tZXdoZXJlIGZhcnJycnJyciBhd2F5XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLmxlZnQgPSBgLTIwMHB4YDtcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYC0yMDBweGA7XHJcbiAgICAgIH1cclxuICAgIH0sIHRyYW5zaXRpb25EdXJhdGlvbik7XHJcbiAgfVxyXG5cclxuICBtb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKSB7XHJcbiAgICBpZiAoIXRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFNvcnRlZE9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIHx8ICF0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVEcm9wYm94KCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNPcGVuZWQoKSB7XHJcbiAgICByZXR1cm4gRG9tVXRpbHMuaGFzQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXNTZWFyY2hJbnB1dCgpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kc2VhcmNoSW5wdXQ7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgJGVsZS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXNPcHRpb24oZGlyZWN0aW9uLCBlbGUpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICApO1xyXG4gICAgbGV0ICRuZXdGb2N1c2VkRWxlO1xyXG5cclxuICAgIGlmIChlbGUpIHtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSBlbGU7XHJcbiAgICB9IGVsc2UgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAvKiBpZiBubyBlbGVtZW50IG9uIGZvY3VzIGNob29zZSBmaXJzdCB2aXNpYmxlIG9uZSAqL1xyXG4gICAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAudnNjb21wLW9wdGlvbltkYXRhLXZpc2libGUtaW5kZXg9XCIke2ZpcnN0VmlzaWJsZU9wdGlvbkluZGV4fVwiXWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBEb21VdGlscy5oYXNDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2Rpc2FibGVkJykgfHxcclxuICAgICAgICBEb21VdGlscy5oYXNDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2dyb3VwLXRpdGxlJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLmdldFNpYmxpbmcoJG5ld0ZvY3VzZWRFbGUsICduZXh0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRmb2N1c2VkRWxlLCBkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkbmV3Rm9jdXNlZEVsZSAmJiAkbmV3Rm9jdXNlZEVsZSAhPT0gJGZvY3VzZWRFbGUpIHtcclxuICAgICAgaWYgKCRmb2N1c2VkRWxlKSB7XHJcbiAgICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3MoJGZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKCRuZXdGb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLnRvZ2dsZUZvY3VzZWRQcm9wKERvbVV0aWxzLmdldERhdGEoJG5ld0ZvY3VzZWRFbGUsICdpbmRleCcpLCB0cnVlKTtcclxuICAgICAgdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkbmV3Rm9jdXNlZEVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkZm9jdXNlZEVsZSkge1xyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3U2Nyb2xsVG9wO1xyXG4gICAgbGV0IGNvbnRhaW5lclJlY3QgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IG9wdGlvblJlY3QgPSAkZm9jdXNlZEVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBjb250YWluZXJUb3AgPSBjb250YWluZXJSZWN0LnRvcDtcclxuICAgIGxldCBjb250YWluZXJCb3R0b20gPSBjb250YWluZXJSZWN0LmJvdHRvbTtcclxuICAgIGxldCBjb250YWluZXJIZWlnaHQgPSBjb250YWluZXJSZWN0LmhlaWdodDtcclxuICAgIGxldCBvcHRpb25Ub3AgPSBvcHRpb25SZWN0LnRvcDtcclxuICAgIGxldCBvcHRpb25Cb3R0b20gPSBvcHRpb25SZWN0LmJvdHRvbTtcclxuICAgIGxldCBvcHRpb25IZWlnaHQgPSBvcHRpb25SZWN0LmhlaWdodDtcclxuICAgIGxldCBvcHRpb25PZmZzZXRUb3AgPSAkZm9jdXNlZEVsZS5vZmZzZXRUb3A7XHJcbiAgICBsZXQgb3B0aW9uc1RvcCA9IERvbVV0aWxzLmdldERhdGEodGhpcy4kb3B0aW9ucywgJ3RvcCcsICdudW1iZXInKTtcclxuXHJcbiAgICAvKiBpZiBvcHRpb24gaGlkZGVuIG9uIHRvcCAqL1xyXG4gICAgaWYgKGNvbnRhaW5lclRvcCA+IG9wdGlvblRvcCkge1xyXG4gICAgICBuZXdTY3JvbGxUb3AgPSBvcHRpb25PZmZzZXRUb3AgKyBvcHRpb25zVG9wO1xyXG4gICAgfSBlbHNlIGlmIChjb250YWluZXJCb3R0b20gPCBvcHRpb25Cb3R0b20pIHtcclxuICAgICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiBib3R0b20gKi9cclxuICAgICAgbmV3U2Nyb2xsVG9wID1cclxuICAgICAgICBvcHRpb25PZmZzZXRUb3AgLSBjb250YWluZXJIZWlnaHQgKyBvcHRpb25IZWlnaHQgKyBvcHRpb25zVG9wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChuZXdTY3JvbGxUb3AgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IG5ld1Njcm9sbFRvcDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZU9wdGlvbkZvY3VzKCkge1xyXG4gICAgbGV0ICRmb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3MoJGZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICB0aGlzLnRvZ2dsZUZvY3VzZWRQcm9wKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0T3B0aW9uKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzQWRkaW5nID0gIURvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8qKiBvbiBzZWxlY3Rpbmcgc2FtZSB2YWx1ZSBpbiBzaW5nbGUgc2VsZWN0ICovXHJcbiAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnNlbGVjdGVkSW5kZXhlcztcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlID0gRG9tVXRpbHMuZ2V0RGF0YSgkZWxlLCAndmFsdWUnKTtcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ID0gRG9tVXRpbHMuZ2V0RGF0YSgkZWxlLCAnaW5kZXgnKTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkUHJvcChzZWxlY3RlZEluZGV4LCBpc0FkZGluZyk7XHJcblxyXG4gICAgaWYgKGlzQWRkaW5nKSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMucHVzaChzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICBzZWxlY3RlZEluZGV4ZXMucHVzaChzZWxlY3RlZEluZGV4KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRQcm9wKFxyXG4gICAgICAgICAgICB0aGlzLmdldE9wdGlvbkluZGV4KHNlbGVjdGVkVmFsdWVzWzBdKSxcclxuICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RlZFZhbHVlcyA9IFtzZWxlY3RlZFZhbHVlXTtcclxuICAgICAgICBzZWxlY3RlZEluZGV4ZXMgPSBbc2VsZWN0ZWRJbmRleF07XHJcbiAgICAgICAgbGV0ICRwcmV2U2VsZWN0ZWRPcHRpb24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICcudnNjb21wLW9wdGlvbi5zZWxlY3RlZCdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoJHByZXZTZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoJHByZXZTZWxlY3RlZE9wdGlvbiwgJ3NlbGVjdGVkJywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoJGVsZSwgJ3NlbGVjdGVkJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG4gICAgICAgIFV0aWxzLnJlbW92ZUl0ZW1Gcm9tQXJyYXkoc2VsZWN0ZWRWYWx1ZXMsIHNlbGVjdGVkVmFsdWUpO1xyXG4gICAgICAgIFV0aWxzLnJlbW92ZUl0ZW1Gcm9tQXJyYXkoc2VsZWN0ZWRJbmRleGVzLCBzZWxlY3RlZEluZGV4KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoRG9tVXRpbHMuaGFzQ2xhc3MoJGVsZSwgJ2N1cnJlbnQtbmV3JykpIHtcclxuICAgICAgdGhpcy5iZWZvcmVTZWxlY3ROZXdWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZXMsIHNlbGVjdGVkSW5kZXhlcywgdHJ1ZSk7XHJcblxyXG4gICAgLy8gSW4gJ0xpc3QnIG9ubHlcclxuICAgIC8vIGltbWVkaWF0ZWx5IG1vdmUgaXRlbSB0byB0b3AgaWYgb3B0aW9ucyBpcyBvbi5cclxuICAgIC8vIERyb3Bkb3duIG1vZGUgd2lsbCB3YWl0IHVudGlsIHRoZSBuZXh0IHJlb3BlbiB0byBkbyBzby5cclxuICAgIGlmICh0aGlzLmtlZXBBbHdheXNPcGVuICYmIHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIGNvbnN0IGxhc3RTY3JvbGxUb3AgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuICAgICAgdGhpcy5tb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKTtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBsYXN0U2Nyb2xsVG9wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2VsZWN0Rm9jdXNlZE9wdGlvbigpIHtcclxuICAgIHRoaXMuc2VsZWN0T3B0aW9uKFxyXG4gICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUFsbE9wdGlvbnMoaXNTZWxlY3RlZCkge1xyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlIHx8IHRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBpc1NlbGVjdGVkICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNTZWxlY3RlZCA9ICFEb21VdGlscy5oYXNDbGFzcyh0aGlzLiR0b2dnbGVBbGxDaGVja2JveCwgJ2NoZWNrZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCwgaWR4KSA9PiB7XHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQgfHwgZC5pc0N1cnJlbnROZXcgfHwgZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGlzU2VsZWN0ZWQ7XHJcblxyXG4gICAgICBpZiAoaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzLnB1c2goaWR4KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNTZWxlY3RlZCk7XHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZEluZGV4ZXMsIHRydWUpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgaWYgKHR5cGVvZiBpc0FsbFNlbGVjdGVkICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICBpc0FsbFNlbGVjdGVkID0gIXRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gIWQuaXNTZWxlY3RlZCAmJiAhZC5pc0Rpc2FibGVkICYmICFkLmlzR3JvdXBUaXRsZTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHRvZ2dsZUFsbENoZWNrYm94LCAnY2hlY2tlZCcsIGlzQWxsU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gaXNBbGxTZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUZvY3VzZWRQcm9wKGluZGV4LCBpc0ZvY3VzZWQgPSBmYWxzZSkge1xyXG4gICAgaWYgKHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4KSB7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcCh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCwgJ2lzRm9jdXNlZCcsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc0ZvY3VzZWQnLCBpc0ZvY3VzZWQpO1xyXG4gICAgdGhpcy5mb2N1c2VkT3B0aW9uSW5kZXggPSBpbmRleDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNlbGVjdGVkUHJvcChpbmRleCwgaXNTZWxlY3RlZCA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc1NlbGVjdGVkJywgaXNTZWxlY3RlZCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1RvcCgpIHtcclxuICAgIGxldCBpc0Nsb3NlZCA9ICF0aGlzLmlzT3BlbmVkKCk7XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cclxuICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNDbG9zZWQpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5iZWZvcmVWYWx1ZVNldCh0cnVlKTtcclxuICAgIHRoaXMuc2V0VmFsdWUobnVsbCwgbnVsbCwgdHJ1ZSk7XHJcbiAgICB0aGlzLmFmdGVyVmFsdWVTZXQoKTtcclxuICB9XHJcblxyXG4gIGJlZm9yZVZhbHVlU2V0KGlzUmVzZXQpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzUmVzZXQgPyBmYWxzZSA6IHVuZGVmaW5lZCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclZhbHVlU2V0KCkge1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9ucyhrZWVwVmFsdWUpIHtcclxuICAgIGxldCBzZWFyY2ggPSB0aGlzLnNlYXJjaFZhbHVlOyAvLyBOZWVkIHRvIGJlIHN0b3JlZCBiZWNhdXNlIHNldFZhbHVlTWV0aG9kIHdpbGwgZW1wdHkgdGhpcy5zZWFyY2hWYWx1ZVxyXG5cclxuICAgIGlmIChrZWVwVmFsdWUpIHtcclxuICAgICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9ucyh0aGlzLmlzQWxsU2VsZWN0ZWQpOyAvLyBJZiBzZWxlY3QgYWxsIHdhcyBvbiBsZXQgc2VsZWN0IGFsbCBvblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QodGhpcy5zZWxlY3RlZFZhbHVlcywgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXQpOyAvLyBSZXNlbGVjdCB2YWxpZCB2YWx1ZXNcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zZXRTZWFyY2hWYWx1ZShzZWFyY2gsIGZhbHNlLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAoIWtlZXBWYWx1ZSkge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRPcHRpb24oZGF0YSwgcmVyZW5kZXIpIHtcclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXgrKztcclxuICAgIGRhdGEuaW5kZXggPSB0aGlzLmxhc3RPcHRpb25JbmRleDtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE9wdGlvbk9iaihkYXRhKTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMucHVzaChuZXdPcHRpb24pO1xyXG4gICAgdGhpcy5zb3J0ZWRPcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcclxuXHJcbiAgICBpZiAocmVyZW5kZXIpIHtcclxuICAgICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVPcHRpb24oaW5kZXgpIHtcclxuICAgIGlmICghaW5kZXggJiYgaW5kZXggIT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleC0tO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbihuZXdPcHRpb24uaW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmVmb3JlU2VsZWN0TmV3VmFsdWUoKSB7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuICAgIGxldCBuZXdJbmRleCA9IG5ld09wdGlvbi5pbmRleDtcclxuXHJcbiAgICB0aGlzLm5ld1ZhbHVlcy5wdXNoKG5ld09wdGlvbi52YWx1ZSk7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdpc0N1cnJlbnROZXcnLCBmYWxzZSk7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdpc05ldycsIHRydWUpO1xyXG5cclxuICAgIC8qKiB1c2luZyBzZXRUaW1lb3V0IHRvIGZpeCB0aGUgaXNzdWUgb2YgZHJvcGJveCBnZXR0aW5nIGNsb3NlZCBvbiBzZWxlY3QgKi9cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIHNvcnRPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBvcHRpb25zLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgaWYgKGIudmFsdWUgPT09IG5vbmVPcHRpb25WYWx1ZSAmJiBhLnZhbHVlICE9PSBub25lT3B0aW9uVmFsdWUpIHtcclxuICAgICAgICAvLyBOb25lIGlzIGFsd2F5cyBmaXJzdFxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2UgaWYgKCFhLmlzU2VsZWN0ZWQgJiYgIWIuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2UgaWYgKGEuaXNTZWxlY3RlZCAmJiAoIWIuaXNTZWxlY3RlZCB8fCBhLmluZGV4IDwgYi5pbmRleCkpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc29ydE9wdGlvbnNHcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgc29ydE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zO1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCBjaGlsZE9wdGlvbnMgPSBkLm9wdGlvbnM7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGNoaWxkT3B0aW9ucy5zb21lKChlKSA9PiBlLmlzU2VsZWN0ZWQpO1xyXG5cclxuICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHNvcnRPcHRpb25zKGNoaWxkT3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNvcnRPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmRlc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBpc09wdGlvblZpc2libGUoZCwgc2VhcmNoVmFsdWUsIGhhc0V4YWN0T3B0aW9uLCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZykge1xyXG4gICAgbGV0IHZhbHVlID0gZC5sYWJlbC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gZC5kZXNjcmlwdGlvbjtcclxuICAgIGxldCBhbGlhcyA9IGQuYWxpYXM7XHJcbiAgICBsZXQgaXNWaXNpYmxlID0gdmFsdWUuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG5cclxuICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZ1tkLmluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWxpYXMgJiYgIWlzVmlzaWJsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSBhbGlhcy5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICYmICFpc1Zpc2libGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZC5pc1Zpc2libGUgPSBpc1Zpc2libGU7XHJcblxyXG4gICAgaWYgKCFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICBoYXNFeGFjdE9wdGlvbiA9IHZhbHVlID09PSBzZWFyY2hWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1Zpc2libGUsXHJcbiAgICAgIGhhc0V4YWN0T3B0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBjaGlsZE9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAvKiogZ2V0dGluZyBhbGwgZ3JvdXAgdGl0bGUgKi9cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBsZXQgY2hpbGRBcnJheSA9IFtdO1xyXG4gICAgICAgIGQub3B0aW9ucyA9IGNoaWxkQXJyYXk7XHJcbiAgICAgICAgY2hpbGRPcHRpb25zW2QuaW5kZXhdID0gY2hpbGRBcnJheTtcclxuXHJcbiAgICAgICAgcmVzdWx0LnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKiBnZXR0aW5nIGFsbCBncm91cCBvcHRpb25zICovXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIGNoaWxkT3B0aW9uc1tkLmdyb3VwSW5kZXhdLnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBkZXN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0LnB1c2goZCk7XHJcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoZC5vcHRpb25zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUpIHtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtbm8tb3B0aW9ucycpO1xyXG4gICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3NlcnZlci1zZWFyY2hpbmcnKTtcclxuICAgIHRoaXMub25TZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUsIHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBzdGF0aWMgaW5pdChvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZUFycmF5ID0gb3B0aW9ucy5lbGU7XHJcblxyXG4gICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzaW5nbGVFbGUgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodHlwZW9mICRlbGVBcnJheSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgJGVsZUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigkZWxlQXJyYXkpO1xyXG5cclxuICAgICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoJGVsZUFycmF5Lmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGVBcnJheSA9IFskZWxlQXJyYXldO1xyXG4gICAgICBzaW5nbGVFbGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbnN0YW5jZXMgPSBbXTtcclxuICAgICRlbGVBcnJheS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgIG9wdGlvbnMuZWxlID0gJGVsZTtcclxuICAgICAgaW5zdGFuY2VzLnB1c2gobmV3IFZpcnR1YWxTZWxlY3Qob3B0aW9ucykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNpbmdsZUVsZSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZXNldEZvcm0oZSkge1xyXG4gICAgbGV0ICRmb3JtID0gZS50YXJnZXQuY2xvc2VzdCgnZm9ybScpO1xyXG5cclxuICAgIGlmICghJGZvcm0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgJGVsZS5wYXJlbnRFbGVtZW50LnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0KCkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywga2VlcFZhbHVlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZVNlbGVjdEFsbChpc1NlbGVjdGVkKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QudG9nZ2xlQWxsT3B0aW9ucyhpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0FsbFNlbGVjdGVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5pc0FsbFNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZE9wdGlvbk1ldGhvZChkYXRhKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QuYWRkT3B0aW9uKGRhdGEsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE5ld1ZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHZlcnNpb24oKSB7XHJcbiAgICByZXR1cm4gdmlydHVhbFNlbGVjdFZlcnNpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGlzcGxheVZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWUoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvcGVuTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5vcGVuRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNsb3NlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvblJlc2l6ZU1ldGhvZCgpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgJGVsZS5wYXJlbnRFbGVtZW50LnZpcnR1YWxTZWxlY3Qub25SZXNpemUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBlbmQgKi9cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBWaXJ0dWFsU2VsZWN0LnJlc2V0Rm9ybSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBWaXJ0dWFsU2VsZWN0Lm9uUmVzaXplTWV0aG9kKTtcclxuXHJcbndpbmRvdy5WaXJ0dWFsU2VsZWN0ID0gVmlydHVhbFNlbGVjdDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==