/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var e={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(e,t,i)=>{i.r(t),i.d(t,{DomUtils:()=>r});var o=i(/*! ./index */"./src/utils/index.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function n(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function a(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,l=void 0,l=function(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!==s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===s(l)?l:String(l)),o)}var n,l}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"addClass",value:function(t,i){t&&(i=i.split(" "),e.getElements(t).forEach((function(e){var t;(t=e.classList).add.apply(t,n(i))})))}},{key:"removeClass",value:function(t,i){t&&(i=i.split(" "),e.getElements(t).forEach((function(e){var t;(t=e.classList).remove.apply(t,n(i))})))}},{key:"toggleClass",value:function(t,i,o){var s;if(t)return void 0!==o&&(o=Boolean(o)),e.getElements(t).forEach((function(e){s=e.classList.toggle(i,o)})),s}},{key:"hasClass",value:function(e,t){return!!e&&e.classList.contains(t)}},{key:"hasEllipsis",value:function(e){return!!e&&e.scrollWidth>e.offsetWidth}},{key:"getData",value:function(e,t,i){if(e){var o=e?e.dataset[t]:"";return"number"===i&&(o=parseFloat(o)||0),o}}},{key:"setData",value:function(e,t,i){e&&(e.dataset[t]=i)}},{key:"setAttr",value:function(e,t,i){e&&e.setAttribute(t,i)}},{key:"setAttrFromEle",value:function(e,t,i,o){var s={};i.forEach((function(t){s[t]=e.getAttribute(t)})),i.forEach((function(e){var i=s[e];(i||-1!==o.indexOf(e)&&""===i)&&t.setAttribute(e,i)}))}},{key:"setStyle",value:function(e,t,i){e&&(e.style[t]=i)}},{key:"setStyles",value:function(e,t){e&&t&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}},{key:"getElements",value:function(e){if(e)return void 0===e.forEach&&(e=[e]),e}},{key:"addEvent",value:function(t,i,s){t&&(i=o.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){(t=e.getElements(t)).forEach((function(e){e.addEventListener(i,s)}))}))}},{key:"dispatchEvent",value:function(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(t=e.getElements(t),setTimeout((function(){t.forEach((function(e){e.dispatchEvent(new CustomEvent(i,{bubbles:o}))}))}),0))}},{key:"getAttributesText",value:function(e){var t="";if(!e)return t;for(var i in e){var o=e[i];void 0!==o&&(t+=" ".concat(i,'="').concat(o,'" '))}return t}},{key:"getStyleText",value:function(e,t){var i="";for(var o in e)i+="".concat(o,": ").concat(e[o],";");return i&&!t&&(i='style="'.concat(i,'"')),i}},{key:"getMoreVisibleSides",value:function(e){if(!e)return{};var t=e.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=t.left,n=t.top;return{horizontal:s>i-s-t.width?"left":"right",vertical:n>o-n-t.height?"top":"bottom"}}}],(i=null)&&a(t.prototype,i),s&&a(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(e,t,i)=>{i.r(t),i.d(t,{DomUtils:()=>s.DomUtils,Utils:()=>o.Utils});var o=i(/*! ./utils */"./src/utils/utils.js"),s=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(e,t,i)=>{function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(s=o.key,l=void 0,l=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===n(l)?l:String(l)),o)}var s,l}i.r(t),i.d(t,{Utils:()=>a});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"getString",value:function(e){return null!=e||0===e?e.toString():""}},{key:"convertToBoolean",value:function(e){return e=!0===e||"true"===e||!1!==e&&"false"!==e&&arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"isEmpty",value:function(e){var t=!1;return e?Array.isArray(e)?0===e.length&&(t=!0):"object"===n(e)&&0===Object.keys(e).length&&(t=!0):t=!0,t}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"removeItemFromArray",value:function(e,t,i){if(!Array.isArray(e)||!e.length)return e;i&&(e=o(e));var s=e.indexOf(t);return-1!==s&&e.splice(s,1),e}},{key:"removeArrayEmpty",value:function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return!!e})):[]}},{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}}],(i=null)&&l(t.prototype,i),s&&l(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(o),i.d(o,{VirtualSelect:()=>d});var e=i(/*! ./utils */"./src/utils/index.js");function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function s(e,t,i){return(t=u(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){r=!0,n=e},f:function(){try{l||null==i.return||i.return()}finally{if(r)throw n}}}}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function c(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,u(o.key),o)}}function u(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var s=o.call(e,i||"default");if("object"!==t(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"===t(i)?i:String(i)}var p="{#virtual-select-none-option#}",h={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},d=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);try{this.setProps(e),this.setDisabledOptions(e.disabledOptions),this.setOptions(e.options),this.render()}catch(e){console.warn("Couldn't initiate Virtual Select"),console.error(e)}}var i,o,a;return i=t,o=[{key:"render",value:function(){var t=this;if(this.$ele){var i="vscomp-wrapper",o=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),n={"z-index":this.zIndex},l=function(){var e="";return t.additionalClasses&&(e+=" "+t.additionalClasses),t.multiple&&(e+=" multiple",t.disableSelectAll||(e+=" has-select-all")),"top"===t.position&&(e+=" position-top"),t.hideClearButton||(e+=" has-clear-button"),t.keepAlwaysOpen?e+=" keep-always-open opened":e+=" closed",t.showAsPopup?e+=" show-as-popup":t.dropboxWidth&&(n.width=t.dropboxWidth),t.hasSearch&&(e+=" has-search-input"),e};i+=l(),this.guid=e.Utils.generateUUID();var a='<div id="vs-'.concat(this.guid,'" class="vscomp-dropbox-container" ').concat(e.DomUtils.getStyleText(n),'>\n      <div class="vscomp-dropbox">\n        <div class="vscomp-search-wrapper"></div>\n\n        <div class="vscomp-options-container">\n          <div class="vscomp-options-loader"></div>\n\n          <div class="vscomp-options-list">\n            <div class="vscomp-options"></div>\n          </div>\n        </div>\n\n        <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n        <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n        <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n      </div>\n    </div>'),r='<div class="'.concat(i,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(o,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        ').concat(this.keepAlwaysOpen||!this.appendToBody?a:"","\n\n      </div>");if(this.$ele.innerHTML=r,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),!this.keepAlwaysOpen&&this.appendToBody){this.$body.append(document.createRange().createContextualFragment(a)),this.$dropboxContainer=document.querySelector("#vs-".concat(this.guid,".vscomp-dropbox-container")),this.$dropboxEl=document.querySelector("#vs-".concat(this.guid));var c="vscomp-wrapper-body";c+=l(),e.DomUtils.addClass(this.$dropboxEl,"".concat(c))}else this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxEl=this.$ele;this.$search=this.$dropboxEl.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxEl.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxEl.querySelector(".vscomp-options-list"),this.$options=this.$dropboxEl.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$dropboxEl.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxEl.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var t,i=this,o="",s=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),r=e.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(t=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var c=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(c,"></span>")}s.forEach((function(e){var s=e.label,c="vscomp-option",u=i.getTooltipAttrText("",!0),h=n,d="",v="";e.isFocused&&(c+=" focused"),e.isDisabled&&(c+=" disabled"),e.isGroupTitle?(c+=" group-title",h=""):e.isSelected&&(c+=" selected"),e.isGroupOption&&(c+=" group-option"),e.description&&(v='<div class="vscomp-option-description" '.concat(u,">").concat(e.description,"</div>")),e.isCurrentNew?(c+=" current-new",d+=l):a&&!e.isGroupTitle&&(s=s.replace(t,"<mark>$1</mark>")),o+='<div class="'.concat(c,'" data-value="').concat(e.value,'" data-index="').concat(e.index,'" data-visible-index="').concat(e.visibleIndex,'" ').concat(r,">\n          ").concat(h,'\n          <span title="').concat(s,'" class="vscomp-option-text ').concat(e.value===p?"none":"",'" ').concat(u,">\n            ").concat(s,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=o;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||(e.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),this.appendToBody&&e.DomUtils.toggleClass(this.$dropboxEl,"has-no-search-results",h)),e.DomUtils.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var e="",t="";this.hasSearch&&(t=' <div class="vscomp-search-container">\n          <input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n          <span class="vscomp-search-clear">&times;</span>\n        </div>')),this.multiple&&!this.disableSelectAll&&(e='<div class="vs-comp-select-all-container">\n        <span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>\n        </div>")),this.hasSearch&&this.multiple&&this.addSeachToSelection&&(e+='<div class="vs-comp-select-add-search-container">\n        <span class="vscomp-toggle-add-search-button">\n          <span class="checkbox-icon vscomp-toggle-add-search-checkbox"></span>\n          <span class="vscomp-toggle-add-search-label">'.concat(this.addSearchToSelectionText,"</span>\n        </span>\n        </div>"));var i="".concat(t).concat(e);this.$search.innerHTML=i,this.$searchInput=this.$dropboxEl.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxEl.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxEl.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-all-checkbox"),this.$toggleAddSeachContainer=this.$dropboxEl.querySelector(".vs-comp-select-add-search-container"),this.$toggleAddSeachButton=this.$dropboxEl.querySelector(".vscomp-toggle-add-search-button"),this.$toggleAddSeachCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-add-search-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions"),this.addEvent(this.$toggleAddSeachButton,"click","onAddSeachToSelection")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$dropboxContainer,"mouseleave","onOptionsMouseLeave"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"onOptionsMouseLeave",value:function(){this.removeOptionFocus()}},{key:"addEvent",value:function(t,i,o){var s=this;t&&(i=e.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(o,"-").concat(i),l=s.events[n];l||(l=s[o].bind(s),s.events[n]=l),(t=e.DomUtils.getElements(t)).forEach((function(e){e.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(t,i){t&&(t=e.DomUtils.getElements(t),setTimeout((function(){t.forEach((function(e){e.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(e){this.appendToBody&&this.multiple&&this.isOpened()&&e.target.closest("#vs-".concat(this.guid))||e.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(e){var t=e.which||e.keyCode,i=h[t];i&&this[i](e)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(e){e.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(e){e.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(e){e.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(e){if(this.selectOption(e.target.closest(".vscomp-option:not(.disabled):not(.group-title)")),this.multiple&&this.showSelectedOptionsFirst)return e.stopPropagation(),!1}},{key:"onDropboxContainerClick",value:function(e){e.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(e){var t=e.target.closest(".vscomp-option:not(.disabled):not(.group-title)");t&&this.isOpened()&&this.focusOption(null,t)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(e){e.stopPropagation(),this.setSearchValue(e.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onAddSeachToSelection",value:function(){if(this.multiple&&this.searchValue){var t=!e.DomUtils.hasClass(this.$toggleAddSeachCheckbox,"checked"),i=this.selectedValues,o=this.options.filter((function(e){if(!(e.isDisabled||e.isCurrentNew||e.isGroupTitle))return e.isVisible}));if(t){var s,n=l(o);try{for(n.s();!(s=n.n()).done;){var a=s.value;-1===i.indexOf(a.value)&&(a.isSelected=!0,i.push(a.value))}}catch(e){n.e(e)}finally{n.f()}}else{var r,c=l(o);try{for(c.s();!(r=c.n()).done;){var u=r.value,p=i.indexOf(u.value);-1!==p&&(u.isSelected=!1,i.splice(p,1))}}catch(e){c.e(e)}finally{c.f()}}this.toggleAddSearchClass(t),this.toggleAllOptionsClass(t),this.setValue(i,[],!0),this.renderOptions()}}},{key:"onResize",value:function(){this.appendToBody?this.isOpened()&&this.closeDropbox(!0):this.setOptionsContainerHeight(!0)}},{key:"beforeValueSet",value:function(e){this.toggleAllOptionsClass(!e&&void 0)}},{key:"beforeSelectNewValue",value:function(){var e=this,t=this.getNewOption(),i=t.index;this.newValues.push(t.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){e.setSearchValue(""),e.focusSearchInput()}),0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),e.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),void 0!==this.initialSelectedValue&&null!==this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(e){e&&this.showAsPopup&&this.setVisibleOptions()}},{key:"afterSetSearchValue",value:function(){this.hasServerSearch?this.serverSearch():this.setVisibleOptionsCount(),this.selectAllOnlyVisible&&this.toggleAllOptionsClass(),this.addSeachToSelection&&this.toggleAddSearchClass()}},{key:"afterSetVisibleOptionsCount",value:function(){this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(e){var t=this.searchValue;e&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.search&&this.setSearchValue(t,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),e||this.reset()}},{key:"setProps",value:function(t){t=this.setDefaultProps(t),this.setPropsFromElementAttr(t);var i=e.Utils.convertToBoolean;this.$ele=t.ele,this.valueKey=t.valueKey,this.labelKey=t.labelKey,this.descriptionKey=t.descriptionKey,this.aliasKey=t.aliasKey,this.optionHeightText=t.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(t.multiple),this.hasSearch=i(t.search),this.hideClearButton=i(t.hideClearButton),this.autoSelectFirstOption=i(t.autoSelectFirstOption),this.hasOptionDescription=i(t.hasOptionDescription),this.silentInitialValueSet=i(t.silentInitialValueSet),this.allowNewOption=i(t.allowNewOption),this.markSearchResults=i(t.markSearchResults),this.showSelectedOptionsFirst=i(t.showSelectedOptionsFirst),this.disableSelectAll=i(t.disableSelectAll),this.keepAlwaysOpen=i(t.keepAlwaysOpen),this.showDropboxAsPopup=i(t.showDropboxAsPopup),this.selectAllOnlyVisible=i(t.selectAllOnlyVisible),this.noOptionsText=t.noOptionsText,this.noSearchResultsText=t.noSearchResultsText,this.selectAllText=t.selectAllText,this.addSearchToSelectionText=t.addSearchToSelectionText,this.placeholder=t.placeholder,this.position=t.position,this.dropboxWidth=t.dropboxWidth,this.tooltipFontSize=t.tooltipFontSize,this.tooltipAlignment=t.tooltipAlignment,this.tooltipMaxWidth=t.tooltipMaxWidth,this.noOfDisplayValues=parseInt(t.noOfDisplayValues),this.zIndex=parseInt(t.zIndex),this.maxValues=parseInt(t.maxValues),this.name=t.name,this.additionalClasses=t.additionalClasses,this.initialSelectedValue=t.selectedValue,this.popupDropboxBreakpoint=t.popupDropboxBreakpoint,this.onServerSearch=t.onServerSearch,this.searchPlaceholder=t.searchPlaceholder,this.itemsSelectedMessage=t.itemsSelectedMessage,this.allowNoneOption=t.allowNoneOption,this.noneOptionText=t.noneOptionText,this.appendToBody=t.appendToBody,this.addSeachToSelection=i(t.addSeachToSelection),this.searchCallback=t.searchCallback||null,this.selectedValues=[],this.selectedIndexes=[],this.selectedOptions=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===t.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(t.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(e){var t={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None",appendToBody:!1,selectAllOnlyVisible:!0,addSeachToSelection:!1,addSearchToSelectionText:"Add to selection"};return e.hasOptionDescription&&(t.optionsCount=4,t.optionHeight="60px"),Object.assign(t,e)}},{key:"setPropsFromElementAttr",value:function(e){var t=e.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint","data-select-all-only-visible":"selectAllOnlyVisible"};for(var o in i){var s=t.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(e[i[o]]=s)}}},{key:"setMethods",value:function(){var e=this.$ele;e.virtualSelect=this,e.value=this.multiple?[]:"",e.reset=t.reset,e.setValue=t.setValueMethod,e.setOptions=t.setOptionsMethod,e.setDisabledOptions=t.setDisabledOptionsMethod,e.toggleSelectAll=t.toggleSelectAll,e.isAllSelected=t.isAllSelected,e.addOption=t.addOptionMethod,e.getNewValue=t.getNewValueMethod,e.getDisplayValue=t.getDisplayValueMethod,e.open=t.openMethod,e.close=t.closeMethod,e.setSearchValue=t.setSearchValueMethod}},{key:"setValueMethod",value:function(e,t){Array.isArray(e)||(e=[e]),e=e.map((function(e){return e||0==e?e.toString():""}));var i,o=[],s=[],n=new Set([]),a=new Set(e),r=l(this.options);try{for(r.s();!(i=r.n()).done;){var c=i.value;if(!a.has(c.value)||c.isDisabled||c.isGroupTitle)c.isSelected=!1;else{if(n.has(c.value)&&this.multiple)break;if(c.isSelected=!0,n.add(c.value),o.push(c.value),s.push(c.index),!this.multiple)break}}}catch(e){r.e(e)}finally{r.f()}this.multiple||(o=o[0],s=s[0]),this.beforeValueSet(),this.setValue(o,s,!t),this.afterValueSet()}},{key:"setOptionsMethod",value:function(e,t){var i=e!=this.options;this.setOptions(e),this.afterSetOptions(t,i)}},{key:"setDisabledOptionsMethod",value:function(e){this.setDisabledOptions(e,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e.map((function(e){return e.toString()})),this.disabledOptions=e,t&&e.length&&this.options.forEach((function(t){return t.isDisabled=-1!==e.indexOf(t.value),t}))}},{key:"setOptions",value:function(t){t||(t=[]);var i=[],o=this.disabledOptions,s=o.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,r=this.aliasKey,c=this.hasOptionDescription,u=e.Utils.getString,h=e.Utils.convertToBoolean,d=this.getAlias,v=0,f=!1;!this.multiple&&this.allowNoneOption&&t.unshift({value:p,label:this.noneOptionText}),t.forEach((function e(t){var p=u(t[n]),y=t.options,g=!!y,m={index:v,value:p,label:u(t[l]),alias:d(t[r]),isVisible:h(t.isVisible,!0),isGroupTitle:g};if(s&&(m.isDisabled=-1!==o.indexOf(p)),t.isGroupOption&&(m.isGroupOption=!0,m.groupIndex=t.groupIndex),c&&(m.description=u(t[a])),i.push(m),v++,g){var b=m.index;f=!0,y.forEach((function(t){t.isGroupOption=!0,t.groupIndex=b,e(t)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=f,this.setSortedOptions()}},{key:"setServerOptions",value:function(t){var i=this;this.setOptionsMethod(t,!0);var o=this.selectedOptions,s=this.options,n=!1;if(o.length){var l=s.map((function(e){return e.value}));n=!0,o.forEach((function(e){-1===l.indexOf(e.value)&&(e.isVisible=!1,s.push(e))})),this.setOptionsMethod(s,!0)}this.allowNewOption&&this.searchValue&&(s.some((function(e){return e.label.toLowerCase()===i.searchValue}))||(n=!0,this.setNewOption())),n&&(this.setVisibleOptionsCount(),this.multiple&&this.toggleAllOptionsClass(),this.addSeachToSelection&&this.toggleAddSearchClass(),this.setValueText()),e.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSelectedOptions",value:function(){var e=this.selectedValues;this.selectedOptions=this.options.filter((function(t){return-1!==e.indexOf(t.value)}))}},{key:"setSortedOptions",value:function(){var e=n(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(e=this.hasOptionGroup?this.sortOptionsGroup(e):this.sortOptions(e)),this.sortedOptions=e}},{key:"setVisibleOptions",value:function(){var e=n(this.sortedOptions),t=2*this.optionsCount,i=this.getVisibleStartIndex(),o=this.getNewOption(),s=i+t-1,l=0;o&&(o.visibleIndex=l,l++),e=e.filter((function(e){var t=!1;return e.isVisible&&!e.isCurrentNew&&(t=l>=i&&l<=s,e.visibleIndex=l,l++),t})),o&&(e=[o].concat(n(e))),this.visibleOptions=e,this.renderOptions()}},{key:"setOptionsPosition",value:function(t){void 0===t&&(t=this.getVisibleStartIndex());var i=t*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),e.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var t=this,i=this.getVisibleOptions(),o=this.hasOptionDescription;i.forEach((function(i){var s=t.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));e.DomUtils.setData(s.querySelector(".vscomp-option-text"),"tooltip",i.label),o&&e.DomUtils.setData(s.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(t,i,o){t?Array.isArray(t)?this.selectedValues=n(t):this.selectedValues=[t]:this.selectedValues=[];var s=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=s,this.$hiddenInput.value=s,void 0===i?this.selectedIndexes=[]:Array.isArray(i)?this.selectedIndexes=n(i):this.selectedIndexes=[i];var l="";if(this.multiple?l=this.selectedIndexes:null!==this.selectedIndexes[0]&&void 0!==this.selectedIndexes[0]&&(l=this.selectedIndexes[0]),this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===p?e.DomUtils.removeClass(this.$wrapper,"has-value"):e.DomUtils.toggleClass(this.$wrapper,"has-value",e.Utils.isNotEmpty(this.selectedValues)),e.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),o&&this.dispatchEvent(this.$ele,"change"),this.showSelectedOptionsFirst){var a=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=a}}},{key:"setValueText",value:function(){var t=[],i=[],o=this.selectedValues,s=this.selectedIndexes,n=o.length,a=this.noOfDisplayValues,r=0;if(this.isAllSelected&&n>1)this.$valueText.innerHTML="".concat(n," ").concat(this.itemsSelectedMessage);else{var c,u=l(this.options);try{for(u.s();!(c=u.n()).done;){var h=c.value;if(!h.isCurrentNew){if(r>50||!this.multiple&&1===r)break;var d=h.value,v=h.label,f=h.index;if(-1!==o.indexOf(d)||-1!==s.indexOf(f)){if(r>=o.length)break;t.push(v),++r<=a&&i.push('<span class="vscomp-value-tag">'.concat(v,"</span>"))}}}}catch(e){u.e(e)}finally{u.f()}var y=n-a;y>0&&i.push('<span class="vscomp-value-tag more-value-count">+ '.concat(y," more...</span>"));var g=t.join(", ");if(""===g||o&&o[0]===p)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=g,this.multiple){var m=this.maxValues;if(e.DomUtils.hasEllipsis(this.$valueText)||m){var b="".concat(n);m&&(b+=" / ".concat(m)),this.$valueText.innerHTML="".concat(b," ").concat(this.itemsSelectedMessage)}else i=[]}}e.DomUtils.setData(this.$valueText,"tooltip",i.join(", "))}},{key:"setSearchValue",value:function(t,i,o){if(t!==this.searchValueOriginal||o){i||(this.$searchInput.value=t);var s=t.toLowerCase().trim();if(this.searchValue=s,this.searchValueOriginal=t,e.DomUtils.toggleClass(this.$wrapper,"has-search-value",t),this.appendToBody&&e.DomUtils.toggleClass(this.$dropboxEl,"has-search-value",t),this.hasServerSearch)this.serverSearch(s);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(e){if(!e.isCurrentNew){var t=r(e,s,a,n);t.isVisible&&l++,a||(a=t.hasExactOption)}})),this.allowNewOption&&(s&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions(),this.afterSetSearchValue(),this.searchCallback&&this.searchCallback(s)}}}},{key:"setVisibleOptionsCount",value:function(){var e,t=0,i=!1,o=this.searchValue,s=this.showOptionsOnlyOnSearch,n=this.isOptionVisible.bind(this);this.hasOptionGroup&&(e=this.getVisibleOptionGroupsMapping(o)),this.options.forEach((function(l){var a;l.isCurrentNew||(s&&!o?(l.isVisible=!1,a={isVisible:!1,hasExactOption:!1}):a=n(l,o,i,e),a.isVisible&&t++,i||(i=a.hasExactOption))})),this.allowNewOption&&(o&&!i?(this.setNewOption(),t++):this.removeNewOption()),this.visibleOptionsCount=t,this.afterSetVisibleOptionsCount()}},{key:"setOptionProp",value:function(e,t,i){this.options[e]&&(this.options[e][t]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(t){var i;t?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(e.DomUtils.setStyle(this.$noOptions,"height",i),e.DomUtils.setStyle(this.$noSearchResults,"height",i))),e.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(t)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var t=e.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var o=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,n=parseFloat(this.dropboxWidth),l=o.left+n>s,a=n>o.right;l&&!a&&(i=!0)}if(this.appendToBody){if("undefined"!=typeof screenfull&&screenfull.isFullscreen&&screenfull.element){var r=document.createDocumentFragment();r.appendChild(this.$dropboxContainer),screenfull.element.appendChild(r)}else{var c=document.createDocumentFragment();c.appendChild(this.$dropboxContainer),this.$body.appendChild(c)}var u=this.$ele.getBoundingClientRect(),p=u.left+window.scrollX,h=u.top+window.scrollY;if(this.$dropboxEl.style.width="".concat(this.dropboxWidth?parseFloat(this.dropboxWidth):u.width,"px"),this.$dropboxEl.style.left="".concat(p,"px"),"top"===t.vertical){var d=this.$dropboxContainer.getBoundingClientRect();this.$dropboxEl.style.top="".concat(h-d.height-4,"px")}else this.$dropboxEl.style.top="".concat(h+u.height+4,"px");e.DomUtils.toggleClass(this.$dropboxContainer,"position-top","top"===t.vertical),e.DomUtils.toggleClass(this.$dropboxContainer,"position-left",i)}else e.DomUtils.toggleClass(this.$wrapper,"position-top","top"===t.vertical),e.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var e=this.searchValueOriginal.trim();if(e){var t=this.getNewOption();if(t){var i=t.index;this.setOptionProp(i,"value",e),this.setOptionProp(i,"label",e)}else{var o={value:e,label:e,isCurrentNew:!0};this.addOption(o)}}}},{key:"setSelectedProp",value:function(){var e=this.selectedValues;this.options.forEach((function(t){-1!==e.indexOf(t.value)&&(t.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var e=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return e<0&&(e=0),e}},{key:"getTooltipAttrText",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":t||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":o};return e.DomUtils.getAttributesText(s)}},{key:"getOptionObj",value:function(t){if(t){var i=e.Utils.getString;return{index:t.index,value:i(t.value),label:i(t.label),description:i(t.description),alias:this.getAlias(t.alias),isCurrentNew:t.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var e=this.options[this.lastOptionIndex];if(e&&e.isCurrentNew)return e}},{key:"getOptionIndex",value:function(e){var t;return e&&this.options.some((function(i){if(i.value==e)return t=i.index,!0})),t}},{key:"getNewValue",value:function(){var e=this.newValues,t=this.selectedValues.filter((function(t){return-1!==e.indexOf(t)}));return this.multiple?t:t[0]}},{key:"getAlias",value:function(e){return e=e?(e=Array.isArray(e)?e.join(","):e.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var e,t=[],i=this.selectedValues,o=l(this.options);try{for(o.s();!(e=o.n()).done;){var s=e.value;-1!==i.indexOf(s.value)&&t.push(s.label)}}catch(e){o.e(e)}finally{o.f()}return this.multiple?t:t[0]||""}},{key:"getSelectedOptions",value:function(){var e=this.selectedValues,t=[],i=this.valueKey,o=this.labelKey;return this.options.forEach((function(n){if(-1!==e.indexOf(n.value)){var l,a=(s(l={},i,n.value),s(l,o,n.label),l);n.isNew&&(a.isNew=!0),t.push(a)}})),this.multiple?t:t[0]}},{key:"getVisibleOptionGroupsMapping",value:function(e){var t=this.options,i={},o=this.isOptionVisible;return(t=this.structureOptionGroup(t)).forEach((function(t){i[t.index]=t.options.some((function(t){return o(t,e).isVisible}))})),i}},{key:"getOptionsCount",value:function(e){if(this.showAsPopup){var t=80*window.innerHeight/100-48;this.hasSearchContainer&&(t-=40),e=Math.floor(t/this.optionHeight)}else e=parseInt(e);return e}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(t,i){var o="next"===i?"nextElementSibling":"previousElementSibling";do{t&&(t=t[o])}while(e.DomUtils.hasClass(t,"disabled")||e.DomUtils.hasClass(t,"group-title"));return t}},{key:"openDropbox",value:function(t){var i=this;this.setDropboxPosition(),e.DomUtils.removeClass(this.$wrapper,"closed"),e.DomUtils.removeClass(this.$dropboxEl,"opened"),setTimeout((function(){e.DomUtils.addClass(i.$wrapper,"opened"),e.DomUtils.addClass(i.$dropboxEl,"opened"),t||(i.moveSelectedOptionsFirst(),e.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(e.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput(),e.DomUtils.dispatchEvent(i.$ele,"opened"))}),0)}},{key:"closeDropbox",value:function(t){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var o=t?0:this.transitionDuration;setTimeout((function(){e.DomUtils.removeClass(i.$wrapper,"opened focused"),e.DomUtils.removeClass(i.$dropboxEl,"opened focused"),i.removeOptionFocus(),t||(i.isPopupActive&&(e.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1),e.DomUtils.dispatchEvent(i.$ele,"closed"))}),0),setTimeout((function(){e.DomUtils.addClass(i.$wrapper,"closed"),e.DomUtils.removeClass(i.$dropboxEl,"closed"),i.appendToBody&&(i.$dropboxEl.style.left="-2000px",i.$dropboxEl.style.top="-2000px")}),o)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return e.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var e=this.$searchInput;e&&e.focus()}},{key:"focusOption",value:function(t,i){var o,s=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)o=i;else if(s)o=this.getSibling(s,t);else{var n=this.getFirstVisibleOptionIndex();o=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(e.DomUtils.hasClass(o,"disabled")||e.DomUtils.hasClass(o,"group-title"))&&(o=this.getSibling(o,"next"))}o&&o!==s&&(s&&e.DomUtils.removeClass(s,"focused"),e.DomUtils.addClass(o,"focused"),this.toggleFocusedProp(e.DomUtils.getData(o,"index"),!0),t&&this.moveFocusedOptionToView(o))}},{key:"moveFocusedOptionToView",value:function(t){if(t||(t=this.$dropboxContainer.querySelector(".vscomp-option.focused")),t){var i,o=this.$optionsContainer.getBoundingClientRect(),s=t.getBoundingClientRect(),n=o.top,l=o.bottom,a=o.height,r=s.top,c=s.bottom,u=s.height,p=t.offsetTop,h=e.DomUtils.getData(this.$options,"top","number");n>r?i=p+h:l<c&&(i=p-a+u+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var t=this.$dropboxContainer.querySelector(".vscomp-option.focused");t&&(e.DomUtils.removeClass(t,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(t){if(t){var i=!e.DomUtils.hasClass(t,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var o=this.selectedValues,s=this.selectedIndexes,n=parseInt(e.DomUtils.getData(t,"index")),l=this.options[n].value;if(this.toggleSelectedProp(n,i),i){if(this.multiple)o.push(l),s.push(n),this.toggleAllOptionsClass();else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[l],s=[n];var a=this.$ele.querySelector(".vscomp-option.selected");a&&e.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}e.DomUtils.toggleClass(t,"selected")}else this.multiple&&(e.DomUtils.toggleClass(t,"selected"),e.Utils.removeItemFromArray(o,l),e.Utils.removeItemFromArray(s,n),this.toggleAllOptionsClass(!1));e.DomUtils.hasClass(t,"current-new")&&this.beforeSelectNewValue(),this.setValue(o,s,!0)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(t){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof t&&(t=!e.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],o=[],s=this.selectAllOnlyVisible;this.options.forEach((function(e,n){e.isDisabled||e.isCurrentNew||e.isGroupTitle||(!t||s&&!e.isVisible?e.isSelected=!1:(e.isSelected=!0,i.push(e.value),s&&!e.isVisible||o.push(n)))})),this.toggleAllOptionsClass(t),this.toggleAddSearchClass(t),this.setValue(i,o,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(t){if("boolean"!=typeof t){t=!1,this.options.length&&(t=!this.options.some((function(e){return!e.isSelected&&!e.isDisabled&&!e.isGroupTitle})));var i="boolean"==typeof t;i||(t=this.isAllOptionsSelected())}e.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",t),this.selectAllOnlyVisible&&i?this.isAllSelected=this.isAllOptionsSelected():this.isAllSelected=t}},{key:"toggleAddSearchClass",value:function(t){var i=this.getVisibleOptions();e.DomUtils.toggleClass(this.$toggleAddSeachContainer,"hidden",!i||!i.length),"boolean"!=typeof t&&(t=!1,this.options.length&&(t=!this.options.some((function(e){return e.isVisible&&!e.isSelected&&!e.isDisabled&&!e.isGroupTitle}))),"boolean"==typeof t||(t=!1)),e.DomUtils.toggleClass(this.$toggleAddSeachCheckbox,"checked",t)}},{key:"isAllOptionsSelected",value:function(){var e=!1;return this.options.length&&(e=!this.options.some((function(e){return!e.isSelected&&!e.isDisabled&&!e.isGroupTitle}))),e}},{key:"toggleFocusedProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(e,"isFocused",t),this.focusedOptionIndex=e}},{key:"toggleSelectedProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(e,"isSelected",t)}},{key:"scrollToTop",value:function(){var e=!this.isOpened();e&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),e&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(e){e.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"addOption",value:function(e,t){if(e){this.lastOptionIndex++,e.index=this.lastOptionIndex;var i=this.getOptionObj(e);this.options.push(i),this.sortedOptions.push(i),t&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(e){(e||0==e)&&(this.options.splice(e,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var e=this.getNewOption();e&&this.removeOption(e.index)}},{key:"sortOptions",value:function(e){return e.sort((function(e,t){return t.value===p&&e.value!==p?0:e.isSelected||t.isSelected?e.isSelected&&(!t.isSelected||e.index<t.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(e){var t=this.sortOptions;return(e=this.structureOptionGroup(e)).forEach((function(e){var i=e.options;e.isSelected=i.some((function(e){return e.isSelected})),e.isSelected&&t(i)})),t(e),this.destructureOptionGroup(e)}},{key:"isOptionVisible",value:function(e,t,i,o){var s=e.label.toLowerCase(),n=e.description,l=e.alias,a=-1!==s.indexOf(t);return e.isGroupTitle&&(a=o[e.index]),l&&!a&&(a=-1!==l.indexOf(t)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(t)),e.isVisible=a,i||(i=s===t),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(e){var t=[],i={};return e.forEach((function(e){if(e.isGroupTitle){var o=[];e.options=o,i[e.index]=o,t.push(e)}})),e.forEach((function(e){e.isGroupOption&&i[e.groupIndex].push(e)})),t}},{key:"destructureOptionGroup",value:function(e){var t=[];return e.forEach((function(e){t.push(e),t=t.concat(e.options)})),t}},{key:"serverSearch",value:function(t){e.DomUtils.removeClass(this.$wrapper,"has-no-options"),e.DomUtils.addClass(this.$wrapper,"server-searching"),this.setSelectedOptions(),this.onServerSearch(t,this)}}],a=[{key:"init",value:function(e){var i=e.ele;if(i){var o=!1;if("string"!=typeof i||(i=document.querySelector(i))){void 0===i.length&&(i=[i],o=!0);var s=[];return i.forEach((function(i){e.ele=i,s.push(new t(e))})),o?s[0]:s}}}},{key:"resetForm",value:function(e){var t=e.target.closest("form");t&&t.querySelectorAll(".vscomp-wrapper").forEach((function(e){e.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(e,t){this.virtualSelect.setValueMethod(e,t)}},{key:"setOptionsMethod",value:function(e,t){this.virtualSelect.setOptionsMethod(e,t)}},{key:"setDisabledOptionsMethod",value:function(e){this.virtualSelect.setDisabledOptionsMethod(e)}},{key:"toggleSelectAll",value:function(e){this.virtualSelect.toggleAllOptions(e)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(e){this.virtualSelect.addOption(e,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"getSelectedOptionsMethod",value:function(){return this.virtualSelect.getSelectedOptions()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"setSearchValueMethod",value:function(e){return this.virtualSelect.setSearchValue(e)}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(e){e.parentElement.virtualSelect.onResize()}))}}],o&&c(i.prototype,o),a&&c(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}();document.addEventListener("reset",d.resetForm),window.addEventListener("resize",d.onResizeMethod),window.VirtualSelect=d})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERvbVV0aWxzIHtcclxuICBzdGF0aWMgYWRkQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKCR0aGlzKSA9PiB7XHJcbiAgICAgICR0aGlzLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKS5mb3JFYWNoKCgkdGhpcykgPT4ge1xyXG4gICAgICAkdGhpcy5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB0b2dnbGVDbGFzcygkZWxlLCBjbGFzc05hbWUsIGlzQWRkKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc0FkZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlzQWRkID0gQm9vbGVhbihpc0FkZCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzQWRkZWQ7XHJcblxyXG4gICAgRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoJHRoaXMpID0+IHtcclxuICAgICAgaXNBZGRlZCA9ICR0aGlzLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBpc0FkZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaXNBZGRlZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYXNDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzRWxsaXBzaXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZS5zY3JvbGxXaWR0aCA+ICRlbGUub2Zmc2V0V2lkdGg7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGF0YSgkZWxlLCBuYW1lLCB0eXBlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB2YWx1ZSA9ICRlbGUgPyAkZWxlLmRhdGFzZXRbbmFtZV0gOiAnJztcclxuXHJcbiAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xyXG4gICAgfSAvL2Vsc2Uge1xyXG4gICAgLy8gICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgLy8gICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgIC8vICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgLy8gICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXREYXRhKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgJGVsZS5kYXRhc2V0W25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0QXR0cigkZWxlLCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZWxlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0QXR0ckZyb21FbGUoJGZyb20sICR0bywgYXR0ckxpc3QsIHZhbHVlTGVzc1Byb3BzKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuXHJcbiAgICBhdHRyTGlzdC5mb3JFYWNoKChhdHRyKSA9PiB7XHJcbiAgICAgIHZhbHVlc1thdHRyXSA9ICRmcm9tLmdldEF0dHJpYnV0ZShhdHRyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF0dHJMaXN0LmZvckVhY2goKGF0dHIpID0+IHtcclxuICAgICAgbGV0IHZhbHVlID0gdmFsdWVzW2F0dHJdO1xyXG5cclxuICAgICAgaWYgKHZhbHVlIHx8ICh2YWx1ZUxlc3NQcm9wcy5pbmRleE9mKGF0dHIpICE9PSAtMSAmJiB2YWx1ZSA9PT0gJycpKSB7XHJcbiAgICAgICAgJHRvLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFN0eWxlKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRTdHlsZXMoJGVsZSwgcHJvcHMpIHtcclxuICAgIGlmICghJGVsZSB8fCAhcHJvcHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKChuYW1lKSA9PiB7XHJcbiAgICAgICRlbGUuc3R5bGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEVsZW1lbnRzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRlbGUuZm9yRWFjaCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGUgPSBbJGVsZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkRXZlbnQoJGVsZSwgZXZlbnRzLCBjYWxsYmFjaykge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBldmVudHMgPSBVdGlscy5yZW1vdmVBcnJheUVtcHR5KGV2ZW50cy5zcGxpdCgnICcpKTtcclxuXHJcbiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgICAgJGVsZS5mb3JFYWNoKCgkdGhpcykgPT4ge1xyXG4gICAgICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkaXNwYXRjaEV2ZW50KCRlbGUsIGV2ZW50TmFtZSwgYnViYmxlcyA9IGZhbHNlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUgPSBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKTtcclxuXHJcbiAgICAvKiogdXNpbmcgc2V0VGltZW91dCB0byB0cmlnZ2VyIGFzeW5jaHJvbm91cyBldmVudCAqL1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICRlbGUuZm9yRWFjaCgoJHRoaXMpID0+IHtcclxuICAgICAgICAkdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsgYnViYmxlcyB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKiogY29udmVydCBvYmplY3QgdG8gZG9tIGF0dHJpYnV0ZXMgKi9cclxuICBzdGF0aWMgZ2V0QXR0cmlidXRlc1RleHQoZGF0YSkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuXHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuIGh0bWw7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBkYXRhKSB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IGRhdGFba107XHJcblxyXG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGh0bWwgKz0gYCAke2t9PVwiJHt2YWx1ZX1cIiBgO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0U3R5bGVUZXh0KHByb3BzLCBza2lwQXR0ck5hbWUpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XHJcbiAgICAgIHJlc3VsdCArPSBgJHtrfTogJHtwcm9wc1trXX07YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmICFza2lwQXR0ck5hbWUpIHtcclxuICAgICAgcmVzdWx0ID0gYHN0eWxlPVwiJHtyZXN1bHR9XCJgO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TW9yZVZpc2libGVTaWRlcygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBib3ggPSAkZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGF2YWlsYWJsZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgbGV0IGxlZnRBcmVhID0gYm94LmxlZnQ7XHJcbiAgICBsZXQgdG9wQXJlYSA9IGJveC50b3A7XHJcbiAgICBsZXQgcmlnaHRBcmVhID0gYXZhaWxhYmxlV2lkdGggLSBsZWZ0QXJlYSAtIGJveC53aWR0aDtcclxuICAgIGxldCBib3R0b21BcmVhID0gYXZhaWxhYmxlSGVpZ2h0IC0gdG9wQXJlYSAtIGJveC5oZWlnaHQ7XHJcbiAgICBsZXQgaG9yaXpvbnRhbCA9IGxlZnRBcmVhID4gcmlnaHRBcmVhID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuICAgIGxldCB2ZXJ0aWNhbCA9IHRvcEFyZWEgPiBib3R0b21BcmVhID8gJ3RvcCcgOiAnYm90dG9tJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBob3Jpem9udGFsLFxyXG4gICAgICB2ZXJ0aWNhbCxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVdGlscyB7XHJcbiAgc3RhdGljIGdldFN0cmluZyh0ZXh0KSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB0ZXh0ICE9PSAndW5kZWZpbmVkJyAmJiB0ZXh0ICE9PSBudWxsKSB8fCB0ZXh0ID09PSAwXHJcbiAgICAgID8gdGV4dC50b1N0cmluZygpXHJcbiAgICAgIDogJyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29udmVydFRvQm9vbGVhbih2YWx1ZSwgZGVmYXVsdFZhbHVlID0gZmFsc2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNFbXB0eSh2YWx1ZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTm90RW1wdHkodmFsdWUpIHtcclxuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVJdGVtRnJvbUFycmF5KGFycmF5LCB2YWx1ZSwgY2xvbmVBcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2xvbmVBcnJheSkge1xyXG4gICAgICBhcnJheSA9IFsuLi5hcnJheV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XHJcblxyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVBcnJheUVtcHR5KGFycmF5KSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheS5maWx0ZXIoKGQpID0+ICEhZCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2VuZXJhdGVVVUlEKCkge1xyXG4gICAgcmV0dXJuIChbMWU3XSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCAoYykgPT5cclxuICAgICAgKFxyXG4gICAgICAgIGMgXlxyXG4gICAgICAgIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmICgxNSA+PiAoYyAvIDQpKSlcclxuICAgICAgKS50b1N0cmluZygxNilcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgVXRpbHMsIERvbVV0aWxzIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5jb25zdCB2aXJ0dWFsU2VsZWN0VmVyc2lvbiA9ICd2MS4wLjYnO1xyXG5jb25zdCBkcm9wYm94Q2xvc2VCdXR0b25GdWxsSGVpZ2h0ID0gNDg7XHJcbmNvbnN0IHNlYXJjaEhlaWdodCA9IDQwO1xyXG5jb25zdCBub25lT3B0aW9uVmFsdWUgPSAneyN2aXJ0dWFsLXNlbGVjdC1ub25lLW9wdGlvbiN9JztcclxuXHJcbmNvbnN0IGtleURvd25NZXRob2RNYXBwaW5nID0ge1xyXG4gIDEzOiAnb25FbnRlclByZXNzJyxcclxuICAyNzogJ29uRXNjUHJlc3MnLFxyXG4gIDM4OiAnb25VcEFycm93UHJlc3MnLFxyXG4gIDQwOiAnb25Eb3duQXJyb3dQcmVzcycsXHJcbn07XHJcblxyXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIFZpcnR1YWxTZWxlY3QgKi9cclxuZXhwb3J0IGNsYXNzIFZpcnR1YWxTZWxlY3Qge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIFZpcnR1YWxTZWxlY3RcclxuICAgKiBAcHJvcGVydHkgeyhlbGVtZW50fHN0cmluZyl9IGVsZSAtIFBhcmVudCBlbGVtZW50IHRvIHJlbmRlciBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gb3B0aW9ucyAtIEFycmF5IG9mIG9iamVjdCB0byBzaG93IGFzIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLnZhbHVlIC0gVmFsdWUgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10ubGFiZWwgLSBEaXNwbGF5IHRleHQgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10uZGVzY3JpcHRpb24gLSBUZXh0IHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IG9wdGlvbnNbXS5hbGlhcyAtIEFsdGVybmF0aXZlIGxhYmVscyB0byB1c2Ugb24gc2VhcmNoLiBBcnJheSBvZiBzdHJpbmcgb3IgY29tbWEgc2VwYXJhdGVkIHN0cmluZy5cclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBvcHRpb25zW10ub3B0aW9ucyAtIExpc3Qgb2Ygb3B0aW9ucyBmb3Igb3B0aW9uIGdyb3VwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt2YWx1ZUtleT12YWx1ZV0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgdmFsdWUgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtsYWJlbEtleT1sYWJlbF0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgbGFiZWwgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkZXNjcmlwdGlvbktleT1kZXNjcmlwdGlvbl0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgZGVzY3JpcHRpb24gZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthbGlhc0tleT1hbGlhc10gLSBLZXkgbmFtZSB0byBnZXQgYWxpYXMgZnJvbSBvcHRpb25zIG9iamVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpcGxlPWZhbHNlXSAtIEVuYWJsZSBtdWx0aXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NlYXJjaD1mYWxzZV0gLSBFbmFibGUgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGlkZUNsZWFyQnV0dG9uPWZhbHNlXSAtIEhpZGUgY2xlYXIgYnV0dG9uXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b1NlbGVjdEZpcnN0T3B0aW9uPWZhbHNlXSAtIFNlbGVjdCBmaXJzdCBvcHRpb24gYnkgZGVmYXVsdCBvbiBsb2FkXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGFzT3B0aW9uRGVzY3JpcHRpb249ZmFsc2VdIC0gSGFzIGRlc2NyaXB0aW9uIHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVTZWxlY3RBbGw9ZmFsc2VdIC0gRGlzYWJsZSBzZWxlY3QgYWxsIGZlYXR1cmUgb2YgbXVsdGlwbGUgc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25zQ291bnQ9NXw0XSAtIE5vLm9mIG9wdGlvbnMgdG8gc2hvdyBvbiB2aWV3cG9ydFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb3B0aW9uSGVpZ2h0PTQwcHh8NjBweF0gLSBIZWlnaHQgb2YgZWFjaCBkcm9wZG93biBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3NpdGlvbj1hdXRvXSAtIFBvc2l0aW9uIG9mIGRyb3Bib3ggKHRvcCwgYm90dG9tLCBhdXRvKVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2Vob2xkZXI9U2VsZWN0XSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgc2VsZWN0ZWRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vT3B0aW9uc1RleHQ9Tm8gb3B0aW9ucyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyBvcHRpb25zIHRvIHNob3dcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vU2VhcmNoUmVzdWx0c1RleHQ9Tm8gcmVzdWx0cyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyByZXN1bHRzIG9uIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc2VsZWN0QWxsVGV4dD1TZWxlY3QgYWxsXSAtIFRleHQgdG8gc2hvdyBuZWFyIHNlbGVjdCBhbGwgY2hlY2tib3ggd2hlbiBzZWFyY2ggaXMgZGlzYWJsZWRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2FkZFNlYXJjaFRvU2VsZWN0aW9uVGV4dD1BZGQgVG8gU2VsZWN0aW9uXSAtIFRleHQgdG8gc2hvdyBuZWFyIHNlbGVjdCBhbGwgY2hlY2tib3ggd2hlbiBzZWFyY2ggaXMgZGlzYWJsZWRcclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBbZGlzYWJsZWRPcHRpb25zXSAtIE9wdGlvbnMgdG8gZGlzYWJsZSAoYXJyYXkgb2YgdmFsdWVzKVxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IFtzZWxlY3RlZFZhbHVlXSAtIFNpbmdsZSB2YWx1ZSBvciBhcnJheSBvZiB2YWx1ZXMgdG8gc2VsZWN0IG9uIGluaXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaWxlbnRJbml0aWFsVmFsdWVTZXQ9ZmFsc2VdIC0gVG8gYXZvaWQgXCJjaGFuZ2UgZXZlbnRcIiB0cmlnZ2VyIG9uIHNldHRpbmcgaW5pdGlhbCB2YWx1ZVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZHJvcGJveFdpZHRoXSAtIEN1c3RvbSB3aWR0aCBmb3IgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4PTFdIC0gQ1NTIHotaW5kZXggdmFsdWUgZm9yIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW25vT2ZEaXNwbGF5VmFsdWVzPTUwXSAtIE1heGltdW0gbm8ub2YgdmFsdWVzIHRvIHNob3cgaW4gdGhlIHRvb2x0aXAgZm9yIG11bHRpLXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsbG93TmV3T3B0aW9uPWZhbHNlXSAtIEFsbG93IHRvIGFkZCBuZXcgb3B0aW9uIGJ5IHNlYXJjaGluZ1xyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21hcmtTZWFyY2hSZXN1bHRzPWZhbHNlXSAtIE1hcmsgbWF0Y2hlZCB0ZXJtIGluIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwRm9udFNpemU9MTRweF0gLSBGb250IHNpemUgZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBBbGlnbm1lbnQ9Y2VudGVyXSAtIENTUyBUZXh0IGFsaWdubWVudCBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcE1heFdpZHRoPTMwMHB4XSAtIENTUyBtYXggd2lkdGggZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3Q9ZmFsc2VdIC0gU2hvdyBzZWxlY3RlZCBvcHRpb25zIGF0IHRoZSB0b3Agb2YgdGhlIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25hbWVdIC0gTmFtZSBhdHRyaWJ1dGUgZm9yIGhpZGRlbiBpbnB1dFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tlZXBBbHdheXNPcGVuXSAtIEtlZXAgZHJvcGJveCBhbHdheXMgb3BlbiB3aXRoIGZpeGVkIGhlaWdodFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4VmFsdWVzPTBdIC0gTWF4aW11bSBuby5vZiBvcHRpb25zIGFsbG93ZWQgdG8gY2hvb3NlIGluIG11bHRpcGxlIHNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYWRkaXRpb25hbENsYXNzZXNdIC0gQWRkaXRpb25hbCBjbGFzc2VzIGZvciB3cmFwcGVyIGVsZW1lbnRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93RHJvcGJveEFzUG9wdXA9dHJ1ZV0gLSBTaG93IGRyb3Bib3ggYXMgcG9wdXAgb24gc21hbGwgc2NyZWVuIGxpa2UgbW9iaWxlXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3B1cERyb3Bib3hCcmVha3BvaW50PTU3NnB4XSAtIE1heGltdW0gc2NyZWVuIHdpZHRoIHRoYXQgYWxsb3dlZCB0byBzaG93IGRyb3Bib3ggYXMgcG9wdXBcclxuICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbb25TZXJ2ZXJTZWFyY2hdIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gaW50ZWdyYXRlIHNlcnZlciBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3NlYXJjaFBsYWNlaG9sZGVyPVNlYXJjaC4uLl0gLSBUZXh0IHRvIHNob3cgaW5zaWRlIHNlYXJjaCBpbnB1dFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsbG93Tm9uZU9wdGlvbj1mYWxzZV0gLSBJbiBzaW5nbGUgc2VsZWN0aW9uIG1vZGUgb25seSBhbmQgd2hlbiBrZWVwIGFsd2F5cyBvcGVuIGlzIG9uOiBkaXNwbGF5IGEgbm9uZSBvcHRpb24gdGhhdCBjbGVhcnMgdGhlIHNlbGVjdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9uZU9wdGlvblRleHQ9Tm9uZV0gLSBUZXh0IHRvIGJlIGRpc3BsYXkgaWYgYWxsb3dOb25lIG9wdGlvbiBpcyBhY3RpdmVcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthcHBlbmRUb0JvZHk9ZmFsc2VdIC0gV2hlbiBzZXQgdG8gdHJ1ZSBhbmQga2VlcEFsd2F5cyBvcGVuIGlzIG9mZiB3ZSBhcmUgYWRkaW5nIHRoZSBkcm9wYm94IGVsZW1lbnQgdG8gdGhlIGJvZHlcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthZGRTZWFjaFRvU2VsZWN0aW9uPWZhbHNlXSAtIEFkZCBhbiBvcHRpb24gb24gc2VhcmNoIHRvIGFkZCB0aGUgcmVzdWx0cyB0byBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzZWFyY2hDYWxsYmFjaz1udWxsXSAtIEFkZCBhbiBvcHRpb24gdG8gY2FsbCBhIGZ1bmN0aW9uIHdoZW4gYSBzZWFyY2ggaXMgaGFwcGVuaW5nXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2VsZWN0QWxsT25seVZpc2libGU9dHJ1ZV0gLSBTZWxlY3Qgb25seSB2aXNpYmxlIG9wdGlvbnMgb24gY2xpY2tpbmcgc2VsZWN0IGFsbCBjaGVja2JveCB3aGVuIG9wdGlvbnMgZmlsdGVyZWQgYnkgc2VhcmNoXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5zZXRQcm9wcyhvcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMob3B0aW9ucy5kaXNhYmxlZE9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucy5vcHRpb25zKTtcclxuICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKGBDb3VsZG4ndCBpbml0aWF0ZSBWaXJ0dWFsIFNlbGVjdGApO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIHJlbmRlciBtZXRob2RzIC0gc3RhcnQgKi9cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHdyYXBwZXJDbGFzc2VzID0gJ3ZzY29tcC13cmFwcGVyJztcclxuICAgIGxldCB2YWx1ZVRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnJywgIXRoaXMubXVsdGlwbGUsIHRydWUpO1xyXG4gICAgbGV0IGNsZWFyQnV0dG9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdDbGVhcicpO1xyXG5cclxuICAgIGxldCBkcm9wYm94Q29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICAgICd6LWluZGV4JzogdGhpcy56SW5kZXgsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGdldFdyYXBwZXJDbGFzc2VzID0gKCkgPT4ge1xyXG4gICAgICBsZXQgY2xhc3NlcyA9ICcnO1xyXG5cclxuICAgICAgaWYgKHRoaXMuYWRkaXRpb25hbENsYXNzZXMpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgJyArIHRoaXMuYWRkaXRpb25hbENsYXNzZXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIG11bHRpcGxlJztcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtc2VsZWN0LWFsbCc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcG9zaXRpb24tdG9wJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLmhpZGVDbGVhckJ1dHRvbikge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtY2xlYXItYnV0dG9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcga2VlcC1hbHdheXMtb3BlbiBvcGVuZWQnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBjbG9zZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBzaG93LWFzLXBvcHVwJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5kcm9wYm94V2lkdGgpIHtcclxuICAgICAgICAgIGRyb3Bib3hDb250YWluZXJTdHlsZS53aWR0aCA9IHRoaXMuZHJvcGJveFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1zZWFyY2gtaW5wdXQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY2xhc3NlcztcclxuICAgIH07XHJcblxyXG4gICAgd3JhcHBlckNsYXNzZXMgKz0gZ2V0V3JhcHBlckNsYXNzZXMoKTtcclxuXHJcbiAgICB0aGlzLmd1aWQgPSBVdGlscy5nZW5lcmF0ZVVVSUQoKTtcclxuXHJcbiAgICBsZXQgZHJvcGJveENvbnRhaW5lciA9IGA8ZGl2IGlkPVwidnMtJHtcclxuICAgICAgdGhpcy5ndWlkXHJcbiAgICB9XCIgY2xhc3M9XCJ2c2NvbXAtZHJvcGJveC1jb250YWluZXJcIiAke0RvbVV0aWxzLmdldFN0eWxlVGV4dChcclxuICAgICAgZHJvcGJveENvbnRhaW5lclN0eWxlXHJcbiAgICApfT5cclxuICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1kcm9wYm94XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtd3JhcHBlclwiPjwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbG9hZGVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zLWxpc3RcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zXCI+PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1vcHRpb25zXCI+JHt0aGlzLm5vT3B0aW9uc1RleHR9PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1zZWFyY2gtcmVzdWx0c1wiPiR7dGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0fTwvZGl2PlxyXG5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1kcm9wYm94LWNsb3NlLWJ1dHRvblwiPjxpIGNsYXNzPVwidnNjb21wLWNsZWFyLWljb25cIj48L2k+PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmA7XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cIiR7d3JhcHBlckNsYXNzZXN9XCIgdGFiaW5kZXg9XCIwXCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJHt0aGlzLm5hbWV9XCIgY2xhc3M9XCJ2c2NvbXAtaGlkZGVuLWlucHV0XCI+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC12YWx1ZVwiICR7dmFsdWVUb29sdGlwfT5cclxuICAgICAgICAgICAgJHt0aGlzLnBsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1hcnJvd1wiPjwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtY2xlYXItYnV0dG9uIHRvZ2dsZS1idXR0b24tY2hpbGRcIiAke2NsZWFyQnV0dG9uVG9vbHRpcH0+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwidnNjb21wLWNsZWFyLWljb25cIj48L2k+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgJHt0aGlzLmtlZXBBbHdheXNPcGVuIHx8ICF0aGlzLmFwcGVuZFRvQm9keSA/IGRyb3Bib3hDb250YWluZXIgOiAnJ31cclxuXHJcbiAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgdGhpcy4kZWxlLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB0aGlzLiRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5cclxuICAgIHRoaXMuJHdyYXBwZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC10b2dnbGUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLiRjbGVhckJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWNsZWFyLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXRoaXMua2VlcEFsd2F5c09wZW4gJiYgdGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgLy8gQXBwZW5kIHRvIGJvZHkgKGJldGEpXHJcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICB0aGlzLiRib2R5LmFwcGVuZChcclxuICAgICAgICBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChkcm9wYm94Q29udGFpbmVyKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCN2cy0ke3RoaXMuZ3VpZH0udnNjb21wLWRyb3Bib3gtY29udGFpbmVyYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3ZzLSR7dGhpcy5ndWlkfWApO1xyXG5cclxuICAgICAgbGV0IGNsYXNzZXMgPSAndnNjb21wLXdyYXBwZXItYm9keSc7XHJcbiAgICAgIGNsYXNzZXMgKz0gZ2V0V3JhcHBlckNsYXNzZXMoKTtcclxuXHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGRyb3Bib3hFbCwgYCR7Y2xhc3Nlc31gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAnLnZzY29tcC1kcm9wYm94LWNvbnRhaW5lcidcclxuICAgICAgKTtcclxuICAgICAgdGhpcy4kZHJvcGJveEVsID0gdGhpcy4kZWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJHNlYXJjaCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbnMtY29udGFpbmVyJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLiRvcHRpb25zTGlzdCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMtbGlzdCcpO1xyXG4gICAgdGhpcy4kb3B0aW9ucyA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMnKTtcclxuICAgIHRoaXMuJHZhbHVlVGV4dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXZhbHVlJyk7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWhpZGRlbi1pbnB1dCcpO1xyXG4gICAgdGhpcy4kbm9PcHRpb25zID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtbm8tb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kbm9TZWFyY2hSZXN1bHRzID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW5vLXNlYXJjaC1yZXN1bHRzJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFmdGVyUmVuZGVyV3JhcHBlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyT3B0aW9ucygpIHtcclxuICAgIGxldCBodG1sID0gJyc7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSB0aGlzLmdldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICBsZXQgY2hlY2tib3hIdG1sID0gJyc7XHJcbiAgICBsZXQgbmV3T3B0aW9uSWNvbkh0bWwgPSAnJztcclxuICAgIGxldCBtYXJrU2VhcmNoUmVzdWx0cyA9XHJcbiAgICAgIHRoaXMubWFya1NlYXJjaFJlc3VsdHMgJiYgdGhpcy5zZWFyY2hWYWx1ZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIGxldCBzZWFyY2hSZWdleDtcclxuXHJcbiAgICBsZXQgc3R5bGVUZXh0ID0gRG9tVXRpbHMuZ2V0U3R5bGVUZXh0KHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLm9wdGlvbkhlaWdodCArICdweCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobWFya1NlYXJjaFJlc3VsdHMpIHtcclxuICAgICAgc2VhcmNoUmVnZXggPSBuZXcgUmVnRXhwKGAoJHt0aGlzLnNlYXJjaFZhbHVlfSlgLCAnZ2knKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uXCI+PC9zcGFuPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgbGV0IG5ld09wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnTmV3IE9wdGlvbicpO1xyXG4gICAgICBuZXdPcHRpb25JY29uSHRtbCA9IGA8c3BhbiBjbGFzcz1cInZzY29tcC1uZXctb3B0aW9uLWljb25cIiAke25ld09wdGlvblRvb2x0aXB9Pjwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IG9wdGlvbkxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgbGV0IG9wdGlvbkNsYXNzZXMgPSAndnNjb21wLW9wdGlvbic7XHJcbiAgICAgIGxldCBvcHRpb25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsIHRydWUpO1xyXG4gICAgICBsZXQgbGVmdFNlY3Rpb24gPSBjaGVja2JveEh0bWw7XHJcbiAgICAgIGxldCByaWdodFNlY3Rpb24gPSAnJztcclxuICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcblxyXG4gICAgICBpZiAoZC5pc0ZvY3VzZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZm9jdXNlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZGlzYWJsZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtdGl0bGUnO1xyXG4gICAgICAgIGxlZnRTZWN0aW9uID0gJyc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIHNlbGVjdGVkJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtb3B0aW9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuZGVzY3JpcHRpb24pIHtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IGA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvblwiICR7b3B0aW9uVG9vbHRpcH0+JHtkLmRlc2NyaXB0aW9ufTwvZGl2PmA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBjdXJyZW50LW5ldyc7XHJcbiAgICAgICAgcmlnaHRTZWN0aW9uICs9IG5ld09wdGlvbkljb25IdG1sO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cyAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICAgIG9wdGlvbkxhYmVsID0gb3B0aW9uTGFiZWwucmVwbGFjZShzZWFyY2hSZWdleCwgJzxtYXJrPiQxPC9tYXJrPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIiR7b3B0aW9uQ2xhc3Nlc31cIiBkYXRhLXZhbHVlPVwiJHtcclxuICAgICAgICBkLnZhbHVlXHJcbiAgICAgIH1cIiBkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiIGRhdGEtdmlzaWJsZS1pbmRleD1cIiR7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXhcclxuICAgICAgfVwiICR7c3R5bGVUZXh0fT5cclxuICAgICAgICAgICR7bGVmdFNlY3Rpb259XHJcbiAgICAgICAgICA8c3BhbiB0aXRsZT1cIiR7b3B0aW9uTGFiZWx9XCIgY2xhc3M9XCJ2c2NvbXAtb3B0aW9uLXRleHQgJHtcclxuICAgICAgICBkLnZhbHVlID09PSBub25lT3B0aW9uVmFsdWUgPyAnbm9uZScgOiAnJ1xyXG4gICAgICB9XCIgJHtvcHRpb25Ub29sdGlwfT5cclxuICAgICAgICAgICAgJHtvcHRpb25MYWJlbH1cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICR7ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAke3JpZ2h0U2VjdGlvbn1cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy4kb3B0aW9ucy5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgbGV0IGhhc05vT3B0aW9ucyA9ICF0aGlzLm9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IGhhc05vU2VhcmNoUmVzdWx0cyA9ICFoYXNOb09wdGlvbnMgJiYgIXZpc2libGVPcHRpb25zLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoIXRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJyxcclxuICAgICAgICBoYXNOb1NlYXJjaFJlc3VsdHNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSlcclxuICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICAgIHRoaXMuJGRyb3Bib3hFbCxcclxuICAgICAgICAgICdoYXMtbm8tc2VhcmNoLXJlc3VsdHMnLFxyXG4gICAgICAgICAgaGFzTm9TZWFyY2hSZXN1bHRzXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLW9wdGlvbnMnLCBoYXNOb09wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zUG9zaXRpb24oKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Rvb2x0aXAoKTtcclxuICAgIC8vdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VhcmNoKCkge1xyXG4gICAgaWYgKCF0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoZWNrYm94SHRtbCA9ICcnO1xyXG4gICAgbGV0IHNlYXJjaElucHV0ID0gJyc7XHJcblxyXG4gICAgLy8gaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgLy8gICBjaGVja2JveEh0bWwgPSBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1idXR0b25cIj5cclxuICAgIC8vICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvbiB2c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveFwiPjwvc3Bhbj5cclxuICAgIC8vICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtbGFiZWxcIj4ke3RoaXMuc2VsZWN0QWxsVGV4dH08L3NwYW4+XHJcbiAgICAvLyAgICAgPC9zcGFuPmA7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAvLyAgIHNlYXJjaElucHV0ID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidnNjb21wLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaFBsYWNlaG9sZGVyfVwiPlxyXG4gICAgLy8gICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPmA7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY29udGFpbmVyXCI+XHJcbiAgICAvLyAgICAgJHtjaGVja2JveEh0bWx9XHJcbiAgICAvLyAgICAgJHtzZWFyY2hJbnB1dH1cclxuICAgIC8vICAgPC9kaXY+YDtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZWFyY2gpIHtcclxuICAgICAgc2VhcmNoSW5wdXQgPSBgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWlucHV0XCIgcGxhY2Vob2xkZXI9XCIke3RoaXMuc2VhcmNoUGxhY2Vob2xkZXJ9XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSBgPGRpdiBjbGFzcz1cInZzLWNvbXAtc2VsZWN0LWFsbC1jb250YWluZXJcIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWxsLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uIHZzY29tcC10b2dnbGUtYWxsLWNoZWNrYm94XCI+PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1sYWJlbFwiPiR7dGhpcy5zZWxlY3RBbGxUZXh0fTwvc3Bhbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZWFyY2ggJiYgdGhpcy5tdWx0aXBsZSAmJiB0aGlzLmFkZFNlYWNoVG9TZWxlY3Rpb24pIHtcclxuICAgICAgY2hlY2tib3hIdG1sICs9IGA8ZGl2IGNsYXNzPVwidnMtY29tcC1zZWxlY3QtYWRkLXNlYXJjaC1jb250YWluZXJcIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWRkLXNlYXJjaC1idXR0b25cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvbiB2c2NvbXAtdG9nZ2xlLWFkZC1zZWFyY2gtY2hlY2tib3hcIj48L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWRkLXNlYXJjaC1sYWJlbFwiPiR7dGhpcy5hZGRTZWFyY2hUb1NlbGVjdGlvblRleHR9PC9zcGFuPlxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBodG1sID0gYCR7c2VhcmNoSW5wdXR9JHtjaGVja2JveEh0bWx9YDtcclxuXHJcbiAgICB0aGlzLiRzZWFyY2guaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJHNlYXJjaElucHV0ID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRzZWFyY2hDbGVhciA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC1jbGVhcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWxsQnV0dG9uID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLXRvZ2dsZS1hbGwtYnV0dG9uJ1xyXG4gICAgKTtcclxuICAgIHRoaXMuJHRvZ2dsZUFsbENoZWNrYm94ID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLXRvZ2dsZS1hbGwtY2hlY2tib3gnXHJcbiAgICApO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWRkU2VhY2hDb250YWluZXIgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52cy1jb21wLXNlbGVjdC1hZGQtc2VhcmNoLWNvbnRhaW5lcidcclxuICAgICk7XHJcbiAgICB0aGlzLiR0b2dnbGVBZGRTZWFjaEJ1dHRvbiA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC10b2dnbGUtYWRkLXNlYXJjaC1idXR0b24nXHJcbiAgICApO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWRkU2VhY2hDaGVja2JveCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC10b2dnbGUtYWRkLXNlYXJjaC1jaGVja2JveCdcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRzZWFyY2hJbnB1dCwgJ2tleXVwIGNoYW5nZScsICdvblNlYXJjaCcpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRzZWFyY2hDbGVhciwgJ2NsaWNrJywgJ29uU2VhcmNoQ2xlYXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQWxsQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVBbGxPcHRpb25zJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHRvZ2dsZUFkZFNlYWNoQnV0dG9uLCAnY2xpY2snLCAnb25BZGRTZWFjaFRvU2VsZWN0aW9uJyk7XHJcbiAgfVxyXG5cclxuICAvKiogcmVuZGVyIG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGRvbSBldmVudCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBhZGRFdmVudHMoKSB7XHJcbiAgICB0aGlzLmFkZEV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAnb25Eb2N1bWVudENsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHdyYXBwZXIsICdrZXlkb3duJywgJ29uS2V5RG93bicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVCdXR0b24sICdjbGljaycsICdvblRvZ2dsZUJ1dHRvbkNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGNsZWFyQnV0dG9uLCAnY2xpY2snLCAnb25DbGVhckJ1dHRvbkNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGRyb3Bib3hDb250YWluZXIsICdjbGljaycsICdvbkRyb3Bib3hDb250YWluZXJDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudChcclxuICAgICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uLFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnb25Ecm9wYm94Q2xvc2VCdXR0b25DbGljaydcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLCAnc2Nyb2xsJywgJ29uT3B0aW9uc1Njcm9sbCcpO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ2NsaWNrJywgJ29uT3B0aW9uc0NsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnMsICdtb3VzZW92ZXInLCAnb25PcHRpb25zTW91c2VPdmVyJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGRyb3Bib3hDb250YWluZXIsICdtb3VzZWxlYXZlJywgJ29uT3B0aW9uc01vdXNlTGVhdmUnKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ3RvdWNobW92ZScsICdvbk9wdGlvbnNUb3VjaE1vdmUnKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlTGVhdmUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBhZGRFdmVudCgkZWxlLCBldmVudHMsIG1ldGhvZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBldmVudHMgPSBVdGlscy5yZW1vdmVBcnJheUVtcHR5KGV2ZW50cy5zcGxpdCgnICcpKTtcclxuXHJcbiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgbGV0IGV2ZW50c0tleSA9IGAke21ldGhvZH0tJHtldmVudH1gO1xyXG4gICAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLmV2ZW50c1tldmVudHNLZXldO1xyXG5cclxuICAgICAgaWYgKCFjYWxsYmFjaykge1xyXG4gICAgICAgIGNhbGxiYWNrID0gdGhpc1ttZXRob2RdLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRzS2V5XSA9IGNhbGxiYWNrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWxlID0gRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hFdmVudCgkZWxlLCBldmVudE5hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoZXZlbnROYW1lLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgb25Eb2N1bWVudENsaWNrKGUpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5hcHBlbmRUb0JvZHkgJiZcclxuICAgICAgdGhpcy5tdWx0aXBsZSAmJlxyXG4gICAgICB0aGlzLmlzT3BlbmVkKCkgJiZcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdChgI3ZzLSR7dGhpcy5ndWlkfWApXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuOyAvLyBEb24ndCBjbG9zZSBkcm9wYm94IGlmIGFwcGVuZCB0byBib2R5LCBtdWx0aXBsZSBhbmQgY2xpY2sgaW5zaWRlIGRyb3Bib3dcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgJGVsZVRvS2VlcE9wZW4gPSBlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLXdyYXBwZXInKTtcclxuXHJcbiAgICBpZiAoJGVsZVRvS2VlcE9wZW4gIT09IHRoaXMuJHdyYXBwZXIpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uS2V5RG93bihlKSB7XHJcbiAgICBsZXQga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7XHJcbiAgICBsZXQgbWV0aG9kID0ga2V5RG93bk1ldGhvZE1hcHBpbmdba2V5XTtcclxuXHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgIHRoaXNbbWV0aG9kXShlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRW50ZXJQcmVzcygpIHtcclxuICAgIGlmICghdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0Rm9jdXNlZE9wdGlvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Fc2NQcmVzcygpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRG93bkFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbignbmV4dCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25VcEFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbigncHJldmlvdXMnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQnV0dG9uQ2xpY2soZSkge1xyXG4gICAgbGV0IGNoaWxkRWxlID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1idXR0b24tY2hpbGQnKTtcclxuXHJcbiAgICBpZiAoY2hpbGRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9nZ2xlRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgb25DbGVhckJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zU2Nyb2xsKCkge1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zQ2xpY2soZSkge1xyXG4gICAgdGhpcy5zZWxlY3RPcHRpb24oXHJcbiAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtb3B0aW9uOm5vdCguZGlzYWJsZWQpOm5vdCguZ3JvdXAtdGl0bGUpJylcclxuICAgICk7XHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICAvLyBNb3ZlIHNlbGVjdGVkIHRvIHRvcCB3YXMgdHJpZ2dlcmluZyBjbG9zZURyb3Bib3cgYmVhY2F1c2Ugb2Ygb25Ecm9wYm94Q29udGFpbmVyQ2xpY2tcclxuICAgICAgLy8gV2hlbiBzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgaXMgb25cclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ecm9wYm94Q29udGFpbmVyQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLWRyb3Bib3gnKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ecm9wYm94Q2xvc2VCdXR0b25DbGljaygpIHtcclxuICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNNb3VzZU92ZXIoZSkge1xyXG4gICAgbGV0ICRlbGUgPSBlLnRhcmdldC5jbG9zZXN0KFxyXG4gICAgICAnLnZzY29tcC1vcHRpb246bm90KC5kaXNhYmxlZCk6bm90KC5ncm91cC10aXRsZSknXHJcbiAgICApO1xyXG5cclxuICAgIGlmICgkZWxlICYmIHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKG51bGwsICRlbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zVG91Y2hNb3ZlKCkge1xyXG4gICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgb25TZWFyY2goZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoZS50YXJnZXQudmFsdWUsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgb25TZWFyY2hDbGVhcigpIHtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgfVxyXG5cclxuICBvblRvZ2dsZUFsbE9wdGlvbnMoKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIG9uQWRkU2VhY2hUb1NlbGVjdGlvbigpIHtcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSB8fCAhdGhpcy5zZWFyY2hWYWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXNTZWxlY3RlZCA9ICFEb21VdGlscy5oYXNDbGFzcyhcclxuICAgICAgdGhpcy4kdG9nZ2xlQWRkU2VhY2hDaGVja2JveCxcclxuICAgICAgJ2NoZWNrZWQnXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGNvbnN0IGZpbHRlcmVkVmFsdWVzID0gdGhpcy5vcHRpb25zLmZpbHRlcigobykgPT4ge1xyXG4gICAgICBpZiAoby5pc0Rpc2FibGVkIHx8IG8uaXNDdXJyZW50TmV3IHx8IG8uaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gby5pc1Zpc2libGU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoaXNTZWxlY3RlZCkge1xyXG4gICAgICBmb3IgKGNvbnN0IG9wdCBvZiBmaWx0ZXJlZFZhbHVlcykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKG9wdC52YWx1ZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICBvcHQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKG9wdC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGNvbnN0IG9wdCBvZiBmaWx0ZXJlZFZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gc2VsZWN0ZWRWYWx1ZXMuaW5kZXhPZihvcHQudmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICBvcHQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZ2dsZUFkZFNlYXJjaENsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNTZWxlY3RlZCk7XHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCBbXSwgdHJ1ZSk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIG9uUmVzaXplKCkge1xyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHRoaXMuc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCh0cnVlKTtcclxuICB9XHJcbiAgLyoqIGRvbSBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBiZWZvcmUgZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYmVmb3JlVmFsdWVTZXQoaXNSZXNldCkge1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNSZXNldCA/IGZhbHNlIDogdW5kZWZpbmVkKTtcclxuICB9XHJcblxyXG4gIGJlZm9yZVNlbGVjdE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgdGhpcy5uZXdWYWx1ZXMucHVzaChuZXdPcHRpb24udmFsdWUpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNDdXJyZW50TmV3JywgZmFsc2UpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNOZXcnLCB0cnVlKTtcclxuXHJcbiAgICAvKiogdXNpbmcgc2V0VGltZW91dCB0byBmaXggdGhlIGlzc3VlIG9mIGRyb3Bib3ggZ2V0dGluZyBjbG9zZWQgb24gc2VsZWN0ICovXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG4gIC8qKiBiZWZvcmUgZXZlbnQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogYWZ0ZXIgZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWZ0ZXJSZW5kZXJXcmFwcGVyKCkge1xyXG4gICAgdGhpcy4kZWxlLnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZSk7XHJcblxyXG4gICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kZWxlLCAndnNjb21wLWVsZScpO1xyXG4gICAgdGhpcy5yZW5kZXJTZWFyY2goKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50cygpO1xyXG4gICAgdGhpcy5zZXRNZXRob2RzKCk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB0eXBlb2YgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSAhPT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QoXHJcbiAgICAgICAgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSxcclxuICAgICAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dG9TZWxlY3RGaXJzdE9wdGlvbiAmJiB0aGlzLnZpc2libGVPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKFxyXG4gICAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNbMF0udmFsdWUsXHJcbiAgICAgICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZnRlclNldFNlYXJjaFZhbHVlKCkge1xyXG4gICAgaWYgKHRoaXMuaGFzU2VydmVyU2VhcmNoKSB7XHJcbiAgICAgIHRoaXMuc2VydmVyU2VhcmNoKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNldFZpc2libGVPcHRpb25zQ291bnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5zZWxlY3RBbGxPbmx5VmlzaWJsZSkge1xyXG4gICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmFkZFNlYWNoVG9TZWxlY3Rpb24pIHtcclxuICAgICAgdGhpcy50b2dnbGVBZGRTZWFyY2hDbGFzcygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWZ0ZXJTZXRWaXNpYmxlT3B0aW9uc0NvdW50KCkge1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclZhbHVlU2V0KCkge1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9ucyhrZWVwVmFsdWUpIHtcclxuICAgIGlmIChrZWVwVmFsdWUpIHtcclxuICAgICAgdGhpcy5zZXRTZWxlY3RlZFByb3AoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zaG93T3B0aW9uc09ubHlPblNlYXJjaCkge1xyXG4gICAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFrZWVwVmFsdWUpIHtcclxuICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKiogYWZ0ZXIgZXZlbnQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogc2V0IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHNldFByb3BzKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSB0aGlzLnNldERlZmF1bHRQcm9wcyhvcHRpb25zKTtcclxuICAgIHRoaXMuc2V0UHJvcHNGcm9tRWxlbWVudEF0dHIob3B0aW9ucyk7XHJcblxyXG4gICAgbGV0IGNvbnZlcnRUb0Jvb2xlYW4gPSBVdGlscy5jb252ZXJ0VG9Cb29sZWFuO1xyXG5cclxuICAgIHRoaXMuJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgdGhpcy52YWx1ZUtleSA9IG9wdGlvbnMudmFsdWVLZXk7XHJcbiAgICB0aGlzLmxhYmVsS2V5ID0gb3B0aW9ucy5sYWJlbEtleTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb25LZXkgPSBvcHRpb25zLmRlc2NyaXB0aW9uS2V5O1xyXG4gICAgdGhpcy5hbGlhc0tleSA9IG9wdGlvbnMuYWxpYXNLZXk7XHJcbiAgICB0aGlzLm9wdGlvbkhlaWdodFRleHQgPSBvcHRpb25zLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0ID0gcGFyc2VGbG9hdCh0aGlzLm9wdGlvbkhlaWdodFRleHQpO1xyXG4gICAgdGhpcy5tdWx0aXBsZSA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5tdWx0aXBsZSk7XHJcbiAgICB0aGlzLmhhc1NlYXJjaCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zZWFyY2gpO1xyXG4gICAgdGhpcy5oaWRlQ2xlYXJCdXR0b24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuaGlkZUNsZWFyQnV0dG9uKTtcclxuICAgIHRoaXMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5hdXRvU2VsZWN0Rmlyc3RPcHRpb25cclxuICAgICk7XHJcbiAgICB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKTtcclxuICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0ID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICk7XHJcbiAgICB0aGlzLmFsbG93TmV3T3B0aW9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmFsbG93TmV3T3B0aW9uKTtcclxuICAgIHRoaXMubWFya1NlYXJjaFJlc3VsdHMgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubWFya1NlYXJjaFJlc3VsdHMpO1xyXG4gICAgdGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdFxyXG4gICAgKTtcclxuICAgIHRoaXMuZGlzYWJsZVNlbGVjdEFsbCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5kaXNhYmxlU2VsZWN0QWxsKTtcclxuICAgIHRoaXMua2VlcEFsd2F5c09wZW4gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMua2VlcEFsd2F5c09wZW4pO1xyXG4gICAgdGhpcy5zaG93RHJvcGJveEFzUG9wdXAgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2hvd0Ryb3Bib3hBc1BvcHVwKTtcclxuICAgIHRoaXMuc2VsZWN0QWxsT25seVZpc2libGUgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2VsZWN0QWxsT25seVZpc2libGUpO1xyXG4gICAgdGhpcy5ub09wdGlvbnNUZXh0ID0gb3B0aW9ucy5ub09wdGlvbnNUZXh0O1xyXG4gICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0ID0gb3B0aW9ucy5ub1NlYXJjaFJlc3VsdHNUZXh0O1xyXG4gICAgdGhpcy5zZWxlY3RBbGxUZXh0ID0gb3B0aW9ucy5zZWxlY3RBbGxUZXh0O1xyXG4gICAgdGhpcy5hZGRTZWFyY2hUb1NlbGVjdGlvblRleHQgPSBvcHRpb25zLmFkZFNlYXJjaFRvU2VsZWN0aW9uVGV4dDtcclxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSBvcHRpb25zLnBsYWNlaG9sZGVyO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb247XHJcbiAgICB0aGlzLmRyb3Bib3hXaWR0aCA9IG9wdGlvbnMuZHJvcGJveFdpZHRoO1xyXG4gICAgdGhpcy50b29sdGlwRm9udFNpemUgPSBvcHRpb25zLnRvb2x0aXBGb250U2l6ZTtcclxuICAgIHRoaXMudG9vbHRpcEFsaWdubWVudCA9IG9wdGlvbnMudG9vbHRpcEFsaWdubWVudDtcclxuICAgIHRoaXMudG9vbHRpcE1heFdpZHRoID0gb3B0aW9ucy50b29sdGlwTWF4V2lkdGg7XHJcbiAgICB0aGlzLm5vT2ZEaXNwbGF5VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5ub09mRGlzcGxheVZhbHVlcyk7XHJcbiAgICB0aGlzLnpJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMuekluZGV4KTtcclxuICAgIHRoaXMubWF4VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5tYXhWYWx1ZXMpO1xyXG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xyXG4gICAgdGhpcy5hZGRpdGlvbmFsQ2xhc3NlcyA9IG9wdGlvbnMuYWRkaXRpb25hbENsYXNzZXM7XHJcbiAgICB0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlID0gb3B0aW9ucy5zZWxlY3RlZFZhbHVlO1xyXG4gICAgdGhpcy5wb3B1cERyb3Bib3hCcmVha3BvaW50ID0gb3B0aW9ucy5wb3B1cERyb3Bib3hCcmVha3BvaW50O1xyXG4gICAgdGhpcy5vblNlcnZlclNlYXJjaCA9IG9wdGlvbnMub25TZXJ2ZXJTZWFyY2g7XHJcbiAgICB0aGlzLnNlYXJjaFBsYWNlaG9sZGVyID0gb3B0aW9ucy5zZWFyY2hQbGFjZWhvbGRlcjtcclxuICAgIHRoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2UgPSBvcHRpb25zLml0ZW1zU2VsZWN0ZWRNZXNzYWdlO1xyXG4gICAgdGhpcy5hbGxvd05vbmVPcHRpb24gPSBvcHRpb25zLmFsbG93Tm9uZU9wdGlvbjtcclxuICAgIHRoaXMubm9uZU9wdGlvblRleHQgPSBvcHRpb25zLm5vbmVPcHRpb25UZXh0O1xyXG4gICAgdGhpcy5hcHBlbmRUb0JvZHkgPSBvcHRpb25zLmFwcGVuZFRvQm9keTtcclxuICAgIHRoaXMuYWRkU2VhY2hUb1NlbGVjdGlvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5hZGRTZWFjaFRvU2VsZWN0aW9uKTtcclxuICAgIHRoaXMuc2VhcmNoQ2FsbGJhY2sgPSBvcHRpb25zLnNlYXJjaENhbGxiYWNrIHx8IG51bGw7XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW107XHJcbiAgICB0aGlzLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgIHRoaXMudG9vbHRpcEVudGVyRGVsYXkgPSAyMDA7XHJcbiAgICB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbiA9IDI1MDtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJztcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9ICcnO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAob3B0aW9ucy5zZWFyY2ggPT09IHVuZGVmaW5lZCAmJiB0aGlzLm11bHRpcGxlKSB8fFxyXG4gICAgICB0aGlzLmFsbG93TmV3T3B0aW9uXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5oYXNTZWFyY2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm1heFZhbHVlcykge1xyXG4gICAgICB0aGlzLmRpc2FibGVTZWxlY3RBbGwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaGFzU2VydmVyU2VhcmNoID0gdHlwZW9mIHRoaXMub25TZXJ2ZXJTZWFyY2ggPT09ICdmdW5jdGlvbic7XHJcbiAgICB0aGlzLnNob3dBc1BvcHVwID1cclxuICAgICAgdGhpcy5zaG93RHJvcGJveEFzUG9wdXAgJiZcclxuICAgICAgIXRoaXMua2VlcEFsd2F5c09wZW4gJiZcclxuICAgICAgd2luZG93LmlubmVyV2lkdGggPD0gcGFyc2VGbG9hdCh0aGlzLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQpO1xyXG4gICAgdGhpcy5oYXNTZWFyY2hDb250YWluZXIgPVxyXG4gICAgICB0aGlzLmhhc1NlYXJjaCB8fCAodGhpcy5tdWx0aXBsZSAmJiAhdGhpcy5kaXNhYmxlU2VsZWN0QWxsKTtcclxuICAgIHRoaXMub3B0aW9uc0NvdW50ID0gdGhpcy5nZXRPcHRpb25zQ291bnQob3B0aW9ucy5vcHRpb25zQ291bnQpO1xyXG4gICAgdGhpcy5oYWxmT3B0aW9uc0NvdW50ID0gTWF0aC5jZWlsKHRoaXMub3B0aW9uc0NvdW50IC8gMik7XHJcbiAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICB9XHJcblxyXG4gIHNldERlZmF1bHRQcm9wcyhvcHRpb25zKSB7XHJcbiAgICBsZXQgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgIHZhbHVlS2V5OiAndmFsdWUnLFxyXG4gICAgICBsYWJlbEtleTogJ2xhYmVsJyxcclxuICAgICAgZGVzY3JpcHRpb25LZXk6ICdkZXNjcmlwdGlvbicsXHJcbiAgICAgIGFsaWFzS2V5OiAnYWxpYXMnLFxyXG4gICAgICBvcHRpb25zQ291bnQ6IDUsXHJcbiAgICAgIG5vT2ZEaXNwbGF5VmFsdWVzOiA1MCxcclxuICAgICAgb3B0aW9uSGVpZ2h0OiAnNDBweCcsXHJcbiAgICAgIG11bHRpcGxlOiBmYWxzZSxcclxuICAgICAgaGlkZUNsZWFyQnV0dG9uOiBmYWxzZSxcclxuICAgICAgYXV0b1NlbGVjdEZpcnN0T3B0aW9uOiBmYWxzZSxcclxuICAgICAgaGFzT3B0aW9uRGVzY3JpcHRpb246IGZhbHNlLFxyXG4gICAgICBzaWxlbnRJbml0aWFsVmFsdWVTZXQ6IGZhbHNlLFxyXG4gICAgICBkaXNhYmxlU2VsZWN0QWxsOiBmYWxzZSxcclxuICAgICAgbm9PcHRpb25zVGV4dDogJ05vIG9wdGlvbnMgZm91bmQnLFxyXG4gICAgICBub1NlYXJjaFJlc3VsdHNUZXh0OiAnTm8gcmVzdWx0cyBmb3VuZCcsXHJcbiAgICAgIHNlbGVjdEFsbFRleHQ6ICdTZWxlY3QgQWxsJyxcclxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWxlY3QnLFxyXG4gICAgICBwb3NpdGlvbjogJ2F1dG8nLFxyXG4gICAgICB6SW5kZXg6IDEsXHJcbiAgICAgIGFsbG93TmV3T3B0aW9uOiBmYWxzZSxcclxuICAgICAgbWFya1NlYXJjaFJlc3VsdHM6IGZhbHNlLFxyXG4gICAgICB0b29sdGlwRm9udFNpemU6ICcxNHB4JyxcclxuICAgICAgdG9vbHRpcEFsaWdubWVudDogJ2NlbnRlcicsXHJcbiAgICAgIHRvb2x0aXBNYXhXaWR0aDogJzMwMHB4JyxcclxuICAgICAgc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0OiBmYWxzZSxcclxuICAgICAgbmFtZTogJycsXHJcbiAgICAgIGFkZGl0aW9uYWxDbGFzc2VzOiAnJyxcclxuICAgICAga2VlcEFsd2F5c09wZW46IGZhbHNlLFxyXG4gICAgICBtYXhWYWx1ZXM6IDAsXHJcbiAgICAgIHNob3dEcm9wYm94QXNQb3B1cDogdHJ1ZSxcclxuICAgICAgcG9wdXBEcm9wYm94QnJlYWtwb2ludDogJzU3NnB4JyxcclxuICAgICAgc2VhcmNoUGxhY2Vob2xkZXI6ICdTZWFyY2guLi4nLFxyXG4gICAgICBpdGVtc1NlbGVjdGVkTWVzc2FnZTogJ3NlbGVjdGVkJyxcclxuICAgICAgYWxsb3dOb25lT3B0aW9uOiBmYWxzZSxcclxuICAgICAgbm9uZU9wdGlvblRleHQ6ICdOb25lJyxcclxuICAgICAgYXBwZW5kVG9Cb2R5OiBmYWxzZSxcclxuICAgICAgc2VsZWN0QWxsT25seVZpc2libGU6IHRydWUsXHJcbiAgICAgIGFkZFNlYWNoVG9TZWxlY3Rpb246IGZhbHNlLFxyXG4gICAgICBhZGRTZWFyY2hUb1NlbGVjdGlvblRleHQ6ICdBZGQgdG8gc2VsZWN0aW9uJyxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgZGVmYXVsdE9wdGlvbnMub3B0aW9uc0NvdW50ID0gNDtcclxuICAgICAgZGVmYXVsdE9wdGlvbnMub3B0aW9uSGVpZ2h0ID0gJzYwcHgnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHNldFByb3BzRnJvbUVsZW1lbnRBdHRyKG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlID0gb3B0aW9ucy5lbGU7XHJcbiAgICBsZXQgbWFwcGluZyA9IHtcclxuICAgICAgbXVsdGlwbGU6ICdtdWx0aXBsZScsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAncGxhY2Vob2xkZXInLFxyXG4gICAgICBuYW1lOiAnbmFtZScsXHJcbiAgICAgICdkYXRhLXZhbHVlLWtleSc6ICd2YWx1ZUtleScsXHJcbiAgICAgICdkYXRhLWxhYmVsLWtleSc6ICdsYWJlbEtleScsXHJcbiAgICAgICdkYXRhLWRlc2NyaXB0aW9uLWtleSc6ICdkZXNjcmlwdGlvbktleScsXHJcbiAgICAgICdkYXRhLWFsaWFzLWtleSc6ICdhbGlhc0tleScsXHJcbiAgICAgICdkYXRhLXNlYXJjaCc6ICdzZWFyY2gnLFxyXG4gICAgICAnZGF0YS1oaWRlLWNsZWFyLWJ1dHRvbic6ICdoaWRlQ2xlYXJCdXR0b24nLFxyXG4gICAgICAnZGF0YS1hdXRvLXNlbGVjdC1maXJzdC1vcHRpb24nOiAnYXV0b1NlbGVjdEZpcnN0T3B0aW9uJyxcclxuICAgICAgJ2RhdGEtaGFzLW9wdGlvbi1kZXNjcmlwdGlvbic6ICdoYXNPcHRpb25EZXNjcmlwdGlvbicsXHJcbiAgICAgICdkYXRhLW9wdGlvbnMtY291bnQnOiAnb3B0aW9uc0NvdW50JyxcclxuICAgICAgJ2RhdGEtb3B0aW9uLWhlaWdodCc6ICdvcHRpb25IZWlnaHQnLFxyXG4gICAgICAnZGF0YS1wb3NpdGlvbic6ICdwb3NpdGlvbicsXHJcbiAgICAgICdkYXRhLW5vLW9wdGlvbnMtdGV4dCc6ICdub09wdGlvbnNUZXh0JyxcclxuICAgICAgJ2RhdGEtbm8tc2VhcmNoLXJlc3VsdHMtdGV4dCc6ICdub1NlYXJjaFJlc3VsdHNUZXh0JyxcclxuICAgICAgJ2RhdGEtc2VsZWN0LWFsbC10ZXh0JzogJ3NlbGVjdEFsbFRleHQnLFxyXG4gICAgICAnZGF0YS1zaWxlbnQtaW5pdGlhbC12YWx1ZS1zZXQnOiAnc2lsZW50SW5pdGlhbFZhbHVlU2V0JyxcclxuICAgICAgJ2RhdGEtZHJvcGJveC13aWR0aCc6ICdkcm9wYm94V2lkdGgnLFxyXG4gICAgICAnZGF0YS16LWluZGV4JzogJ3pJbmRleCcsXHJcbiAgICAgICdkYXRhLW5vLW9mLWRpc3BsYXktdmFsdWVzJzogJ25vT2ZEaXNwbGF5VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWxsb3ctbmV3LW9wdGlvbic6ICdhbGxvd05ld09wdGlvbicsXHJcbiAgICAgICdkYXRhLW1hcmstc2VhcmNoLXJlc3VsdHMnOiAnbWFya1NlYXJjaFJlc3VsdHMnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6ICd0b29sdGlwRm9udFNpemUnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6ICd0b29sdGlwQWxpZ25tZW50JyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiAndG9vbHRpcE1heFdpZHRoJyxcclxuICAgICAgJ2RhdGEtc2hvdy1zZWxlY3RlZC1vcHRpb25zLWZpcnN0JzogJ3Nob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCcsXHJcbiAgICAgICdkYXRhLWRpc2FibGUtc2VsZWN0LWFsbCc6ICdkaXNhYmxlU2VsZWN0QWxsJyxcclxuICAgICAgJ2RhdGEta2VlcC1hbHdheXMtb3Blbic6ICdrZWVwQWx3YXlzT3BlbicsXHJcbiAgICAgICdkYXRhLW1heC12YWx1ZXMnOiAnbWF4VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWRkaXRpb25hbC1jbGFzc2VzJzogJ2FkZGl0aW9uYWxDbGFzc2VzJyxcclxuICAgICAgJ2RhdGEtc2hvdy1kcm9wYm94LWFzLXBvcHVwJzogJ3Nob3dEcm9wYm94QXNQb3B1cCcsXHJcbiAgICAgICdkYXRhLXBvcHVwLWRyb3Bib3gtYnJlYWtwb2ludCc6ICdwb3B1cERyb3Bib3hCcmVha3BvaW50JyxcclxuICAgICAgJ2RhdGEtc2VsZWN0LWFsbC1vbmx5LXZpc2libGUnOiAnc2VsZWN0QWxsT25seVZpc2libGUnLFxyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIG1hcHBpbmcpIHtcclxuICAgICAgbGV0IHZhbHVlID0gJGVsZS5nZXRBdHRyaWJ1dGUoayk7XHJcblxyXG4gICAgICBpZiAoayA9PT0gJ211bHRpcGxlJyAmJiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSAndHJ1ZScpKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICBvcHRpb25zW21hcHBpbmdba11dID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1ldGhvZHMoKSB7XHJcbiAgICBsZXQgJGVsZSA9IHRoaXMuJGVsZTtcclxuICAgICRlbGUudmlydHVhbFNlbGVjdCA9IHRoaXM7XHJcbiAgICAkZWxlLnZhbHVlID0gdGhpcy5tdWx0aXBsZSA/IFtdIDogJyc7XHJcbiAgICAkZWxlLnJlc2V0ID0gVmlydHVhbFNlbGVjdC5yZXNldDtcclxuICAgICRlbGUuc2V0VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LnNldFZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5zZXRPcHRpb25zID0gVmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS5zZXREaXNhYmxlZE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldERpc2FibGVkT3B0aW9uc01ldGhvZDtcclxuICAgICRlbGUudG9nZ2xlU2VsZWN0QWxsID0gVmlydHVhbFNlbGVjdC50b2dnbGVTZWxlY3RBbGw7XHJcbiAgICAkZWxlLmlzQWxsU2VsZWN0ZWQgPSBWaXJ0dWFsU2VsZWN0LmlzQWxsU2VsZWN0ZWQ7XHJcbiAgICAkZWxlLmFkZE9wdGlvbiA9IFZpcnR1YWxTZWxlY3QuYWRkT3B0aW9uTWV0aG9kO1xyXG4gICAgJGVsZS5nZXROZXdWYWx1ZSA9IFZpcnR1YWxTZWxlY3QuZ2V0TmV3VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLmdldERpc3BsYXlWYWx1ZSA9IFZpcnR1YWxTZWxlY3QuZ2V0RGlzcGxheVZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5vcGVuID0gVmlydHVhbFNlbGVjdC5vcGVuTWV0aG9kO1xyXG4gICAgJGVsZS5jbG9zZSA9IFZpcnR1YWxTZWxlY3QuY2xvc2VNZXRob2Q7XHJcbiAgICAkZWxlLnNldFNlYXJjaFZhbHVlID0gVmlydHVhbFNlbGVjdC5zZXRTZWFyY2hWYWx1ZU1ldGhvZDtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgdmFsdWUgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlID0gdmFsdWUubWFwKCh2KSA9PiB7XHJcbiAgICAgIHJldHVybiB2IHx8IHYgPT0gMCA/IHYudG9TdHJpbmcoKSA6ICcnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHZhbGlkVmFsdWVzID0gW107XHJcbiAgICBsZXQgdmFsaWRJbmRleGVzID0gW107XHJcbiAgICBsZXQgdmFsaWRWYWx1ZXNTZXQgPSBuZXcgU2V0KFtdKTtcclxuICAgIGxldCB2YWx1ZVNldCA9IG5ldyBTZXQodmFsdWUpO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGxldCBpc1NlbGVjdGVkID0gdmFsdWVTZXQuaGFzKGQudmFsdWUpO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBpZiAodmFsaWRWYWx1ZXNTZXQuaGFzKGQudmFsdWUpICYmIHRoaXMubXVsdGlwbGUpIGJyZWFrOyAvLyBJZiBtdWx0aXBsZSBzZWxlY3Rpb24gd2l0aCBzYW1lIHZhbHVlIG9ubHkgc2VsZWN0IG9uZS5cclxuXHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB2YWxpZFZhbHVlc1NldC5hZGQoZC52YWx1ZSk7XHJcbiAgICAgICAgdmFsaWRWYWx1ZXMucHVzaChkLnZhbHVlKTtcclxuICAgICAgICB2YWxpZEluZGV4ZXMucHVzaChkLmluZGV4KTtcclxuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIGJyZWFrOyAvLyBpZiBzaW5nbGUgc2VsZWN0aW9uIG9ubHkgc2VsZWN0IG9uZS5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICB2YWxpZFZhbHVlcyA9IHZhbGlkVmFsdWVzWzBdO1xyXG4gICAgICB2YWxpZEluZGV4ZXMgPSB2YWxpZEluZGV4ZXNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5iZWZvcmVWYWx1ZVNldCgpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZSh2YWxpZFZhbHVlcywgdmFsaWRJbmRleGVzLCAhc2lsZW50Q2hhbmdlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpIHtcclxuICAgIGxldCBuZXdvcHRpb24gPSBvcHRpb25zICE9IHRoaXMub3B0aW9ucztcclxuICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zKGtlZXBWYWx1ZSwgbmV3b3B0aW9uKTtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChkaXNhYmxlZE9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlTWV0aG9kKG51bGwpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucyA9IFtdLCBzZXRPcHRpb25zUHJvcCA9IGZhbHNlKSB7XHJcbiAgICBkaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubWFwKChkKSA9PiBkLnRvU3RyaW5nKCkpO1xyXG4gICAgdGhpcy5kaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnM7XHJcblxyXG4gICAgaWYgKHNldE9wdGlvbnNQcm9wICYmIGRpc2FibGVkT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICBkLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJlcGFyZWRPcHRpb25zID0gW107XHJcbiAgICBsZXQgZGlzYWJsZWRPcHRpb25zID0gdGhpcy5kaXNhYmxlZE9wdGlvbnM7XHJcbiAgICBsZXQgaGFzRGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCB2YWx1ZUtleSA9IHRoaXMudmFsdWVLZXk7XHJcbiAgICBsZXQgbGFiZWxLZXkgPSB0aGlzLmxhYmVsS2V5O1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uS2V5ID0gdGhpcy5kZXNjcmlwdGlvbktleTtcclxuICAgIGxldCBhbGlhc0tleSA9IHRoaXMuYWxpYXNLZXk7XHJcbiAgICBsZXQgaGFzT3B0aW9uRGVzY3JpcHRpb24gPSB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uO1xyXG4gICAgbGV0IGdldFN0cmluZyA9IFV0aWxzLmdldFN0cmluZztcclxuICAgIGxldCBjb252ZXJ0VG9Cb29sZWFuID0gVXRpbHMuY29udmVydFRvQm9vbGVhbjtcclxuICAgIGxldCBnZXRBbGlhcyA9IHRoaXMuZ2V0QWxpYXM7XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgbGV0IGhhc09wdGlvbkdyb3VwID0gZmFsc2U7XHJcblxyXG4gICAgbGV0IHByZXBhcmVPcHRpb24gPSAoZCkgPT4ge1xyXG4gICAgICBsZXQgdmFsdWUgPSBnZXRTdHJpbmcoZFt2YWx1ZUtleV0pO1xyXG4gICAgICBsZXQgY2hpbGRPcHRpb25zID0gZC5vcHRpb25zO1xyXG4gICAgICBsZXQgaXNHcm91cFRpdGxlID0gY2hpbGRPcHRpb25zID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICBsZXQgb3B0aW9uID0ge1xyXG4gICAgICAgIGluZGV4LFxyXG4gICAgICAgIHZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiBnZXRTdHJpbmcoZFtsYWJlbEtleV0pLFxyXG4gICAgICAgIGFsaWFzOiBnZXRBbGlhcyhkW2FsaWFzS2V5XSksXHJcbiAgICAgICAgLy9pc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgaXNWaXNpYmxlOiBjb252ZXJ0VG9Cb29sZWFuKGQuaXNWaXNpYmxlLCB0cnVlKSxcclxuICAgICAgICBpc0dyb3VwVGl0bGUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoaGFzRGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzR3JvdXBPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbi5ncm91cEluZGV4ID0gZC5ncm91cEluZGV4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICBvcHRpb24uZGVzY3JpcHRpb24gPSBnZXRTdHJpbmcoZFtkZXNjcmlwdGlvbktleV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmVwYXJlZE9wdGlvbnMucHVzaChvcHRpb24pO1xyXG4gICAgICBpbmRleCsrO1xyXG5cclxuICAgICAgaWYgKGlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBncm91cEluZGV4ID0gb3B0aW9uLmluZGV4O1xyXG4gICAgICAgIGhhc09wdGlvbkdyb3VwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY2hpbGRPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICAgIGQuaXNHcm91cE9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICBkLmdyb3VwSW5kZXggPSBncm91cEluZGV4O1xyXG5cclxuICAgICAgICAgIHByZXBhcmVPcHRpb24oZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gQWRkIG5vbmUgb3B0aW9uIG9ubHkgd2hlbiBpbiBsaXN0IG1vZGUgKGFsd2F5cyBvcGVuIGFuZCBvbmx5KVxyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlICYmIHRoaXMuYWxsb3dOb25lT3B0aW9uKSB7XHJcbiAgICAgIG9wdGlvbnMudW5zaGlmdCh7XHJcbiAgICAgICAgdmFsdWU6IG5vbmVPcHRpb25WYWx1ZSxcclxuICAgICAgICBsYWJlbDogdGhpcy5ub25lT3B0aW9uVGV4dCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKHByZXBhcmVPcHRpb24pO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IHByZXBhcmVkT3B0aW9ucztcclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IHByZXBhcmVkT3B0aW9ucy5sZW5ndGg7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCA9IHRoaXMub3B0aW9ucy5sZW5ndGggLSAxO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuaGFzT3B0aW9uR3JvdXAgPSBoYXNPcHRpb25Hcm91cDtcclxuICAgIHRoaXMuc2V0U29ydGVkT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VydmVyT3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywgdHJ1ZSk7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkT3B0aW9ucyA9IHRoaXMuc2VsZWN0ZWRPcHRpb25zO1xyXG4gICAgbGV0IG5ld09wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBsZXQgb3B0aW9uc1VwZGF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogbWVyZ2luZyBhbHJlYWR5IHNlbGV0ZWQgb3B0aW9ucyBkZXRhaWxzIHdpdGggbmV3IG9wdGlvbnMgKi9cclxuICAgIGlmIChzZWxlY3RlZE9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIGxldCBuZXdPcHRpb25zVmFsdWUgPSBuZXdPcHRpb25zLm1hcCgoZCkgPT4gZC52YWx1ZSk7XHJcbiAgICAgIG9wdGlvbnNVcGRhdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgICAgaWYgKG5ld09wdGlvbnNWYWx1ZS5pbmRleE9mKGQudmFsdWUpID09PSAtMSkge1xyXG4gICAgICAgICAgZC5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgIG5ld09wdGlvbnMucHVzaChkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zZXRPcHRpb25zTWV0aG9kKG5ld09wdGlvbnMsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBtZXJnaW5nIG5ldyBzZWFyY2ggb3B0aW9uICovXHJcbiAgICBpZiAodGhpcy5hbGxvd05ld09wdGlvbiAmJiB0aGlzLnNlYXJjaFZhbHVlKSB7XHJcbiAgICAgIGxldCBoYXNFeGFjdE9wdGlvbiA9IG5ld09wdGlvbnMuc29tZShcclxuICAgICAgICAoZCkgPT4gZC5sYWJlbC50b0xvd2VyQ2FzZSgpID09PSB0aGlzLnNlYXJjaFZhbHVlXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uc1VwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2V0TmV3T3B0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9uc1VwZGF0ZWQpIHtcclxuICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9uc0NvdW50KCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmFkZFNlYWNoVG9TZWxlY3Rpb24pIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFkZFNlYXJjaENsYXNzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc2V0VmFsdWVUZXh0KCk7XHJcbiAgICB9XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnc2VydmVyLXNlYXJjaGluZycpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VsZWN0ZWRPcHRpb25zKCkge1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gdGhpcy5vcHRpb25zLmZpbHRlcihcclxuICAgICAgKGQpID0+IHNlbGVjdGVkVmFsdWVzLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2V0U29ydGVkT3B0aW9ucygpIHtcclxuICAgIGxldCBzb3J0ZWRPcHRpb25zID0gWy4uLnRoaXMub3B0aW9uc107XHJcblxyXG4gICAgaWYgKHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0ICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgIGlmICh0aGlzLmhhc09wdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgc29ydGVkT3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnNHcm91cChzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzb3J0ZWRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucyhzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucyA9IHNvcnRlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBzZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IFsuLi50aGlzLnNvcnRlZE9wdGlvbnNdO1xyXG4gICAgbGV0IG1heE9wdGlvbnNUb1Nob3cgPSB0aGlzLm9wdGlvbnNDb3VudCAqIDI7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IHRoaXMuZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKTtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIG1heE9wdGlvbnNUb1Nob3cgLSAxO1xyXG4gICAgbGV0IGkgPSAwO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgbmV3T3B0aW9uLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zLmZpbHRlcigoZCkgPT4ge1xyXG4gICAgICBsZXQgaW5WaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoZC5pc1Zpc2libGUgJiYgIWQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgaW5WaWV3ID0gaSA+PSBzdGFydEluZGV4ICYmIGkgPD0gZW5kSW5kZXg7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXggPSBpO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGluVmlldztcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbnMgPSBbbmV3T3B0aW9uLCAuLi52aXNpYmxlT3B0aW9uc107XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zUG9zaXRpb24oc3RhcnRJbmRleCkge1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0b3AgPSBzdGFydEluZGV4ICogdGhpcy5vcHRpb25IZWlnaHQ7XHJcbiAgICB0aGlzLiRvcHRpb25zLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAke3RvcH1weCwgMClgO1xyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiRvcHRpb25zLCAndG9wJywgdG9wKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNUb29sdGlwKCkge1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gdGhpcy5nZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgbGV0IGhhc09wdGlvbkRlc2NyaXB0aW9uID0gdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbjtcclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCAkb3B0aW9uRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAudnNjb21wLW9wdGlvbltkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiXWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIERvbVV0aWxzLnNldERhdGEoXHJcbiAgICAgICAgJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi10ZXh0JyksXHJcbiAgICAgICAgJ3Rvb2x0aXAnLFxyXG4gICAgICAgIGQubGFiZWxcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYXNPcHRpb25EZXNjcmlwdGlvbikge1xyXG4gICAgICAgIERvbVV0aWxzLnNldERhdGEoXHJcbiAgICAgICAgICAkb3B0aW9uRWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLWRlc2NyaXB0aW9uJyksXHJcbiAgICAgICAgICAndG9vbHRpcCcsXHJcbiAgICAgICAgICBkLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZSh2YWx1ZSwgaW5kZXgsIHRyaWdnZXJFdmVudCkge1xyXG4gICAgLy8gVmFsdWVcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFtdO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gWy4uLnZhbHVlXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbdmFsdWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdWYWx1ZSA9IHRoaXMubXVsdGlwbGVcclxuICAgICAgPyB0aGlzLnNlbGVjdGVkVmFsdWVzXHJcbiAgICAgIDogdGhpcy5zZWxlY3RlZFZhbHVlc1swXSB8fCAnJztcclxuXHJcbiAgICB0aGlzLiRlbGUudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0LnZhbHVlID0gbmV3VmFsdWU7XHJcblxyXG4gICAgLy8gSW5kZXhcclxuICAgIGlmICh0eXBlb2YgaW5kZXggPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5kZXgpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gWy4uLmluZGV4XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3SW5kZXggPSAnJztcclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIG5ld0luZGV4ID0gdGhpcy5zZWxlY3RlZEluZGV4ZXM7XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB0aGlzLnNlbGVjdGVkSW5kZXhlc1swXSAhPT0gbnVsbCAmJlxyXG4gICAgICB0eXBlb2YgdGhpcy5zZWxlY3RlZEluZGV4ZXNbMF0gIT09ICd1bmRlZmluZWQnXHJcbiAgICApIHtcclxuICAgICAgbmV3SW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXhlc1swXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiRlbGUuaW5kZXggPSBuZXdJbmRleDtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0LmluZGV4ID0gbmV3SW5kZXg7XHJcblxyXG4gICAgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkID1cclxuICAgICAgdGhpcy5tYXhWYWx1ZXMgJiYgdGhpcy5tYXhWYWx1ZXMgPD0gdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGhcclxuICAgICAgICA/IHRydWVcclxuICAgICAgICA6IGZhbHNlO1xyXG4gICAgdGhpcy5zZXRWYWx1ZVRleHQoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZFZhbHVlcyAmJiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpIHtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy12YWx1ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLXZhbHVlJyxcclxuICAgICAgICBVdGlscy5pc05vdEVtcHR5KHRoaXMuc2VsZWN0ZWRWYWx1ZXMpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICdtYXgtdmFsdWUtc2VsZWN0ZWQnLFxyXG4gICAgICB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWRcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRyaWdnZXJFdmVudCkge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2hhbmdlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW1tZWRpYXRlbHkgbW92ZSBpdGVtIHRvIHRvcCBpZiBvcHRpb25zIGlzIG9uLlxyXG4gICAgaWYgKHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIGNvbnN0IGxhc3RTY3JvbGxUb3AgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuICAgICAgdGhpcy5tb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKTtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBsYXN0U2Nyb2xsVG9wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWVUZXh0KCkge1xyXG4gICAgbGV0IHZhbHVlVGV4dCA9IFtdO1xyXG4gICAgbGV0IHZhbHVlVG9vbHRpcCA9IFtdO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnNlbGVjdGVkSW5kZXhlcztcclxuICAgIGxldCBzZWxlY3RlZExlbmd0aCA9IHNlbGVjdGVkVmFsdWVzLmxlbmd0aDtcclxuICAgIGxldCBub09mRGlzcGxheVZhbHVlcyA9IHRoaXMubm9PZkRpc3BsYXlWYWx1ZXM7XHJcbiAgICBsZXQgbWF4aW11bVZhbHVlc1RvU2hvdyA9IDUwO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzQ291bnQgPSAwO1xyXG5cclxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQgJiYgc2VsZWN0ZWRMZW5ndGggPiAxKSB7XHJcbiAgICAgIC8vdGhpcy4kdmFsdWVUZXh0LmlubmVySFRNTCA9IGBBbGwgKCR7c2VsZWN0ZWRMZW5ndGh9KWA7XHJcbiAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtzZWxlY3RlZExlbmd0aH0gJHt0aGlzLml0ZW1zU2VsZWN0ZWRNZXNzYWdlfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGxldCBkIG9mIHRoaXMub3B0aW9ucykge1xyXG4gICAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50ID4gbWF4aW11bVZhbHVlc1RvU2hvdyB8fFxyXG4gICAgICAgICAgKCF0aGlzLm11bHRpcGxlICYmIHNlbGVjdGVkVmFsdWVzQ291bnQgPT09IDEpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZSA9IGQudmFsdWU7XHJcbiAgICAgICAgbGV0IGxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgICBsZXQgaW5kZXggPSBkLmluZGV4O1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAvL2EgdGVzdGVyXHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlcy5pbmRleE9mKHZhbHVlKSAhPT0gLTEgfHxcclxuICAgICAgICAgIHNlbGVjdGVkSW5kZXhlcy5pbmRleE9mKGluZGV4KSAhPT0gLTFcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50ID49IHNlbGVjdGVkVmFsdWVzLmxlbmd0aCkgYnJlYWs7IC8vIGRvIG5vdCBhZGQgc2FtZSB2YWx1ZXMgbXVsdGlwbGVcclxuXHJcbiAgICAgICAgICB2YWx1ZVRleHQucHVzaChsYWJlbCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50Kys7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPD0gbm9PZkRpc3BsYXlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZ1wiPiR7bGFiZWx9PC9zcGFuPmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1vcmVTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZExlbmd0aCAtIG5vT2ZEaXNwbGF5VmFsdWVzO1xyXG5cclxuICAgICAgaWYgKG1vcmVTZWxlY3RlZE9wdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goXHJcbiAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdmFsdWUtdGFnIG1vcmUtdmFsdWUtY291bnRcIj4rICR7bW9yZVNlbGVjdGVkT3B0aW9uc30gbW9yZS4uLjwvc3Bhbj5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYWdncmVnYXRlZFZhbHVlVGV4dCA9IHZhbHVlVGV4dC5qb2luKCcsICcpO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPT09ICcnIHx8XHJcbiAgICAgICAgKHNlbGVjdGVkVmFsdWVzICYmIHNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBhZ2dyZWdhdGVkVmFsdWVUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgbGV0IG1heFZhbHVlcyA9IHRoaXMubWF4VmFsdWVzO1xyXG5cclxuICAgICAgICAgIGlmIChEb21VdGlscy5oYXNFbGxpcHNpcyh0aGlzLiR2YWx1ZVRleHQpIHx8IG1heFZhbHVlcykge1xyXG4gICAgICAgICAgICBsZXQgY291bnRUZXh0ID0gYCR7c2VsZWN0ZWRMZW5ndGh9YDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICBjb3VudFRleHQgKz0gYCAvICR7bWF4VmFsdWVzfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKiByZXBsYWNlIGNvbW1hIGRlbGltaXR0ZWQgbGlzdCBvZiBzZWxlY3Rpb25zIHdpdGggc2hvcnRlciB0ZXh0IGluZGljYXRpbmcgc2VsZWN0aW9uIGNvdW50ICovXHJcbiAgICAgICAgICAgIC8vIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9IG9wdGlvbiR7XHJcbiAgICAgICAgICAgIC8vICAgc2VsZWN0ZWRMZW5ndGggPT09IDEgPyAnJyA6ICdzJ1xyXG4gICAgICAgICAgICAvLyB9IHNlbGVjdGVkYDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLyoqIHJlbW92aW5nIHRvb2x0aXAgaWYgZnVsbCB2YWx1ZSB0ZXh0IGlzIHZpc2libGUgKi9cclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiR2YWx1ZVRleHQsICd0b29sdGlwJywgdmFsdWVUb29sdGlwLmpvaW4oJywgJykpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VhcmNoVmFsdWUodmFsdWUsIHNraXBJbnB1dFNldCwgZm9yY2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsICYmICFmb3JjZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFza2lwSW5wdXRTZXQpIHtcclxuICAgICAgdGhpcy4kc2VhcmNoSW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VhcmNoVmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBzZWFyY2hWYWx1ZTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9IHZhbHVlO1xyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KVxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG5cclxuICAgIGlmICh0aGlzLmhhc1NlcnZlclNlYXJjaCkge1xyXG4gICAgICB0aGlzLnNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnNDb3VudCA9IDA7XHJcbiAgICBsZXQgaGFzRXhhY3RPcHRpb24gPSBmYWxzZTtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZztcclxuICAgIGxldCBpc09wdGlvblZpc2libGUgPSB0aGlzLmlzT3B0aW9uVmlzaWJsZTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyA9XHJcbiAgICAgICAgdGhpcy5nZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gaXNPcHRpb25WaXNpYmxlKFxyXG4gICAgICAgIGQsXHJcbiAgICAgICAgc2VhcmNoVmFsdWUsXHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24gPSByZXN1bHQuaGFzRXhhY3RPcHRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiAhaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldE5ld09wdGlvbigpO1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZU5ld09wdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gdmlzaWJsZU9wdGlvbnNDb3VudDtcclxuXHJcbiAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIHRoaXMuYWZ0ZXJTZXRTZWFyY2hWYWx1ZSgpO1xyXG5cclxuICAgIGlmICh0aGlzLnNlYXJjaENhbGxiYWNrKSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoQ2FsbGJhY2soc2VhcmNoVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VmlzaWJsZU9wdGlvbnNDb3VudCgpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9uc0NvdW50ID0gMDtcclxuICAgIGxldCBoYXNFeGFjdE9wdGlvbiA9IGZhbHNlO1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nO1xyXG4gICAgbGV0IHNlYXJjaFZhbHVlID0gdGhpcy5zZWFyY2hWYWx1ZTtcclxuICAgIGxldCBzaG93T3B0aW9uc09ubHlPblNlYXJjaCA9IHRoaXMuc2hvd09wdGlvbnNPbmx5T25TZWFyY2g7XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGUuYmluZCh0aGlzKTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyA9XHJcbiAgICAgICAgdGhpcy5nZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgICAgaWYgKHNob3dPcHRpb25zT25seU9uU2VhcmNoICYmICFzZWFyY2hWYWx1ZSkge1xyXG4gICAgICAgIGQuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgaXNWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgIGhhc0V4YWN0T3B0aW9uOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3VsdCA9IGlzT3B0aW9uVmlzaWJsZShcclxuICAgICAgICAgIGQsXHJcbiAgICAgICAgICBzZWFyY2hWYWx1ZSxcclxuICAgICAgICAgIGhhc0V4YWN0T3B0aW9uLFxyXG4gICAgICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocmVzdWx0LmlzVmlzaWJsZSkge1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICAgIGhhc0V4YWN0T3B0aW9uID0gcmVzdWx0Lmhhc0V4YWN0T3B0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICBpZiAoc2VhcmNoVmFsdWUgJiYgIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zZXROZXdPcHRpb24oKTtcclxuICAgICAgICB2aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVOZXdPcHRpb24oKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IHZpc2libGVPcHRpb25zQ291bnQ7XHJcblxyXG4gICAgdGhpcy5hZnRlclNldFZpc2libGVPcHRpb25zQ291bnQoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvblByb3AoaW5kZXgsIGtleSwgdmFsdWUpIHtcclxuICAgIGlmICghdGhpcy5vcHRpb25zW2luZGV4XSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zW2luZGV4XVtrZXldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgdGhpcy4kb3B0aW9uc0xpc3Quc3R5bGUuaGVpZ2h0ID1cclxuICAgICAgdGhpcy5vcHRpb25IZWlnaHQgKiB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgbGV0IG9wdGlvbnNIZWlnaHQ7XHJcblxyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zQ291bnQgPSB0aGlzLmdldE9wdGlvbnNDb3VudCgpO1xyXG4gICAgICAgIG9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSBvcHRpb25zSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvcHRpb25zSGVpZ2h0ID0gdGhpcy5vcHRpb25zSGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub09wdGlvbnMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub1NlYXJjaFJlc3VsdHMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG9wdGlvbnNDb250YWluZXIsICdtYXgtaGVpZ2h0Jywgb3B0aW9uc0hlaWdodCk7XHJcblxyXG4gICAgdGhpcy5hZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RHJvcGJveFBvc2l0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMucG9zaXRpb24gIT09ICdhdXRvJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1vcmVWaXNpYmxlU2lkZXMgPSBEb21VdGlscy5nZXRNb3JlVmlzaWJsZVNpZGVzKHRoaXMuJHdyYXBwZXIpO1xyXG4gICAgbGV0IHNob3dPbkxlZnQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogY2hlY2sgdGhhdCBpcyBkcm9wYm94IGhpZGRlbiBvbiByaWdodCBlZGdlIC0gb25seSBpZiBjdXN0b20gd2lkdGggZ2l2ZW4gKi9cclxuICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICBsZXQgYnV0dG9uQ29vcmRzID0gdGhpcy4kdG9nZ2xlQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBsZXQgZHJvcGJveFdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmRyb3Bib3hXaWR0aCk7XHJcbiAgICAgIGxldCBoaWRkZW5PblJpZ2h0ID0gYnV0dG9uQ29vcmRzLmxlZnQgKyBkcm9wYm94V2lkdGggPiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICBsZXQgaGlkZGVuT25MZWZ0ID0gZHJvcGJveFdpZHRoID4gYnV0dG9uQ29vcmRzLnJpZ2h0O1xyXG5cclxuICAgICAgaWYgKGhpZGRlbk9uUmlnaHQgJiYgIWhpZGRlbk9uTGVmdCkge1xyXG4gICAgICAgIHNob3dPbkxlZnQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIC8vIEJFVEFcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICB0eXBlb2Ygc2NyZWVuZnVsbCAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBzY3JlZW5mdWxsLmlzRnVsbHNjcmVlbiAmJlxyXG4gICAgICAgIHNjcmVlbmZ1bGwuZWxlbWVudFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy4kZHJvcGJveENvbnRhaW5lcik7XHJcbiAgICAgICAgc2NyZWVuZnVsbC5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy4kZHJvcGJveENvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy4kYm9keS5hcHBlbmRDaGlsZChmcmFnbWVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBlbGVDb29yZHMgPSB0aGlzLiRlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGxldCB4ID0gZWxlQ29vcmRzLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcclxuICAgICAgbGV0IHkgPSBlbGVDb29yZHMudG9wICsgd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUud2lkdGggPSBgJHtcclxuICAgICAgICB0aGlzLmRyb3Bib3hXaWR0aCA/IHBhcnNlRmxvYXQodGhpcy5kcm9wYm94V2lkdGgpIDogZWxlQ29vcmRzLndpZHRoXHJcbiAgICAgIH1weGA7XHJcbiAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XHJcblxyXG4gICAgICBpZiAobW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBsZXQgZHJvcEJveENvcmQgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAvLyB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYCR7XHJcbiAgICAgICAgLy8gICB5IC0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5vZmZzZXRIZWlnaHQgLSA0XHJcbiAgICAgICAgLy8gfXB4YDtcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYCR7eSAtIGRyb3BCb3hDb3JkLmhlaWdodCAtIDR9cHhgO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgKyB0aGlzLiRlbGUub2Zmc2V0SGVpZ2h0ICsgNH1weGA7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgKyBlbGVDb29yZHMuaGVpZ2h0ICsgNH1weGA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE5ld09wdGlvbigpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbC50cmltKCk7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnbGFiZWwnLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogdmFsdWUsXHJcbiAgICAgICAgaXNDdXJyZW50TmV3OiB0cnVlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRPcHRpb24oZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3RlZFByb3AoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGdldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBnZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2libGVPcHRpb25zIHx8IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIC8gdGhpcy5vcHRpb25IZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKSB7XHJcbiAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IC0gdGhpcy5oYWxmT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4IDwgMCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhcnRJbmRleDtcclxuICB9XHJcblxyXG4gIGdldFRvb2x0aXBBdHRyVGV4dCh0ZXh0LCBlbGxpcHNpc09ubHkgPSBmYWxzZSwgYWxsb3dIdG1sID0gZmFsc2UpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAnZGF0YS10b29sdGlwJzogdGV4dCB8fCAnJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbnRlci1kZWxheSc6IHRoaXMudG9vbHRpcEVudGVyRGVsYXksXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6IHRoaXMudG9vbHRpcEZvbnRTaXplLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6IHRoaXMudG9vbHRpcEFsaWdubWVudCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiB0aGlzLnRvb2x0aXBNYXhXaWR0aCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbGxpcHNpcy1vbmx5JzogZWxsaXBzaXNPbmx5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsbG93LWh0bWwnOiBhbGxvd0h0bWwsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBEb21VdGlscy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0ge1xyXG4gICAgICBpbmRleDogZGF0YS5pbmRleCxcclxuICAgICAgdmFsdWU6IGdldFN0cmluZyhkYXRhLnZhbHVlKSxcclxuICAgICAgbGFiZWw6IGdldFN0cmluZyhkYXRhLmxhYmVsKSxcclxuICAgICAgZGVzY3JpcHRpb246IGdldFN0cmluZyhkYXRhLmRlc2NyaXB0aW9uKSxcclxuICAgICAgYWxpYXM6IHRoaXMuZ2V0QWxpYXMoZGF0YS5hbGlhcyksXHJcbiAgICAgIGlzQ3VycmVudE5ldzogZGF0YS5pc0N1cnJlbnROZXcgfHwgZmFsc2UsXHJcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ld09wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE5ld09wdGlvbigpIHtcclxuICAgIGxldCBsYXN0T3B0aW9uID0gdGhpcy5vcHRpb25zW3RoaXMubGFzdE9wdGlvbkluZGV4XTtcclxuXHJcbiAgICBpZiAoIWxhc3RPcHRpb24gfHwgIWxhc3RPcHRpb24uaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGFzdE9wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbkluZGV4KHZhbHVlKSB7XHJcbiAgICBsZXQgaW5kZXg7XHJcblxyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgaWYgKGQudmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgIGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIGdldE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld1ZhbHVlcyA9IHRoaXMubmV3VmFsdWVzO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMuZmlsdGVyKChkKSA9PiBuZXdWYWx1ZXMuaW5kZXhPZihkKSAhPT0gLTEpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gcmVzdWx0IDogcmVzdWx0WzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxpYXMoYWxpYXMpIHtcclxuICAgIGlmIChhbGlhcykge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGlhcykpIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLmpvaW4oJywnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhbGlhcyA9IGFsaWFzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGlhcyA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhbGlhcztcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlWYWx1ZSgpIHtcclxuICAgIGxldCBkaXNwbGF5VmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGRpc3BsYXlWYWx1ZXMucHVzaChkLmxhYmVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gZGlzcGxheVZhbHVlcyA6IGRpc3BsYXlWYWx1ZXNbMF0gfHwgJyc7XHJcbiAgfVxyXG5cclxuICBnZXRTZWxlY3RlZE9wdGlvbnMoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkT3B0aW9ucyA9IFtdO1xyXG4gICAgbGV0IHZhbHVlS2V5ID0gdGhpcy52YWx1ZUtleTtcclxuICAgIGxldCBsYWJlbEtleSA9IHRoaXMubGFiZWxLZXk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IGlzU2VsZWN0ZWQgPSBzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICAgIGlmIChpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICBbdmFsdWVLZXldOiBkLnZhbHVlLFxyXG4gICAgICAgICAgW2xhYmVsS2V5XTogZC5sYWJlbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZC5pc05ldykge1xyXG4gICAgICAgICAgZGF0YS5pc05ldyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RlZE9wdGlvbnMucHVzaChkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyBzZWxlY3RlZE9wdGlvbnMgOiBzZWxlY3RlZE9wdGlvbnNbMF07XHJcbiAgfVxyXG5cclxuICBnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0W2QuaW5kZXhdID0gZC5vcHRpb25zLnNvbWUoXHJcbiAgICAgICAgKGUpID0+IGlzT3B0aW9uVmlzaWJsZShlLCBzZWFyY2hWYWx1ZSkuaXNWaXNpYmxlXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uc0NvdW50KGNvdW50KSB7XHJcbiAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID1cclxuICAgICAgICAod2luZG93LmlubmVySGVpZ2h0ICogODApIC8gMTAwIC0gZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgIGF2YWlsYWJsZUhlaWdodCAtPSBzZWFyY2hIZWlnaHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvdW50ID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyB0aGlzLm9wdGlvbkhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudCA9IHBhcnNlSW50KGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc0NvdW50ICogdGhpcy5vcHRpb25IZWlnaHQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2libGluZygkZWxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBwcm9wTmFtZSA9XHJcbiAgICAgIGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ25leHRFbGVtZW50U2libGluZycgOiAncHJldmlvdXNFbGVtZW50U2libGluZyc7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoJGVsZSkge1xyXG4gICAgICAgICRlbGUgPSAkZWxlW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoXHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdncm91cC10aXRsZScpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiAkZWxlO1xyXG4gIH1cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgb3BlbkRyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIHRoaXMuc2V0RHJvcGJveFBvc2l0aW9uKCk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICB0aGlzLm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCgpO1xyXG4gICAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdmb2N1c2VkJyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEb21VdGlscy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ29wZW5lZCcpO1xyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIGNsb3NlRHJvcGJveChpc1NpbGVudCkge1xyXG4gICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRyYW5zaXRpb25EdXJhdGlvbiA9IGlzU2lsZW50ID8gMCA6IHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnb3BlbmVkIGZvY3VzZWQnKTtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnb3BlbmVkIGZvY3VzZWQnKTtcclxuXHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwQWN0aXZlKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEb21VdGlscy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ2Nsb3NlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2Nsb3NlZCcpO1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdjbG9zZWQnKTtcclxuICAgICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgICAgLy8gSGlkZSBkcm9wYm94IHNvbWV3aGVyZSBmYXJycnJycnIgYXdheVxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYC0yMDAwcHhgO1xyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS50b3AgPSBgLTIwMDBweGA7XHJcbiAgICAgIH1cclxuICAgIH0sIHRyYW5zaXRpb25EdXJhdGlvbik7XHJcbiAgfVxyXG5cclxuICBtb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKSB7XHJcbiAgICBpZiAoIXRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFNvcnRlZE9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIHx8ICF0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVEcm9wYm94KCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNPcGVuZWQoKSB7XHJcbiAgICByZXR1cm4gRG9tVXRpbHMuaGFzQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXNTZWFyY2hJbnB1dCgpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kc2VhcmNoSW5wdXQ7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgJGVsZS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXNPcHRpb24oZGlyZWN0aW9uLCBlbGUpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICApO1xyXG4gICAgbGV0ICRuZXdGb2N1c2VkRWxlO1xyXG5cclxuICAgIGlmIChlbGUpIHtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSBlbGU7XHJcbiAgICB9IGVsc2UgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAvKiBpZiBubyBlbGVtZW50IG9uIGZvY3VzIGNob29zZSBmaXJzdCB2aXNpYmxlIG9uZSAqL1xyXG4gICAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAudnNjb21wLW9wdGlvbltkYXRhLXZpc2libGUtaW5kZXg9XCIke2ZpcnN0VmlzaWJsZU9wdGlvbkluZGV4fVwiXWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBEb21VdGlscy5oYXNDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2Rpc2FibGVkJykgfHxcclxuICAgICAgICBEb21VdGlscy5oYXNDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2dyb3VwLXRpdGxlJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLmdldFNpYmxpbmcoJG5ld0ZvY3VzZWRFbGUsICduZXh0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRmb2N1c2VkRWxlLCBkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkbmV3Rm9jdXNlZEVsZSAmJiAkbmV3Rm9jdXNlZEVsZSAhPT0gJGZvY3VzZWRFbGUpIHtcclxuICAgICAgaWYgKCRmb2N1c2VkRWxlKSB7XHJcbiAgICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3MoJGZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKCRuZXdGb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLnRvZ2dsZUZvY3VzZWRQcm9wKERvbVV0aWxzLmdldERhdGEoJG5ld0ZvY3VzZWRFbGUsICdpbmRleCcpLCB0cnVlKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbikgdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkbmV3Rm9jdXNlZEVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkZm9jdXNlZEVsZSkge1xyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3U2Nyb2xsVG9wO1xyXG4gICAgbGV0IGNvbnRhaW5lclJlY3QgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IG9wdGlvblJlY3QgPSAkZm9jdXNlZEVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBjb250YWluZXJUb3AgPSBjb250YWluZXJSZWN0LnRvcDtcclxuICAgIGxldCBjb250YWluZXJCb3R0b20gPSBjb250YWluZXJSZWN0LmJvdHRvbTtcclxuICAgIGxldCBjb250YWluZXJIZWlnaHQgPSBjb250YWluZXJSZWN0LmhlaWdodDtcclxuICAgIGxldCBvcHRpb25Ub3AgPSBvcHRpb25SZWN0LnRvcDtcclxuICAgIGxldCBvcHRpb25Cb3R0b20gPSBvcHRpb25SZWN0LmJvdHRvbTtcclxuICAgIGxldCBvcHRpb25IZWlnaHQgPSBvcHRpb25SZWN0LmhlaWdodDtcclxuICAgIGxldCBvcHRpb25PZmZzZXRUb3AgPSAkZm9jdXNlZEVsZS5vZmZzZXRUb3A7XHJcbiAgICBsZXQgb3B0aW9uc1RvcCA9IERvbVV0aWxzLmdldERhdGEodGhpcy4kb3B0aW9ucywgJ3RvcCcsICdudW1iZXInKTtcclxuXHJcbiAgICAvKiBpZiBvcHRpb24gaGlkZGVuIG9uIHRvcCAqL1xyXG4gICAgaWYgKGNvbnRhaW5lclRvcCA+IG9wdGlvblRvcCkge1xyXG4gICAgICBuZXdTY3JvbGxUb3AgPSBvcHRpb25PZmZzZXRUb3AgKyBvcHRpb25zVG9wO1xyXG4gICAgfSBlbHNlIGlmIChjb250YWluZXJCb3R0b20gPCBvcHRpb25Cb3R0b20pIHtcclxuICAgICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiBib3R0b20gKi9cclxuICAgICAgbmV3U2Nyb2xsVG9wID1cclxuICAgICAgICBvcHRpb25PZmZzZXRUb3AgLSBjb250YWluZXJIZWlnaHQgKyBvcHRpb25IZWlnaHQgKyBvcHRpb25zVG9wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChuZXdTY3JvbGxUb3AgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IG5ld1Njcm9sbFRvcDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZU9wdGlvbkZvY3VzKCkge1xyXG4gICAgbGV0ICRmb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3MoJGZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICB0aGlzLnRvZ2dsZUZvY3VzZWRQcm9wKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0T3B0aW9uKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlzQWRkaW5nID0gIURvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8qKiBvbiBzZWxlY3Rpbmcgc2FtZSB2YWx1ZSBpbiBzaW5nbGUgc2VsZWN0ICovXHJcbiAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnNlbGVjdGVkSW5kZXhlcztcclxuICAgIC8vbGV0IHNlbGVjdGVkVmFsdWUgPSBEb21VdGlscy5nZXREYXRhKCRlbGUsICd2YWx1ZScpO1xyXG5cclxuICAgIGxldCBzZWxlY3RlZEluZGV4ID0gcGFyc2VJbnQoRG9tVXRpbHMuZ2V0RGF0YSgkZWxlLCAnaW5kZXgnKSk7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWUgPSB0aGlzLm9wdGlvbnNbc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcblxyXG4gICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3Aoc2VsZWN0ZWRJbmRleCwgaXNBZGRpbmcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzLnB1c2goc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkUHJvcChcclxuICAgICAgICAgICAgdGhpcy5nZXRPcHRpb25JbmRleChzZWxlY3RlZFZhbHVlc1swXSksXHJcbiAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBbc2VsZWN0ZWRWYWx1ZV07XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzID0gW3NlbGVjdGVkSW5kZXhdO1xyXG4gICAgICAgIGxldCAkcHJldlNlbGVjdGVkT3B0aW9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAnLnZzY29tcC1vcHRpb24uc2VsZWN0ZWQnXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCRwcmV2U2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRwcmV2U2VsZWN0ZWRPcHRpb24sICdzZWxlY3RlZCcsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICBVdGlscy5yZW1vdmVJdGVtRnJvbUFycmF5KHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICBVdGlscy5yZW1vdmVJdGVtRnJvbUFycmF5KHNlbGVjdGVkSW5kZXhlcywgc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdjdXJyZW50LW5ldycpKSB7XHJcbiAgICAgIHRoaXMuYmVmb3JlU2VsZWN0TmV3VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZEluZGV4ZXMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0Rm9jdXNlZE9wdGlvbigpIHtcclxuICAgIHRoaXMuc2VsZWN0T3B0aW9uKFxyXG4gICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUFsbE9wdGlvbnMoaXNTZWxlY3RlZCkge1xyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlIHx8IHRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBpc1NlbGVjdGVkICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNTZWxlY3RlZCA9ICFEb21VdGlscy5oYXNDbGFzcyh0aGlzLiR0b2dnbGVBbGxDaGVja2JveCwgJ2NoZWNrZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuICAgIGxldCBzZWxlY3RBbGxPbmx5VmlzaWJsZSA9IHRoaXMuc2VsZWN0QWxsT25seVZpc2libGU7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQsIGlkeCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkIHx8IGQuaXNDdXJyZW50TmV3IHx8IGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWlzU2VsZWN0ZWQgfHwgKHNlbGVjdEFsbE9ubHlWaXNpYmxlICYmICFkLmlzVmlzaWJsZSkpIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAoIXNlbGVjdEFsbE9ubHlWaXNpYmxlIHx8IGQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMucHVzaChpZHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNTZWxlY3RlZCk7XHJcbiAgICB0aGlzLnRvZ2dsZUFkZFNlYXJjaENsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzQWxsU2VsZWN0ZWQpIHtcclxuICAgIGlmICh0eXBlb2YgaXNBbGxTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgaXNBbGxTZWxlY3RlZCA9ICF0aGlzLm9wdGlvbnMuc29tZSgoZCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICFkLmlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHZhbHVlUGFzc2VkID0gdHlwZW9mIGlzQWxsU2VsZWN0ZWQgPT09ICdib29sZWFuJztcclxuXHJcbiAgICAgIGlmICghdmFsdWVQYXNzZWQpIHtcclxuICAgICAgICBpc0FsbFNlbGVjdGVkID0gdGhpcy5pc0FsbE9wdGlvbnNTZWxlY3RlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3gsICdjaGVja2VkJywgaXNBbGxTZWxlY3RlZCk7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VsZWN0QWxsT25seVZpc2libGUgJiYgdmFsdWVQYXNzZWQpIHtcclxuICAgICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gdGhpcy5pc0FsbE9wdGlvbnNTZWxlY3RlZCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gaXNBbGxTZWxlY3RlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZUFkZFNlYXJjaENsYXNzKGlzQWxsU2VsZWN0ZWQpIHtcclxuICAgIC8vIEZpcnN0LCBpZiB0aGUgc2VhcmNoIHJldHVybnMgbm8gaXRlbSwgd2UgY2FuIGhpZGUgdGhpcyBzZWN0aW9uXHJcbiAgICBjb25zdCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgdGhpcy4kdG9nZ2xlQWRkU2VhY2hDb250YWluZXIsXHJcbiAgICAgICdoaWRkZW4nLFxyXG4gICAgICAhdmlzaWJsZU9wdGlvbnMgfHwgIXZpc2libGVPcHRpb25zLmxlbmd0aFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodHlwZW9mIGlzQWxsU2VsZWN0ZWQgIT09ICdib29sZWFuJykge1xyXG4gICAgICBpc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIGlzQWxsU2VsZWN0ZWQgPSAhdGhpcy5vcHRpb25zLnNvbWUoKGQpID0+IHtcclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIGQuaXNWaXNpYmxlICYmICFkLmlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciB2YWx1ZVBhc3NlZCA9IHR5cGVvZiBpc0FsbFNlbGVjdGVkID09PSAnYm9vbGVhbic7XHJcblxyXG4gICAgICBpZiAoIXZhbHVlUGFzc2VkKSB7XHJcbiAgICAgICAgaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgIHRoaXMuJHRvZ2dsZUFkZFNlYWNoQ2hlY2tib3gsXHJcbiAgICAgICdjaGVja2VkJyxcclxuICAgICAgaXNBbGxTZWxlY3RlZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlzQWxsT3B0aW9uc1NlbGVjdGVkKCkge1xyXG4gICAgbGV0IGlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICBpc0FsbFNlbGVjdGVkID0gIXRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICFkLmlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpc0FsbFNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRm9jdXNlZFByb3AoaW5kZXgsIGlzRm9jdXNlZCA9IGZhbHNlKSB7XHJcbiAgICBpZiAodGhpcy5mb2N1c2VkT3B0aW9uSW5kZXgpIHtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4LCAnaXNGb2N1c2VkJywgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChpbmRleCwgJ2lzRm9jdXNlZCcsIGlzRm9jdXNlZCk7XHJcbiAgICB0aGlzLmZvY3VzZWRPcHRpb25JbmRleCA9IGluZGV4O1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU2VsZWN0ZWRQcm9wKGluZGV4LCBpc1NlbGVjdGVkID0gZmFsc2UpIHtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChpbmRleCwgJ2lzU2VsZWN0ZWQnLCBpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvVG9wKCkge1xyXG4gICAgbGV0IGlzQ2xvc2VkID0gIXRoaXMuaXNPcGVuZWQoKTtcclxuXHJcbiAgICBpZiAoaXNDbG9zZWQpIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2Nyb2xsVG9wID0gdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3A7XHJcblxyXG4gICAgaWYgKHNjcm9sbFRvcCA+IDApIHtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc0Nsb3NlZCkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCh0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgZC5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmJlZm9yZVZhbHVlU2V0KHRydWUpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShudWxsLCBudWxsLCB0cnVlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgYmVmb3JlVmFsdWVTZXQoaXNSZXNldCkge1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNSZXNldCA/IGZhbHNlIDogdW5kZWZpbmVkKTtcclxuICB9XHJcblxyXG4gIGFmdGVyVmFsdWVTZXQoKSB7XHJcbiAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJTZXRPcHRpb25zKGtlZXBWYWx1ZSkge1xyXG4gICAgbGV0IHNlYXJjaCA9IHRoaXMuc2VhcmNoVmFsdWU7IC8vIE5lZWQgdG8gYmUgc3RvcmVkIGJlY2F1c2Ugc2V0VmFsdWVNZXRob2Qgd2lsbCBlbXB0eSB0aGlzLnNlYXJjaFZhbHVlXHJcblxyXG4gICAgaWYgKGtlZXBWYWx1ZSkge1xyXG4gICAgICBpZiAodGhpcy5pc0FsbFNlbGVjdGVkKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zKHRoaXMuaXNBbGxTZWxlY3RlZCk7IC8vIElmIHNlbGVjdCBhbGwgd2FzIG9uIGxldCBzZWxlY3QgYWxsIG9uXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZCh0aGlzLnNlbGVjdGVkVmFsdWVzLCB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldCk7IC8vIFJlc2VsZWN0IHZhbGlkIHZhbHVlc1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5zZWFyY2gpIHRoaXMuc2V0U2VhcmNoVmFsdWUoc2VhcmNoLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKCFrZWVwVmFsdWUpIHtcclxuICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkT3B0aW9uKGRhdGEsIHJlcmVuZGVyKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4Kys7XHJcbiAgICBkYXRhLmluZGV4ID0gdGhpcy5sYXN0T3B0aW9uSW5kZXg7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXRPcHRpb25PYmooZGF0YSk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucy5wdXNoKG5ld09wdGlvbik7XHJcblxyXG4gICAgaWYgKHJlcmVuZGVyKSB7XHJcbiAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB0aGlzLmFmdGVyU2V0T3B0aW9ucygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT3B0aW9uKGluZGV4KSB7XHJcbiAgICBpZiAoIWluZGV4ICYmIGluZGV4ICE9IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXgtLTtcclxuICB9XHJcblxyXG4gIHJlbW92ZU5ld09wdGlvbigpIHtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb24obmV3T3B0aW9uLmluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJlZm9yZVNlbGVjdE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgdGhpcy5uZXdWYWx1ZXMucHVzaChuZXdPcHRpb24udmFsdWUpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNDdXJyZW50TmV3JywgZmFsc2UpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnaXNOZXcnLCB0cnVlKTtcclxuXHJcbiAgICAvKiogdXNpbmcgc2V0VGltZW91dCB0byBmaXggdGhlIGlzc3VlIG9mIGRyb3Bib3ggZ2V0dGluZyBjbG9zZWQgb24gc2VsZWN0ICovXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBzb3J0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gb3B0aW9ucy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmIChiLnZhbHVlID09PSBub25lT3B0aW9uVmFsdWUgJiYgYS52YWx1ZSAhPT0gbm9uZU9wdGlvblZhbHVlKSB7XHJcbiAgICAgICAgLy8gTm9uZSBpcyBhbHdheXMgZmlyc3RcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIGlmICghYS5pc1NlbGVjdGVkICYmICFiLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSBlbHNlIGlmIChhLmlzU2VsZWN0ZWQgJiYgKCFiLmlzU2VsZWN0ZWQgfHwgYS5pbmRleCA8IGIuaW5kZXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNvcnRPcHRpb25zR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHNvcnRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucztcclxuICAgIG9wdGlvbnMgPSB0aGlzLnN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgY2hpbGRPcHRpb25zID0gZC5vcHRpb25zO1xyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBjaGlsZE9wdGlvbnMuc29tZSgoZSkgPT4gZS5pc1NlbGVjdGVkKTtcclxuXHJcbiAgICAgIGlmIChkLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICBzb3J0T3B0aW9ucyhjaGlsZE9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzb3J0T3B0aW9ucyhvcHRpb25zKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5kZXN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgaXNPcHRpb25WaXNpYmxlKGQsIHNlYXJjaFZhbHVlLCBoYXNFeGFjdE9wdGlvbiwgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcpIHtcclxuICAgIGxldCB2YWx1ZSA9IGQubGFiZWwudG9Mb3dlckNhc2UoKTtcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGQuZGVzY3JpcHRpb247XHJcbiAgICBsZXQgYWxpYXMgPSBkLmFsaWFzO1xyXG4gICAgbGV0IGlzVmlzaWJsZSA9IHZhbHVlLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuXHJcbiAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdbZC5pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFsaWFzICYmICFpc1Zpc2libGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gYWxpYXMuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkZXNjcmlwdGlvbiAmJiAhaXNWaXNpYmxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IGRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIGQuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xyXG5cclxuICAgIGlmICghaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgaGFzRXhhY3RPcHRpb24gPSB2YWx1ZSA9PT0gc2VhcmNoVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNWaXNpYmxlLFxyXG4gICAgICBoYXNFeGFjdE9wdGlvbixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBsZXQgY2hpbGRPcHRpb25zID0ge307XHJcblxyXG4gICAgLyoqIGdldHRpbmcgYWxsIGdyb3VwIHRpdGxlICovXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgbGV0IGNoaWxkQXJyYXkgPSBbXTtcclxuICAgICAgICBkLm9wdGlvbnMgPSBjaGlsZEFycmF5O1xyXG4gICAgICAgIGNoaWxkT3B0aW9uc1tkLmluZGV4XSA9IGNoaWxkQXJyYXk7XHJcblxyXG4gICAgICAgIHJlc3VsdC5wdXNoKGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiogZ2V0dGluZyBhbGwgZ3JvdXAgb3B0aW9ucyAqL1xyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBjaGlsZE9wdGlvbnNbZC5ncm91cEluZGV4XS5wdXNoKGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZGVzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKGQpO1xyXG4gICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGQub3B0aW9ucyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgc2VydmVyU2VhcmNoKHNlYXJjaFZhbHVlKSB7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLW9wdGlvbnMnKTtcclxuICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdzZXJ2ZXItc2VhcmNoaW5nJyk7XHJcbiAgICB0aGlzLnNldFNlbGVjdGVkT3B0aW9ucygpO1xyXG4gICAgdGhpcy5vblNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSwgdGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHN0YXRpYyBpbml0KG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlQXJyYXkgPSBvcHRpb25zLmVsZTtcclxuXHJcbiAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNpbmdsZUVsZSA9IGZhbHNlO1xyXG5cclxuICAgIGlmICh0eXBlb2YgJGVsZUFycmF5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAkZWxlQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCRlbGVBcnJheSk7XHJcblxyXG4gICAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlQXJyYXkubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZUFycmF5ID0gWyRlbGVBcnJheV07XHJcbiAgICAgIHNpbmdsZUVsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluc3RhbmNlcyA9IFtdO1xyXG4gICAgJGVsZUFycmF5LmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgb3B0aW9ucy5lbGUgPSAkZWxlO1xyXG4gICAgICBpbnN0YW5jZXMucHVzaChuZXcgVmlydHVhbFNlbGVjdChvcHRpb25zKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc2luZ2xlRWxlID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0Rm9ybShlKSB7XHJcbiAgICBsZXQgJGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJyk7XHJcblxyXG4gICAgaWYgKCEkZm9ybSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnZzY29tcC13cmFwcGVyJykuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICAkZWxlLnBhcmVudEVsZW1lbnQudmlydHVhbFNlbGVjdC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIGtlZXBWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXREaXNhYmxlZE9wdGlvbnNNZXRob2Qob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdG9nZ2xlU2VsZWN0QWxsKGlzU2VsZWN0ZWQpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC50b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzQWxsU2VsZWN0ZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkT3B0aW9uTWV0aG9kKGRhdGEpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5hZGRPcHRpb24oZGF0YSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TmV3VmFsdWVNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmdldE5ld1ZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdmVyc2lvbigpIHtcclxuICAgIHJldHVybiB2aXJ0dWFsU2VsZWN0VmVyc2lvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREaXNwbGF5VmFsdWVNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmdldERpc3BsYXlWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFNlbGVjdGVkT3B0aW9uc01ldGhvZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3QuZ2V0U2VsZWN0ZWRPcHRpb25zKCk7XHJcbiAgfVxyXG4gIHN0YXRpYyBvcGVuTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5vcGVuRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNsb3NlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRTZWFyY2hWYWx1ZU1ldGhvZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5zZXRTZWFyY2hWYWx1ZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgb25SZXNpemVNZXRob2QoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudnNjb21wLXdyYXBwZXInKS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgICRlbGUucGFyZW50RWxlbWVudC52aXJ0dWFsU2VsZWN0Lm9uUmVzaXplKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gZW5kICovXHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgVmlydHVhbFNlbGVjdC5yZXNldEZvcm0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgVmlydHVhbFNlbGVjdC5vblJlc2l6ZU1ldGhvZCk7XHJcblxyXG53aW5kb3cuVmlydHVhbFNlbGVjdCA9IFZpcnR1YWxTZWxlY3Q7XHJcbiJdLCJuYW1lcyI6WyJEb21VdGlscyIsIl9jbGFzc0NhbGxDaGVjayIsImtleSIsInZhbHVlIiwiJGVsZSIsImNsYXNzTmFtZSIsInNwbGl0IiwiZ2V0RWxlbWVudHMiLCJmb3JFYWNoIiwiJHRoaXMiLCJfJHRoaXMkY2xhc3NMaXN0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJfJHRoaXMkY2xhc3NMaXN0MiIsInJlbW92ZSIsImlzQWRkIiwiaXNBZGRlZCIsInVuZGVmaW5lZCIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJjb250YWlucyIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJuYW1lIiwidHlwZSIsImRhdGFzZXQiLCJwYXJzZUZsb2F0Iiwic2V0QXR0cmlidXRlIiwiJGZyb20iLCIkdG8iLCJhdHRyTGlzdCIsInZhbHVlTGVzc1Byb3BzIiwidmFsdWVzIiwiYXR0ciIsImdldEF0dHJpYnV0ZSIsImluZGV4T2YiLCJzdHlsZSIsInByb3BzIiwiT2JqZWN0Iiwia2V5cyIsImV2ZW50cyIsImNhbGxiYWNrIiwiVXRpbHMiLCJldmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJidWJibGVzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic2V0VGltZW91dCIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRhdGEiLCJodG1sIiwiayIsImNvbmNhdCIsInNraXBBdHRyTmFtZSIsInJlc3VsdCIsImJveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImF2YWlsYWJsZVdpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsImlubmVySGVpZ2h0IiwibGVmdEFyZWEiLCJsZWZ0IiwidG9wQXJlYSIsInRvcCIsImhvcml6b250YWwiLCJ3aWR0aCIsInZlcnRpY2FsIiwiaGVpZ2h0IiwidGV4dCIsInRvU3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5IiwiX3R5cGVvZiIsInRoaXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJzcGxpY2UiLCJmaWx0ZXIiLCJkIiwicmVwbGFjZSIsImMiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJub25lT3B0aW9uVmFsdWUiLCJrZXlEb3duTWV0aG9kTWFwcGluZyIsIlZpcnR1YWxTZWxlY3QiLCJvcHRpb25zIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCJfdGhpczIiLCJ3cmFwcGVyQ2xhc3NlcyIsInZhbHVlVG9vbHRpcCIsImdldFRvb2x0aXBBdHRyVGV4dCIsIm11bHRpcGxlIiwiY2xlYXJCdXR0b25Ub29sdGlwIiwiZHJvcGJveENvbnRhaW5lclN0eWxlIiwiekluZGV4IiwiZ2V0V3JhcHBlckNsYXNzZXMiLCJjbGFzc2VzIiwiYWRkaXRpb25hbENsYXNzZXMiLCJkaXNhYmxlU2VsZWN0QWxsIiwicG9zaXRpb24iLCJoaWRlQ2xlYXJCdXR0b24iLCJrZWVwQWx3YXlzT3BlbiIsInNob3dBc1BvcHVwIiwiZHJvcGJveFdpZHRoIiwiaGFzU2VhcmNoIiwiZ3VpZCIsImRyb3Bib3hDb250YWluZXIiLCJub09wdGlvbnNUZXh0Iiwibm9TZWFyY2hSZXN1bHRzVGV4dCIsInBsYWNlaG9sZGVyIiwiYXBwZW5kVG9Cb2R5IiwiaW5uZXJIVE1MIiwiJGJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCIkd3JhcHBlciIsIiR0b2dnbGVCdXR0b24iLCIkY2xlYXJCdXR0b24iLCIkZHJvcGJveENsb3NlQnV0dG9uIiwiYXBwZW5kIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCIkZHJvcGJveENvbnRhaW5lciIsIiRkcm9wYm94RWwiLCIkc2VhcmNoIiwiJG9wdGlvbnNDb250YWluZXIiLCIkb3B0aW9uc0xpc3QiLCIkb3B0aW9ucyIsIiR2YWx1ZVRleHQiLCIkaGlkZGVuSW5wdXQiLCIkbm9PcHRpb25zIiwiJG5vU2VhcmNoUmVzdWx0cyIsImFmdGVyUmVuZGVyV3JhcHBlciIsInNlYXJjaFJlZ2V4IiwiX3RoaXMzIiwidmlzaWJsZU9wdGlvbnMiLCJnZXRWaXNpYmxlT3B0aW9ucyIsImNoZWNrYm94SHRtbCIsIm5ld09wdGlvbkljb25IdG1sIiwibWFya1NlYXJjaFJlc3VsdHMiLCJzZWFyY2hWYWx1ZSIsInN0eWxlVGV4dCIsIm9wdGlvbkhlaWdodCIsIlJlZ0V4cCIsImFsbG93TmV3T3B0aW9uIiwibmV3T3B0aW9uVG9vbHRpcCIsIm9wdGlvbkxhYmVsIiwibGFiZWwiLCJvcHRpb25DbGFzc2VzIiwib3B0aW9uVG9vbHRpcCIsImxlZnRTZWN0aW9uIiwicmlnaHRTZWN0aW9uIiwiZGVzY3JpcHRpb24iLCJpc0ZvY3VzZWQiLCJpc0Rpc2FibGVkIiwiaXNHcm91cFRpdGxlIiwiaXNTZWxlY3RlZCIsImlzR3JvdXBPcHRpb24iLCJpc0N1cnJlbnROZXciLCJ2aXNpYmxlSW5kZXgiLCJoYXNOb09wdGlvbnMiLCJoYXNOb1NlYXJjaFJlc3VsdHMiLCJzZXRPcHRpb25zUG9zaXRpb24iLCJzZXRPcHRpb25zVG9vbHRpcCIsImhhc1NlYXJjaENvbnRhaW5lciIsInNlYXJjaElucHV0Iiwic2VhcmNoUGxhY2Vob2xkZXIiLCJzZWxlY3RBbGxUZXh0IiwiYWRkU2VhY2hUb1NlbGVjdGlvbiIsImFkZFNlYXJjaFRvU2VsZWN0aW9uVGV4dCIsIiRzZWFyY2hJbnB1dCIsIiRzZWFyY2hDbGVhciIsIiR0b2dnbGVBbGxCdXR0b24iLCIkdG9nZ2xlQWxsQ2hlY2tib3giLCIkdG9nZ2xlQWRkU2VhY2hDb250YWluZXIiLCIkdG9nZ2xlQWRkU2VhY2hCdXR0b24iLCIkdG9nZ2xlQWRkU2VhY2hDaGVja2JveCIsImFkZEV2ZW50IiwicmVtb3ZlT3B0aW9uRm9jdXMiLCJtZXRob2QiLCJfdGhpczQiLCJldmVudHNLZXkiLCJiaW5kIiwiX3RoaXMiLCJFdmVudCIsImlzT3BlbmVkIiwidGFyZ2V0IiwiY2xvc2VzdCIsImNsb3NlRHJvcGJveCIsIndoaWNoIiwia2V5Q29kZSIsInNlbGVjdEZvY3VzZWRPcHRpb24iLCJvcGVuRHJvcGJveCIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94IiwicmVzZXQiLCJzZXRWaXNpYmxlT3B0aW9ucyIsInNlbGVjdE9wdGlvbiIsInNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCIsInN0b3BQcm9wYWdhdGlvbiIsInNldFNlYXJjaFZhbHVlIiwiZm9jdXNTZWFyY2hJbnB1dCIsInRvZ2dsZUFsbE9wdGlvbnMiLCJzZWxlY3RlZFZhbHVlcyIsImZpbHRlcmVkVmFsdWVzIiwiaXNWaXNpYmxlIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInMiLCJuIiwiZG9uZSIsIm9wdCIsInB1c2giLCJlcnIiLCJmIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInRvZ2dsZUFkZFNlYXJjaENsYXNzIiwidG9nZ2xlQWxsT3B0aW9uc0NsYXNzIiwic2V0VmFsdWUiLCJyZW5kZXJPcHRpb25zIiwic2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsImlzUmVzZXQiLCJfdGhpczUiLCJuZXdPcHRpb24iLCJnZXROZXdPcHRpb24iLCJuZXdJbmRleCIsIm5ld1ZhbHVlcyIsInNldE9wdGlvblByb3AiLCJyZW5kZXJTZWFyY2giLCJzZXRPcHRpb25zSGVpZ2h0IiwiYWRkRXZlbnRzIiwic2V0TWV0aG9kcyIsImluaXRpYWxTZWxlY3RlZFZhbHVlIiwic2V0VmFsdWVNZXRob2QiLCJzaWxlbnRJbml0aWFsVmFsdWVTZXQiLCJhdXRvU2VsZWN0Rmlyc3RPcHRpb24iLCJoYXNTZXJ2ZXJTZWFyY2giLCJzZXJ2ZXJTZWFyY2giLCJzZXRWaXNpYmxlT3B0aW9uc0NvdW50Iiwic2VsZWN0QWxsT25seVZpc2libGUiLCJzY3JvbGxUb1RvcCIsImtlZXBWYWx1ZSIsInNlYXJjaCIsImlzQWxsU2VsZWN0ZWQiLCJzZXREZWZhdWx0UHJvcHMiLCJzZXRQcm9wc0Zyb21FbGVtZW50QXR0ciIsImNvbnZlcnRUb0Jvb2xlYW4iLCJlbGUiLCJ2YWx1ZUtleSIsImxhYmVsS2V5IiwiZGVzY3JpcHRpb25LZXkiLCJhbGlhc0tleSIsIm9wdGlvbkhlaWdodFRleHQiLCJoYXNPcHRpb25EZXNjcmlwdGlvbiIsInNob3dEcm9wYm94QXNQb3B1cCIsInRvb2x0aXBGb250U2l6ZSIsInRvb2x0aXBBbGlnbm1lbnQiLCJ0b29sdGlwTWF4V2lkdGgiLCJub09mRGlzcGxheVZhbHVlcyIsInBhcnNlSW50IiwibWF4VmFsdWVzIiwic2VsZWN0ZWRWYWx1ZSIsInBvcHVwRHJvcGJveEJyZWFrcG9pbnQiLCJvblNlcnZlclNlYXJjaCIsIml0ZW1zU2VsZWN0ZWRNZXNzYWdlIiwiYWxsb3dOb25lT3B0aW9uIiwibm9uZU9wdGlvblRleHQiLCJzZWFyY2hDYWxsYmFjayIsInNlbGVjdGVkSW5kZXhlcyIsInNlbGVjdGVkT3B0aW9ucyIsInRvb2x0aXBFbnRlckRlbGF5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwic2VhcmNoVmFsdWVPcmlnaW5hbCIsIm9wdGlvbnNDb3VudCIsImdldE9wdGlvbnNDb3VudCIsImhhbGZPcHRpb25zQ291bnQiLCJNYXRoIiwiY2VpbCIsIm9wdGlvbnNIZWlnaHQiLCJnZXRPcHRpb25zSGVpZ2h0IiwiZGVmYXVsdE9wdGlvbnMiLCJhc3NpZ24iLCJtYXBwaW5nIiwidmlydHVhbFNlbGVjdCIsInNldE9wdGlvbnNNZXRob2QiLCJzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QiLCJ0b2dnbGVTZWxlY3RBbGwiLCJhZGRPcHRpb24iLCJhZGRPcHRpb25NZXRob2QiLCJnZXROZXdWYWx1ZSIsImdldE5ld1ZhbHVlTWV0aG9kIiwiZ2V0RGlzcGxheVZhbHVlIiwiZ2V0RGlzcGxheVZhbHVlTWV0aG9kIiwib3BlbiIsIm9wZW5NZXRob2QiLCJjbG9zZSIsImNsb3NlTWV0aG9kIiwic2V0U2VhcmNoVmFsdWVNZXRob2QiLCJzaWxlbnRDaGFuZ2UiLCJtYXAiLCJ2IiwiX3N0ZXAzIiwidmFsaWRWYWx1ZXMiLCJ2YWxpZEluZGV4ZXMiLCJ2YWxpZFZhbHVlc1NldCIsIlNldCIsInZhbHVlU2V0IiwiX2l0ZXJhdG9yMyIsImhhcyIsImJlZm9yZVZhbHVlU2V0IiwiYWZ0ZXJWYWx1ZVNldCIsIm5ld29wdGlvbiIsImFmdGVyU2V0T3B0aW9ucyIsInNldE9wdGlvbnNQcm9wIiwicHJlcGFyZWRPcHRpb25zIiwiaGFzRGlzYWJsZWRPcHRpb25zIiwiZ2V0U3RyaW5nIiwiZ2V0QWxpYXMiLCJoYXNPcHRpb25Hcm91cCIsInVuc2hpZnQiLCJwcmVwYXJlT3B0aW9uIiwiY2hpbGRPcHRpb25zIiwib3B0aW9uIiwiYWxpYXMiLCJncm91cEluZGV4IiwidmlzaWJsZU9wdGlvbnNDb3VudCIsImxhc3RPcHRpb25JbmRleCIsInNldFNvcnRlZE9wdGlvbnMiLCJfdGhpczYiLCJuZXdPcHRpb25zIiwib3B0aW9uc1VwZGF0ZWQiLCJuZXdPcHRpb25zVmFsdWUiLCJzb21lIiwidG9Mb3dlckNhc2UiLCJzZXROZXdPcHRpb24iLCJzZXRWYWx1ZVRleHQiLCJzb3J0ZWRPcHRpb25zIiwic29ydE9wdGlvbnNHcm91cCIsInNvcnRPcHRpb25zIiwibWF4T3B0aW9uc1RvU2hvdyIsInN0YXJ0SW5kZXgiLCJnZXRWaXNpYmxlU3RhcnRJbmRleCIsImVuZEluZGV4IiwiaSIsImluVmlldyIsInRyYW5zZm9ybSIsIl90aGlzNyIsIiRvcHRpb25FbGUiLCJ0cmlnZ2VyRXZlbnQiLCJuZXdWYWx1ZSIsImlzTWF4VmFsdWVzU2VsZWN0ZWQiLCJsYXN0U2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwibW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0IiwidmFsdWVUZXh0Iiwic2VsZWN0ZWRMZW5ndGgiLCJzZWxlY3RlZFZhbHVlc0NvdW50IiwiX3N0ZXA0IiwiX2l0ZXJhdG9yNCIsIm1vcmVTZWxlY3RlZE9wdGlvbnMiLCJhZ2dyZWdhdGVkVmFsdWVUZXh0Iiwiam9pbiIsImNvdW50VGV4dCIsInNraXBJbnB1dFNldCIsImZvcmNlIiwidHJpbSIsInZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nIiwiaGFzRXhhY3RPcHRpb24iLCJpc09wdGlvblZpc2libGUiLCJnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyIsInJlbW92ZU5ld09wdGlvbiIsImFmdGVyU2V0U2VhcmNoVmFsdWUiLCJzaG93T3B0aW9uc09ubHlPblNlYXJjaCIsImFmdGVyU2V0VmlzaWJsZU9wdGlvbnNDb3VudCIsImFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsIm1vcmVWaXNpYmxlU2lkZXMiLCJzaG93T25MZWZ0IiwiYnV0dG9uQ29vcmRzIiwidmlld3BvcnRXaWR0aCIsImhpZGRlbk9uUmlnaHQiLCJoaWRkZW5PbkxlZnQiLCJyaWdodCIsInNjcmVlbmZ1bGwiLCJpc0Z1bGxzY3JlZW4iLCJlbGVtZW50IiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXBwZW5kQ2hpbGQiLCJlbGVDb29yZHMiLCJ4Iiwic2Nyb2xsWCIsInkiLCJzY3JvbGxZIiwiZHJvcEJveENvcmQiLCJnZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCIsImVsbGlwc2lzT25seSIsImFsbG93SHRtbCIsImxhc3RPcHRpb24iLCJfc3RlcDUiLCJkaXNwbGF5VmFsdWVzIiwiX2l0ZXJhdG9yNSIsIl9kYXRhIiwiX2RlZmluZVByb3BlcnR5IiwiaXNOZXciLCJzdHJ1Y3R1cmVPcHRpb25Hcm91cCIsImNvdW50IiwiZmxvb3IiLCJkaXJlY3Rpb24iLCJwcm9wTmFtZSIsImlzU2lsZW50IiwiX3RoaXM4Iiwic2V0RHJvcGJveFBvc2l0aW9uIiwiaXNQb3B1cEFjdGl2ZSIsIl90aGlzOSIsImZvY3VzIiwiJG5ld0ZvY3VzZWRFbGUiLCIkZm9jdXNlZEVsZSIsImdldFNpYmxpbmciLCJmaXJzdFZpc2libGVPcHRpb25JbmRleCIsInRvZ2dsZUZvY3VzZWRQcm9wIiwibW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXciLCJuZXdTY3JvbGxUb3AiLCJjb250YWluZXJSZWN0Iiwib3B0aW9uUmVjdCIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImJvdHRvbSIsImNvbnRhaW5lckhlaWdodCIsIm9wdGlvblRvcCIsIm9wdGlvbkJvdHRvbSIsIm9wdGlvbk9mZnNldFRvcCIsIm9mZnNldFRvcCIsIm9wdGlvbnNUb3AiLCJpc0FkZGluZyIsInNlbGVjdGVkSW5kZXgiLCJ0b2dnbGVTZWxlY3RlZFByb3AiLCJnZXRPcHRpb25JbmRleCIsIiRwcmV2U2VsZWN0ZWRPcHRpb24iLCJiZWZvcmVTZWxlY3ROZXdWYWx1ZSIsImlkeCIsInZhbHVlUGFzc2VkIiwiaXNBbGxPcHRpb25zU2VsZWN0ZWQiLCJmb2N1c2VkT3B0aW9uSW5kZXgiLCJpc0Nsb3NlZCIsInJlcmVuZGVyIiwiZ2V0T3B0aW9uT2JqIiwicmVtb3ZlT3B0aW9uIiwic29ydCIsImEiLCJiIiwiZGVzdHJ1Y3R1cmVPcHRpb25Hcm91cCIsImNoaWxkQXJyYXkiLCJzZXRTZWxlY3RlZE9wdGlvbnMiLCIkZWxlQXJyYXkiLCJzaW5nbGVFbGUiLCJpbnN0YW5jZXMiLCIkZm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJlbnRFbGVtZW50IiwiZ2V0U2VsZWN0ZWRPcHRpb25zIiwib25SZXNpemUiLCJyZXNldEZvcm0iLCJvblJlc2l6ZU1ldGhvZCJdLCJzb3VyY2VSb290IjoiIn0=