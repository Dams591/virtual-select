/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(t,e,i)=>{i.r(e),i.d(e,{DomUtils:()=>a});var o=i(/*! ./index */"./src/utils/index.js");function s(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"addClass",value:function(e,i){e&&(i=i.split(" "),t.getElements(e).forEach((function(t){var e;(e=t.classList).add.apply(e,s(i))})))}},{key:"removeClass",value:function(e,i){e&&(i=i.split(" "),t.getElements(e).forEach((function(t){var e;(e=t.classList).remove.apply(e,s(i))})))}},{key:"toggleClass",value:function(e,i,o){var s;if(e)return void 0!==o&&(o=Boolean(o)),t.getElements(e).forEach((function(t){s=t.classList.toggle(i,o)})),s}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getData",value:function(t,e,i){if(t){var o=t?t.dataset[e]:"";return"number"===i&&(o=parseFloat(o)||0),o}}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"setAttr",value:function(t,e,i){t&&t.setAttribute(e,i)}},{key:"setAttrFromEle",value:function(t,e,i,o){var s={};i.forEach((function(e){s[e]=t.getAttribute(e)})),i.forEach((function(t){var i=s[t];(i||-1!==o.indexOf(t)&&""===i)&&e.setAttribute(t,i)}))}},{key:"setStyle",value:function(t,e,i){t&&(t.style[e]=i)}},{key:"setStyles",value:function(t,e){t&&e&&Object.keys(e).forEach((function(i){t.style[i]=e[i]}))}},{key:"getElements",value:function(t){if(t)return void 0===t.forEach&&(t=[t]),t}},{key:"addEvent",value:function(e,i,s){e&&(i=o.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){(e=t.getElements(e)).forEach((function(t){t.addEventListener(i,s)}))}))}},{key:"dispatchEvent",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(e=t.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new CustomEvent(i,{bubbles:o}))}))}),0))}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var o=t[i];void 0!==o&&(e+=" ".concat(i,'="').concat(o,'" '))}return e}},{key:"getStyleText",value:function(t,e){var i="";for(var o in t)i+="".concat(o,": ").concat(t[o],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=e.left,n=e.top;return{horizontal:s>i-s-e.width?"left":"right",vertical:n>o-n-e.height?"top":"bottom"}}}],(i=null)&&l(e.prototype,i),n&&l(e,n),t}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(t,e,i)=>{i.r(e),i.d(e,{Utils:()=>o.Utils,DomUtils:()=>s.DomUtils});var o=i(/*! ./utils */"./src/utils/utils.js"),s=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{Utils:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"getString",value:function(t){return t||0===t?t.toString():""}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===n(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length)return t;i&&(t=o(t));var s=t.indexOf(e);return-1!==s&&t.splice(s,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}}],(i=null)&&l(e.prototype,i),s&&l(e,s),t}()}},e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(o),i.d(o,{VirtualSelect:()=>c});var t=i(/*! ./utils */"./src/utils/index.js");function e(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r="{#virtual-select-none-option#}",p={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},c=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);try{this.setProps(t),this.setDisabledOptions(t.disabledOptions),this.setOptions(t.options),this.render()}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var o,n,l;return o=i,l=[{key:"init",value:function(t){var e=t.ele;if(e){var o=!1;if("string"!=typeof e||(e=document.querySelector(e))){void 0===e.length&&(e=[e],o=!0);var s=[];return e.forEach((function(e){t.ele=e,s.push(new i(t))})),o?s[0]:s}}}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t,e){this.virtualSelect.setOptionsMethod(t,e)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"setSearchValueMethod",value:function(t){return this.virtualSelect.setSearchValue(t)}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.onResize()}))}}],(n=[{key:"render",value:function(){var e=this;if(this.$ele){var i="vscomp-wrapper",o=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),n={"z-index":this.zIndex},l=function(){var t="";return e.additionalClasses&&(t+=" "+e.additionalClasses),e.multiple&&(t+=" multiple",e.disableSelectAll||(t+=" has-select-all")),"top"===e.position&&(t+=" position-top"),e.hideClearButton||(t+=" has-clear-button"),e.keepAlwaysOpen?t+=" keep-always-open opened":t+=" closed",e.showAsPopup?t+=" show-as-popup":e.dropboxWidth&&(n.width=e.dropboxWidth),e.hasSearch&&(t+=" has-search-input"),t};i+=l(),this.guid=t.Utils.generateUUID();var a='<div id="vs-'.concat(this.guid,'" class="vscomp-dropbox-container" ').concat(t.DomUtils.getStyleText(n),'>\n      <div class="vscomp-dropbox">\n        <div class="vscomp-search-wrapper"></div>\n\n        <div class="vscomp-options-container">\n          <div class="vscomp-options-loader"></div>\n\n          <div class="vscomp-options-list">\n            <div class="vscomp-options"></div>\n          </div>\n        </div>\n\n        <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n        <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n        <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n      </div>\n    </div>'),r='<div class="'.concat(i,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(o,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        ').concat(this.keepAlwaysOpen||!this.appendToBody?a:"","\n\n      </div>");if(this.$ele.innerHTML=r,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),!this.keepAlwaysOpen&&this.appendToBody){this.$body.append(document.createRange().createContextualFragment(a)),this.$dropboxContainer=document.querySelector("#vs-".concat(this.guid,".vscomp-dropbox-container")),this.$dropboxEl=document.querySelector("#vs-".concat(this.guid));var p="vscomp-wrapper-body";p+=l(),t.DomUtils.addClass(this.$dropboxEl,"".concat(p))}else this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxEl=this.$ele;this.$search=this.$dropboxEl.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxEl.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxEl.querySelector(".vscomp-options-list"),this.$options=this.$dropboxEl.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$dropboxEl.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxEl.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var e,i=this,o="",s=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),p=t.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(e=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var c=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(c,"></span>")}s.forEach((function(t){var s=t.label,c="vscomp-option",u=i.getTooltipAttrText("",!0),h=n,d="",v="";t.isFocused&&(c+=" focused"),t.isDisabled&&(c+=" disabled"),t.isGroupTitle?(c+=" group-title",h=""):t.isSelected&&(c+=" selected"),t.isGroupOption&&(c+=" group-option"),t.description&&(v='<div class="vscomp-option-description" '.concat(u,">").concat(t.description,"</div>")),t.isCurrentNew?(c+=" current-new",d+=l):a&&!t.isGroupTitle&&(s=s.replace(e,"<mark>$1</mark>")),o+='<div class="'.concat(c,'" data-value="').concat(t.value,'" data-index="').concat(t.index,'" data-visible-index="').concat(t.visibleIndex,'" ').concat(p,">\n          ").concat(h,'\n          <span class="vscomp-option-text ').concat(t.value===r?"none":"",'" ').concat(u,">\n            ").concat(s,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=o;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||(t.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-no-search-results",h)),t.DomUtils.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var t="",e="";this.hasSearch&&(e=' <div class="vscomp-search-container">\n          <input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n          <span class="vscomp-search-clear">&times;</span>\n        </div>')),this.multiple&&!this.disableSelectAll&&(t='<div class="vs-comp-select-all-container">\n        <span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>\n        </div>"));var i="".concat(e).concat(t);this.$search.innerHTML=i,this.$searchInput=this.$dropboxEl.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxEl.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxEl.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$dropboxContainer,"mouseleave","onOptionsMouseLeave"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"onOptionsMouseLeave",value:function(){this.removeOptionFocus()}},{key:"addEvent",value:function(e,i,o){var s=this;e&&(i=t.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(o,"-").concat(i),l=s.events[n];l||(l=s[o].bind(s),s.events[n]=l),(e=t.DomUtils.getElements(e)).forEach((function(t){t.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(e,i){e&&(e=t.DomUtils.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(t){this.appendToBody&&this.multiple&&this.isOpened()&&t.target.closest("#vs-".concat(this.guid))||t.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=p[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){if(this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)")),this.multiple&&this.showSelectedOptionsFirst)return t.stopPropagation(),!1}},{key:"onDropboxContainerClick",value:function(t){t.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.isOpened()&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.appendToBody?this.isOpened()&&this.closeDropbox(!0):this.setOptionsContainerHeight(!0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),t.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(t){t&&this.showAsPopup&&this.setVisibleOptions()}},{key:"setProps",value:function(e){e=this.setDefaultProps(e),this.setPropsFromElementAttr(e);var i=t.Utils.convertToBoolean;this.$ele=e.ele,this.valueKey=e.valueKey,this.labelKey=e.labelKey,this.descriptionKey=e.descriptionKey,this.aliasKey=e.aliasKey,this.optionHeightText=e.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(e.multiple),this.hasSearch=i(e.search),this.hideClearButton=i(e.hideClearButton),this.autoSelectFirstOption=i(e.autoSelectFirstOption),this.hasOptionDescription=i(e.hasOptionDescription),this.silentInitialValueSet=i(e.silentInitialValueSet),this.allowNewOption=i(e.allowNewOption),this.markSearchResults=i(e.markSearchResults),this.showSelectedOptionsFirst=i(e.showSelectedOptionsFirst),this.disableSelectAll=i(e.disableSelectAll),this.keepAlwaysOpen=i(e.keepAlwaysOpen),this.showDropboxAsPopup=i(e.showDropboxAsPopup),this.noOptionsText=e.noOptionsText,this.noSearchResultsText=e.noSearchResultsText,this.selectAllText=e.selectAllText,this.placeholder=e.placeholder,this.position=e.position,this.dropboxWidth=e.dropboxWidth,this.tooltipFontSize=e.tooltipFontSize,this.tooltipAlignment=e.tooltipAlignment,this.tooltipMaxWidth=e.tooltipMaxWidth,this.noOfDisplayValues=parseInt(e.noOfDisplayValues),this.zIndex=parseInt(e.zIndex),this.maxValues=parseInt(e.maxValues),this.name=e.name,this.additionalClasses=e.additionalClasses,this.initialSelectedValue=e.selectedValue,this.popupDropboxBreakpoint=e.popupDropboxBreakpoint,this.onServerSearch=e.onServerSearch,this.searchPlaceholder=e.searchPlaceholder,this.itemsSelectedMessage=e.itemsSelectedMessage,this.allowNoneOption=e.allowNoneOption,this.noneOptionText=e.noneOptionText,this.appendToBody=e.appendToBody,this.selectedValues=[],this.selectedIndexes=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===e.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(e.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None",appendToBody:!1};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint"};for(var o in i){var s=e.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(t[i[o]]=s)}}},{key:"setMethods",value:function(){var t=this.$ele;t.virtualSelect=this,t.value=this.multiple?[]:"",t.reset=i.reset,t.setValue=i.setValueMethod,t.setOptions=i.setOptionsMethod,t.setDisabledOptions=i.setDisabledOptionsMethod,t.toggleSelectAll=i.toggleSelectAll,t.isAllSelected=i.isAllSelected,t.addOption=i.addOptionMethod,t.getNewValue=i.getNewValueMethod,t.getDisplayValue=i.getDisplayValueMethod,t.open=i.openMethod,t.close=i.closeMethod,t.setSearchValue=i.setSearchValueMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i,o=[],n=[],l=s(this.options);try{for(l.s();!(i=l.n()).done;){var a=i.value;if(-1===t.indexOf(a.value)||a.isDisabled||a.isGroupTitle)a.isSelected=!1;else{if(-1!==o.indexOf(a.value)&&this.multiple)break;if(a.isSelected=!0,o.push(a.value),n.push(a.index),!this.multiple)break}}}catch(t){l.e(t)}finally{l.f()}this.multiple||(o=o[0],n=n[0]),this.beforeValueSet(),this.setValue(o,n,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t,e){var i=t!=this.options;this.setOptions(t),this.afterSetOptions(e,i)}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(e){e||(e=[]);var i=[],o=this.disabledOptions,s=o.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,p=this.aliasKey,c=this.hasOptionDescription,u=t.Utils.getString,h=this.getAlias,d=0,v=!1;!this.multiple&&this.allowNoneOption&&e.unshift({value:r,label:this.noneOptionText}),e.forEach((function t(e){var r=u(e[n]),f=e.options,y=!!f,m={index:d,value:r,label:u(e[l]),alias:h(e[p]),isVisible:!0,isGroupTitle:y};if(s&&(m.isDisabled=-1!==o.indexOf(r)),e.isGroupOption&&(m.isGroupOption=!0,m.groupIndex=e.groupIndex),c&&(m.description=u(e[a])),i.push(m),d++,y){var g=m.index;v=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=g,t(e)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=v,this.setSortedOptions()}},{key:"setServerOptions",value:function(e){this.setOptionsMethod(e,!0),t.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSortedOptions",value:function(){var t=e(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=e(this.sortedOptions),i=2*this.optionsCount,o=this.getVisibleStartIndex(),s=this.getNewOption(),n=o+i-1,l=0;s&&(s.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=o&&l<=n,t.visibleIndex=l,l++),e})),s&&(t=[s].concat(e(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){void 0===e&&(e=this.getVisibleStartIndex());var i=e*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),t.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var e=this,i=this.getVisibleOptions(),o=this.hasOptionDescription;i.forEach((function(i){var s=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));t.DomUtils.setData(s.querySelector(".vscomp-option-text"),"tooltip",i.label),o&&t.DomUtils.setData(s.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(i,o,s){i?Array.isArray(i)?this.selectedValues=e(i):this.selectedValues=[i]:this.selectedValues=[];var n=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=n,this.$hiddenInput.value=n,void 0===o?this.selectedIndexes=[]:Array.isArray(o)?this.selectedIndexes=e(o):this.selectedIndexes=[o];var l=this.multiple?this.selectedIndexes:this.selectedIndexes[0]||"";if(this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===r?t.DomUtils.removeClass(this.$wrapper,"has-value"):t.DomUtils.toggleClass(this.$wrapper,"has-value",t.Utils.isNotEmpty(this.selectedValues)),t.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),s&&this.dispatchEvent(this.$ele,"change"),this.showSelectedOptionsFirst){var a=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=a}}},{key:"setValueText",value:function(){var e=[],i=[],o=this.selectedValues,n=this.selectedIndexes,l=o.length,a=this.noOfDisplayValues,p=0;if(this.isAllSelected&&l>1)this.$valueText.innerHTML="".concat(l," ").concat(this.itemsSelectedMessage);else{var c,u=s(this.options);try{for(u.s();!(c=u.n()).done;){var h=c.value;if(!h.isCurrentNew){if(p>50||!this.multiple&&1===p)break;var d=h.value,v=h.label,f=h.index;if(-1!==o.indexOf(d)&&-1!==n.indexOf(f)){if(p>=o.length)break;e.push(v),++p<=a&&i.push('<span class="vscomp-value-tag">'.concat(v,"</span>"))}}}}catch(t){u.e(t)}finally{u.f()}var y=l-a;y>0&&i.push('<span class="vscomp-value-tag more-value-count">+ '.concat(y," more...</span>"));var m=e.join(", ");if(""===m||o&&o[0]===r)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=m,this.multiple){var g=this.maxValues;if(t.DomUtils.hasEllipsis(this.$valueText)||g){var b="".concat(l);g&&(b+=" / ".concat(g)),this.$valueText.innerHTML="".concat(b," ").concat(this.itemsSelectedMessage)}else i=[]}}t.DomUtils.setData(this.$valueText,"tooltip",i.join(", "))}},{key:"setSearchValue",value:function(e,i,o){if(e!==this.searchValueOriginal||o){i||(this.$searchInput.value=e);var s=e.toLowerCase().trim();if(this.searchValue=s,this.searchValueOriginal=e,t.DomUtils.toggleClass(this.$wrapper,"has-search-value",e),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-search-value",e),this.hasServerSearch)this.serverSearch(s);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=r(t,s,a,n);e.isVisible&&l++,a||(a=e.hasExactOption)}})),this.allowNewOption&&(s&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(e){var i;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(t.DomUtils.setStyle(this.$noOptions,"height",i),t.DomUtils.setStyle(this.$noSearchResults,"height",i))),t.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(e)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var e=t.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var o=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,n=parseFloat(this.dropboxWidth),l=o.left+n>s,a=n>o.right;l&&!a&&(i=!0)}if(this.appendToBody){if("undefined"!=typeof screenfull&&screenfull.isFullscreen&&screenfull.element){var r=document.createDocumentFragment();r.appendChild(this.$dropboxContainer),screenfull.element.appendChild(r)}else{var p=document.createDocumentFragment();p.appendChild(this.$dropboxContainer),this.$body.appendChild(p)}var c=this.$ele.getBoundingClientRect(),u=c.left+window.scrollX,h=c.top+window.scrollY;if(this.$dropboxEl.style.width="".concat(this.dropboxWidth?parseFloat(this.dropboxWidth):c.width,"px"),this.$dropboxEl.style.left="".concat(u,"px"),"top"===e.vertical){var d=this.$dropboxContainer.getBoundingClientRect();this.$dropboxEl.style.top="".concat(h-d.height-4,"px")}else this.$dropboxEl.style.top="".concat(h+c.height+4,"px");t.DomUtils.toggleClass(this.$dropboxContainer,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$dropboxContainer,"position-left",i)}else t.DomUtils.toggleClass(this.$wrapper,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var o={value:t,label:t,isCurrentNew:!0};this.addOption(o)}}}},{key:"setSelectedProp",value:function(){var t=this.selectedValues;this.options.forEach((function(e){-1!==t.indexOf(e.value)&&(e.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":o};return t.DomUtils.getAttributesText(s)}},{key:"getOptionObj",value:function(e){if(e){var i=t.Utils.getString;return{index:e.index,value:i(e.value),label:i(e.label),description:i(e.description),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,e=[],i=this.selectedValues,o=s(this.options);try{for(o.s();!(t=o.n()).done;){var n=t.value;-1!==i.indexOf(n.value)&&e.push(n.label)}}catch(t){o.e(t)}finally{o.f()}return this.multiple?e:e[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},o=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return o(e,t).isVisible}))})),i}},{key:"getOptionsCount",value:function(t){if(this.showAsPopup){var e=80*window.innerHeight/100-48;this.hasSearchContainer&&(e-=40),t=Math.floor(e/this.optionHeight)}else t=parseInt(t);return t}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(e,i){var o="next"===i?"nextElementSibling":"previousElementSibling";do{e&&(e=e[o])}while(t.DomUtils.hasClass(e,"disabled")||t.DomUtils.hasClass(e,"group-title"));return e}},{key:"openDropbox",value:function(e){var i=this;this.setDropboxPosition(),t.DomUtils.removeClass(this.$wrapper,"closed"),t.DomUtils.removeClass(this.$dropboxEl,"opened"),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"opened"),t.DomUtils.addClass(i.$dropboxEl,"opened"),e||(i.moveSelectedOptionsFirst(),t.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(t.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput(),t.DomUtils.dispatchEvent(i.$ele,"opened"))}),0)}},{key:"closeDropbox",value:function(e){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var o=e?0:this.transitionDuration;setTimeout((function(){t.DomUtils.removeClass(i.$wrapper,"opened focused"),t.DomUtils.removeClass(i.$dropboxEl,"opened focused"),i.removeOptionFocus(),e||(i.isPopupActive&&(t.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1),t.DomUtils.dispatchEvent(i.$ele,"closed"))}),0),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"closed"),t.DomUtils.removeClass(i.$dropboxEl,"closed"),i.appendToBody&&(i.$dropboxEl.style.left="-2000px",i.$dropboxEl.style.top="-2000px")}),o)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return t.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(e,i){var o,s=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)o=i;else if(s)o=this.getSibling(s,e);else{var n=this.getFirstVisibleOptionIndex();o=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(t.DomUtils.hasClass(o,"disabled")||t.DomUtils.hasClass(o,"group-title"))&&(o=this.getSibling(o,"next"))}o&&o!==s&&(s&&t.DomUtils.removeClass(s,"focused"),t.DomUtils.addClass(o,"focused"),this.toggleFocusedProp(t.DomUtils.getData(o,"index"),!0),e&&this.moveFocusedOptionToView(o))}},{key:"moveFocusedOptionToView",value:function(e){if(e||(e=this.$dropboxContainer.querySelector(".vscomp-option.focused")),e){var i,o=this.$optionsContainer.getBoundingClientRect(),s=e.getBoundingClientRect(),n=o.top,l=o.bottom,a=o.height,r=s.top,p=s.bottom,c=s.height,u=e.offsetTop,h=t.DomUtils.getData(this.$options,"top","number");n>r?i=u+h:l<p&&(i=u-a+c+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(t.DomUtils.removeClass(e,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){if(e){var i=!t.DomUtils.hasClass(e,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var o=this.selectedValues,s=this.selectedIndexes,n=parseInt(t.DomUtils.getData(e,"index")),l=this.options[n].value;if(this.toggleSelectedProp(n,i),i){if(this.multiple)o.push(l),s.push(n),this.toggleAllOptionsClass();else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[l],s=[n];var a=this.$ele.querySelector(".vscomp-option.selected");a&&t.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}t.DomUtils.toggleClass(e,"selected")}else this.multiple&&(t.DomUtils.toggleClass(e,"selected"),t.Utils.removeItemFromArray(o,l),t.Utils.removeItemFromArray(s,n),this.toggleAllOptionsClass(!1));t.DomUtils.hasClass(e,"current-new")&&this.beforeSelectNewValue(),this.setValue(o,s,!0)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof e&&(e=!t.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],o=[];this.options.forEach((function(t,s){t.isDisabled||t.isCurrentNew||t.isGroupTitle||(t.isSelected=e,e&&(i.push(t.value),o.push(s)))})),this.toggleAllOptionsClass(e),this.setValue(i,o,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){"boolean"!=typeof e&&(e=!1,this.options.length&&(e=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),t.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",e),this.isAllSelected=e}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(t){var e=this.searchValue;t&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.search&&this.setSearchValue(e,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),t||this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return e.value===r&&t.value!==r?0:t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,o){var s=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==s.indexOf(e);return t.isGroupTitle&&(a=o[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=s===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var o=[];t.options=o,i[t.index]=o,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"serverSearch",value:function(e){t.DomUtils.removeClass(this.$wrapper,"has-no-options"),t.DomUtils.addClass(this.$wrapper,"server-searching"),this.onServerSearch(e,this)}}])&&a(o.prototype,n),l&&a(o,l),i}();document.addEventListener("reset",c.resetForm),window.addEventListener("resize",c.onResizeMethod),window.VirtualSelect=c})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy91dGlscy9kb20tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJEb21VdGlscyIsIiRlbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsImdldEVsZW1lbnRzIiwiZm9yRWFjaCIsIiR0aGlzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXNBZGQiLCJpc0FkZGVkIiwidW5kZWZpbmVkIiwiQm9vbGVhbiIsInRvZ2dsZSIsImNvbnRhaW5zIiwic2Nyb2xsV2lkdGgiLCJvZmZzZXRXaWR0aCIsIm5hbWUiLCJ0eXBlIiwidmFsdWUiLCJkYXRhc2V0IiwicGFyc2VGbG9hdCIsInNldEF0dHJpYnV0ZSIsIiRmcm9tIiwiJHRvIiwiYXR0ckxpc3QiLCJ2YWx1ZUxlc3NQcm9wcyIsInZhbHVlcyIsImF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJpbmRleE9mIiwic3R5bGUiLCJwcm9wcyIsIk9iamVjdCIsImtleXMiLCJldmVudHMiLCJjYWxsYmFjayIsIlV0aWxzIiwiZXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnROYW1lIiwiYnViYmxlcyIsInNldFRpbWVvdXQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkYXRhIiwiaHRtbCIsImsiLCJza2lwQXR0ck5hbWUiLCJyZXN1bHQiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhdmFpbGFibGVXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwibGVmdCIsInRvcEFyZWEiLCJ0b3AiLCJob3Jpem9udGFsIiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImhlaWdodCIsInRleHQiLCJ0b1N0cmluZyIsImRlZmF1bHRWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInRoaXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJzcGxpY2UiLCJmaWx0ZXIiLCJkIiwicmVwbGFjZSIsImMiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJub25lT3B0aW9uVmFsdWUiLCJrZXlEb3duTWV0aG9kTWFwcGluZyIsIjEzIiwiMjciLCIzOCIsIjQwIiwiVmlydHVhbFNlbGVjdCIsIm9wdGlvbnMiLCJzZXRQcm9wcyIsInNldERpc2FibGVkT3B0aW9ucyIsImRpc2FibGVkT3B0aW9ucyIsInNldE9wdGlvbnMiLCJyZW5kZXIiLCJlIiwiY29uc29sZSIsIndhcm4iLCJlcnJvciIsIiRlbGVBcnJheSIsImVsZSIsInNpbmdsZUVsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImluc3RhbmNlcyIsInB1c2giLCIkZm9ybSIsInRhcmdldCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyZW50RWxlbWVudCIsInZpcnR1YWxTZWxlY3QiLCJyZXNldCIsInNpbGVudENoYW5nZSIsInNldFZhbHVlTWV0aG9kIiwia2VlcFZhbHVlIiwic2V0T3B0aW9uc01ldGhvZCIsInNldERpc2FibGVkT3B0aW9uc01ldGhvZCIsImlzU2VsZWN0ZWQiLCJ0b2dnbGVBbGxPcHRpb25zIiwiaXNBbGxTZWxlY3RlZCIsImFkZE9wdGlvbiIsImdldE5ld1ZhbHVlIiwiZ2V0RGlzcGxheVZhbHVlIiwib3BlbkRyb3Bib3giLCJjbG9zZURyb3Bib3giLCJzZXRTZWFyY2hWYWx1ZSIsIm9uUmVzaXplIiwid3JhcHBlckNsYXNzZXMiLCJ2YWx1ZVRvb2x0aXAiLCJnZXRUb29sdGlwQXR0clRleHQiLCJtdWx0aXBsZSIsImNsZWFyQnV0dG9uVG9vbHRpcCIsImRyb3Bib3hDb250YWluZXJTdHlsZSIsInpJbmRleCIsImdldFdyYXBwZXJDbGFzc2VzIiwiY2xhc3NlcyIsImFkZGl0aW9uYWxDbGFzc2VzIiwiZGlzYWJsZVNlbGVjdEFsbCIsInBvc2l0aW9uIiwiaGlkZUNsZWFyQnV0dG9uIiwia2VlcEFsd2F5c09wZW4iLCJzaG93QXNQb3B1cCIsImRyb3Bib3hXaWR0aCIsImhhc1NlYXJjaCIsImd1aWQiLCJkcm9wYm94Q29udGFpbmVyIiwibm9PcHRpb25zVGV4dCIsIm5vU2VhcmNoUmVzdWx0c1RleHQiLCJwbGFjZWhvbGRlciIsImFwcGVuZFRvQm9keSIsImlubmVySFRNTCIsIiRib2R5IiwiJHdyYXBwZXIiLCIkdG9nZ2xlQnV0dG9uIiwiJGNsZWFyQnV0dG9uIiwiJGRyb3Bib3hDbG9zZUJ1dHRvbiIsImFwcGVuZCIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IiwiJGRyb3Bib3hDb250YWluZXIiLCIkZHJvcGJveEVsIiwiJHNlYXJjaCIsIiRvcHRpb25zQ29udGFpbmVyIiwiJG9wdGlvbnNMaXN0IiwiJG9wdGlvbnMiLCIkdmFsdWVUZXh0IiwiJGhpZGRlbklucHV0IiwiJG5vT3B0aW9ucyIsIiRub1NlYXJjaFJlc3VsdHMiLCJhZnRlclJlbmRlcldyYXBwZXIiLCJzZWFyY2hSZWdleCIsInZpc2libGVPcHRpb25zIiwiZ2V0VmlzaWJsZU9wdGlvbnMiLCJjaGVja2JveEh0bWwiLCJuZXdPcHRpb25JY29uSHRtbCIsIm1hcmtTZWFyY2hSZXN1bHRzIiwic2VhcmNoVmFsdWUiLCJzdHlsZVRleHQiLCJvcHRpb25IZWlnaHQiLCJSZWdFeHAiLCJhbGxvd05ld09wdGlvbiIsIm5ld09wdGlvblRvb2x0aXAiLCJvcHRpb25MYWJlbCIsImxhYmVsIiwib3B0aW9uQ2xhc3NlcyIsIm9wdGlvblRvb2x0aXAiLCJsZWZ0U2VjdGlvbiIsInJpZ2h0U2VjdGlvbiIsImRlc2NyaXB0aW9uIiwiaXNGb2N1c2VkIiwiaXNEaXNhYmxlZCIsImlzR3JvdXBUaXRsZSIsImlzR3JvdXBPcHRpb24iLCJpc0N1cnJlbnROZXciLCJ2aXNpYmxlSW5kZXgiLCJoYXNOb09wdGlvbnMiLCJoYXNOb1NlYXJjaFJlc3VsdHMiLCJzZXRPcHRpb25zUG9zaXRpb24iLCJzZXRPcHRpb25zVG9vbHRpcCIsImhhc1NlYXJjaENvbnRhaW5lciIsInNlYXJjaElucHV0Iiwic2VhcmNoUGxhY2Vob2xkZXIiLCJzZWxlY3RBbGxUZXh0IiwiJHNlYXJjaElucHV0IiwiJHNlYXJjaENsZWFyIiwiJHRvZ2dsZUFsbEJ1dHRvbiIsIiR0b2dnbGVBbGxDaGVja2JveCIsImFkZEV2ZW50IiwicmVtb3ZlT3B0aW9uRm9jdXMiLCJtZXRob2QiLCJldmVudHNLZXkiLCJiaW5kIiwiX3RoaXMiLCJFdmVudCIsImlzT3BlbmVkIiwid2hpY2giLCJrZXlDb2RlIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94Iiwic2V0VmlzaWJsZU9wdGlvbnMiLCJzZWxlY3RPcHRpb24iLCJzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJmb2N1c1NlYXJjaElucHV0Iiwic2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsInJlbmRlclNlYXJjaCIsInNldE9wdGlvbnNIZWlnaHQiLCJhZGRFdmVudHMiLCJzZXRNZXRob2RzIiwiaW5pdGlhbFNlbGVjdGVkVmFsdWUiLCJzaWxlbnRJbml0aWFsVmFsdWVTZXQiLCJhdXRvU2VsZWN0Rmlyc3RPcHRpb24iLCJzZXREZWZhdWx0UHJvcHMiLCJzZXRQcm9wc0Zyb21FbGVtZW50QXR0ciIsImNvbnZlcnRUb0Jvb2xlYW4iLCJ2YWx1ZUtleSIsImxhYmVsS2V5IiwiZGVzY3JpcHRpb25LZXkiLCJhbGlhc0tleSIsIm9wdGlvbkhlaWdodFRleHQiLCJzZWFyY2giLCJoYXNPcHRpb25EZXNjcmlwdGlvbiIsInNob3dEcm9wYm94QXNQb3B1cCIsInRvb2x0aXBGb250U2l6ZSIsInRvb2x0aXBBbGlnbm1lbnQiLCJ0b29sdGlwTWF4V2lkdGgiLCJub09mRGlzcGxheVZhbHVlcyIsInBhcnNlSW50IiwibWF4VmFsdWVzIiwic2VsZWN0ZWRWYWx1ZSIsInBvcHVwRHJvcGJveEJyZWFrcG9pbnQiLCJvblNlcnZlclNlYXJjaCIsIml0ZW1zU2VsZWN0ZWRNZXNzYWdlIiwiYWxsb3dOb25lT3B0aW9uIiwibm9uZU9wdGlvblRleHQiLCJzZWxlY3RlZFZhbHVlcyIsInNlbGVjdGVkSW5kZXhlcyIsIm5ld1ZhbHVlcyIsInRvb2x0aXBFbnRlckRlbGF5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwic2VhcmNoVmFsdWVPcmlnaW5hbCIsImhhc1NlcnZlclNlYXJjaCIsIm9wdGlvbnNDb3VudCIsImdldE9wdGlvbnNDb3VudCIsImhhbGZPcHRpb25zQ291bnQiLCJNYXRoIiwiY2VpbCIsIm9wdGlvbnNIZWlnaHQiLCJnZXRPcHRpb25zSGVpZ2h0IiwiZGVmYXVsdE9wdGlvbnMiLCJhc3NpZ24iLCJtYXBwaW5nIiwic2V0VmFsdWUiLCJ0b2dnbGVTZWxlY3RBbGwiLCJhZGRPcHRpb25NZXRob2QiLCJnZXROZXdWYWx1ZU1ldGhvZCIsImdldERpc3BsYXlWYWx1ZU1ldGhvZCIsIm9wZW4iLCJvcGVuTWV0aG9kIiwiY2xvc2UiLCJjbG9zZU1ldGhvZCIsInNldFNlYXJjaFZhbHVlTWV0aG9kIiwibWFwIiwidiIsInZhbGlkVmFsdWVzIiwidmFsaWRJbmRleGVzIiwiYmVmb3JlVmFsdWVTZXQiLCJhZnRlclZhbHVlU2V0IiwibmV3b3B0aW9uIiwiYWZ0ZXJTZXRPcHRpb25zIiwic2V0T3B0aW9uc1Byb3AiLCJwcmVwYXJlZE9wdGlvbnMiLCJoYXNEaXNhYmxlZE9wdGlvbnMiLCJnZXRTdHJpbmciLCJnZXRBbGlhcyIsImhhc09wdGlvbkdyb3VwIiwidW5zaGlmdCIsInByZXBhcmVPcHRpb24iLCJjaGlsZE9wdGlvbnMiLCJvcHRpb24iLCJhbGlhcyIsImlzVmlzaWJsZSIsImdyb3VwSW5kZXgiLCJ2aXNpYmxlT3B0aW9uc0NvdW50IiwibGFzdE9wdGlvbkluZGV4Iiwic2V0U29ydGVkT3B0aW9ucyIsInNvcnRlZE9wdGlvbnMiLCJzb3J0T3B0aW9uc0dyb3VwIiwic29ydE9wdGlvbnMiLCJtYXhPcHRpb25zVG9TaG93Iiwic3RhcnRJbmRleCIsImdldFZpc2libGVTdGFydEluZGV4IiwibmV3T3B0aW9uIiwiZ2V0TmV3T3B0aW9uIiwiZW5kSW5kZXgiLCJpIiwiaW5WaWV3IiwicmVuZGVyT3B0aW9ucyIsInRyYW5zZm9ybSIsIiRvcHRpb25FbGUiLCJ0cmlnZ2VyRXZlbnQiLCJuZXdWYWx1ZSIsIm5ld0luZGV4IiwiaXNNYXhWYWx1ZXNTZWxlY3RlZCIsInNldFZhbHVlVGV4dCIsImxhc3RTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJtb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJ2YWx1ZVRleHQiLCJzZWxlY3RlZExlbmd0aCIsInNlbGVjdGVkVmFsdWVzQ291bnQiLCJtb3JlU2VsZWN0ZWRPcHRpb25zIiwiYWdncmVnYXRlZFZhbHVlVGV4dCIsImpvaW4iLCJjb3VudFRleHQiLCJza2lwSW5wdXRTZXQiLCJmb3JjZSIsInRvTG93ZXJDYXNlIiwidHJpbSIsInNlcnZlclNlYXJjaCIsInZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nIiwiaGFzRXhhY3RPcHRpb24iLCJpc09wdGlvblZpc2libGUiLCJnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyIsInNldE5ld09wdGlvbiIsInJlbW92ZU5ld09wdGlvbiIsInNjcm9sbFRvVG9wIiwiYWZ0ZXJTZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0IiwibW9yZVZpc2libGVTaWRlcyIsInNob3dPbkxlZnQiLCJidXR0b25Db29yZHMiLCJ2aWV3cG9ydFdpZHRoIiwiaGlkZGVuT25SaWdodCIsImhpZGRlbk9uTGVmdCIsInJpZ2h0Iiwic2NyZWVuZnVsbCIsImlzRnVsbHNjcmVlbiIsImVsZW1lbnQiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJhcHBlbmRDaGlsZCIsImVsZUNvb3JkcyIsIngiLCJzY3JvbGxYIiwieSIsInNjcm9sbFkiLCJkcm9wQm94Q29yZCIsInNldE9wdGlvblByb3AiLCJnZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCIsImVsbGlwc2lzT25seSIsImFsbG93SHRtbCIsImxhc3RPcHRpb24iLCJzb21lIiwiZGlzcGxheVZhbHVlcyIsInN0cnVjdHVyZU9wdGlvbkdyb3VwIiwiY291bnQiLCJmbG9vciIsImRpcmVjdGlvbiIsInByb3BOYW1lIiwiaXNTaWxlbnQiLCJzZXREcm9wYm94UG9zaXRpb24iLCJpc1BvcHVwQWN0aXZlIiwiZm9jdXMiLCIkbmV3Rm9jdXNlZEVsZSIsIiRmb2N1c2VkRWxlIiwiZ2V0U2libGluZyIsImZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IiwidG9nZ2xlRm9jdXNlZFByb3AiLCJtb3ZlRm9jdXNlZE9wdGlvblRvVmlldyIsIm5ld1Njcm9sbFRvcCIsImNvbnRhaW5lclJlY3QiLCJvcHRpb25SZWN0IiwiY29udGFpbmVyVG9wIiwiY29udGFpbmVyQm90dG9tIiwiYm90dG9tIiwiY29udGFpbmVySGVpZ2h0Iiwib3B0aW9uVG9wIiwib3B0aW9uQm90dG9tIiwib3B0aW9uT2Zmc2V0VG9wIiwib2Zmc2V0VG9wIiwib3B0aW9uc1RvcCIsImlzQWRkaW5nIiwic2VsZWN0ZWRJbmRleCIsInRvZ2dsZVNlbGVjdGVkUHJvcCIsInRvZ2dsZUFsbE9wdGlvbnNDbGFzcyIsImdldE9wdGlvbkluZGV4IiwiJHByZXZTZWxlY3RlZE9wdGlvbiIsImJlZm9yZVNlbGVjdE5ld1ZhbHVlIiwiaWR4IiwiZm9jdXNlZE9wdGlvbkluZGV4IiwiaXNDbG9zZWQiLCJpc1Jlc2V0IiwicmVyZW5kZXIiLCJnZXRPcHRpb25PYmoiLCJyZW1vdmVPcHRpb24iLCJzb3J0IiwiYSIsImIiLCJkZXN0cnVjdHVyZU9wdGlvbkdyb3VwIiwiY2hpbGRBcnJheSIsImNvbmNhdCIsInJlc2V0Rm9ybSIsIm9uUmVzaXplTWV0aG9kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OzJnQ0FFTyxJQUFNQSxFQUFiLHlCLDRGQUFBLFMsVUFBQSxPLEVBQUEsRSxFQUFBLGdDQUNrQkMsRUFBTUMsR0FDZkQsSUFJTEMsRUFBWUEsRUFBVUMsTUFBTSxLQUU1QkgsRUFBU0ksWUFBWUgsR0FBTUksU0FBUSxTQUFDQyxHQUFVLE9BQzVDLEVBQUFBLEVBQU1DLFdBQVVDLElBQWhCLFVBQXVCTixVQVQ3QixrQ0FhcUJELEVBQU1DLEdBQ2xCRCxJQUlMQyxFQUFZQSxFQUFVQyxNQUFNLEtBRTVCSCxFQUFTSSxZQUFZSCxHQUFNSSxTQUFRLFNBQUNDLEdBQVUsT0FDNUMsRUFBQUEsRUFBTUMsV0FBVUUsT0FBaEIsVUFBMEJQLFVBckJoQyxrQ0F5QnFCRCxFQUFNQyxFQUFXUSxHQVNsQyxJQUFJQyxFQVJKLEdBQUtWLEVBY0wsWUFWY1csSUFBVkYsSUFDRkEsRUFBUUcsUUFBUUgsSUFLbEJWLEVBQVNJLFlBQVlILEdBQU1JLFNBQVEsU0FBQ0MsR0FDbENLLEVBQVVMLEVBQU1DLFVBQVVP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SmdILEVBQVl1QyxFQUEyQi9SLEVBQUVILFFBR3ZDMFAsSUFBVUMsSUFDWkEsR0FBNEMsSUFBaENELEVBQU12UyxRQUFReUssSUFHeEJZLElBQWdCbUgsSUFDbEJBLEdBQWdFLElBQXBEbkgsRUFBWXVKLGNBQWM1VSxRQUFReUssSUFHaER6SCxFQUFFd1AsVUFBWUEsRUFFVHdDLElBQ0hBLEVBQWlCM1YsSUFBVW9MLEdBR3RCLENBQ0wrSCxZQUNBd0Msb0JBNWlFTiwyQ0FnakV1Qi9QLEdBQ25CLElBQUk5RCxFQUFTLEdBQ1RrUixFQUFlLEdBb0JuQixPQWpCQXBOLEVBQVEzRyxTQUFRLFNBQUMwRSxHQUNmLEdBQUlBLEVBQUV3SSxhQUFjLENBQ2xCLElBQUlzTyxFQUFhLEdBQ2pCOVcsRUFBRWlDLFFBQVU2VSxFQUNaekgsRUFBYXJQLEVBQUVILE9BQVNpWCxFQUV4QjNZLEVBQU84RSxLQUFLakQsT0FLaEJpQyxFQUFRM0csU0FBUSxTQUFDMEUsR0FDWEEsRUFBRXlJLGVBQ0o0RyxFQUFhclAsRUFBRXlQLFlBQVl4TSxLQUFLakQsTUFJN0I3QixJQXRrRVgsNkNBeWtFeUI4RCxHQUNyQixJQUFJOUQsRUFBUyxHQU9iLE9BTEE4RCxFQUFRM0csU0FBUSxTQUFDMEUsR0FDZjdCLEVBQU84RSxLQUFLakQsR0FDWjdCLEVBQVNBLEVBQU80WSxPQUFPL1csRUFBRWlDLFlBR3BCOUQsSUFqbEVYLG1DQW9sRWVzSixHQUNYeE0sdUJBQXFCd0UsS0FBS3dHLFNBQVUsa0JBQ3BDaEwsb0JBQWtCd0UsS0FBS3dHLFNBQVUsb0JBQ2pDeEcsS0FBSzZNLGVBQWU3RSxFQUFhaEksVywyQkF2bEVyQyxLQWtzRUFxRCxTQUFTckYsaUJBQWlCLFFBQVN1RSxFQUFjZ1YsV0FDakR6WSxPQUFPZCxpQkFBaUIsU0FBVXVFLEVBQWNpVixnQkFFaEQxWSxPQUFPeUQsY0FBZ0JBLEciLCJmaWxlIjoidmlydHVhbC1zZWxlY3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL2luZGV4JztcclxuXHJcbmV4cG9ydCBjbGFzcyBEb21VdGlscyB7XHJcbiAgc3RhdGljIGFkZENsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKS5mb3JFYWNoKCgkdGhpcykgPT4ge1xyXG4gICAgICAkdGhpcy5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoJHRoaXMpID0+IHtcclxuICAgICAgJHRoaXMuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdG9nZ2xlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lLCBpc0FkZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNBZGQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpc0FkZCA9IEJvb2xlYW4oaXNBZGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGVkO1xyXG5cclxuICAgIERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKCR0aGlzKSA9PiB7XHJcbiAgICAgIGlzQWRkZWQgPSAkdGhpcy5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgaXNBZGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlzQWRkZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAkZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhc0VsbGlwc2lzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGUuc2Nyb2xsV2lkdGggPiAkZWxlLm9mZnNldFdpZHRoO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldERhdGEoJGVsZSwgbmFtZSwgdHlwZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmFsdWUgPSAkZWxlID8gJGVsZS5kYXRhc2V0W25hbWVdIDogJyc7XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcclxuICAgIH0gLy9lbHNlIHtcclxuICAgIC8vICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgIC8vICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAvLyAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcclxuICAgIC8vICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgLy8gICB9XHJcbiAgICAvL31cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0RGF0YSgkZWxlLCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGRlYnVnZ2VyO1xyXG4gICAgJGVsZS5kYXRhc2V0W25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0QXR0cigkZWxlLCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZWxlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0QXR0ckZyb21FbGUoJGZyb20sICR0bywgYXR0ckxpc3QsIHZhbHVlTGVzc1Byb3BzKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuXHJcbiAgICBhdHRyTGlzdC5mb3JFYWNoKChhdHRyKSA9PiB7XHJcbiAgICAgIHZhbHVlc1thdHRyXSA9ICRmcm9tLmdldEF0dHJpYnV0ZShhdHRyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF0dHJMaXN0LmZvckVhY2goKGF0dHIpID0+IHtcclxuICAgICAgbGV0IHZhbHVlID0gdmFsdWVzW2F0dHJdO1xyXG5cclxuICAgICAgaWYgKHZhbHVlIHx8ICh2YWx1ZUxlc3NQcm9wcy5pbmRleE9mKGF0dHIpICE9PSAtMSAmJiB2YWx1ZSA9PT0gJycpKSB7XHJcbiAgICAgICAgJHRvLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFN0eWxlKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRTdHlsZXMoJGVsZSwgcHJvcHMpIHtcclxuICAgIGlmICghJGVsZSB8fCAhcHJvcHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKChuYW1lKSA9PiB7XHJcbiAgICAgICRlbGUuc3R5bGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEVsZW1lbnRzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRlbGUuZm9yRWFjaCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGUgPSBbJGVsZV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkRXZlbnQoJGVsZSwgZXZlbnRzLCBjYWxsYmFjaykge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBldmVudHMgPSBVdGlscy5yZW1vdmVBcnJheUVtcHR5KGV2ZW50cy5zcGxpdCgnICcpKTtcclxuXHJcbiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgICAgJGVsZS5mb3JFYWNoKCgkdGhpcykgPT4ge1xyXG4gICAgICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkaXNwYXRjaEV2ZW50KCRlbGUsIGV2ZW50TmFtZSwgYnViYmxlcyA9IGZhbHNlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUgPSBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKTtcclxuXHJcbiAgICAvKiogdXNpbmcgc2V0VGltZW91dCB0byB0cmlnZ2VyIGFzeW5jaHJvbm91cyBldmVudCAqL1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICRlbGUuZm9yRWFjaCgoJHRoaXMpID0+IHtcclxuICAgICAgICAkdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsgYnViYmxlcyB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKiogY29udmVydCBvYmplY3QgdG8gZG9tIGF0dHJpYnV0ZXMgKi9cclxuICBzdGF0aWMgZ2V0QXR0cmlidXRlc1RleHQoZGF0YSkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuXHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuIGh0bWw7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBkYXRhKSB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IGRhdGFba107XHJcblxyXG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGh0bWwgKz0gYCAke2t9PVwiJHt2YWx1ZX1cIiBgO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0U3R5bGVUZXh0KHByb3BzLCBza2lwQXR0ck5hbWUpIHtcclxuICAgIGxldCByZXN1bHQgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XHJcbiAgICAgIHJlc3VsdCArPSBgJHtrfTogJHtwcm9wc1trXX07YDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmICFza2lwQXR0ck5hbWUpIHtcclxuICAgICAgcmVzdWx0ID0gYHN0eWxlPVwiJHtyZXN1bHR9XCJgO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TW9yZVZpc2libGVTaWRlcygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBib3ggPSAkZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGF2YWlsYWJsZVdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgbGV0IGxlZnRBcmVhID0gYm94LmxlZnQ7XHJcbiAgICBsZXQgdG9wQXJlYSA9IGJveC50b3A7XHJcbiAgICBsZXQgcmlnaHRBcmVhID0gYXZhaWxhYmxlV2lkdGggLSBsZWZ0QXJlYSAtIGJveC53aWR0aDtcclxuICAgIGxldCBib3R0b21BcmVhID0gYXZhaWxhYmxlSGVpZ2h0IC0gdG9wQXJlYSAtIGJveC5oZWlnaHQ7XHJcbiAgICBsZXQgaG9yaXpvbnRhbCA9IGxlZnRBcmVhID4gcmlnaHRBcmVhID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuICAgIGxldCB2ZXJ0aWNhbCA9IHRvcEFyZWEgPiBib3R0b21BcmVhID8gJ3RvcCcgOiAnYm90dG9tJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBob3Jpem9udGFsLFxyXG4gICAgICB2ZXJ0aWNhbCxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVdGlscyB7XHJcbiAgc3RhdGljIGdldFN0cmluZyh0ZXh0KSB7XHJcbiAgICByZXR1cm4gdGV4dCB8fCB0ZXh0ID09PSAwID8gdGV4dC50b1N0cmluZygpIDogJyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29udmVydFRvQm9vbGVhbih2YWx1ZSwgZGVmYXVsdFZhbHVlID0gZmFsc2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNFbXB0eSh2YWx1ZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTm90RW1wdHkodmFsdWUpIHtcclxuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVJdGVtRnJvbUFycmF5KGFycmF5LCB2YWx1ZSwgY2xvbmVBcnJheSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSB8fCAhYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2xvbmVBcnJheSkge1xyXG4gICAgICBhcnJheSA9IFsuLi5hcnJheV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XHJcblxyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZW1vdmVBcnJheUVtcHR5KGFycmF5KSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheS5maWx0ZXIoKGQpID0+ICEhZCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2VuZXJhdGVVVUlEKCkge1xyXG4gICAgcmV0dXJuIChbMWU3XSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCAoYykgPT5cclxuICAgICAgKFxyXG4gICAgICAgIGMgXlxyXG4gICAgICAgIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmICgxNSA+PiAoYyAvIDQpKSlcclxuICAgICAgKS50b1N0cmluZygxNilcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IFV0aWxzLCBEb21VdGlscyB9IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuY29uc3QgdmlydHVhbFNlbGVjdFZlcnNpb24gPSAndjEuMC42JztcclxuY29uc3QgZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodCA9IDQ4O1xyXG5jb25zdCBzZWFyY2hIZWlnaHQgPSA0MDtcclxuY29uc3Qgbm9uZU9wdGlvblZhbHVlID0gJ3sjdmlydHVhbC1zZWxlY3Qtbm9uZS1vcHRpb24jfSc7XHJcblxyXG5jb25zdCBrZXlEb3duTWV0aG9kTWFwcGluZyA9IHtcclxuICAxMzogJ29uRW50ZXJQcmVzcycsXHJcbiAgMjc6ICdvbkVzY1ByZXNzJyxcclxuICAzODogJ29uVXBBcnJvd1ByZXNzJyxcclxuICA0MDogJ29uRG93bkFycm93UHJlc3MnLFxyXG59O1xyXG5cclxuLyoqIENsYXNzIHJlcHJlc2VudGluZyBWaXJ0dWFsU2VsZWN0ICovXHJcbmV4cG9ydCBjbGFzcyBWaXJ0dWFsU2VsZWN0IHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHsoZWxlbWVudHxzdHJpbmcpfSBlbGUgLSBQYXJlbnQgZWxlbWVudCB0byByZW5kZXIgVmlydHVhbFNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IG9wdGlvbnMgLSBBcnJheSBvZiBvYmplY3QgdG8gc2hvdyBhcyBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS52YWx1ZSAtIFZhbHVlIG9mIHRoZSBvcHRpb25cclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLmxhYmVsIC0gRGlzcGxheSB0ZXh0IG9mIHRoZSBvcHRpb25cclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLmRlc2NyaXB0aW9uIC0gVGV4dCB0byBzaG93IGFsb25nIHdpdGggbGFiZWxcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8YXJyYXkpfSBvcHRpb25zW10uYWxpYXMgLSBBbHRlcm5hdGl2ZSBsYWJlbHMgdG8gdXNlIG9uIHNlYXJjaC4gQXJyYXkgb2Ygc3RyaW5nIG9yIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcuXHJcbiAgICogQHByb3BlcnR5IHthcnJheX0gb3B0aW9uc1tdLm9wdGlvbnMgLSBMaXN0IG9mIG9wdGlvbnMgZm9yIG9wdGlvbiBncm91cFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdmFsdWVLZXk9dmFsdWVdIC0gT2JqZWN0IGtleSB0byB1c2UgdG8gZ2V0IHZhbHVlIGZyb20gb3B0aW9ucyBhcnJheVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGFiZWxLZXk9bGFiZWxdIC0gT2JqZWN0IGtleSB0byB1c2UgdG8gZ2V0IGxhYmVsIGZyb20gb3B0aW9ucyBhcnJheVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZGVzY3JpcHRpb25LZXk9ZGVzY3JpcHRpb25dIC0gT2JqZWN0IGtleSB0byB1c2UgdG8gZ2V0IGRlc2NyaXB0aW9uIGZyb20gb3B0aW9ucyBhcnJheVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYWxpYXNLZXk9YWxpYXNdIC0gS2V5IG5hbWUgdG8gZ2V0IGFsaWFzIGZyb20gb3B0aW9ucyBvYmplY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFttdWx0aXBsZT1mYWxzZV0gLSBFbmFibGUgbXVsdGlzZWxlY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzZWFyY2g9ZmFsc2VdIC0gRW5hYmxlIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hpZGVDbGVhckJ1dHRvbj1mYWxzZV0gLSBIaWRlIGNsZWFyIGJ1dHRvblxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F1dG9TZWxlY3RGaXJzdE9wdGlvbj1mYWxzZV0gLSBTZWxlY3QgZmlyc3Qgb3B0aW9uIGJ5IGRlZmF1bHQgb24gbG9hZFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hhc09wdGlvbkRlc2NyaXB0aW9uPWZhbHNlXSAtIEhhcyBkZXNjcmlwdGlvbiB0byBzaG93IGFsb25nIHdpdGggbGFiZWxcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkaXNhYmxlU2VsZWN0QWxsPWZhbHNlXSAtIERpc2FibGUgc2VsZWN0IGFsbCBmZWF0dXJlIG9mIG11bHRpcGxlIHNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb3B0aW9uc0NvdW50PTV8NF0gLSBOby5vZiBvcHRpb25zIHRvIHNob3cgb24gdmlld3BvcnRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW29wdGlvbkhlaWdodD00MHB4fDYwcHhdIC0gSGVpZ2h0IG9mIGVhY2ggZHJvcGRvd24gb3B0aW9uc1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcG9zaXRpb249YXV0b10gLSBQb3NpdGlvbiBvZiBkcm9wYm94ICh0b3AsIGJvdHRvbSwgYXV0bylcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3BsYWNlaG9sZGVyPVNlbGVjdF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyBvcHRpb25zIHNlbGVjdGVkXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtub09wdGlvbnNUZXh0PU5vIG9wdGlvbnMgZm91bmRdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gb3B0aW9ucyB0byBzaG93XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtub1NlYXJjaFJlc3VsdHNUZXh0PU5vIHJlc3VsdHMgZm91bmRdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gcmVzdWx0cyBvbiBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3NlbGVjdEFsbFRleHQ9U2VsZWN0IGFsbF0gLSBUZXh0IHRvIHNob3cgbmVhciBzZWxlY3QgYWxsIGNoZWNrYm94IHdoZW4gc2VhcmNoIGlzIGRpc2FibGVkXHJcbiAgICogQHByb3BlcnR5IHthcnJheX0gW2Rpc2FibGVkT3B0aW9uc10gLSBPcHRpb25zIHRvIGRpc2FibGUgKGFycmF5IG9mIHZhbHVlcylcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8YXJyYXkpfSBbc2VsZWN0ZWRWYWx1ZV0gLSBTaW5nbGUgdmFsdWUgb3IgYXJyYXkgb2YgdmFsdWVzIHRvIHNlbGVjdCBvbiBpbml0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2lsZW50SW5pdGlhbFZhbHVlU2V0PWZhbHNlXSAtIFRvIGF2b2lkIFwiY2hhbmdlIGV2ZW50XCIgdHJpZ2dlciBvbiBzZXR0aW5nIGluaXRpYWwgdmFsdWVcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Ryb3Bib3hXaWR0aF0gLSBDdXN0b20gd2lkdGggZm9yIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleD0xXSAtIENTUyB6LWluZGV4IHZhbHVlIGZvciBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtub09mRGlzcGxheVZhbHVlcz01MF0gLSBNYXhpbXVtIG5vLm9mIHZhbHVlcyB0byBzaG93IGluIHRoZSB0b29sdGlwIGZvciBtdWx0aS1zZWxlY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbGxvd05ld09wdGlvbj1mYWxzZV0gLSBBbGxvdyB0byBhZGQgbmV3IG9wdGlvbiBieSBzZWFyY2hpbmdcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFttYXJrU2VhcmNoUmVzdWx0cz1mYWxzZV0gLSBNYXJrIG1hdGNoZWQgdGVybSBpbiBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcEZvbnRTaXplPTE0cHhdIC0gRm9udCBzaXplIGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwQWxpZ25tZW50PWNlbnRlcl0gLSBDU1MgVGV4dCBhbGlnbm1lbnQgZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBNYXhXaWR0aD0zMDBweF0gLSBDU1MgbWF4IHdpZHRoIGZvciB0b29sdGlwXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0PWZhbHNlXSAtIFNob3cgc2VsZWN0ZWQgb3B0aW9ucyBhdCB0aGUgdG9wIG9mIHRoZSBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtuYW1lXSAtIE5hbWUgYXR0cmlidXRlIGZvciBoaWRkZW4gaW5wdXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZWVwQWx3YXlzT3Blbl0gLSBLZWVwIGRyb3Bib3ggYWx3YXlzIG9wZW4gd2l0aCBmaXhlZCBoZWlnaHRcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW21heFZhbHVlcz0wXSAtIE1heGltdW0gbm8ub2Ygb3B0aW9ucyBhbGxvd2VkIHRvIGNob29zZSBpbiBtdWx0aXBsZSBzZWxlY3RcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2FkZGl0aW9uYWxDbGFzc2VzXSAtIEFkZGl0aW9uYWwgY2xhc3NlcyBmb3Igd3JhcHBlciBlbGVtZW50XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2hvd0Ryb3Bib3hBc1BvcHVwPXRydWVdIC0gU2hvdyBkcm9wYm94IGFzIHBvcHVwIG9uIHNtYWxsIHNjcmVlbiBsaWtlIG1vYmlsZVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcG9wdXBEcm9wYm94QnJlYWtwb2ludD01NzZweF0gLSBNYXhpbXVtIHNjcmVlbiB3aWR0aCB0aGF0IGFsbG93ZWQgdG8gc2hvdyBkcm9wYm94IGFzIHBvcHVwXHJcbiAgICogQHByb3BlcnR5IHtmdW5jdGlvbn0gW29uU2VydmVyU2VhcmNoXSAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGludGVncmF0ZSBzZXJ2ZXIgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzZWFyY2hQbGFjZWhvbGRlcj1TZWFyY2guLi5dIC0gVGV4dCB0byBzaG93IGluc2lkZSBzZWFyY2ggaW5wdXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbGxvd05vbmVPcHRpb249ZmFsc2VdIC0gSW4gc2luZ2xlIHNlbGVjdGlvbiBtb2RlIG9ubHkgYW5kIHdoZW4ga2VlcCBhbHdheXMgb3BlbiBpcyBvbjogZGlzcGxheSBhIG5vbmUgb3B0aW9uIHRoYXQgY2xlYXJzIHRoZSBzZWxlY3Rpb25cclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vbmVPcHRpb25UZXh0PU5vbmVdIC0gVGV4dCB0byBiZSBkaXNwbGF5IGlmIGFsbG93Tm9uZSBvcHRpb24gaXMgYWN0aXZlXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXBwZW5kVG9Cb2R5PWZhbHNlXSAtIFdoZW4gc2V0IHRvIHRydWUgYW5kIGtlZXBBbHdheXMgb3BlbiBpcyBvZmYgd2UgYXJlIGFkZGluZyB0aGUgZHJvcGJveCBlbGVtZW50IHRvIHRoZSBib2R5XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5zZXRQcm9wcyhvcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXREaXNhYmxlZE9wdGlvbnMob3B0aW9ucy5kaXNhYmxlZE9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucy5vcHRpb25zKTtcclxuICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKGBDb3VsZG4ndCBpbml0aWF0ZSBWaXJ0dWFsIFNlbGVjdGApO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIHJlbmRlciBtZXRob2RzIC0gc3RhcnQgKi9cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHdyYXBwZXJDbGFzc2VzID0gJ3ZzY29tcC13cmFwcGVyJztcclxuICAgIGxldCB2YWx1ZVRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnJywgIXRoaXMubXVsdGlwbGUsIHRydWUpO1xyXG4gICAgbGV0IGNsZWFyQnV0dG9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdDbGVhcicpO1xyXG5cclxuICAgIGxldCBkcm9wYm94Q29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICAgICd6LWluZGV4JzogdGhpcy56SW5kZXgsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGdldFdyYXBwZXJDbGFzc2VzID0gKCkgPT4ge1xyXG4gICAgICBsZXQgY2xhc3NlcyA9ICcnO1xyXG5cclxuICAgICAgaWYgKHRoaXMuYWRkaXRpb25hbENsYXNzZXMpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgJyArIHRoaXMuYWRkaXRpb25hbENsYXNzZXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIG11bHRpcGxlJztcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtc2VsZWN0LWFsbCc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcG9zaXRpb24tdG9wJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLmhpZGVDbGVhckJ1dHRvbikge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBoYXMtY2xlYXItYnV0dG9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcga2VlcC1hbHdheXMtb3BlbiBvcGVuZWQnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBjbG9zZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBzaG93LWFzLXBvcHVwJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5kcm9wYm94V2lkdGgpIHtcclxuICAgICAgICAgIGRyb3Bib3hDb250YWluZXJTdHlsZS53aWR0aCA9IHRoaXMuZHJvcGJveFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1zZWFyY2gtaW5wdXQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gY2xhc3NlcztcclxuICAgIH07XHJcblxyXG4gICAgd3JhcHBlckNsYXNzZXMgKz0gZ2V0V3JhcHBlckNsYXNzZXMoKTtcclxuXHJcbiAgICB0aGlzLmd1aWQgPSBVdGlscy5nZW5lcmF0ZVVVSUQoKTtcclxuXHJcbiAgICBsZXQgZHJvcGJveENvbnRhaW5lciA9IGA8ZGl2IGlkPVwidnMtJHtcclxuICAgICAgdGhpcy5ndWlkXHJcbiAgICB9XCIgY2xhc3M9XCJ2c2NvbXAtZHJvcGJveC1jb250YWluZXJcIiAke0RvbVV0aWxzLmdldFN0eWxlVGV4dChcclxuICAgICAgZHJvcGJveENvbnRhaW5lclN0eWxlXHJcbiAgICApfT5cclxuICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1kcm9wYm94XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtd3JhcHBlclwiPjwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbG9hZGVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zLWxpc3RcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1vcHRpb25zXCI+PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1vcHRpb25zXCI+JHt0aGlzLm5vT3B0aW9uc1RleHR9PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1zZWFyY2gtcmVzdWx0c1wiPiR7dGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0fTwvZGl2PlxyXG5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1kcm9wYm94LWNsb3NlLWJ1dHRvblwiPjxpIGNsYXNzPVwidnNjb21wLWNsZWFyLWljb25cIj48L2k+PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmA7XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cIiR7d3JhcHBlckNsYXNzZXN9XCIgdGFiaW5kZXg9XCIwXCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJHt0aGlzLm5hbWV9XCIgY2xhc3M9XCJ2c2NvbXAtaGlkZGVuLWlucHV0XCI+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC12YWx1ZVwiICR7dmFsdWVUb29sdGlwfT5cclxuICAgICAgICAgICAgJHt0aGlzLnBsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1hcnJvd1wiPjwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtY2xlYXItYnV0dG9uIHRvZ2dsZS1idXR0b24tY2hpbGRcIiAke2NsZWFyQnV0dG9uVG9vbHRpcH0+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwidnNjb21wLWNsZWFyLWljb25cIj48L2k+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgJHt0aGlzLmtlZXBBbHdheXNPcGVuIHx8ICF0aGlzLmFwcGVuZFRvQm9keSA/IGRyb3Bib3hDb250YWluZXIgOiAnJ31cclxuXHJcbiAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgdGhpcy4kZWxlLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB0aGlzLiRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5cclxuICAgIHRoaXMuJHdyYXBwZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC10b2dnbGUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLiRjbGVhckJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWNsZWFyLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXRoaXMua2VlcEFsd2F5c09wZW4gJiYgdGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgLy8gQXBwZW5kIHRvIGJvZHkgKGJldGEpXHJcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICB0aGlzLiRib2R5LmFwcGVuZChcclxuICAgICAgICBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChkcm9wYm94Q29udGFpbmVyKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCN2cy0ke3RoaXMuZ3VpZH0udnNjb21wLWRyb3Bib3gtY29udGFpbmVyYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3ZzLSR7dGhpcy5ndWlkfWApO1xyXG5cclxuICAgICAgbGV0IGNsYXNzZXMgPSAndnNjb21wLXdyYXBwZXItYm9keSc7XHJcbiAgICAgIGNsYXNzZXMgKz0gZ2V0V3JhcHBlckNsYXNzZXMoKTtcclxuXHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGRyb3Bib3hFbCwgYCR7Y2xhc3Nlc31gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAnLnZzY29tcC1kcm9wYm94LWNvbnRhaW5lcidcclxuICAgICAgKTtcclxuICAgICAgdGhpcy4kZHJvcGJveEVsID0gdGhpcy4kZWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJHNlYXJjaCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbnMtY29udGFpbmVyJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLiRvcHRpb25zTGlzdCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMtbGlzdCcpO1xyXG4gICAgdGhpcy4kb3B0aW9ucyA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMnKTtcclxuICAgIHRoaXMuJHZhbHVlVGV4dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXZhbHVlJyk7XHJcbiAgICB0aGlzLiRoaWRkZW5JbnB1dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLWhpZGRlbi1pbnB1dCcpO1xyXG4gICAgdGhpcy4kbm9PcHRpb25zID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtbm8tb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kbm9TZWFyY2hSZXN1bHRzID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW5vLXNlYXJjaC1yZXN1bHRzJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFmdGVyUmVuZGVyV3JhcHBlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyT3B0aW9ucygpIHtcclxuICAgIGxldCBodG1sID0gJyc7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSB0aGlzLmdldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICBsZXQgY2hlY2tib3hIdG1sID0gJyc7XHJcbiAgICBsZXQgbmV3T3B0aW9uSWNvbkh0bWwgPSAnJztcclxuICAgIGxldCBtYXJrU2VhcmNoUmVzdWx0cyA9XHJcbiAgICAgIHRoaXMubWFya1NlYXJjaFJlc3VsdHMgJiYgdGhpcy5zZWFyY2hWYWx1ZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIGxldCBzZWFyY2hSZWdleDtcclxuXHJcbiAgICBsZXQgc3R5bGVUZXh0ID0gRG9tVXRpbHMuZ2V0U3R5bGVUZXh0KHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLm9wdGlvbkhlaWdodCArICdweCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobWFya1NlYXJjaFJlc3VsdHMpIHtcclxuICAgICAgc2VhcmNoUmVnZXggPSBuZXcgUmVnRXhwKGAoJHt0aGlzLnNlYXJjaFZhbHVlfSlgLCAnZ2knKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uXCI+PC9zcGFuPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgbGV0IG5ld09wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnTmV3IE9wdGlvbicpO1xyXG4gICAgICBuZXdPcHRpb25JY29uSHRtbCA9IGA8c3BhbiBjbGFzcz1cInZzY29tcC1uZXctb3B0aW9uLWljb25cIiAke25ld09wdGlvblRvb2x0aXB9Pjwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IG9wdGlvbkxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgbGV0IG9wdGlvbkNsYXNzZXMgPSAndnNjb21wLW9wdGlvbic7XHJcbiAgICAgIGxldCBvcHRpb25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsIHRydWUpO1xyXG4gICAgICBsZXQgbGVmdFNlY3Rpb24gPSBjaGVja2JveEh0bWw7XHJcbiAgICAgIGxldCByaWdodFNlY3Rpb24gPSAnJztcclxuICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcblxyXG4gICAgICBpZiAoZC5pc0ZvY3VzZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZm9jdXNlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZGlzYWJsZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtdGl0bGUnO1xyXG4gICAgICAgIGxlZnRTZWN0aW9uID0gJyc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIHNlbGVjdGVkJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgZ3JvdXAtb3B0aW9uJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuZGVzY3JpcHRpb24pIHtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IGA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbi1kZXNjcmlwdGlvblwiICR7b3B0aW9uVG9vbHRpcH0+JHtkLmRlc2NyaXB0aW9ufTwvZGl2PmA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBjdXJyZW50LW5ldyc7XHJcbiAgICAgICAgcmlnaHRTZWN0aW9uICs9IG5ld09wdGlvbkljb25IdG1sO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cyAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICAgIG9wdGlvbkxhYmVsID0gb3B0aW9uTGFiZWwucmVwbGFjZShzZWFyY2hSZWdleCwgJzxtYXJrPiQxPC9tYXJrPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIiR7b3B0aW9uQ2xhc3Nlc31cIiBkYXRhLXZhbHVlPVwiJHtcclxuICAgICAgICBkLnZhbHVlXHJcbiAgICAgIH1cIiBkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiIGRhdGEtdmlzaWJsZS1pbmRleD1cIiR7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXhcclxuICAgICAgfVwiICR7c3R5bGVUZXh0fT5cclxuICAgICAgICAgICR7bGVmdFNlY3Rpb259XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1vcHRpb24tdGV4dCAke1xyXG4gICAgICAgICAgICBkLnZhbHVlID09PSBub25lT3B0aW9uVmFsdWUgPyAnbm9uZScgOiAnJ1xyXG4gICAgICAgICAgfVwiICR7b3B0aW9uVG9vbHRpcH0+XHJcbiAgICAgICAgICAgICR7b3B0aW9uTGFiZWx9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAke2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgJHtyaWdodFNlY3Rpb259XHJcbiAgICAgICAgPC9kaXY+YDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuJG9wdGlvbnMuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIGxldCBoYXNOb09wdGlvbnMgPSAhdGhpcy5vcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCBoYXNOb1NlYXJjaFJlc3VsdHMgPSAhaGFzTm9PcHRpb25zICYmICF2aXNpYmxlT3B0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKCF0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ2hhcy1uby1zZWFyY2gtcmVzdWx0cycsXHJcbiAgICAgICAgaGFzTm9TZWFyY2hSZXN1bHRzXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAodGhpcy5hcHBlbmRUb0JvZHkpXHJcbiAgICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgICB0aGlzLiRkcm9wYm94RWwsXHJcbiAgICAgICAgICAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJyxcclxuICAgICAgICAgIGhhc05vU2VhcmNoUmVzdWx0c1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy1uby1vcHRpb25zJywgaGFzTm9PcHRpb25zKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Bvc2l0aW9uKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNUb29sdGlwKCk7XHJcbiAgICAvL3RoaXMubW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlclNlYXJjaCgpIHtcclxuICAgIGlmICghdGhpcy5oYXNTZWFyY2hDb250YWluZXIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBzZWFyY2hJbnB1dCA9ICcnO1xyXG5cclxuICAgIC8vIGlmICh0aGlzLm11bHRpcGxlICYmICF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgIC8vICAgY2hlY2tib3hIdG1sID0gYDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtYnV0dG9uXCI+XHJcbiAgICAvLyAgICAgICA8c3BhbiBjbGFzcz1cImNoZWNrYm94LWljb24gdnNjb21wLXRvZ2dsZS1hbGwtY2hlY2tib3hcIj48L3NwYW4+XHJcbiAgICAvLyAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWxsLWxhYmVsXCI+JHt0aGlzLnNlbGVjdEFsbFRleHR9PC9zcGFuPlxyXG4gICAgLy8gICAgIDwvc3Bhbj5gO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGlmICh0aGlzLmhhc1NlYXJjaCkge1xyXG4gICAgLy8gICBzZWFyY2hJbnB1dCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInZzY29tcC1zZWFyY2gtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIiR7dGhpcy5zZWFyY2hQbGFjZWhvbGRlcn1cIj5cclxuICAgIC8vICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNsZWFyXCI+JnRpbWVzOzwvc3Bhbj5gO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNvbnRhaW5lclwiPlxyXG4gICAgLy8gICAgICR7Y2hlY2tib3hIdG1sfVxyXG4gICAgLy8gICAgICR7c2VhcmNoSW5wdXR9XHJcbiAgICAvLyAgIDwvZGl2PmA7XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAgIHNlYXJjaElucHV0ID0gYCA8ZGl2IGNsYXNzPVwidnNjb21wLXNlYXJjaC1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidnNjb21wLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaFBsYWNlaG9sZGVyfVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNsZWFyXCI+JnRpbWVzOzwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlICYmICF0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgY2hlY2tib3hIdG1sID0gYDxkaXYgY2xhc3M9XCJ2cy1jb21wLXNlbGVjdC1hbGwtY29udGFpbmVyXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1idXR0b25cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvbiB2c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveFwiPjwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtbGFiZWxcIj4ke3RoaXMuc2VsZWN0QWxsVGV4dH08L3NwYW4+XHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PmA7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgJHtzZWFyY2hJbnB1dH0ke2NoZWNrYm94SHRtbH1gO1xyXG5cclxuICAgIHRoaXMuJHNlYXJjaC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgdGhpcy4kc2VhcmNoSW5wdXQgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtaW5wdXQnKTtcclxuICAgIHRoaXMuJHNlYXJjaENsZWFyID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWNsZWFyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVBbGxCdXR0b24gPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtdG9nZ2xlLWFsbC1idXR0b24nXHJcbiAgICApO1xyXG4gICAgdGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3ggPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveCdcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRzZWFyY2hJbnB1dCwgJ2tleXVwIGNoYW5nZScsICdvblNlYXJjaCcpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRzZWFyY2hDbGVhciwgJ2NsaWNrJywgJ29uU2VhcmNoQ2xlYXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQWxsQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVBbGxPcHRpb25zJyk7XHJcbiAgfVxyXG5cclxuICAvKiogcmVuZGVyIG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGRvbSBldmVudCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBhZGRFdmVudHMoKSB7XHJcbiAgICB0aGlzLmFkZEV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAnb25Eb2N1bWVudENsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHdyYXBwZXIsICdrZXlkb3duJywgJ29uS2V5RG93bicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVCdXR0b24sICdjbGljaycsICdvblRvZ2dsZUJ1dHRvbkNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGNsZWFyQnV0dG9uLCAnY2xpY2snLCAnb25DbGVhckJ1dHRvbkNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGRyb3Bib3hDb250YWluZXIsICdjbGljaycsICdvbkRyb3Bib3hDb250YWluZXJDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudChcclxuICAgICAgdGhpcy4kZHJvcGJveENsb3NlQnV0dG9uLFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICAnb25Ecm9wYm94Q2xvc2VCdXR0b25DbGljaydcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLCAnc2Nyb2xsJywgJ29uT3B0aW9uc1Njcm9sbCcpO1xyXG5cclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ2NsaWNrJywgJ29uT3B0aW9uc0NsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnMsICdtb3VzZW92ZXInLCAnb25PcHRpb25zTW91c2VPdmVyJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJGRyb3Bib3hDb250YWluZXIsICdtb3VzZWxlYXZlJywgJ29uT3B0aW9uc01vdXNlTGVhdmUnKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ3RvdWNobW92ZScsICdvbk9wdGlvbnNUb3VjaE1vdmUnKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlTGVhdmUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBhZGRFdmVudCgkZWxlLCBldmVudHMsIG1ldGhvZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBldmVudHMgPSBVdGlscy5yZW1vdmVBcnJheUVtcHR5KGV2ZW50cy5zcGxpdCgnICcpKTtcclxuXHJcbiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgbGV0IGV2ZW50c0tleSA9IGAke21ldGhvZH0tJHtldmVudH1gO1xyXG4gICAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLmV2ZW50c1tldmVudHNLZXldO1xyXG5cclxuICAgICAgaWYgKCFjYWxsYmFjaykge1xyXG4gICAgICAgIGNhbGxiYWNrID0gdGhpc1ttZXRob2RdLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRzS2V5XSA9IGNhbGxiYWNrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWxlID0gRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hFdmVudCgkZWxlLCBldmVudE5hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoZXZlbnROYW1lLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgb25Eb2N1bWVudENsaWNrKGUpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5hcHBlbmRUb0JvZHkgJiZcclxuICAgICAgdGhpcy5tdWx0aXBsZSAmJlxyXG4gICAgICB0aGlzLmlzT3BlbmVkKCkgJiZcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdChgI3ZzLSR7dGhpcy5ndWlkfWApXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuOyAvLyBEb24ndCBjbG9zZSBkcm9wYm94IGlmIGFwcGVuZCB0byBib2R5LCBtdWx0aXBsZSBhbmQgY2xpY2sgaW5zaWRlIGRyb3Bib3dcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgJGVsZVRvS2VlcE9wZW4gPSBlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLXdyYXBwZXInKTtcclxuXHJcbiAgICBpZiAoJGVsZVRvS2VlcE9wZW4gIT09IHRoaXMuJHdyYXBwZXIpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uS2V5RG93bihlKSB7XHJcbiAgICBsZXQga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7XHJcbiAgICBsZXQgbWV0aG9kID0ga2V5RG93bk1ldGhvZE1hcHBpbmdba2V5XTtcclxuXHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgIHRoaXNbbWV0aG9kXShlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRW50ZXJQcmVzcygpIHtcclxuICAgIGlmICghdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0Rm9jdXNlZE9wdGlvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Fc2NQcmVzcygpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRG93bkFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbignbmV4dCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25VcEFycm93UHJlc3MoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbigncHJldmlvdXMnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQnV0dG9uQ2xpY2soZSkge1xyXG4gICAgbGV0IGNoaWxkRWxlID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1idXR0b24tY2hpbGQnKTtcclxuXHJcbiAgICBpZiAoY2hpbGRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9nZ2xlRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgb25DbGVhckJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zU2Nyb2xsKCkge1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zQ2xpY2soZSkge1xyXG4gICAgdGhpcy5zZWxlY3RPcHRpb24oXHJcbiAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtb3B0aW9uOm5vdCguZGlzYWJsZWQpOm5vdCguZ3JvdXAtdGl0bGUpJylcclxuICAgICk7XHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICAvLyBNb3ZlIHNlbGVjdGVkIHRvIHRvcCB3YXMgdHJpZ2dlcmluZyBjbG9zZURyb3Bib3cgYmVhY2F1c2Ugb2Ygb25Ecm9wYm94Q29udGFpbmVyQ2xpY2tcclxuICAgICAgLy8gV2hlbiBzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgaXMgb25cclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ecm9wYm94Q29udGFpbmVyQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLWRyb3Bib3gnKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ecm9wYm94Q2xvc2VCdXR0b25DbGljaygpIHtcclxuICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNNb3VzZU92ZXIoZSkge1xyXG4gICAgbGV0ICRlbGUgPSBlLnRhcmdldC5jbG9zZXN0KFxyXG4gICAgICAnLnZzY29tcC1vcHRpb246bm90KC5kaXNhYmxlZCk6bm90KC5ncm91cC10aXRsZSknXHJcbiAgICApO1xyXG5cclxuICAgIGlmICgkZWxlICYmIHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKG51bGwsICRlbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zVG91Y2hNb3ZlKCkge1xyXG4gICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgb25TZWFyY2goZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoZS50YXJnZXQudmFsdWUsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgb25TZWFyY2hDbGVhcigpIHtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgfVxyXG5cclxuICBvblRvZ2dsZUFsbE9wdGlvbnMoKSB7XHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIG9uUmVzaXplKCkge1xyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHRoaXMuc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCh0cnVlKTtcclxuICB9XHJcbiAgLyoqIGRvbSBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBhZnRlciBldmVudCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBhZnRlclJlbmRlcldyYXBwZXIoKSB7XHJcbiAgICB0aGlzLiRlbGUuc2V0QXR0cmlidXRlKCduYW1lJywgdGhpcy5uYW1lKTtcclxuXHJcbiAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRlbGUsICd2c2NvbXAtZWxlJyk7XHJcbiAgICB0aGlzLnJlbmRlclNlYXJjaCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNDb250YWluZXJIZWlnaHQoKTtcclxuICAgIHRoaXMuYWRkRXZlbnRzKCk7XHJcbiAgICB0aGlzLnNldE1ldGhvZHMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKFxyXG4gICAgICAgIHRoaXMuaW5pdGlhbFNlbGVjdGVkVmFsdWUsXHJcbiAgICAgICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRvU2VsZWN0Rmlyc3RPcHRpb24gJiYgdGhpcy52aXNpYmxlT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChcclxuICAgICAgICB0aGlzLnZpc2libGVPcHRpb25zWzBdLnZhbHVlLFxyXG4gICAgICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpIHtcclxuICAgIGlmIChyZXNldCkge1xyXG4gICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvKiogYWZ0ZXIgZXZlbnQgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogc2V0IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHNldFByb3BzKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSB0aGlzLnNldERlZmF1bHRQcm9wcyhvcHRpb25zKTtcclxuICAgIHRoaXMuc2V0UHJvcHNGcm9tRWxlbWVudEF0dHIob3B0aW9ucyk7XHJcblxyXG4gICAgbGV0IGNvbnZlcnRUb0Jvb2xlYW4gPSBVdGlscy5jb252ZXJ0VG9Cb29sZWFuO1xyXG5cclxuICAgIHRoaXMuJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgdGhpcy52YWx1ZUtleSA9IG9wdGlvbnMudmFsdWVLZXk7XHJcbiAgICB0aGlzLmxhYmVsS2V5ID0gb3B0aW9ucy5sYWJlbEtleTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb25LZXkgPSBvcHRpb25zLmRlc2NyaXB0aW9uS2V5O1xyXG4gICAgdGhpcy5hbGlhc0tleSA9IG9wdGlvbnMuYWxpYXNLZXk7XHJcbiAgICB0aGlzLm9wdGlvbkhlaWdodFRleHQgPSBvcHRpb25zLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0ID0gcGFyc2VGbG9hdCh0aGlzLm9wdGlvbkhlaWdodFRleHQpO1xyXG4gICAgdGhpcy5tdWx0aXBsZSA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5tdWx0aXBsZSk7XHJcbiAgICB0aGlzLmhhc1NlYXJjaCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zZWFyY2gpO1xyXG4gICAgdGhpcy5oaWRlQ2xlYXJCdXR0b24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuaGlkZUNsZWFyQnV0dG9uKTtcclxuICAgIHRoaXMuYXV0b1NlbGVjdEZpcnN0T3B0aW9uID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5hdXRvU2VsZWN0Rmlyc3RPcHRpb25cclxuICAgICk7XHJcbiAgICB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKTtcclxuICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0ID0gY29udmVydFRvQm9vbGVhbihcclxuICAgICAgb3B0aW9ucy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICk7XHJcbiAgICB0aGlzLmFsbG93TmV3T3B0aW9uID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmFsbG93TmV3T3B0aW9uKTtcclxuICAgIHRoaXMubWFya1NlYXJjaFJlc3VsdHMgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubWFya1NlYXJjaFJlc3VsdHMpO1xyXG4gICAgdGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdFxyXG4gICAgKTtcclxuICAgIHRoaXMuZGlzYWJsZVNlbGVjdEFsbCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5kaXNhYmxlU2VsZWN0QWxsKTtcclxuICAgIHRoaXMua2VlcEFsd2F5c09wZW4gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMua2VlcEFsd2F5c09wZW4pO1xyXG4gICAgdGhpcy5zaG93RHJvcGJveEFzUG9wdXAgPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2hvd0Ryb3Bib3hBc1BvcHVwKTtcclxuICAgIHRoaXMubm9PcHRpb25zVGV4dCA9IG9wdGlvbnMubm9PcHRpb25zVGV4dDtcclxuICAgIHRoaXMubm9TZWFyY2hSZXN1bHRzVGV4dCA9IG9wdGlvbnMubm9TZWFyY2hSZXN1bHRzVGV4dDtcclxuICAgIHRoaXMuc2VsZWN0QWxsVGV4dCA9IG9wdGlvbnMuc2VsZWN0QWxsVGV4dDtcclxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSBvcHRpb25zLnBsYWNlaG9sZGVyO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb247XHJcbiAgICB0aGlzLmRyb3Bib3hXaWR0aCA9IG9wdGlvbnMuZHJvcGJveFdpZHRoO1xyXG4gICAgdGhpcy50b29sdGlwRm9udFNpemUgPSBvcHRpb25zLnRvb2x0aXBGb250U2l6ZTtcclxuICAgIHRoaXMudG9vbHRpcEFsaWdubWVudCA9IG9wdGlvbnMudG9vbHRpcEFsaWdubWVudDtcclxuICAgIHRoaXMudG9vbHRpcE1heFdpZHRoID0gb3B0aW9ucy50b29sdGlwTWF4V2lkdGg7XHJcbiAgICB0aGlzLm5vT2ZEaXNwbGF5VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5ub09mRGlzcGxheVZhbHVlcyk7XHJcbiAgICB0aGlzLnpJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMuekluZGV4KTtcclxuICAgIHRoaXMubWF4VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5tYXhWYWx1ZXMpO1xyXG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xyXG4gICAgdGhpcy5hZGRpdGlvbmFsQ2xhc3NlcyA9IG9wdGlvbnMuYWRkaXRpb25hbENsYXNzZXM7XHJcbiAgICB0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlID0gb3B0aW9ucy5zZWxlY3RlZFZhbHVlO1xyXG4gICAgdGhpcy5wb3B1cERyb3Bib3hCcmVha3BvaW50ID0gb3B0aW9ucy5wb3B1cERyb3Bib3hCcmVha3BvaW50O1xyXG4gICAgdGhpcy5vblNlcnZlclNlYXJjaCA9IG9wdGlvbnMub25TZXJ2ZXJTZWFyY2g7XHJcbiAgICB0aGlzLnNlYXJjaFBsYWNlaG9sZGVyID0gb3B0aW9ucy5zZWFyY2hQbGFjZWhvbGRlcjtcclxuICAgIHRoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2UgPSBvcHRpb25zLml0ZW1zU2VsZWN0ZWRNZXNzYWdlO1xyXG4gICAgdGhpcy5hbGxvd05vbmVPcHRpb24gPSBvcHRpb25zLmFsbG93Tm9uZU9wdGlvbjtcclxuICAgIHRoaXMubm9uZU9wdGlvblRleHQgPSBvcHRpb25zLm5vbmVPcHRpb25UZXh0O1xyXG4gICAgdGhpcy5hcHBlbmRUb0JvZHkgPSBvcHRpb25zLmFwcGVuZFRvQm9keTtcclxuXHJcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkSW5kZXhlcyA9IFtdO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB0aGlzLnRvb2x0aXBFbnRlckRlbGF5ID0gMjAwO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uRHVyYXRpb24gPSAyNTA7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gJyc7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSAnJztcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgKG9wdGlvbnMuc2VhcmNoID09PSB1bmRlZmluZWQgJiYgdGhpcy5tdWx0aXBsZSkgfHxcclxuICAgICAgdGhpcy5hbGxvd05ld09wdGlvblxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuaGFzU2VhcmNoID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tYXhWYWx1ZXMpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU2VsZWN0QWxsID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhhc1NlcnZlclNlYXJjaCA9IHR5cGVvZiB0aGlzLm9uU2VydmVyU2VhcmNoID09PSAnZnVuY3Rpb24nO1xyXG4gICAgdGhpcy5zaG93QXNQb3B1cCA9XHJcbiAgICAgIHRoaXMuc2hvd0Ryb3Bib3hBc1BvcHVwICYmXHJcbiAgICAgICF0aGlzLmtlZXBBbHdheXNPcGVuICYmXHJcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIDw9IHBhcnNlRmxvYXQodGhpcy5wb3B1cERyb3Bib3hCcmVha3BvaW50KTtcclxuICAgIHRoaXMuaGFzU2VhcmNoQ29udGFpbmVyID1cclxuICAgICAgdGhpcy5oYXNTZWFyY2ggfHwgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCk7XHJcbiAgICB0aGlzLm9wdGlvbnNDb3VudCA9IHRoaXMuZ2V0T3B0aW9uc0NvdW50KG9wdGlvbnMub3B0aW9uc0NvdW50KTtcclxuICAgIHRoaXMuaGFsZk9wdGlvbnNDb3VudCA9IE1hdGguY2VpbCh0aGlzLm9wdGlvbnNDb3VudCAvIDIpO1xyXG4gICAgdGhpcy5vcHRpb25zSGVpZ2h0ID0gdGhpcy5nZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgfVxyXG5cclxuICBzZXREZWZhdWx0UHJvcHMob3B0aW9ucykge1xyXG4gICAgbGV0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICB2YWx1ZUtleTogJ3ZhbHVlJyxcclxuICAgICAgbGFiZWxLZXk6ICdsYWJlbCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uS2V5OiAnZGVzY3JpcHRpb24nLFxyXG4gICAgICBhbGlhc0tleTogJ2FsaWFzJyxcclxuICAgICAgb3B0aW9uc0NvdW50OiA1LFxyXG4gICAgICBub09mRGlzcGxheVZhbHVlczogNTAsXHJcbiAgICAgIG9wdGlvbkhlaWdodDogJzQwcHgnLFxyXG4gICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgIGhpZGVDbGVhckJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIGF1dG9TZWxlY3RGaXJzdE9wdGlvbjogZmFsc2UsXHJcbiAgICAgIGhhc09wdGlvbkRlc2NyaXB0aW9uOiBmYWxzZSxcclxuICAgICAgc2lsZW50SW5pdGlhbFZhbHVlU2V0OiBmYWxzZSxcclxuICAgICAgZGlzYWJsZVNlbGVjdEFsbDogZmFsc2UsXHJcbiAgICAgIG5vT3B0aW9uc1RleHQ6ICdObyBvcHRpb25zIGZvdW5kJyxcclxuICAgICAgbm9TZWFyY2hSZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgZm91bmQnLFxyXG4gICAgICBzZWxlY3RBbGxUZXh0OiAnU2VsZWN0IEFsbCcsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAnU2VsZWN0JyxcclxuICAgICAgcG9zaXRpb246ICdhdXRvJyxcclxuICAgICAgekluZGV4OiAxLFxyXG4gICAgICBhbGxvd05ld09wdGlvbjogZmFsc2UsXHJcbiAgICAgIG1hcmtTZWFyY2hSZXN1bHRzOiBmYWxzZSxcclxuICAgICAgdG9vbHRpcEZvbnRTaXplOiAnMTRweCcsXHJcbiAgICAgIHRvb2x0aXBBbGlnbm1lbnQ6ICdjZW50ZXInLFxyXG4gICAgICB0b29sdGlwTWF4V2lkdGg6ICczMDBweCcsXHJcbiAgICAgIHNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdDogZmFsc2UsXHJcbiAgICAgIG5hbWU6ICcnLFxyXG4gICAgICBhZGRpdGlvbmFsQ2xhc3NlczogJycsXHJcbiAgICAgIGtlZXBBbHdheXNPcGVuOiBmYWxzZSxcclxuICAgICAgbWF4VmFsdWVzOiAwLFxyXG4gICAgICBzaG93RHJvcGJveEFzUG9wdXA6IHRydWUsXHJcbiAgICAgIHBvcHVwRHJvcGJveEJyZWFrcG9pbnQ6ICc1NzZweCcsXHJcbiAgICAgIHNlYXJjaFBsYWNlaG9sZGVyOiAnU2VhcmNoLi4uJyxcclxuICAgICAgaXRlbXNTZWxlY3RlZE1lc3NhZ2U6ICdzZWxlY3RlZCcsXHJcbiAgICAgIGFsbG93Tm9uZU9wdGlvbjogZmFsc2UsXHJcbiAgICAgIG5vbmVPcHRpb25UZXh0OiAnTm9uZScsXHJcbiAgICAgIGFwcGVuZFRvQm9keTogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvcHRpb25zLmhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbnNDb3VudCA9IDQ7XHJcbiAgICAgIGRlZmF1bHRPcHRpb25zLm9wdGlvbkhlaWdodCA9ICc2MHB4JztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZSA9IG9wdGlvbnMuZWxlO1xyXG4gICAgbGV0IG1hcHBpbmcgPSB7XHJcbiAgICAgIG11bHRpcGxlOiAnbXVsdGlwbGUnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ3BsYWNlaG9sZGVyJyxcclxuICAgICAgbmFtZTogJ25hbWUnLFxyXG4gICAgICAnZGF0YS12YWx1ZS1rZXknOiAndmFsdWVLZXknLFxyXG4gICAgICAnZGF0YS1sYWJlbC1rZXknOiAnbGFiZWxLZXknLFxyXG4gICAgICAnZGF0YS1kZXNjcmlwdGlvbi1rZXknOiAnZGVzY3JpcHRpb25LZXknLFxyXG4gICAgICAnZGF0YS1hbGlhcy1rZXknOiAnYWxpYXNLZXknLFxyXG4gICAgICAnZGF0YS1zZWFyY2gnOiAnc2VhcmNoJyxcclxuICAgICAgJ2RhdGEtaGlkZS1jbGVhci1idXR0b24nOiAnaGlkZUNsZWFyQnV0dG9uJyxcclxuICAgICAgJ2RhdGEtYXV0by1zZWxlY3QtZmlyc3Qtb3B0aW9uJzogJ2F1dG9TZWxlY3RGaXJzdE9wdGlvbicsXHJcbiAgICAgICdkYXRhLWhhcy1vcHRpb24tZGVzY3JpcHRpb24nOiAnaGFzT3B0aW9uRGVzY3JpcHRpb24nLFxyXG4gICAgICAnZGF0YS1vcHRpb25zLWNvdW50JzogJ29wdGlvbnNDb3VudCcsXHJcbiAgICAgICdkYXRhLW9wdGlvbi1oZWlnaHQnOiAnb3B0aW9uSGVpZ2h0JyxcclxuICAgICAgJ2RhdGEtcG9zaXRpb24nOiAncG9zaXRpb24nLFxyXG4gICAgICAnZGF0YS1uby1vcHRpb25zLXRleHQnOiAnbm9PcHRpb25zVGV4dCcsXHJcbiAgICAgICdkYXRhLW5vLXNlYXJjaC1yZXN1bHRzLXRleHQnOiAnbm9TZWFyY2hSZXN1bHRzVGV4dCcsXHJcbiAgICAgICdkYXRhLXNlbGVjdC1hbGwtdGV4dCc6ICdzZWxlY3RBbGxUZXh0JyxcclxuICAgICAgJ2RhdGEtc2lsZW50LWluaXRpYWwtdmFsdWUtc2V0JzogJ3NpbGVudEluaXRpYWxWYWx1ZVNldCcsXHJcbiAgICAgICdkYXRhLWRyb3Bib3gtd2lkdGgnOiAnZHJvcGJveFdpZHRoJyxcclxuICAgICAgJ2RhdGEtei1pbmRleCc6ICd6SW5kZXgnLFxyXG4gICAgICAnZGF0YS1uby1vZi1kaXNwbGF5LXZhbHVlcyc6ICdub09mRGlzcGxheVZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFsbG93LW5ldy1vcHRpb24nOiAnYWxsb3dOZXdPcHRpb24nLFxyXG4gICAgICAnZGF0YS1tYXJrLXNlYXJjaC1yZXN1bHRzJzogJ21hcmtTZWFyY2hSZXN1bHRzJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1mb250LXNpemUnOiAndG9vbHRpcEZvbnRTaXplJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGlnbm1lbnQnOiAndG9vbHRpcEFsaWdubWVudCcsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtbWF4LXdpZHRoJzogJ3Rvb2x0aXBNYXhXaWR0aCcsXHJcbiAgICAgICdkYXRhLXNob3ctc2VsZWN0ZWQtb3B0aW9ucy1maXJzdCc6ICdzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QnLFxyXG4gICAgICAnZGF0YS1kaXNhYmxlLXNlbGVjdC1hbGwnOiAnZGlzYWJsZVNlbGVjdEFsbCcsXHJcbiAgICAgICdkYXRhLWtlZXAtYWx3YXlzLW9wZW4nOiAna2VlcEFsd2F5c09wZW4nLFxyXG4gICAgICAnZGF0YS1tYXgtdmFsdWVzJzogJ21heFZhbHVlcycsXHJcbiAgICAgICdkYXRhLWFkZGl0aW9uYWwtY2xhc3Nlcyc6ICdhZGRpdGlvbmFsQ2xhc3NlcycsXHJcbiAgICAgICdkYXRhLXNob3ctZHJvcGJveC1hcy1wb3B1cCc6ICdzaG93RHJvcGJveEFzUG9wdXAnLFxyXG4gICAgICAnZGF0YS1wb3B1cC1kcm9wYm94LWJyZWFrcG9pbnQnOiAncG9wdXBEcm9wYm94QnJlYWtwb2ludCcsXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGsgaW4gbWFwcGluZykge1xyXG4gICAgICBsZXQgdmFsdWUgPSAkZWxlLmdldEF0dHJpYnV0ZShrKTtcclxuXHJcbiAgICAgIGlmIChrID09PSAnbXVsdGlwbGUnICYmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09ICd0cnVlJykpIHtcclxuICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIG9wdGlvbnNbbWFwcGluZ1trXV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TWV0aG9kcygpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kZWxlO1xyXG4gICAgJGVsZS52aXJ0dWFsU2VsZWN0ID0gdGhpcztcclxuICAgICRlbGUudmFsdWUgPSB0aGlzLm11bHRpcGxlID8gW10gOiAnJztcclxuICAgICRlbGUucmVzZXQgPSBWaXJ0dWFsU2VsZWN0LnJlc2V0O1xyXG4gICAgJGVsZS5zZXRWYWx1ZSA9IFZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLnNldE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldE9wdGlvbnNNZXRob2Q7XHJcbiAgICAkZWxlLnNldERpc2FibGVkT3B0aW9ucyA9IFZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS50b2dnbGVTZWxlY3RBbGwgPSBWaXJ0dWFsU2VsZWN0LnRvZ2dsZVNlbGVjdEFsbDtcclxuICAgICRlbGUuaXNBbGxTZWxlY3RlZCA9IFZpcnR1YWxTZWxlY3QuaXNBbGxTZWxlY3RlZDtcclxuICAgICRlbGUuYWRkT3B0aW9uID0gVmlydHVhbFNlbGVjdC5hZGRPcHRpb25NZXRob2Q7XHJcbiAgICAkZWxlLmdldE5ld1ZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUuZ2V0RGlzcGxheVZhbHVlID0gVmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWVNZXRob2Q7XHJcbiAgICAkZWxlLm9wZW4gPSBWaXJ0dWFsU2VsZWN0Lm9wZW5NZXRob2Q7XHJcbiAgICAkZWxlLmNsb3NlID0gVmlydHVhbFNlbGVjdC5jbG9zZU1ldGhvZDtcclxuICAgICRlbGUuc2V0U2VhcmNoVmFsdWUgPSBWaXJ0dWFsU2VsZWN0LnNldFNlYXJjaFZhbHVlTWV0aG9kO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB2YWx1ZSA9IFt2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgdmFsdWUgPSB2YWx1ZS5tYXAoKHYpID0+IHtcclxuICAgICAgcmV0dXJuIHYgfHwgdiA9PSAwID8gdi50b1N0cmluZygpIDogJyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgdmFsaWRWYWx1ZXMgPSBbXTtcclxuICAgIGxldCB2YWxpZEluZGV4ZXMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBkIG9mIHRoaXMub3B0aW9ucykge1xyXG4gICAgICBsZXQgaXNTZWxlY3RlZCA9IHZhbHVlLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBpZiAodmFsaWRWYWx1ZXMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTEgJiYgdGhpcy5tdWx0aXBsZSkgYnJlYWs7IC8vIElmIG11bHRpcGxlIHNlbGVjdGlvbiB3aXRoIHNhbWUgdmFsdWUgb25seSBzZWxlY3Qgb25lLlxyXG5cclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZhbGlkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgICAgdmFsaWRJbmRleGVzLnB1c2goZC5pbmRleCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSBicmVhazsgLy8gaWYgc2luZ2xlIHNlbGVjdGlvbiBvbmx5IHNlbGVjdCBvbmUuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgdmFsaWRWYWx1ZXMgPSB2YWxpZFZhbHVlc1swXTtcclxuICAgICAgdmFsaWRJbmRleGVzID0gdmFsaWRJbmRleGVzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYmVmb3JlVmFsdWVTZXQoKTtcclxuICAgIHRoaXMuc2V0VmFsdWUodmFsaWRWYWx1ZXMsIHZhbGlkSW5kZXhlcywgIXNpbGVudENoYW5nZSk7XHJcbiAgICB0aGlzLmFmdGVyVmFsdWVTZXQoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywga2VlcFZhbHVlKSB7XHJcbiAgICBsZXQgbmV3b3B0aW9uID0gb3B0aW9ucyAhPSB0aGlzLm9wdGlvbnM7XHJcbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICB0aGlzLmFmdGVyU2V0T3B0aW9ucyhrZWVwVmFsdWUsIG5ld29wdGlvbik7XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZE9wdGlvbnNNZXRob2QoZGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldERpc2FibGVkT3B0aW9ucyhkaXNhYmxlZE9wdGlvbnMsIHRydWUpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZU1ldGhvZChudWxsKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkT3B0aW9ucyhkaXNhYmxlZE9wdGlvbnMgPSBbXSwgc2V0T3B0aW9uc1Byb3AgPSBmYWxzZSkge1xyXG4gICAgZGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLm1hcCgoZCkgPT4gZC50b1N0cmluZygpKTtcclxuICAgIHRoaXMuZGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zO1xyXG5cclxuICAgIGlmIChzZXRPcHRpb25zUHJvcCAmJiBkaXNhYmxlZE9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgICAgZC5pc0Rpc2FibGVkID0gZGlzYWJsZWRPcHRpb25zLmluZGV4T2YoZC52YWx1ZSkgIT09IC0xO1xyXG5cclxuICAgICAgICByZXR1cm4gZDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByZXBhcmVkT3B0aW9ucyA9IFtdO1xyXG4gICAgbGV0IGRpc2FibGVkT3B0aW9ucyA9IHRoaXMuZGlzYWJsZWRPcHRpb25zO1xyXG4gICAgbGV0IGhhc0Rpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkT3B0aW9ucy5sZW5ndGg7XHJcbiAgICBsZXQgdmFsdWVLZXkgPSB0aGlzLnZhbHVlS2V5O1xyXG4gICAgbGV0IGxhYmVsS2V5ID0gdGhpcy5sYWJlbEtleTtcclxuICAgIGxldCBkZXNjcmlwdGlvbktleSA9IHRoaXMuZGVzY3JpcHRpb25LZXk7XHJcbiAgICBsZXQgYWxpYXNLZXkgPSB0aGlzLmFsaWFzS2V5O1xyXG4gICAgbGV0IGhhc09wdGlvbkRlc2NyaXB0aW9uID0gdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbjtcclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgZ2V0QWxpYXMgPSB0aGlzLmdldEFsaWFzO1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIGxldCBoYXNPcHRpb25Hcm91cCA9IGZhbHNlO1xyXG5cclxuICAgIGxldCBwcmVwYXJlT3B0aW9uID0gKGQpID0+IHtcclxuICAgICAgbGV0IHZhbHVlID0gZ2V0U3RyaW5nKGRbdmFsdWVLZXldKTtcclxuICAgICAgbGV0IGNoaWxkT3B0aW9ucyA9IGQub3B0aW9ucztcclxuICAgICAgbGV0IGlzR3JvdXBUaXRsZSA9IGNoaWxkT3B0aW9ucyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgbGV0IG9wdGlvbiA9IHtcclxuICAgICAgICBpbmRleCxcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogZ2V0U3RyaW5nKGRbbGFiZWxLZXldKSxcclxuICAgICAgICBhbGlhczogZ2V0QWxpYXMoZFthbGlhc0tleV0pLFxyXG4gICAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBpc0dyb3VwVGl0bGUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoaGFzRGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzR3JvdXBPcHRpb24gPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbi5ncm91cEluZGV4ID0gZC5ncm91cEluZGV4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgICBvcHRpb24uZGVzY3JpcHRpb24gPSBnZXRTdHJpbmcoZFtkZXNjcmlwdGlvbktleV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmVwYXJlZE9wdGlvbnMucHVzaChvcHRpb24pO1xyXG4gICAgICBpbmRleCsrO1xyXG5cclxuICAgICAgaWYgKGlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBncm91cEluZGV4ID0gb3B0aW9uLmluZGV4O1xyXG4gICAgICAgIGhhc09wdGlvbkdyb3VwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY2hpbGRPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICAgIGQuaXNHcm91cE9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICBkLmdyb3VwSW5kZXggPSBncm91cEluZGV4O1xyXG5cclxuICAgICAgICAgIHByZXBhcmVPcHRpb24oZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gQWRkIG5vbmUgb3B0aW9uIG9ubHkgd2hlbiBpbiBsaXN0IG1vZGUgKGFsd2F5cyBvcGVuIGFuZCBvbmx5KVxyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlICYmIHRoaXMuYWxsb3dOb25lT3B0aW9uKSB7XHJcbiAgICAgIG9wdGlvbnMudW5zaGlmdCh7XHJcbiAgICAgICAgdmFsdWU6IG5vbmVPcHRpb25WYWx1ZSxcclxuICAgICAgICBsYWJlbDogdGhpcy5ub25lT3B0aW9uVGV4dCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKHByZXBhcmVPcHRpb24pO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IHByZXBhcmVkT3B0aW9ucztcclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IHByZXBhcmVkT3B0aW9ucy5sZW5ndGg7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCA9IHRoaXMub3B0aW9ucy5sZW5ndGggLSAxO1xyXG4gICAgdGhpcy5uZXdWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuaGFzT3B0aW9uR3JvdXAgPSBoYXNPcHRpb25Hcm91cDtcclxuICAgIHRoaXMuc2V0U29ydGVkT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VydmVyT3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywgdHJ1ZSk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnc2VydmVyLXNlYXJjaGluZycpO1xyXG4gIH1cclxuXHJcbiAgc2V0U29ydGVkT3B0aW9ucygpIHtcclxuICAgIGxldCBzb3J0ZWRPcHRpb25zID0gWy4uLnRoaXMub3B0aW9uc107XHJcblxyXG4gICAgaWYgKHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0ICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgIGlmICh0aGlzLmhhc09wdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgc29ydGVkT3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnNHcm91cChzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzb3J0ZWRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9ucyhzb3J0ZWRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc29ydGVkT3B0aW9ucyA9IHNvcnRlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBzZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IFsuLi50aGlzLnNvcnRlZE9wdGlvbnNdO1xyXG4gICAgbGV0IG1heE9wdGlvbnNUb1Nob3cgPSB0aGlzLm9wdGlvbnNDb3VudCAqIDI7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IHRoaXMuZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKTtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIG1heE9wdGlvbnNUb1Nob3cgLSAxO1xyXG4gICAgbGV0IGkgPSAwO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgbmV3T3B0aW9uLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zLmZpbHRlcigoZCkgPT4ge1xyXG4gICAgICBsZXQgaW5WaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoZC5pc1Zpc2libGUgJiYgIWQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgaW5WaWV3ID0gaSA+PSBzdGFydEluZGV4ICYmIGkgPD0gZW5kSW5kZXg7XHJcbiAgICAgICAgZC52aXNpYmxlSW5kZXggPSBpO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGluVmlldztcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbnMgPSBbbmV3T3B0aW9uLCAuLi52aXNpYmxlT3B0aW9uc107XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9ucyA9IHZpc2libGVPcHRpb25zO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zUG9zaXRpb24oc3RhcnRJbmRleCkge1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0b3AgPSBzdGFydEluZGV4ICogdGhpcy5vcHRpb25IZWlnaHQ7XHJcbiAgICB0aGlzLiRvcHRpb25zLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAke3RvcH1weCwgMClgO1xyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiRvcHRpb25zLCAndG9wJywgdG9wKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNUb29sdGlwKCkge1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gdGhpcy5nZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgbGV0IGhhc09wdGlvbkRlc2NyaXB0aW9uID0gdGhpcy5oYXNPcHRpb25EZXNjcmlwdGlvbjtcclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCAkb3B0aW9uRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAudnNjb21wLW9wdGlvbltkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiXWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIERvbVV0aWxzLnNldERhdGEoXHJcbiAgICAgICAgJG9wdGlvbkVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi10ZXh0JyksXHJcbiAgICAgICAgJ3Rvb2x0aXAnLFxyXG4gICAgICAgIGQubGFiZWxcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChoYXNPcHRpb25EZXNjcmlwdGlvbikge1xyXG4gICAgICAgIERvbVV0aWxzLnNldERhdGEoXHJcbiAgICAgICAgICAkb3B0aW9uRWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLWRlc2NyaXB0aW9uJyksXHJcbiAgICAgICAgICAndG9vbHRpcCcsXHJcbiAgICAgICAgICBkLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZSh2YWx1ZSwgaW5kZXgsIHRyaWdnZXJFdmVudCkge1xyXG4gICAgZGVidWdnZXI7XHJcbiAgICAvLyBWYWx1ZVxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbLi4udmFsdWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFt2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld1ZhbHVlID0gdGhpcy5tdWx0aXBsZVxyXG4gICAgICA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXNcclxuICAgICAgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdIHx8ICcnO1xyXG5cclxuICAgIHRoaXMuJGVsZS52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQudmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcbiAgICAvLyBJbmRleFxyXG4gICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbmRleCkpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbLi4uaW5kZXhdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdJbmRleCA9IHRoaXMubXVsdGlwbGVcclxuICAgICAgPyB0aGlzLnNlbGVjdGVkSW5kZXhlc1xyXG4gICAgICA6IHRoaXMuc2VsZWN0ZWRJbmRleGVzWzBdIHx8ICcnO1xyXG5cclxuICAgIHRoaXMuJGVsZS5pbmRleCA9IG5ld0luZGV4O1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQuaW5kZXggPSBuZXdJbmRleDtcclxuXHJcbiAgICB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWQgPVxyXG4gICAgICB0aGlzLm1heFZhbHVlcyAmJiB0aGlzLm1heFZhbHVlcyA8PSB0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aFxyXG4gICAgICAgID8gdHJ1ZVxyXG4gICAgICAgIDogZmFsc2U7XHJcbiAgICB0aGlzLnNldFZhbHVlVGV4dCgpO1xyXG5cclxuICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWVzICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF0gPT09IG5vbmVPcHRpb25WYWx1ZSkge1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLXZhbHVlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLFxyXG4gICAgICAgICdoYXMtdmFsdWUnLFxyXG4gICAgICAgIFV0aWxzLmlzTm90RW1wdHkodGhpcy5zZWxlY3RlZFZhbHVlcylcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgJ21heC12YWx1ZS1zZWxlY3RlZCcsXHJcbiAgICAgIHRoaXMuaXNNYXhWYWx1ZXNTZWxlY3RlZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodHJpZ2dlckV2ZW50KSB7XHJcbiAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2hhbmdlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW1tZWRpYXRlbHkgbW92ZSBpdGVtIHRvIHRvcCBpZiBvcHRpb25zIGlzIG9uLlxyXG4gICAgaWYgKHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIGNvbnN0IGxhc3RTY3JvbGxUb3AgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuICAgICAgdGhpcy5tb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKTtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBsYXN0U2Nyb2xsVG9wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWVUZXh0KCkge1xyXG4gICAgbGV0IHZhbHVlVGV4dCA9IFtdO1xyXG4gICAgbGV0IHZhbHVlVG9vbHRpcCA9IFtdO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLnNlbGVjdGVkSW5kZXhlcztcclxuICAgIGxldCBzZWxlY3RlZExlbmd0aCA9IHNlbGVjdGVkVmFsdWVzLmxlbmd0aDtcclxuICAgIGxldCBub09mRGlzcGxheVZhbHVlcyA9IHRoaXMubm9PZkRpc3BsYXlWYWx1ZXM7XHJcbiAgICBsZXQgbWF4aW11bVZhbHVlc1RvU2hvdyA9IDUwO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzQ291bnQgPSAwO1xyXG5cclxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQgJiYgc2VsZWN0ZWRMZW5ndGggPiAxKSB7XHJcbiAgICAgIC8vdGhpcy4kdmFsdWVUZXh0LmlubmVySFRNTCA9IGBBbGwgKCR7c2VsZWN0ZWRMZW5ndGh9KWA7XHJcbiAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtzZWxlY3RlZExlbmd0aH0gJHt0aGlzLml0ZW1zU2VsZWN0ZWRNZXNzYWdlfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGxldCBkIG9mIHRoaXMub3B0aW9ucykge1xyXG4gICAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50ID4gbWF4aW11bVZhbHVlc1RvU2hvdyB8fFxyXG4gICAgICAgICAgKCF0aGlzLm11bHRpcGxlICYmIHNlbGVjdGVkVmFsdWVzQ291bnQgPT09IDEpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZSA9IGQudmFsdWU7XHJcbiAgICAgICAgbGV0IGxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgICBsZXQgaW5kZXggPSBkLmluZGV4O1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlcy5pbmRleE9mKHZhbHVlKSAhPT0gLTEgJiZcclxuICAgICAgICAgIHNlbGVjdGVkSW5kZXhlcy5pbmRleE9mKGluZGV4KSAhPT0gLTFcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50ID49IHNlbGVjdGVkVmFsdWVzLmxlbmd0aCkgYnJlYWs7IC8vIGRvIG5vdCBhZGQgc2FtZSB2YWx1ZXMgbXVsdGlwbGVcclxuXHJcbiAgICAgICAgICB2YWx1ZVRleHQucHVzaChsYWJlbCk7XHJcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50Kys7XHJcblxyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPD0gbm9PZkRpc3BsYXlWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZ1wiPiR7bGFiZWx9PC9zcGFuPmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1vcmVTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZExlbmd0aCAtIG5vT2ZEaXNwbGF5VmFsdWVzO1xyXG5cclxuICAgICAgaWYgKG1vcmVTZWxlY3RlZE9wdGlvbnMgPiAwKSB7XHJcbiAgICAgICAgdmFsdWVUb29sdGlwLnB1c2goXHJcbiAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdmFsdWUtdGFnIG1vcmUtdmFsdWUtY291bnRcIj4rICR7bW9yZVNlbGVjdGVkT3B0aW9uc30gbW9yZS4uLjwvc3Bhbj5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYWdncmVnYXRlZFZhbHVlVGV4dCA9IHZhbHVlVGV4dC5qb2luKCcsICcpO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPT09ICcnIHx8XHJcbiAgICAgICAgKHNlbGVjdGVkVmFsdWVzICYmIHNlbGVjdGVkVmFsdWVzWzBdID09PSBub25lT3B0aW9uVmFsdWUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBhZ2dyZWdhdGVkVmFsdWVUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgbGV0IG1heFZhbHVlcyA9IHRoaXMubWF4VmFsdWVzO1xyXG5cclxuICAgICAgICAgIGlmIChEb21VdGlscy5oYXNFbGxpcHNpcyh0aGlzLiR2YWx1ZVRleHQpIHx8IG1heFZhbHVlcykge1xyXG4gICAgICAgICAgICBsZXQgY291bnRUZXh0ID0gYCR7c2VsZWN0ZWRMZW5ndGh9YDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICBjb3VudFRleHQgKz0gYCAvICR7bWF4VmFsdWVzfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKiByZXBsYWNlIGNvbW1hIGRlbGltaXR0ZWQgbGlzdCBvZiBzZWxlY3Rpb25zIHdpdGggc2hvcnRlciB0ZXh0IGluZGljYXRpbmcgc2VsZWN0aW9uIGNvdW50ICovXHJcbiAgICAgICAgICAgIC8vIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9IG9wdGlvbiR7XHJcbiAgICAgICAgICAgIC8vICAgc2VsZWN0ZWRMZW5ndGggPT09IDEgPyAnJyA6ICdzJ1xyXG4gICAgICAgICAgICAvLyB9IHNlbGVjdGVkYDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgJHtjb3VudFRleHR9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLyoqIHJlbW92aW5nIHRvb2x0aXAgaWYgZnVsbCB2YWx1ZSB0ZXh0IGlzIHZpc2libGUgKi9cclxuICAgICAgICAgICAgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMuc2V0RGF0YSh0aGlzLiR2YWx1ZVRleHQsICd0b29sdGlwJywgdmFsdWVUb29sdGlwLmpvaW4oJywgJykpO1xyXG4gIH1cclxuXHJcbiAgc2V0U2VhcmNoVmFsdWUodmFsdWUsIHNraXBJbnB1dFNldCwgZm9yY2UpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsICYmICFmb3JjZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFza2lwSW5wdXRTZXQpIHtcclxuICAgICAgdGhpcy4kc2VhcmNoSW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VhcmNoVmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBzZWFyY2hWYWx1ZTtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9IHZhbHVlO1xyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KVxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG5cclxuICAgIGlmICh0aGlzLmhhc1NlcnZlclNlYXJjaCkge1xyXG4gICAgICB0aGlzLnNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnNDb3VudCA9IDA7XHJcbiAgICBsZXQgaGFzRXhhY3RPcHRpb24gPSBmYWxzZTtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZztcclxuICAgIGxldCBpc09wdGlvblZpc2libGUgPSB0aGlzLmlzT3B0aW9uVmlzaWJsZTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNPcHRpb25Hcm91cCkge1xyXG4gICAgICB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyA9XHJcbiAgICAgICAgdGhpcy5nZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gaXNPcHRpb25WaXNpYmxlKFxyXG4gICAgICAgIGQsXHJcbiAgICAgICAgc2VhcmNoVmFsdWUsXHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgaGFzRXhhY3RPcHRpb24gPSByZXN1bHQuaGFzRXhhY3RPcHRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiAhaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldE5ld09wdGlvbigpO1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZU5ld09wdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gdmlzaWJsZU9wdGlvbnNDb3VudDtcclxuXHJcbiAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvblByb3AoaW5kZXgsIGtleSwgdmFsdWUpIHtcclxuICAgIGlmICghdGhpcy5vcHRpb25zW2luZGV4XSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zW2luZGV4XVtrZXldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgdGhpcy4kb3B0aW9uc0xpc3Quc3R5bGUuaGVpZ2h0ID1cclxuICAgICAgdGhpcy5vcHRpb25IZWlnaHQgKiB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgbGV0IG9wdGlvbnNIZWlnaHQ7XHJcblxyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zQ291bnQgPSB0aGlzLmdldE9wdGlvbnNDb3VudCgpO1xyXG4gICAgICAgIG9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSBvcHRpb25zSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvcHRpb25zSGVpZ2h0ID0gdGhpcy5vcHRpb25zSGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub09wdGlvbnMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRub1NlYXJjaFJlc3VsdHMsICdoZWlnaHQnLCBvcHRpb25zSGVpZ2h0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldFN0eWxlKHRoaXMuJG9wdGlvbnNDb250YWluZXIsICdtYXgtaGVpZ2h0Jywgb3B0aW9uc0hlaWdodCk7XHJcblxyXG4gICAgdGhpcy5hZnRlclNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RHJvcGJveFBvc2l0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMucG9zaXRpb24gIT09ICdhdXRvJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1vcmVWaXNpYmxlU2lkZXMgPSBEb21VdGlscy5nZXRNb3JlVmlzaWJsZVNpZGVzKHRoaXMuJHdyYXBwZXIpO1xyXG4gICAgbGV0IHNob3dPbkxlZnQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogY2hlY2sgdGhhdCBpcyBkcm9wYm94IGhpZGRlbiBvbiByaWdodCBlZGdlIC0gb25seSBpZiBjdXN0b20gd2lkdGggZ2l2ZW4gKi9cclxuICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICBsZXQgYnV0dG9uQ29vcmRzID0gdGhpcy4kdG9nZ2xlQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBsZXQgZHJvcGJveFdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmRyb3Bib3hXaWR0aCk7XHJcbiAgICAgIGxldCBoaWRkZW5PblJpZ2h0ID0gYnV0dG9uQ29vcmRzLmxlZnQgKyBkcm9wYm94V2lkdGggPiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICBsZXQgaGlkZGVuT25MZWZ0ID0gZHJvcGJveFdpZHRoID4gYnV0dG9uQ29vcmRzLnJpZ2h0O1xyXG5cclxuICAgICAgaWYgKGhpZGRlbk9uUmlnaHQgJiYgIWhpZGRlbk9uTGVmdCkge1xyXG4gICAgICAgIHNob3dPbkxlZnQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgIC8vIEJFVEFcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICB0eXBlb2Ygc2NyZWVuZnVsbCAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBzY3JlZW5mdWxsLmlzRnVsbHNjcmVlbiAmJlxyXG4gICAgICAgIHNjcmVlbmZ1bGwuZWxlbWVudFxyXG4gICAgICApIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy4kZHJvcGJveENvbnRhaW5lcik7XHJcbiAgICAgICAgc2NyZWVuZnVsbC5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy4kZHJvcGJveENvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy4kYm9keS5hcHBlbmRDaGlsZChmcmFnbWVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBlbGVDb29yZHMgPSB0aGlzLiRlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGxldCB4ID0gZWxlQ29vcmRzLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcclxuICAgICAgbGV0IHkgPSBlbGVDb29yZHMudG9wICsgd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUud2lkdGggPSBgJHtcclxuICAgICAgICB0aGlzLmRyb3Bib3hXaWR0aCA/IHBhcnNlRmxvYXQodGhpcy5kcm9wYm94V2lkdGgpIDogZWxlQ29vcmRzLndpZHRoXHJcbiAgICAgIH1weGA7XHJcbiAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XHJcblxyXG4gICAgICBpZiAobW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBsZXQgZHJvcEJveENvcmQgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAvLyB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYCR7XHJcbiAgICAgICAgLy8gICB5IC0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5vZmZzZXRIZWlnaHQgLSA0XHJcbiAgICAgICAgLy8gfXB4YDtcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYCR7eSAtIGRyb3BCb3hDb3JkLmhlaWdodCAtIDR9cHhgO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgKyB0aGlzLiRlbGUub2Zmc2V0SGVpZ2h0ICsgNH1weGA7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgKyBlbGVDb29yZHMuaGVpZ2h0ICsgNH1weGA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hDb250YWluZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKFxyXG4gICAgICAgIHRoaXMuJHdyYXBwZXIsXHJcbiAgICAgICAgJ3Bvc2l0aW9uLXRvcCcsXHJcbiAgICAgICAgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCdcclxuICAgICAgKTtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3Bvc2l0aW9uLWxlZnQnLCBzaG93T25MZWZ0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE5ld09wdGlvbigpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbC50cmltKCk7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3SW5kZXggPSBuZXdPcHRpb24uaW5kZXg7XHJcblxyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAnbGFiZWwnLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogdmFsdWUsXHJcbiAgICAgICAgaXNDdXJyZW50TmV3OiB0cnVlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRPcHRpb24oZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3RlZFByb3AoKSB7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGdldCBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBnZXRWaXNpYmxlT3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2libGVPcHRpb25zIHx8IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rmlyc3RWaXNpYmxlT3B0aW9uSW5kZXgoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIC8gdGhpcy5vcHRpb25IZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZVN0YXJ0SW5kZXgoKSB7XHJcbiAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICBsZXQgc3RhcnRJbmRleCA9IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IC0gdGhpcy5oYWxmT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIGlmIChzdGFydEluZGV4IDwgMCkge1xyXG4gICAgICBzdGFydEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RhcnRJbmRleDtcclxuICB9XHJcblxyXG4gIGdldFRvb2x0aXBBdHRyVGV4dCh0ZXh0LCBlbGxpcHNpc09ubHkgPSBmYWxzZSwgYWxsb3dIdG1sID0gZmFsc2UpIHtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAnZGF0YS10b29sdGlwJzogdGV4dCB8fCAnJyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbnRlci1kZWxheSc6IHRoaXMudG9vbHRpcEVudGVyRGVsYXksXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtei1pbmRleCc6IHRoaXMuekluZGV4LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6IHRoaXMudG9vbHRpcEZvbnRTaXplLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6IHRoaXMudG9vbHRpcEFsaWdubWVudCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiB0aGlzLnRvb2x0aXBNYXhXaWR0aCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbGxpcHNpcy1vbmx5JzogZWxsaXBzaXNPbmx5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsbG93LWh0bWwnOiBhbGxvd0h0bWwsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBEb21VdGlscy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBnZXRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmc7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0ge1xyXG4gICAgICBpbmRleDogZGF0YS5pbmRleCxcclxuICAgICAgdmFsdWU6IGdldFN0cmluZyhkYXRhLnZhbHVlKSxcclxuICAgICAgbGFiZWw6IGdldFN0cmluZyhkYXRhLmxhYmVsKSxcclxuICAgICAgZGVzY3JpcHRpb246IGdldFN0cmluZyhkYXRhLmRlc2NyaXB0aW9uKSxcclxuICAgICAgYWxpYXM6IHRoaXMuZ2V0QWxpYXMoZGF0YS5hbGlhcyksXHJcbiAgICAgIGlzQ3VycmVudE5ldzogZGF0YS5pc0N1cnJlbnROZXcgfHwgZmFsc2UsXHJcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG5ld09wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE5ld09wdGlvbigpIHtcclxuICAgIGxldCBsYXN0T3B0aW9uID0gdGhpcy5vcHRpb25zW3RoaXMubGFzdE9wdGlvbkluZGV4XTtcclxuXHJcbiAgICBpZiAoIWxhc3RPcHRpb24gfHwgIWxhc3RPcHRpb24uaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGFzdE9wdGlvbjtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbkluZGV4KHZhbHVlKSB7XHJcbiAgICBsZXQgaW5kZXg7XHJcblxyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgaWYgKGQudmFsdWUgPT0gdmFsdWUpIHtcclxuICAgICAgICAgIGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIGdldE5ld1ZhbHVlKCkge1xyXG4gICAgbGV0IG5ld1ZhbHVlcyA9IHRoaXMubmV3VmFsdWVzO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXMuZmlsdGVyKChkKSA9PiBuZXdWYWx1ZXMuaW5kZXhPZihkKSAhPT0gLTEpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gcmVzdWx0IDogcmVzdWx0WzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxpYXMoYWxpYXMpIHtcclxuICAgIGlmIChhbGlhcykge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGlhcykpIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLmpvaW4oJywnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGlhcyA9IGFsaWFzLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhbGlhcyA9IGFsaWFzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGlhcyA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhbGlhcztcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlWYWx1ZSgpIHtcclxuICAgIGxldCBkaXNwbGF5VmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgIGRpc3BsYXlWYWx1ZXMucHVzaChkLmxhYmVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gZGlzcGxheVZhbHVlcyA6IGRpc3BsYXlWYWx1ZXNbMF0gfHwgJyc7XHJcbiAgfVxyXG5cclxuICBnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyhzZWFyY2hWYWx1ZSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0W2QuaW5kZXhdID0gZC5vcHRpb25zLnNvbWUoXHJcbiAgICAgICAgKGUpID0+IGlzT3B0aW9uVmlzaWJsZShlLCBzZWFyY2hWYWx1ZSkuaXNWaXNpYmxlXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uc0NvdW50KGNvdW50KSB7XHJcbiAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICBsZXQgYXZhaWxhYmxlSGVpZ2h0ID1cclxuICAgICAgICAod2luZG93LmlubmVySGVpZ2h0ICogODApIC8gMTAwIC0gZHJvcGJveENsb3NlQnV0dG9uRnVsbEhlaWdodDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICAgIGF2YWlsYWJsZUhlaWdodCAtPSBzZWFyY2hIZWlnaHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvdW50ID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyB0aGlzLm9wdGlvbkhlaWdodCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudCA9IHBhcnNlSW50KGNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25zSGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc0NvdW50ICogdGhpcy5vcHRpb25IZWlnaHQgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2libGluZygkZWxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBwcm9wTmFtZSA9XHJcbiAgICAgIGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ25leHRFbGVtZW50U2libGluZycgOiAncHJldmlvdXNFbGVtZW50U2libGluZyc7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoJGVsZSkge1xyXG4gICAgICAgICRlbGUgPSAkZWxlW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoXHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgIERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdncm91cC10aXRsZScpXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiAkZWxlO1xyXG4gIH1cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgb3BlbkRyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIHRoaXMuc2V0RHJvcGJveFBvc2l0aW9uKCk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdvcGVuZWQnKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICB0aGlzLm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCgpO1xyXG4gICAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdmb2N1c2VkJyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEb21VdGlscy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ29wZW5lZCcpO1xyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIGNsb3NlRHJvcGJveChpc1NpbGVudCkge1xyXG4gICAgaWYgKHRoaXMua2VlcEFsd2F5c09wZW4pIHtcclxuICAgICAgdGhpcy5yZW1vdmVPcHRpb25Gb2N1cygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRyYW5zaXRpb25EdXJhdGlvbiA9IGlzU2lsZW50ID8gMCA6IHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnb3BlbmVkIGZvY3VzZWQnKTtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnb3BlbmVkIGZvY3VzZWQnKTtcclxuXHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuXHJcbiAgICAgIGlmICghaXNTaWxlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwQWN0aXZlKSB7XHJcbiAgICAgICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRib2R5LCAndnNjb21wLXBvcHVwLWFjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5pc1BvcHVwQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEb21VdGlscy5kaXNwYXRjaEV2ZW50KHRoaXMuJGVsZSwgJ2Nsb3NlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2Nsb3NlZCcpO1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiRkcm9wYm94RWwsICdjbG9zZWQnKTtcclxuICAgICAgaWYgKHRoaXMuYXBwZW5kVG9Cb2R5KSB7XHJcbiAgICAgICAgLy8gSGlkZSBkcm9wYm94IHNvbWV3aGVyZSBmYXJycnJycnIgYXdheVxyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS5sZWZ0ID0gYC0yMDAwcHhgO1xyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS50b3AgPSBgLTIwMDBweGA7XHJcbiAgICAgIH1cclxuICAgIH0sIHRyYW5zaXRpb25EdXJhdGlvbik7XHJcbiAgfVxyXG5cclxuICBtb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKSB7XHJcbiAgICBpZiAoIXRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFNvcnRlZE9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wIHx8ICF0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVEcm9wYm94KCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNPcGVuZWQoKSB7XHJcbiAgICByZXR1cm4gRG9tVXRpbHMuaGFzQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXNTZWFyY2hJbnB1dCgpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kc2VhcmNoSW5wdXQ7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgJGVsZS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXNPcHRpb24oZGlyZWN0aW9uLCBlbGUpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICApO1xyXG4gICAgbGV0ICRuZXdGb2N1c2VkRWxlO1xyXG5cclxuICAgIGlmIChlbGUpIHtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSBlbGU7XHJcbiAgICB9IGVsc2UgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAvKiBpZiBubyBlbGVtZW50IG9uIGZvY3VzIGNob29zZSBmaXJzdCB2aXNpYmxlIG9uZSAqL1xyXG4gICAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAudnNjb21wLW9wdGlvbltkYXRhLXZpc2libGUtaW5kZXg9XCIke2ZpcnN0VmlzaWJsZU9wdGlvbkluZGV4fVwiXWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBEb21VdGlscy5oYXNDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2Rpc2FibGVkJykgfHxcclxuICAgICAgICBEb21VdGlscy5oYXNDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2dyb3VwLXRpdGxlJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLmdldFNpYmxpbmcoJG5ld0ZvY3VzZWRFbGUsICduZXh0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRmb2N1c2VkRWxlLCBkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkbmV3Rm9jdXNlZEVsZSAmJiAkbmV3Rm9jdXNlZEVsZSAhPT0gJGZvY3VzZWRFbGUpIHtcclxuICAgICAgaWYgKCRmb2N1c2VkRWxlKSB7XHJcbiAgICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3MoJGZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKCRuZXdGb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLnRvZ2dsZUZvY3VzZWRQcm9wKERvbVV0aWxzLmdldERhdGEoJG5ld0ZvY3VzZWRFbGUsICdpbmRleCcpLCB0cnVlKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbikgdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkbmV3Rm9jdXNlZEVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkZm9jdXNlZEVsZSkge1xyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3U2Nyb2xsVG9wO1xyXG4gICAgbGV0IGNvbnRhaW5lclJlY3QgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IG9wdGlvblJlY3QgPSAkZm9jdXNlZEVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBjb250YWluZXJUb3AgPSBjb250YWluZXJSZWN0LnRvcDtcclxuICAgIGxldCBjb250YWluZXJCb3R0b20gPSBjb250YWluZXJSZWN0LmJvdHRvbTtcclxuICAgIGxldCBjb250YWluZXJIZWlnaHQgPSBjb250YWluZXJSZWN0LmhlaWdodDtcclxuICAgIGxldCBvcHRpb25Ub3AgPSBvcHRpb25SZWN0LnRvcDtcclxuICAgIGxldCBvcHRpb25Cb3R0b20gPSBvcHRpb25SZWN0LmJvdHRvbTtcclxuICAgIGxldCBvcHRpb25IZWlnaHQgPSBvcHRpb25SZWN0LmhlaWdodDtcclxuICAgIGxldCBvcHRpb25PZmZzZXRUb3AgPSAkZm9jdXNlZEVsZS5vZmZzZXRUb3A7XHJcbiAgICBsZXQgb3B0aW9uc1RvcCA9IERvbVV0aWxzLmdldERhdGEodGhpcy4kb3B0aW9ucywgJ3RvcCcsICdudW1iZXInKTtcclxuXHJcbiAgICAvKiBpZiBvcHRpb24gaGlkZGVuIG9uIHRvcCAqL1xyXG4gICAgaWYgKGNvbnRhaW5lclRvcCA+IG9wdGlvblRvcCkge1xyXG4gICAgICBuZXdTY3JvbGxUb3AgPSBvcHRpb25PZmZzZXRUb3AgKyBvcHRpb25zVG9wO1xyXG4gICAgfSBlbHNlIGlmIChjb250YWluZXJCb3R0b20gPCBvcHRpb25Cb3R0b20pIHtcclxuICAgICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiBib3R0b20gKi9cclxuICAgICAgbmV3U2Nyb2xsVG9wID1cclxuICAgICAgICBvcHRpb25PZmZzZXRUb3AgLSBjb250YWluZXJIZWlnaHQgKyBvcHRpb25IZWlnaHQgKyBvcHRpb25zVG9wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChuZXdTY3JvbGxUb3AgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IG5ld1Njcm9sbFRvcDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZU9wdGlvbkZvY3VzKCkge1xyXG4gICAgbGV0ICRmb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC1vcHRpb24uZm9jdXNlZCdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3MoJGZvY3VzZWRFbGUsICdmb2N1c2VkJyk7XHJcbiAgICB0aGlzLnRvZ2dsZUZvY3VzZWRQcm9wKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0T3B0aW9uKCRlbGUpIHtcclxuICAgIC8vZGVidWdnZXI7XHJcblxyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNBZGRpbmcgPSAhRG9tVXRpbHMuaGFzQ2xhc3MoJGVsZSwgJ3NlbGVjdGVkJyk7XHJcblxyXG4gICAgaWYgKGlzQWRkaW5nKSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMuaXNNYXhWYWx1ZXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLyoqIG9uIHNlbGVjdGluZyBzYW1lIHZhbHVlIGluIHNpbmdsZSBzZWxlY3QgKi9cclxuICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXhlcyA9IHRoaXMuc2VsZWN0ZWRJbmRleGVzO1xyXG4gICAgLy9sZXQgc2VsZWN0ZWRWYWx1ZSA9IERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ3ZhbHVlJyk7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXggPSBwYXJzZUludChEb21VdGlscy5nZXREYXRhKCRlbGUsICdpbmRleCcpKTtcclxuXHJcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMub3B0aW9uc1tzZWxlY3RlZEluZGV4XS52YWx1ZSk7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWUgPSB0aGlzLm9wdGlvbnNbc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcblxyXG4gICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3Aoc2VsZWN0ZWRJbmRleCwgaXNBZGRpbmcpO1xyXG5cclxuICAgIGlmIChpc0FkZGluZykge1xyXG4gICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzLnB1c2goc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkUHJvcChcclxuICAgICAgICAgICAgdGhpcy5nZXRPcHRpb25JbmRleChzZWxlY3RlZFZhbHVlc1swXSksXHJcbiAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMgPSBbc2VsZWN0ZWRWYWx1ZV07XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzID0gW3NlbGVjdGVkSW5kZXhdO1xyXG4gICAgICAgIGxldCAkcHJldlNlbGVjdGVkT3B0aW9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAnLnZzY29tcC1vcHRpb24uc2VsZWN0ZWQnXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCRwcmV2U2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRwcmV2U2VsZWN0ZWRPcHRpb24sICdzZWxlY3RlZCcsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgICAgICBVdGlscy5yZW1vdmVJdGVtRnJvbUFycmF5KHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICBVdGlscy5yZW1vdmVJdGVtRnJvbUFycmF5KHNlbGVjdGVkSW5kZXhlcywgc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKERvbVV0aWxzLmhhc0NsYXNzKCRlbGUsICdjdXJyZW50LW5ldycpKSB7XHJcbiAgICAgIHRoaXMuYmVmb3JlU2VsZWN0TmV3VmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZEluZGV4ZXMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0Rm9jdXNlZE9wdGlvbigpIHtcclxuICAgIHRoaXMuc2VsZWN0T3B0aW9uKFxyXG4gICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUFsbE9wdGlvbnMoaXNTZWxlY3RlZCkge1xyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlIHx8IHRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBpc1NlbGVjdGVkICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNTZWxlY3RlZCA9ICFEb21VdGlscy5oYXNDbGFzcyh0aGlzLiR0b2dnbGVBbGxDaGVja2JveCwgJ2NoZWNrZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIGxldCBzZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCwgaWR4KSA9PiB7XHJcbiAgICAgIGlmIChkLmlzRGlzYWJsZWQgfHwgZC5pc0N1cnJlbnROZXcgfHwgZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGlzU2VsZWN0ZWQ7XHJcblxyXG4gICAgICBpZiAoaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2goZC52YWx1ZSk7XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleGVzLnB1c2goaWR4KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNTZWxlY3RlZCk7XHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCBzZWxlY3RlZEluZGV4ZXMsIHRydWUpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgaWYgKHR5cGVvZiBpc0FsbFNlbGVjdGVkICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICBpc0FsbFNlbGVjdGVkID0gIXRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gIWQuaXNTZWxlY3RlZCAmJiAhZC5pc0Rpc2FibGVkICYmICFkLmlzR3JvdXBUaXRsZTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHRvZ2dsZUFsbENoZWNrYm94LCAnY2hlY2tlZCcsIGlzQWxsU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gaXNBbGxTZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUZvY3VzZWRQcm9wKGluZGV4LCBpc0ZvY3VzZWQgPSBmYWxzZSkge1xyXG4gICAgaWYgKHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4KSB7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcCh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCwgJ2lzRm9jdXNlZCcsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc0ZvY3VzZWQnLCBpc0ZvY3VzZWQpO1xyXG4gICAgdGhpcy5mb2N1c2VkT3B0aW9uSW5kZXggPSBpbmRleDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNlbGVjdGVkUHJvcChpbmRleCwgaXNTZWxlY3RlZCA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc1NlbGVjdGVkJywgaXNTZWxlY3RlZCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1RvcCgpIHtcclxuICAgIGxldCBpc0Nsb3NlZCA9ICF0aGlzLmlzT3BlbmVkKCk7XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cclxuICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNDbG9zZWQpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5iZWZvcmVWYWx1ZVNldCh0cnVlKTtcclxuICAgIHRoaXMuc2V0VmFsdWUobnVsbCwgbnVsbCwgdHJ1ZSk7XHJcbiAgICB0aGlzLmFmdGVyVmFsdWVTZXQoKTtcclxuICB9XHJcblxyXG4gIGJlZm9yZVZhbHVlU2V0KGlzUmVzZXQpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzUmVzZXQgPyBmYWxzZSA6IHVuZGVmaW5lZCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclZhbHVlU2V0KCkge1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9ucyhrZWVwVmFsdWUpIHtcclxuICAgIGxldCBzZWFyY2ggPSB0aGlzLnNlYXJjaFZhbHVlOyAvLyBOZWVkIHRvIGJlIHN0b3JlZCBiZWNhdXNlIHNldFZhbHVlTWV0aG9kIHdpbGwgZW1wdHkgdGhpcy5zZWFyY2hWYWx1ZVxyXG5cclxuICAgIGlmIChrZWVwVmFsdWUpIHtcclxuICAgICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9ucyh0aGlzLmlzQWxsU2VsZWN0ZWQpOyAvLyBJZiBzZWxlY3QgYWxsIHdhcyBvbiBsZXQgc2VsZWN0IGFsbCBvblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QodGhpcy5zZWxlY3RlZFZhbHVlcywgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXQpOyAvLyBSZXNlbGVjdCB2YWxpZCB2YWx1ZXNcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuc2VhcmNoKSB0aGlzLnNldFNlYXJjaFZhbHVlKHNlYXJjaCwgZmFsc2UsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0T3B0aW9uc0hlaWdodCgpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG5cclxuICAgIGlmICgha2VlcFZhbHVlKSB7XHJcbiAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZE9wdGlvbihkYXRhLCByZXJlbmRlcikge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCsrO1xyXG4gICAgZGF0YS5pbmRleCA9IHRoaXMubGFzdE9wdGlvbkluZGV4O1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0T3B0aW9uT2JqKGRhdGEpO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5wdXNoKG5ld09wdGlvbik7XHJcbiAgICB0aGlzLnNvcnRlZE9wdGlvbnMucHVzaChuZXdPcHRpb24pO1xyXG5cclxuICAgIGlmIChyZXJlbmRlcikge1xyXG4gICAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgdGhpcy5hZnRlclNldE9wdGlvbnMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZU9wdGlvbihpbmRleCkge1xyXG4gICAgaWYgKCFpbmRleCAmJiBpbmRleCAhPSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4LS07XHJcbiAgfVxyXG5cclxuICByZW1vdmVOZXdPcHRpb24oKSB7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uKG5ld09wdGlvbi5pbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBiZWZvcmVTZWxlY3ROZXdWYWx1ZSgpIHtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IG5ld0luZGV4ID0gbmV3T3B0aW9uLmluZGV4O1xyXG5cclxuICAgIHRoaXMubmV3VmFsdWVzLnB1c2gobmV3T3B0aW9uLnZhbHVlKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2lzQ3VycmVudE5ldycsIGZhbHNlKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2lzTmV3JywgdHJ1ZSk7XHJcblxyXG4gICAgLyoqIHVzaW5nIHNldFRpbWVvdXQgdG8gZml4IHRoZSBpc3N1ZSBvZiBkcm9wYm94IGdldHRpbmcgY2xvc2VkIG9uIHNlbGVjdCAqL1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgc29ydE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG9wdGlvbnMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICBpZiAoYi52YWx1ZSA9PT0gbm9uZU9wdGlvblZhbHVlICYmIGEudmFsdWUgIT09IG5vbmVPcHRpb25WYWx1ZSkge1xyXG4gICAgICAgIC8vIE5vbmUgaXMgYWx3YXlzIGZpcnN0XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH0gZWxzZSBpZiAoIWEuaXNTZWxlY3RlZCAmJiAhYi5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH0gZWxzZSBpZiAoYS5pc1NlbGVjdGVkICYmICghYi5pc1NlbGVjdGVkIHx8IGEuaW5kZXggPCBiLmluZGV4KSkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzb3J0T3B0aW9uc0dyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCBzb3J0T3B0aW9ucyA9IHRoaXMuc29ydE9wdGlvbnM7XHJcbiAgICBvcHRpb25zID0gdGhpcy5zdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IGNoaWxkT3B0aW9ucyA9IGQub3B0aW9ucztcclxuICAgICAgZC5pc1NlbGVjdGVkID0gY2hpbGRPcHRpb25zLnNvbWUoKGUpID0+IGUuaXNTZWxlY3RlZCk7XHJcblxyXG4gICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgc29ydE9wdGlvbnMoY2hpbGRPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc29ydE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGVzdHJ1Y3R1cmVPcHRpb25Hcm91cChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGlzT3B0aW9uVmlzaWJsZShkLCBzZWFyY2hWYWx1ZSwgaGFzRXhhY3RPcHRpb24sIHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBkLmxhYmVsLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBkLmRlc2NyaXB0aW9uO1xyXG4gICAgbGV0IGFsaWFzID0gZC5hbGlhcztcclxuICAgIGxldCBpc1Zpc2libGUgPSB2YWx1ZS5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgaWYgKGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nW2QuaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhbGlhcyAmJiAhaXNWaXNpYmxlKSB7XHJcbiAgICAgIGlzVmlzaWJsZSA9IGFsaWFzLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVzY3JpcHRpb24gJiYgIWlzVmlzaWJsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSBkZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoVmFsdWUpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBkLmlzVmlzaWJsZSA9IGlzVmlzaWJsZTtcclxuXHJcbiAgICBpZiAoIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgIGhhc0V4YWN0T3B0aW9uID0gdmFsdWUgPT09IHNlYXJjaFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmlzaWJsZSxcclxuICAgICAgaGFzRXhhY3RPcHRpb24sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGNoaWxkT3B0aW9ucyA9IHt9O1xyXG5cclxuICAgIC8qKiBnZXR0aW5nIGFsbCBncm91cCB0aXRsZSAqL1xyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGxldCBjaGlsZEFycmF5ID0gW107XHJcbiAgICAgICAgZC5vcHRpb25zID0gY2hpbGRBcnJheTtcclxuICAgICAgICBjaGlsZE9wdGlvbnNbZC5pbmRleF0gPSBjaGlsZEFycmF5O1xyXG5cclxuICAgICAgICByZXN1bHQucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqIGdldHRpbmcgYWxsIGdyb3VwIG9wdGlvbnMgKi9cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0dyb3VwT3B0aW9uKSB7XHJcbiAgICAgICAgY2hpbGRPcHRpb25zW2QuZ3JvdXBJbmRleF0ucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGRlc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICByZXN1bHQucHVzaChkKTtcclxuICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChkLm9wdGlvbnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSkge1xyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy1uby1vcHRpb25zJyk7XHJcbiAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnc2VydmVyLXNlYXJjaGluZycpO1xyXG4gICAgdGhpcy5vblNlcnZlclNlYXJjaChzZWFyY2hWYWx1ZSwgdGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHN0YXRpYyBpbml0KG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlQXJyYXkgPSBvcHRpb25zLmVsZTtcclxuXHJcbiAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNpbmdsZUVsZSA9IGZhbHNlO1xyXG5cclxuICAgIGlmICh0eXBlb2YgJGVsZUFycmF5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAkZWxlQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCRlbGVBcnJheSk7XHJcblxyXG4gICAgICBpZiAoISRlbGVBcnJheSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlQXJyYXkubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZUFycmF5ID0gWyRlbGVBcnJheV07XHJcbiAgICAgIHNpbmdsZUVsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluc3RhbmNlcyA9IFtdO1xyXG4gICAgJGVsZUFycmF5LmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgb3B0aW9ucy5lbGUgPSAkZWxlO1xyXG4gICAgICBpbnN0YW5jZXMucHVzaChuZXcgVmlydHVhbFNlbGVjdChvcHRpb25zKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc2luZ2xlRWxlID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0Rm9ybShlKSB7XHJcbiAgICBsZXQgJGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJyk7XHJcblxyXG4gICAgaWYgKCEkZm9ybSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnZzY29tcC13cmFwcGVyJykuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICAkZWxlLnBhcmVudEVsZW1lbnQudmlydHVhbFNlbGVjdC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kKG9wdGlvbnMsIGtlZXBWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5zZXREaXNhYmxlZE9wdGlvbnNNZXRob2Qob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdG9nZ2xlU2VsZWN0QWxsKGlzU2VsZWN0ZWQpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC50b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzQWxsU2VsZWN0ZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkT3B0aW9uTWV0aG9kKGRhdGEpIHtcclxuICAgIHRoaXMudmlydHVhbFNlbGVjdC5hZGRPcHRpb24oZGF0YSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TmV3VmFsdWVNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmdldE5ld1ZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdmVyc2lvbigpIHtcclxuICAgIHJldHVybiB2aXJ0dWFsU2VsZWN0VmVyc2lvbjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREaXNwbGF5VmFsdWVNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmdldERpc3BsYXlWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG9wZW5NZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0Lm9wZW5Ecm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2xvc2VNZXRob2QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LmNsb3NlRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFNlYXJjaFZhbHVlTWV0aG9kKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2VsZWN0LnNldFNlYXJjaFZhbHVlKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvblJlc2l6ZU1ldGhvZCgpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgJGVsZS5wYXJlbnRFbGVtZW50LnZpcnR1YWxTZWxlY3Qub25SZXNpemUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiogc3RhdGljIG1ldGhvZHMgLSBlbmQgKi9cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBWaXJ0dWFsU2VsZWN0LnJlc2V0Rm9ybSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBWaXJ0dWFsU2VsZWN0Lm9uUmVzaXplTWV0aG9kKTtcclxuXHJcbndpbmRvdy5WaXJ0dWFsU2VsZWN0ID0gVmlydHVhbFNlbGVjdDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==