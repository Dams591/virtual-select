/*!
 * Virtual Select v1.0.6
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/utils/dom-utils.js":
/*!********************************!*\
  !*** ./src/utils/dom-utils.js ***!
  \********************************/(t,e,i)=>{i.r(e),i.d(e,{DomUtils:()=>a});var o=i(/*! ./index */"./src/utils/index.js");function s(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"addClass",value:function(e,i){e&&(i=i.split(" "),t.getElements(e).forEach((function(t){var e;(e=t.classList).add.apply(e,s(i))})))}},{key:"removeClass",value:function(e,i){e&&(i=i.split(" "),t.getElements(e).forEach((function(t){var e;(e=t.classList).remove.apply(e,s(i))})))}},{key:"toggleClass",value:function(e,i,o){var s;if(e)return void 0!==o&&(o=Boolean(o)),t.getElements(e).forEach((function(t){s=t.classList.toggle(i,o)})),s}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"hasEllipsis",value:function(t){return!!t&&t.scrollWidth>t.offsetWidth}},{key:"getData",value:function(t,e,i){if(t){var o=t?t.dataset[e]:"";return"number"===i?o=parseFloat(o)||0:"true"===o?o=!0:"false"===o&&(o=!1),o}}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"setAttr",value:function(t,e,i){t&&t.setAttribute(e,i)}},{key:"setAttrFromEle",value:function(t,e,i,o){var s={};i.forEach((function(e){s[e]=t.getAttribute(e)})),i.forEach((function(t){var i=s[t];(i||-1!==o.indexOf(t)&&""===i)&&e.setAttribute(t,i)}))}},{key:"setStyle",value:function(t,e,i){t&&(t.style[e]=i)}},{key:"setStyles",value:function(t,e){t&&e&&Object.keys(e).forEach((function(i){t.style[i]=e[i]}))}},{key:"getElements",value:function(t){if(t)return void 0===t.forEach&&(t=[t]),t}},{key:"addEvent",value:function(e,i,s){e&&(i=o.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){(e=t.getElements(e)).forEach((function(t){t.addEventListener(i,s)}))}))}},{key:"dispatchEvent",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(e=t.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new CustomEvent(i,{bubbles:o}))}))}),0))}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t){var o=t[i];void 0!==o&&(e+=" ".concat(i,'="').concat(o,'" '))}return e}},{key:"getStyleText",value:function(t,e){var i="";for(var o in t)i+="".concat(o,": ").concat(t[o],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=e.left,n=e.top;return{horizontal:s>i-s-e.width?"left":"right",vertical:n>o-n-e.height?"top":"bottom"}}}],(i=null)&&l(e.prototype,i),n&&l(e,n),t}()},"./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/(t,e,i)=>{i.r(e),i.d(e,{Utils:()=>o.Utils,DomUtils:()=>s.DomUtils});var o=i(/*! ./utils */"./src/utils/utils.js"),s=i(/*! ./dom-utils */"./src/utils/dom-utils.js")},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/(t,e,i)=>{function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{Utils:()=>a});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,s;return e=t,s=[{key:"getString",value:function(t){return t||0===t?t.toString():""}},{key:"convertToBoolean",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=!0===t||"true"===t||!1!==t&&"false"!==t&&e}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===n(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length)return t;i&&(t=o(t));var s=t.indexOf(e);return-1!==s&&t.splice(s,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}}],(i=null)&&l(e.prototype,i),s&&l(e,s),t}()}},e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/
i.r(o),i.d(o,{VirtualSelect:()=>c});var t=i(/*! ./utils */"./src/utils/index.js");function e(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r="{#virtual-select-none-option#}",p={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},c=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);try{this.setProps(t),this.setDisabledOptions(t.disabledOptions),this.setOptions(t.options),this.render()}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var o,n,l;return o=i,l=[{key:"init",value:function(t){var e=t.ele;if(e){var o=!1;if("string"!=typeof e||(e=document.querySelector(e))){void 0===e.length&&(e=[e],o=!0);var s=[];return e.forEach((function(e){t.ele=e,s.push(new i(t))})),o?s[0]:s}}}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t,e){this.virtualSelect.setOptionsMethod(t,e)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(t){this.virtualSelect.addOption(t,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"version",value:function(){return"v1.0.6"}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"setSearchValueMethod",value:function(t){return this.virtualSelect.setSearchValue(t)}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.onResize()}))}}],(n=[{key:"render",value:function(){var e=this;if(this.$ele){var i="vscomp-wrapper",o=this.getTooltipAttrText("",!this.multiple,!0),s=this.getTooltipAttrText("Clear"),n={"z-index":this.zIndex},l=function(){var t="";return e.additionalClasses&&(t+=" "+e.additionalClasses),e.multiple&&(t+=" multiple",e.disableSelectAll||(t+=" has-select-all")),"top"===e.position&&(t+=" position-top"),e.hideClearButton||(t+=" has-clear-button"),e.keepAlwaysOpen?t+=" keep-always-open opened":t+=" closed",e.showAsPopup?t+=" show-as-popup":e.dropboxWidth&&(n.width=e.dropboxWidth),e.hasSearch&&(t+=" has-search-input"),t};i+=l(),this.guid=t.Utils.generateUUID();var a='<div id="vs-'.concat(this.guid,'" class="vscomp-dropbox-container" ').concat(t.DomUtils.getStyleText(n),'>\n      <div class="vscomp-dropbox">\n        <div class="vscomp-search-wrapper"></div>\n\n        <div class="vscomp-options-container">\n          <div class="vscomp-options-loader"></div>\n\n          <div class="vscomp-options-list">\n            <div class="vscomp-options"></div>\n          </div>\n        </div>\n\n        <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n        <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n        <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n      </div>\n    </div>'),r='<div class="'.concat(i,'" tabindex="0">\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(o,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        ').concat(this.keepAlwaysOpen||!this.appendToBody?a:"","\n\n      </div>");if(this.$ele.innerHTML=r,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropboxCloseButton=this.$ele.querySelector(".vscomp-dropbox-close-button"),!this.keepAlwaysOpen&&this.appendToBody){this.$body.append(document.createRange().createContextualFragment(a)),this.$dropboxContainer=document.querySelector("#vs-".concat(this.guid,".vscomp-dropbox-container")),this.$dropboxEl=document.querySelector("#vs-".concat(this.guid));var p="vscomp-wrapper-body";p+=l(),t.DomUtils.addClass(this.$dropboxEl,"".concat(p))}else this.$dropboxContainer=this.$ele.querySelector(".vscomp-dropbox-container"),this.$dropboxEl=this.$ele;this.$search=this.$dropboxEl.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxEl.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxEl.querySelector(".vscomp-options-list"),this.$options=this.$dropboxEl.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$noOptions=this.$dropboxEl.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxEl.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderOptions",value:function(){var e,i=this,o="",s=this.getVisibleOptions(),n="",l="",a=!(!this.markSearchResults||!this.searchValue),p=t.DomUtils.getStyleText({height:this.optionHeight+"px"});if(a&&(e=new RegExp("(".concat(this.searchValue,")"),"gi")),this.multiple&&(n='<span class="checkbox-icon"></span>'),this.allowNewOption){var c=this.getTooltipAttrText("New Option");l='<span class="vscomp-new-option-icon" '.concat(c,"></span>")}s.forEach((function(t){var s=t.label,c="vscomp-option",u=i.getTooltipAttrText("",!0),h=n,d="",v="";t.isFocused&&(c+=" focused"),t.isDisabled&&(c+=" disabled"),t.isGroupTitle?(c+=" group-title",h=""):t.isSelected&&(c+=" selected"),t.isGroupOption&&(c+=" group-option"),t.description&&(v='<div class="vscomp-option-description" '.concat(u,">").concat(t.description,"</div>")),t.isCurrentNew?(c+=" current-new",d+=l):a&&!t.isGroupTitle&&(s=s.replace(e,"<mark>$1</mark>")),o+='<div class="'.concat(c,'" data-value="').concat(t.value,'" data-index="').concat(t.index,'" data-visible-index="').concat(t.visibleIndex,'" ').concat(p,">\n          ").concat(h,'\n          <span class="vscomp-option-text ').concat(t.value===r?"none":"",'" ').concat(u,">\n            ").concat(s,"\n          </span>\n          ").concat(v,"\n          ").concat(d,"\n        </div>")})),this.$options.innerHTML=o;var u=!this.options.length,h=!u&&!s.length;this.allowNewOption||(t.DomUtils.toggleClass(this.$wrapper,"has-no-search-results",h),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-no-search-results",h)),t.DomUtils.toggleClass(this.$wrapper,"has-no-options",u),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var t="",e="";this.hasSearch&&(e=' <div class="vscomp-search-container">\n          <input type="text" class="vscomp-search-input" placeholder="'.concat(this.searchPlaceholder,'">\n          <span class="vscomp-search-clear">&times;</span>\n        </div>')),this.multiple&&!this.disableSelectAll&&(t='<div class="vs-comp-select-all-container">\n        <span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>\n        </div>"));var i="".concat(e).concat(t);this.$search.innerHTML=i,this.$searchInput=this.$dropboxEl.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxEl.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxEl.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxEl.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$dropboxContainer,"mouseleave","onOptionsMouseLeave"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"onOptionsMouseLeave",value:function(){this.removeOptionFocus()}},{key:"addEvent",value:function(e,i,o){var s=this;e&&(i=t.Utils.removeArrayEmpty(i.split(" "))).forEach((function(i){var n="".concat(o,"-").concat(i),l=s.events[n];l||(l=s[o].bind(s),s.events[n]=l),(e=t.DomUtils.getElements(e)).forEach((function(t){t.addEventListener(i,l)}))}))}},{key:"dispatchEvent",value:function(e,i){e&&(e=t.DomUtils.getElements(e),setTimeout((function(){e.forEach((function(t){t.dispatchEvent(new Event(i,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(t){this.appendToBody&&this.multiple&&this.isOpened()&&t.target.closest("#vs-".concat(this.guid))||t.target.closest(".vscomp-wrapper")!==this.$wrapper&&this.closeDropbox()}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=p[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){if(this.selectOption(t.target.closest(".vscomp-option:not(.disabled):not(.group-title)")),this.multiple&&this.showSelectedOptionsFirst)return t.stopPropagation(),!1}},{key:"onDropboxContainerClick",value:function(t){t.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled):not(.group-title)");e&&this.isOpened()&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.appendToBody?this.isOpened()&&this.closeDropbox(!0):this.setOptionsContainerHeight(!0)}},{key:"afterRenderWrapper",value:function(){this.$ele.setAttribute("name",this.name),t.DomUtils.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setMethods(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet)}},{key:"afterSetOptionsContainerHeight",value:function(t){t&&this.showAsPopup&&this.setVisibleOptions()}},{key:"setProps",value:function(e){e=this.setDefaultProps(e),this.setPropsFromElementAttr(e);var i=t.Utils.convertToBoolean;this.$ele=e.ele,this.valueKey=e.valueKey,this.labelKey=e.labelKey,this.descriptionKey=e.descriptionKey,this.aliasKey=e.aliasKey,this.optionHeightText=e.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(e.multiple),this.hasSearch=i(e.search),this.hideClearButton=i(e.hideClearButton),this.autoSelectFirstOption=i(e.autoSelectFirstOption),this.hasOptionDescription=i(e.hasOptionDescription),this.silentInitialValueSet=i(e.silentInitialValueSet),this.allowNewOption=i(e.allowNewOption),this.markSearchResults=i(e.markSearchResults),this.showSelectedOptionsFirst=i(e.showSelectedOptionsFirst),this.disableSelectAll=i(e.disableSelectAll),this.keepAlwaysOpen=i(e.keepAlwaysOpen),this.showDropboxAsPopup=i(e.showDropboxAsPopup),this.noOptionsText=e.noOptionsText,this.noSearchResultsText=e.noSearchResultsText,this.selectAllText=e.selectAllText,this.placeholder=e.placeholder,this.position=e.position,this.dropboxWidth=e.dropboxWidth,this.tooltipFontSize=e.tooltipFontSize,this.tooltipAlignment=e.tooltipAlignment,this.tooltipMaxWidth=e.tooltipMaxWidth,this.noOfDisplayValues=parseInt(e.noOfDisplayValues),this.zIndex=parseInt(e.zIndex),this.maxValues=parseInt(e.maxValues),this.name=e.name,this.additionalClasses=e.additionalClasses,this.initialSelectedValue=e.selectedValue,this.popupDropboxBreakpoint=e.popupDropboxBreakpoint,this.onServerSearch=e.onServerSearch,this.searchPlaceholder=e.searchPlaceholder,this.itemsSelectedMessage=e.itemsSelectedMessage,this.allowNoneOption=e.allowNoneOption,this.noneOptionText=e.noneOptionText,this.appendToBody=e.appendToBody,this.selectedValues=[],this.selectedIndexes=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===e.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0),this.maxValues&&(this.disableSelectAll=!0),this.hasServerSearch="function"==typeof this.onServerSearch,this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(e.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight()}},{key:"setDefaultProps",value:function(t){var e={valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,autoSelectFirstOption:!1,hasOptionDescription:!1,silentInitialValueSet:!1,disableSelectAll:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",showSelectedOptionsFirst:!1,name:"",additionalClasses:"",keepAlwaysOpen:!1,maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",searchPlaceholder:"Search...",itemsSelectedMessage:"selected",allowNoneOption:!1,noneOptionText:"None",appendToBody:!1};return t.hasOptionDescription&&(e.optionsCount=4,e.optionHeight="60px"),Object.assign(e,t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder",name:"name","data-value-key":"valueKey","data-label-key":"labelKey","data-description-key":"descriptionKey","data-alias-key":"aliasKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-auto-select-first-option":"autoSelectFirstOption","data-has-option-description":"hasOptionDescription","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-select-all-text":"selectAllText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults","data-tooltip-font-size":"tooltipFontSize","data-tooltip-alignment":"tooltipAlignment","data-tooltip-max-width":"tooltipMaxWidth","data-show-selected-options-first":"showSelectedOptionsFirst","data-disable-select-all":"disableSelectAll","data-keep-always-open":"keepAlwaysOpen","data-max-values":"maxValues","data-additional-classes":"additionalClasses","data-show-dropbox-as-popup":"showDropboxAsPopup","data-popup-dropbox-breakpoint":"popupDropboxBreakpoint"};for(var o in i){var s=e.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(t[i[o]]=s)}}},{key:"setMethods",value:function(){var t=this.$ele;t.virtualSelect=this,t.value=this.multiple?[]:"",t.reset=i.reset,t.setValue=i.setValueMethod,t.setOptions=i.setOptionsMethod,t.setDisabledOptions=i.setDisabledOptionsMethod,t.toggleSelectAll=i.toggleSelectAll,t.isAllSelected=i.isAllSelected,t.addOption=i.addOptionMethod,t.getNewValue=i.getNewValueMethod,t.getDisplayValue=i.getDisplayValueMethod,t.open=i.openMethod,t.close=i.closeMethod,t.setSearchValue=i.setSearchValueMethod}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i,o=[],n=[],l=s(this.options);try{for(l.s();!(i=l.n()).done;){var a=i.value;if(-1===t.indexOf(a.value)||a.isDisabled||a.isGroupTitle)a.isSelected=!1;else{if(-1!==o.indexOf(a.value)&&this.multiple)break;if(a.isSelected=!0,o.push(a.value),n.push(a.index),!this.multiple)break}}}catch(t){l.e(t)}finally{l.f()}this.multiple||(o=o[0],n=n[0]),this.beforeValueSet(),this.setValue(o,n,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t,e){var i=t!=this.options;this.setOptions(t),this.afterSetOptions(e,i)}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(e){e||(e=[]);var i=[],o=this.disabledOptions,s=o.length,n=this.valueKey,l=this.labelKey,a=this.descriptionKey,p=this.aliasKey,c=this.hasOptionDescription,u=t.Utils.getString,h=this.getAlias,d=0,v=!1;!this.multiple&&this.allowNoneOption&&e.unshift({value:r,label:this.noneOptionText}),e.forEach((function t(e){var r=u(e[n]),f=e.options,y=!!f,m={index:d,value:r,label:u(e[l]),alias:h(e[p]),isVisible:!0,isGroupTitle:y};if(s&&(m.isDisabled=-1!==o.indexOf(r)),e.isGroupOption&&(m.isGroupOption=!0,m.groupIndex=e.groupIndex),c&&(m.description=u(e[a])),i.push(m),d++,y){var g=m.index;v=!0,f.forEach((function(e){e.isGroupOption=!0,e.groupIndex=g,t(e)}))}})),this.options=i,this.visibleOptionsCount=i.length,this.lastOptionIndex=this.options.length-1,this.newValues=[],this.hasOptionGroup=v,this.setSortedOptions()}},{key:"setServerOptions",value:function(e){this.setOptionsMethod(e,!0),t.DomUtils.removeClass(this.$wrapper,"server-searching")}},{key:"setSortedOptions",value:function(){var t=e(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(t=this.hasOptionGroup?this.sortOptionsGroup(t):this.sortOptions(t)),this.sortedOptions=t}},{key:"setVisibleOptions",value:function(){var t=e(this.sortedOptions),i=2*this.optionsCount,o=this.getVisibleStartIndex(),s=this.getNewOption(),n=o+i-1,l=0;s&&(s.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=o&&l<=n,t.visibleIndex=l,l++),e})),s&&(t=[s].concat(e(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){void 0===e&&(e=this.getVisibleStartIndex());var i=e*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(i,"px, 0)"),t.DomUtils.setData(this.$options,"top",i)}},{key:"setOptionsTooltip",value:function(){var e=this,i=this.getVisibleOptions(),o=this.hasOptionDescription;i.forEach((function(i){var s=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(i.index,'"]'));t.DomUtils.setData(s.querySelector(".vscomp-option-text"),"tooltip",i.label),o&&t.DomUtils.setData(s.querySelector(".vscomp-option-description"),"tooltip",i.description)}))}},{key:"setValue",value:function(i,o,s){i?Array.isArray(i)?this.selectedValues=e(i):this.selectedValues=[i]:this.selectedValues=[];var n=this.multiple?this.selectedValues:this.selectedValues[0]||"";this.$ele.value=n,this.$hiddenInput.value=n,void 0===o?this.selectedIndexes=[]:Array.isArray(o)?this.selectedIndexes=e(o):this.selectedIndexes=[o];var l=this.multiple?this.selectedIndexes:this.selectedIndexes[0]||"";if(this.$ele.index=l,this.$hiddenInput.index=l,this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.setValueText(),this.selectedValues&&this.selectedValues[0]===r?t.DomUtils.removeClass(this.$wrapper,"has-value"):t.DomUtils.toggleClass(this.$wrapper,"has-value",t.Utils.isNotEmpty(this.selectedValues)),t.DomUtils.toggleClass(this.$wrapper,"max-value-selected",this.isMaxValuesSelected),s&&this.dispatchEvent(this.$ele,"change"),this.showSelectedOptionsFirst){var a=this.$optionsContainer.scrollTop;this.moveSelectedOptionsFirst(),this.$optionsContainer.scrollTop=a}}},{key:"setValueText",value:function(){var e=[],i=[],o=this.selectedValues,n=this.selectedIndexes,l=o.length,a=this.noOfDisplayValues,p=0;if(this.isAllSelected)this.$valueText.innerHTML="".concat(l," ").concat(this.itemsSelectedMessage);else{var c,u=s(this.options);try{for(u.s();!(c=u.n()).done;){var h=c.value;if(!h.isCurrentNew){if(p>50||!this.multiple&&1===p)break;var d=h.value,v=h.label,f=h.index;if(-1!==o.indexOf(d)&&-1!==n.indexOf(f)){if(p>=o.length)break;e.push(v),++p<=a&&i.push('<span class="vscomp-value-tag">'.concat(v,"</span>"))}}}}catch(t){u.e(t)}finally{u.f()}var y=l-a;y>0&&i.push('<span class="vscomp-value-tag more-value-count">+ '.concat(y," more...</span>"));var m=e.join(", ");if(""===m||o&&o[0]===r)this.$valueText.innerHTML=this.placeholder;else if(this.$valueText.innerHTML=m,this.multiple){var g=this.maxValues;if(t.DomUtils.hasEllipsis(this.$valueText)||g){var b="".concat(l);g&&(b+=" / ".concat(g)),this.$valueText.innerHTML="".concat(b," ").concat(this.itemsSelectedMessage)}else i=[]}}t.DomUtils.setData(this.$valueText,"tooltip",i.join(", "))}},{key:"setSearchValue",value:function(e,i,o){if(e!==this.searchValueOriginal||o){i||(this.$searchInput.value=e);var s=e.toLowerCase().trim();if(this.searchValue=s,this.searchValueOriginal=e,t.DomUtils.toggleClass(this.$wrapper,"has-search-value",e),this.appendToBody&&t.DomUtils.toggleClass(this.$dropboxEl,"has-search-value",e),this.hasServerSearch)this.serverSearch(s);else{var n,l=0,a=!1,r=this.isOptionVisible;this.hasOptionGroup&&(n=this.getVisibleOptionGroupsMapping(s)),this.options.forEach((function(t){if(!t.isCurrentNew){var e=r(t,s,a,n);e.isVisible&&l++,a||(a=e.hasExactOption)}})),this.allowNewOption&&(s&&!a?(this.setNewOption(),l++):this.removeNewOption()),this.visibleOptionsCount=l,this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setOptionsContainerHeight",value:function(e){var i;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),i=this.getOptionsHeight(),this.optionsHeight=i):(i=this.optionsHeight,this.keepAlwaysOpen&&(t.DomUtils.setStyle(this.$noOptions,"height",i),t.DomUtils.setStyle(this.$noSearchResults,"height",i))),t.DomUtils.setStyle(this.$optionsContainer,"max-height",i),this.afterSetOptionsContainerHeight(e)}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var e=t.DomUtils.getMoreVisibleSides(this.$wrapper),i=!1;if(this.dropboxWidth){var o=this.$toggleButton.getBoundingClientRect(),s=window.innerWidth,n=parseFloat(this.dropboxWidth),l=o.left+n>s,a=n>o.right;l&&!a&&(i=!0)}if(this.appendToBody){if("undefined"!=typeof screenfull&&screenfull.isFullscreen&&screenfull.element){var r=document.createDocumentFragment();r.appendChild(this.$dropboxContainer),screenfull.element.appendChild(r)}else{var p=document.createDocumentFragment();p.appendChild(this.$dropboxContainer),this.$body.appendChild(p)}var c=this.$ele.getBoundingClientRect(),u=c.left+window.scrollX,h=c.top+window.scrollY;if(this.$dropboxEl.style.width="".concat(this.dropboxWidth?parseFloat(this.dropboxWidth):c.width,"px"),this.$dropboxEl.style.left="".concat(u,"px"),"top"===e.vertical){var d=this.$dropboxContainer.getBoundingClientRect();this.$dropboxEl.style.top="".concat(h-d.height-4,"px")}else this.$dropboxEl.style.top="".concat(h+c.height+4,"px");t.DomUtils.toggleClass(this.$dropboxContainer,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$dropboxContainer,"position-left",i)}else t.DomUtils.toggleClass(this.$wrapper,"position-top","top"===e.vertical),t.DomUtils.toggleClass(this.$wrapper,"position-left",i)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var o={value:t,label:t,isCurrentNew:!0};this.addOption(o)}}}},{key:"setSelectedProp",value:function(){var t=this.selectedValues;this.options.forEach((function(e){-1!==t.indexOf(e.value)&&(e.isSelected=!0)}))}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":i,"data-tooltip-allow-html":o};return t.DomUtils.getAttributesText(s)}},{key:"getOptionObj",value:function(e){if(e){var i=t.Utils.getString;return{index:e.index,value:i(e.value),label:i(e.label),description:i(e.description),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"getNewValue",value:function(){var t=this.newValues,e=this.selectedValues.filter((function(e){return-1!==t.indexOf(e)}));return this.multiple?e:e[0]}},{key:"getAlias",value:function(t){return t=t?(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase():""}},{key:"getDisplayValue",value:function(){var t,e=[],i=this.selectedValues,o=s(this.options);try{for(o.s();!(t=o.n()).done;){var n=t.value;-1!==i.indexOf(n.value)&&e.push(n.label)}}catch(t){o.e(t)}finally{o.f()}return this.multiple?e:e[0]||""}},{key:"getVisibleOptionGroupsMapping",value:function(t){var e=this.options,i={},o=this.isOptionVisible;return(e=this.structureOptionGroup(e)).forEach((function(e){i[e.index]=e.options.some((function(e){return o(e,t).isVisible}))})),i}},{key:"getOptionsCount",value:function(t){if(this.showAsPopup){var e=80*window.innerHeight/100-48;this.hasSearchContainer&&(e-=40),t=Math.floor(e/this.optionHeight)}else t=parseInt(t);return t}},{key:"getOptionsHeight",value:function(){return this.optionsCount*this.optionHeight+"px"}},{key:"getSibling",value:function(e,i){var o="next"===i?"nextElementSibling":"previousElementSibling";do{e&&(e=e[o])}while(t.DomUtils.hasClass(e,"disabled")||t.DomUtils.hasClass(e,"group-title"));return e}},{key:"openDropbox",value:function(e){var i=this;this.setDropboxPosition(),t.DomUtils.removeClass(this.$wrapper,"closed"),t.DomUtils.removeClass(this.$dropboxEl,"opened"),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"opened"),t.DomUtils.addClass(i.$dropboxEl,"opened"),e||(i.moveSelectedOptionsFirst(),t.DomUtils.addClass(i.$wrapper,"focused"),i.showAsPopup?(t.DomUtils.addClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!0):i.focusSearchInput(),t.DomUtils.dispatchEvent(i.$ele,"opened"))}),0)}},{key:"closeDropbox",value:function(e){var i=this;if(this.keepAlwaysOpen)this.removeOptionFocus();else{var o=e?0:this.transitionDuration;setTimeout((function(){t.DomUtils.removeClass(i.$wrapper,"opened focused"),t.DomUtils.removeClass(i.$dropboxEl,"opened focused"),i.removeOptionFocus(),e||(i.isPopupActive&&(t.DomUtils.removeClass(i.$body,"vscomp-popup-active"),i.isPopupActive=!1),t.DomUtils.dispatchEvent(i.$ele,"closed"))}),0),setTimeout((function(){t.DomUtils.addClass(i.$wrapper,"closed"),t.DomUtils.removeClass(i.$dropboxEl,"closed"),i.appendToBody&&(i.$dropboxEl.style.left="-2000px",i.$dropboxEl.style.top="-2000px")}),o)}}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return t.DomUtils.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(e,i){var o,s=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i)o=i;else if(s)o=this.getSibling(s,e);else{var n=this.getFirstVisibleOptionIndex();o=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(n,'"]')),(t.DomUtils.hasClass(o,"disabled")||t.DomUtils.hasClass(o,"group-title"))&&(o=this.getSibling(o,"next"))}o&&o!==s&&(s&&t.DomUtils.removeClass(s,"focused"),t.DomUtils.addClass(o,"focused"),this.toggleFocusedProp(t.DomUtils.getData(o,"index"),!0),e&&this.moveFocusedOptionToView(o))}},{key:"moveFocusedOptionToView",value:function(e){if(e||(e=this.$dropboxContainer.querySelector(".vscomp-option.focused")),e){var i,o=this.$optionsContainer.getBoundingClientRect(),s=e.getBoundingClientRect(),n=o.top,l=o.bottom,a=o.height,r=s.top,p=s.bottom,c=s.height,u=e.offsetTop,h=t.DomUtils.getData(this.$options,"top","number");n>r?i=u+h:l<p&&(i=u-a+c+h),void 0!==i&&(this.$optionsContainer.scrollTop=i)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(t.DomUtils.removeClass(e,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){if(e){var i=!t.DomUtils.hasClass(e,"selected");if(i){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple)return void this.closeDropbox();var o=this.selectedValues,s=this.selectedIndexes,n=t.DomUtils.getData(e,"value"),l=parseInt(t.DomUtils.getData(e,"index"));if(this.toggleSelectedProp(l,i),i){if(this.multiple)o.push(n),s.push(l),this.toggleAllOptionsClass();else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[n],s=[l];var a=this.$ele.querySelector(".vscomp-option.selected");a&&t.DomUtils.toggleClass(a,"selected",!1),this.closeDropbox()}t.DomUtils.toggleClass(e,"selected")}else this.multiple&&(t.DomUtils.toggleClass(e,"selected"),t.Utils.removeItemFromArray(o,n),t.Utils.removeItemFromArray(s,l),this.toggleAllOptionsClass(!1));t.DomUtils.hasClass(e,"current-new")&&this.beforeSelectNewValue(),this.setValue(o,s,!0)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){"boolean"!=typeof e&&(e=!t.DomUtils.hasClass(this.$toggleAllCheckbox,"checked"));var i=[],o=[];this.options.forEach((function(t,s){t.isDisabled||t.isCurrentNew||t.isGroupTitle||(t.isSelected=e,e&&(i.push(t.value),o.push(s)))})),this.toggleAllOptionsClass(e),this.setValue(i,o,!0),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){"boolean"!=typeof e&&(e=!1,this.options.length&&(e=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle})))),t.DomUtils.toggleClass(this.$toggleAllCheckbox,"checked",e),this.isAllSelected=e}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.beforeValueSet(!0),this.setValue(null,null,!0),this.afterValueSet()}},{key:"beforeValueSet",value:function(t){this.toggleAllOptionsClass(!t&&void 0)}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(t){var e=this.searchValue;t&&(this.isAllSelected?this.toggleAllOptions(this.isAllSelected):this.setValueMethod(this.selectedValues,this.silentInitialValueSet),this.search&&this.setSearchValue(e,!1,!0)),this.setOptionsHeight(),this.setVisibleOptions(),t||this.reset()}},{key:"addOption",value:function(t,e){if(t){this.lastOptionIndex++,t.index=this.lastOptionIndex;var i=this.getOptionObj(t);this.options.push(i),this.sortedOptions.push(i),e&&(this.visibleOptionsCount++,this.afterSetOptions())}}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption(),i=e.index;this.newValues.push(e.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"sortOptions",value:function(t){return t.sort((function(t,e){return e.value===r&&t.value!==r?0:t.isSelected||e.isSelected?t.isSelected&&(!e.isSelected||t.index<e.index)?-1:1:0}))}},{key:"sortOptionsGroup",value:function(t){var e=this.sortOptions;return(t=this.structureOptionGroup(t)).forEach((function(t){var i=t.options;t.isSelected=i.some((function(t){return t.isSelected})),t.isSelected&&e(i)})),e(t),this.destructureOptionGroup(t)}},{key:"isOptionVisible",value:function(t,e,i,o){var s=t.label.toLowerCase(),n=t.description,l=t.alias,a=-1!==s.indexOf(e);return t.isGroupTitle&&(a=o[t.index]),l&&!a&&(a=-1!==l.indexOf(e)),n&&!a&&(a=-1!==n.toLowerCase().indexOf(e)),t.isVisible=a,i||(i=s===e),{isVisible:a,hasExactOption:i}}},{key:"structureOptionGroup",value:function(t){var e=[],i={};return t.forEach((function(t){if(t.isGroupTitle){var o=[];t.options=o,i[t.index]=o,e.push(t)}})),t.forEach((function(t){t.isGroupOption&&i[t.groupIndex].push(t)})),e}},{key:"destructureOptionGroup",value:function(t){var e=[];return t.forEach((function(t){e.push(t),e=e.concat(t.options)})),e}},{key:"serverSearch",value:function(e){t.DomUtils.removeClass(this.$wrapper,"has-no-options"),t.DomUtils.addClass(this.$wrapper,"server-searching"),this.onServerSearch(e,this)}}])&&a(o.prototype,n),l&&a(o,l),i}();document.addEventListener("reset",c.resetForm),window.addEventListener("resize",c.onResizeMethod),window.VirtualSelect=c})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy91dGlscy9kb20tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3QvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyJdLCJuYW1lcyI6WyJEb21VdGlscyIsIiRlbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsImdldEVsZW1lbnRzIiwiZm9yRWFjaCIsIiR0aGlzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXNBZGQiLCJpc0FkZGVkIiwidW5kZWZpbmVkIiwiQm9vbGVhbiIsInRvZ2dsZSIsImNvbnRhaW5zIiwic2Nyb2xsV2lkdGgiLCJvZmZzZXRXaWR0aCIsIm5hbWUiLCJ0eXBlIiwidmFsdWUiLCJkYXRhc2V0IiwicGFyc2VGbG9hdCIsInNldEF0dHJpYnV0ZSIsIiRmcm9tIiwiJHRvIiwiYXR0ckxpc3QiLCJ2YWx1ZUxlc3NQcm9wcyIsInZhbHVlcyIsImF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJpbmRleE9mIiwic3R5bGUiLCJwcm9wcyIsIk9iamVjdCIsImtleXMiLCJldmVudHMiLCJjYWxsYmFjayIsIlV0aWxzIiwiZXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnROYW1lIiwiYnViYmxlcyIsInNldFRpbWVvdXQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkYXRhIiwiaHRtbCIsImsiLCJza2lwQXR0ck5hbWUiLCJyZXN1bHQiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhdmFpbGFibGVXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJpbm5lckhlaWdodCIsImxlZnRBcmVhIiwibGVmdCIsInRvcEFyZWEiLCJ0b3AiLCJob3Jpem9udGFsIiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImhlaWdodCIsInRleHQiLCJ0b1N0cmluZyIsImRlZmF1bHRWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInRoaXMiLCJpc0VtcHR5IiwiYXJyYXkiLCJjbG9uZUFycmF5IiwiaW5kZXgiLCJzcGxpY2UiLCJmaWx0ZXIiLCJkIiwicmVwbGFjZSIsImMiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJub25lT3B0aW9uVmFsdWUiLCJrZXlEb3duTWV0aG9kTWFwcGluZyIsIjEzIiwiMjciLCIzOCIsIjQwIiwiVmlydHVhbFNlbGVjdCIsIm9wdGlvbnMiLCJzZXRQcm9wcyIsInNldERpc2FibGVkT3B0aW9ucyIsImRpc2FibGVkT3B0aW9ucyIsInNldE9wdGlvbnMiLCJyZW5kZXIiLCJlIiwiY29uc29sZSIsIndhcm4iLCJlcnJvciIsIiRlbGVBcnJheSIsImVsZSIsInNpbmdsZUVsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImluc3RhbmNlcyIsInB1c2giLCIkZm9ybSIsInRhcmdldCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyZW50RWxlbWVudCIsInZpcnR1YWxTZWxlY3QiLCJyZXNldCIsInNpbGVudENoYW5nZSIsInNldFZhbHVlTWV0aG9kIiwia2VlcFZhbHVlIiwic2V0T3B0aW9uc01ldGhvZCIsInNldERpc2FibGVkT3B0aW9uc01ldGhvZCIsImlzU2VsZWN0ZWQiLCJ0b2dnbGVBbGxPcHRpb25zIiwiaXNBbGxTZWxlY3RlZCIsImFkZE9wdGlvbiIsImdldE5ld1ZhbHVlIiwiZ2V0RGlzcGxheVZhbHVlIiwib3BlbkRyb3Bib3giLCJjbG9zZURyb3Bib3giLCJzZXRTZWFyY2hWYWx1ZSIsIm9uUmVzaXplIiwid3JhcHBlckNsYXNzZXMiLCJ2YWx1ZVRvb2x0aXAiLCJnZXRUb29sdGlwQXR0clRleHQiLCJtdWx0aXBsZSIsImNsZWFyQnV0dG9uVG9vbHRpcCIsImRyb3Bib3hDb250YWluZXJTdHlsZSIsInpJbmRleCIsImdldFdyYXBwZXJDbGFzc2VzIiwiY2xhc3NlcyIsImFkZGl0aW9uYWxDbGFzc2VzIiwiZGlzYWJsZVNlbGVjdEFsbCIsInBvc2l0aW9uIiwiaGlkZUNsZWFyQnV0dG9uIiwia2VlcEFsd2F5c09wZW4iLCJzaG93QXNQb3B1cCIsImRyb3Bib3hXaWR0aCIsImhhc1NlYXJjaCIsImd1aWQiLCJkcm9wYm94Q29udGFpbmVyIiwibm9PcHRpb25zVGV4dCIsIm5vU2VhcmNoUmVzdWx0c1RleHQiLCJwbGFjZWhvbGRlciIsImFwcGVuZFRvQm9keSIsImlubmVySFRNTCIsIiRib2R5IiwiJHdyYXBwZXIiLCIkdG9nZ2xlQnV0dG9uIiwiJGNsZWFyQnV0dG9uIiwiJGRyb3Bib3hDbG9zZUJ1dHRvbiIsImFwcGVuZCIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IiwiJGRyb3Bib3hDb250YWluZXIiLCIkZHJvcGJveEVsIiwiJHNlYXJjaCIsIiRvcHRpb25zQ29udGFpbmVyIiwiJG9wdGlvbnNMaXN0IiwiJG9wdGlvbnMiLCIkdmFsdWVUZXh0IiwiJGhpZGRlbklucHV0IiwiJG5vT3B0aW9ucyIsIiRub1NlYXJjaFJlc3VsdHMiLCJhZnRlclJlbmRlcldyYXBwZXIiLCJzZWFyY2hSZWdleCIsInZpc2libGVPcHRpb25zIiwiZ2V0VmlzaWJsZU9wdGlvbnMiLCJjaGVja2JveEh0bWwiLCJuZXdPcHRpb25JY29uSHRtbCIsIm1hcmtTZWFyY2hSZXN1bHRzIiwic2VhcmNoVmFsdWUiLCJzdHlsZVRleHQiLCJvcHRpb25IZWlnaHQiLCJSZWdFeHAiLCJhbGxvd05ld09wdGlvbiIsIm5ld09wdGlvblRvb2x0aXAiLCJvcHRpb25MYWJlbCIsImxhYmVsIiwib3B0aW9uQ2xhc3NlcyIsIm9wdGlvblRvb2x0aXAiLCJsZWZ0U2VjdGlvbiIsInJpZ2h0U2VjdGlvbiIsImRlc2NyaXB0aW9uIiwiaXNGb2N1c2VkIiwiaXNEaXNhYmxlZCIsImlzR3JvdXBUaXRsZSIsImlzR3JvdXBPcHRpb24iLCJpc0N1cnJlbnROZXciLCJ2aXNpYmxlSW5kZXgiLCJoYXNOb09wdGlvbnMiLCJoYXNOb1NlYXJjaFJlc3VsdHMiLCJzZXRPcHRpb25zUG9zaXRpb24iLCJzZXRPcHRpb25zVG9vbHRpcCIsImhhc1NlYXJjaENvbnRhaW5lciIsInNlYXJjaElucHV0Iiwic2VhcmNoUGxhY2Vob2xkZXIiLCJzZWxlY3RBbGxUZXh0IiwiJHNlYXJjaElucHV0IiwiJHNlYXJjaENsZWFyIiwiJHRvZ2dsZUFsbEJ1dHRvbiIsIiR0b2dnbGVBbGxDaGVja2JveCIsImFkZEV2ZW50IiwicmVtb3ZlT3B0aW9uRm9jdXMiLCJtZXRob2QiLCJldmVudHNLZXkiLCJiaW5kIiwiX3RoaXMiLCJFdmVudCIsImlzT3BlbmVkIiwid2hpY2giLCJrZXlDb2RlIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZm9jdXNPcHRpb24iLCJ0b2dnbGVEcm9wYm94Iiwic2V0VmlzaWJsZU9wdGlvbnMiLCJzZWxlY3RPcHRpb24iLCJzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJmb2N1c1NlYXJjaElucHV0Iiwic2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCIsInJlbmRlclNlYXJjaCIsInNldE9wdGlvbnNIZWlnaHQiLCJhZGRFdmVudHMiLCJzZXRNZXRob2RzIiwiaW5pdGlhbFNlbGVjdGVkVmFsdWUiLCJzaWxlbnRJbml0aWFsVmFsdWVTZXQiLCJhdXRvU2VsZWN0Rmlyc3RPcHRpb24iLCJzZXREZWZhdWx0UHJvcHMiLCJzZXRQcm9wc0Zyb21FbGVtZW50QXR0ciIsImNvbnZlcnRUb0Jvb2xlYW4iLCJ2YWx1ZUtleSIsImxhYmVsS2V5IiwiZGVzY3JpcHRpb25LZXkiLCJhbGlhc0tleSIsIm9wdGlvbkhlaWdodFRleHQiLCJzZWFyY2giLCJoYXNPcHRpb25EZXNjcmlwdGlvbiIsInNob3dEcm9wYm94QXNQb3B1cCIsInRvb2x0aXBGb250U2l6ZSIsInRvb2x0aXBBbGlnbm1lbnQiLCJ0b29sdGlwTWF4V2lkdGgiLCJub09mRGlzcGxheVZhbHVlcyIsInBhcnNlSW50IiwibWF4VmFsdWVzIiwic2VsZWN0ZWRWYWx1ZSIsInBvcHVwRHJvcGJveEJyZWFrcG9pbnQiLCJvblNlcnZlclNlYXJjaCIsIml0ZW1zU2VsZWN0ZWRNZXNzYWdlIiwiYWxsb3dOb25lT3B0aW9uIiwibm9uZU9wdGlvblRleHQiLCJzZWxlY3RlZFZhbHVlcyIsInNlbGVjdGVkSW5kZXhlcyIsIm5ld1ZhbHVlcyIsInRvb2x0aXBFbnRlckRlbGF5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwic2VhcmNoVmFsdWVPcmlnaW5hbCIsImhhc1NlcnZlclNlYXJjaCIsIm9wdGlvbnNDb3VudCIsImdldE9wdGlvbnNDb3VudCIsImhhbGZPcHRpb25zQ291bnQiLCJNYXRoIiwiY2VpbCIsIm9wdGlvbnNIZWlnaHQiLCJnZXRPcHRpb25zSGVpZ2h0IiwiZGVmYXVsdE9wdGlvbnMiLCJhc3NpZ24iLCJtYXBwaW5nIiwic2V0VmFsdWUiLCJ0b2dnbGVTZWxlY3RBbGwiLCJhZGRPcHRpb25NZXRob2QiLCJnZXROZXdWYWx1ZU1ldGhvZCIsImdldERpc3BsYXlWYWx1ZU1ldGhvZCIsIm9wZW4iLCJvcGVuTWV0aG9kIiwiY2xvc2UiLCJjbG9zZU1ldGhvZCIsInNldFNlYXJjaFZhbHVlTWV0aG9kIiwibWFwIiwidiIsInZhbGlkVmFsdWVzIiwidmFsaWRJbmRleGVzIiwiYmVmb3JlVmFsdWVTZXQiLCJhZnRlclZhbHVlU2V0IiwibmV3b3B0aW9uIiwiYWZ0ZXJTZXRPcHRpb25zIiwic2V0T3B0aW9uc1Byb3AiLCJwcmVwYXJlZE9wdGlvbnMiLCJoYXNEaXNhYmxlZE9wdGlvbnMiLCJnZXRTdHJpbmciLCJnZXRBbGlhcyIsImhhc09wdGlvbkdyb3VwIiwidW5zaGlmdCIsInByZXBhcmVPcHRpb24iLCJjaGlsZE9wdGlvbnMiLCJvcHRpb24iLCJhbGlhcyIsImlzVmlzaWJsZSIsImdyb3VwSW5kZXgiLCJ2aXNpYmxlT3B0aW9uc0NvdW50IiwibGFzdE9wdGlvbkluZGV4Iiwic2V0U29ydGVkT3B0aW9ucyIsInNvcnRlZE9wdGlvbnMiLCJzb3J0T3B0aW9uc0dyb3VwIiwic29ydE9wdGlvbnMiLCJtYXhPcHRpb25zVG9TaG93Iiwic3RhcnRJbmRleCIsImdldFZpc2libGVTdGFydEluZGV4IiwibmV3T3B0aW9uIiwiZ2V0TmV3T3B0aW9uIiwiZW5kSW5kZXgiLCJpIiwiaW5WaWV3IiwicmVuZGVyT3B0aW9ucyIsInRyYW5zZm9ybSIsIiRvcHRpb25FbGUiLCJ0cmlnZ2VyRXZlbnQiLCJuZXdWYWx1ZSIsIm5ld0luZGV4IiwiaXNNYXhWYWx1ZXNTZWxlY3RlZCIsInNldFZhbHVlVGV4dCIsImxhc3RTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJtb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QiLCJ2YWx1ZVRleHQiLCJzZWxlY3RlZExlbmd0aCIsInNlbGVjdGVkVmFsdWVzQ291bnQiLCJtb3JlU2VsZWN0ZWRPcHRpb25zIiwiYWdncmVnYXRlZFZhbHVlVGV4dCIsImpvaW4iLCJjb3VudFRleHQiLCJza2lwSW5wdXRTZXQiLCJmb3JjZSIsInRvTG93ZXJDYXNlIiwidHJpbSIsInNlcnZlclNlYXJjaCIsInZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nIiwiaGFzRXhhY3RPcHRpb24iLCJpc09wdGlvblZpc2libGUiLCJnZXRWaXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZyIsInNldE5ld09wdGlvbiIsInJlbW92ZU5ld09wdGlvbiIsInNjcm9sbFRvVG9wIiwiYWZ0ZXJTZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0IiwibW9yZVZpc2libGVTaWRlcyIsInNob3dPbkxlZnQiLCJidXR0b25Db29yZHMiLCJ2aWV3cG9ydFdpZHRoIiwiaGlkZGVuT25SaWdodCIsImhpZGRlbk9uTGVmdCIsInJpZ2h0Iiwic2NyZWVuZnVsbCIsImlzRnVsbHNjcmVlbiIsImVsZW1lbnQiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJhcHBlbmRDaGlsZCIsImVsZUNvb3JkcyIsIngiLCJzY3JvbGxYIiwieSIsInNjcm9sbFkiLCJkcm9wQm94Q29yZCIsInNldE9wdGlvblByb3AiLCJnZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCIsImVsbGlwc2lzT25seSIsImFsbG93SHRtbCIsImxhc3RPcHRpb24iLCJzb21lIiwiZGlzcGxheVZhbHVlcyIsInN0cnVjdHVyZU9wdGlvbkdyb3VwIiwiY291bnQiLCJmbG9vciIsImRpcmVjdGlvbiIsInByb3BOYW1lIiwiaXNTaWxlbnQiLCJzZXREcm9wYm94UG9zaXRpb24iLCJpc1BvcHVwQWN0aXZlIiwiZm9jdXMiLCIkbmV3Rm9jdXNlZEVsZSIsIiRmb2N1c2VkRWxlIiwiZ2V0U2libGluZyIsImZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IiwidG9nZ2xlRm9jdXNlZFByb3AiLCJtb3ZlRm9jdXNlZE9wdGlvblRvVmlldyIsIm5ld1Njcm9sbFRvcCIsImNvbnRhaW5lclJlY3QiLCJvcHRpb25SZWN0IiwiY29udGFpbmVyVG9wIiwiY29udGFpbmVyQm90dG9tIiwiYm90dG9tIiwiY29udGFpbmVySGVpZ2h0Iiwib3B0aW9uVG9wIiwib3B0aW9uQm90dG9tIiwib3B0aW9uT2Zmc2V0VG9wIiwib2Zmc2V0VG9wIiwib3B0aW9uc1RvcCIsImlzQWRkaW5nIiwic2VsZWN0ZWRJbmRleCIsInRvZ2dsZVNlbGVjdGVkUHJvcCIsInRvZ2dsZUFsbE9wdGlvbnNDbGFzcyIsImdldE9wdGlvbkluZGV4IiwiJHByZXZTZWxlY3RlZE9wdGlvbiIsImJlZm9yZVNlbGVjdE5ld1ZhbHVlIiwiaWR4IiwiZm9jdXNlZE9wdGlvbkluZGV4IiwiaXNDbG9zZWQiLCJpc1Jlc2V0IiwicmVyZW5kZXIiLCJnZXRPcHRpb25PYmoiLCJyZW1vdmVPcHRpb24iLCJzb3J0IiwiYSIsImIiLCJkZXN0cnVjdHVyZU9wdGlvbkdyb3VwIiwiY2hpbGRBcnJheSIsImNvbmNhdCIsInJlc2V0Rm9ybSIsIm9uUmVzaXplTWV0aG9kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OzJnQ0FFTyxJQUFNQSxFQUFiLHlCLDRGQUFBLFMsVUFBQSxPLEVBQUEsRSxFQUFBLGdDQUNrQkMsRUFBTUMsR0FDZkQsSUFJTEMsRUFBWUEsRUFBVUMsTUFBTSxLQUU1QkgsRUFBU0ksWUFBWUgsR0FBTUksU0FBUSxTQUFDQyxHQUFVLE9BQzVDLEVBQUFBLEVBQU1DLFdBQVVDLElBQWhCLFVBQXVCTixVQVQ3QixrQ0FhcUJELEVBQU1DLEdBQ2xCRCxJQUlMQyxFQUFZQSxFQUFVQyxNQUFNLEtBRTVCSCxFQUFTSSxZQUFZSCxHQUFNSSxTQUFRLFNBQUNDLEdBQVUsT0FDNUMsRUFBQUEsRUFBTUMsV0FBVUUsT0FBaEIsVUFBMEJQLFVBckJoQyxrQ0F5QnFCRCxFQUFNQyxFQUFXUSxHQVNsQyxJQUFJQyxFQVJKLEdBQUtWLEVBY0wsWUFWY1csSUFBVkYsSUFDRkEsRUFBUUcsUUFBUUgsSUFLbEJWLEVBQVNJLFlBQVlILEdBQU1JLFNBQVEsU0FBQ0MsR0FDbENLLEVBQVVMLEVBQU1DLFVBQVVP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aWxzIH0gZnJvbSAnLi9pbmRleCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9tVXRpbHMge1xyXG4gIHN0YXRpYyBhZGRDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoJHRoaXMpID0+IHtcclxuICAgICAgJHRoaXMuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVtb3ZlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKCR0aGlzKSA9PiB7XHJcbiAgICAgICR0aGlzLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSwgaXNBZGQpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQWRkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgaXNBZGQgPSBCb29sZWFuKGlzQWRkKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNBZGRlZDtcclxuXHJcbiAgICBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKS5mb3JFYWNoKCgkdGhpcykgPT4ge1xyXG4gICAgICBpc0FkZGVkID0gJHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIGlzQWRkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpc0FkZGVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhc0NsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYXNFbGxpcHNpcygkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAkZWxlLnNjcm9sbFdpZHRoID4gJGVsZS5vZmZzZXRXaWR0aDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREYXRhKCRlbGUsIG5hbWUsIHR5cGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZhbHVlID0gJGVsZSA/ICRlbGUuZGF0YXNldFtuYW1lXSA6ICcnO1xyXG5cclxuICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xyXG4gICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0RGF0YSgkZWxlLCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZWxlLmRhdGFzZXRbbmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRBdHRyKCRlbGUsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRlbGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRBdHRyRnJvbUVsZSgkZnJvbSwgJHRvLCBhdHRyTGlzdCwgdmFsdWVMZXNzUHJvcHMpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG5cclxuICAgIGF0dHJMaXN0LmZvckVhY2goKGF0dHIpID0+IHtcclxuICAgICAgdmFsdWVzW2F0dHJdID0gJGZyb20uZ2V0QXR0cmlidXRlKGF0dHIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXR0ckxpc3QuZm9yRWFjaCgoYXR0cikgPT4ge1xyXG4gICAgICBsZXQgdmFsdWUgPSB2YWx1ZXNbYXR0cl07XHJcblxyXG4gICAgICBpZiAodmFsdWUgfHwgKHZhbHVlTGVzc1Byb3BzLmluZGV4T2YoYXR0cikgIT09IC0xICYmIHZhbHVlID09PSAnJykpIHtcclxuICAgICAgICAkdG8uc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0U3R5bGUoJGVsZSwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZS5zdHlsZVtuYW1lXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFN0eWxlcygkZWxlLCBwcm9wcykge1xyXG4gICAgaWYgKCEkZWxlIHx8ICFwcm9wcykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goKG5hbWUpID0+IHtcclxuICAgICAgJGVsZS5zdHlsZVtuYW1lXSA9IHByb3BzW25hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RWxlbWVudHMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJGVsZS5mb3JFYWNoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZSA9IFskZWxlXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRFdmVudCgkZWxlLCBldmVudHMsIGNhbGxiYWNrKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50cyA9IFV0aWxzLnJlbW92ZUFycmF5RW1wdHkoZXZlbnRzLnNwbGl0KCcgJykpO1xyXG5cclxuICAgIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xyXG4gICAgICAkZWxlID0gRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgICAkZWxlLmZvckVhY2goKCR0aGlzKSA9PiB7XHJcbiAgICAgICAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRpc3BhdGNoRXZlbnQoJGVsZSwgZXZlbnROYW1lLCBidWJibGVzID0gZmFsc2UpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZSA9IERvbVV0aWxzLmdldEVsZW1lbnRzKCRlbGUpO1xyXG5cclxuICAgIC8qKiB1c2luZyBzZXRUaW1lb3V0IHRvIHRyaWdnZXIgYXN5bmNocm9ub3VzIGV2ZW50ICovXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgJGVsZS5mb3JFYWNoKCgkdGhpcykgPT4ge1xyXG4gICAgICAgICR0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgeyBidWJibGVzIH0pKTtcclxuICAgICAgfSk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIC8qKiBjb252ZXJ0IG9iamVjdCB0byBkb20gYXR0cmlidXRlcyAqL1xyXG4gIHN0YXRpYyBnZXRBdHRyaWJ1dGVzVGV4dChkYXRhKSB7XHJcbiAgICBsZXQgaHRtbCA9ICcnO1xyXG5cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBrIGluIGRhdGEpIHtcclxuICAgICAgbGV0IHZhbHVlID0gZGF0YVtrXTtcclxuXHJcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaHRtbCArPSBgICR7a309XCIke3ZhbHVlfVwiIGA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaHRtbDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRTdHlsZVRleHQocHJvcHMsIHNraXBBdHRyTmFtZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGsgaW4gcHJvcHMpIHtcclxuICAgICAgcmVzdWx0ICs9IGAke2t9OiAke3Byb3BzW2tdfTtgO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXN1bHQgJiYgIXNraXBBdHRyTmFtZSkge1xyXG4gICAgICByZXN1bHQgPSBgc3R5bGU9XCIke3Jlc3VsdH1cImA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRNb3JlVmlzaWJsZVNpZGVzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGJveCA9ICRlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgYXZhaWxhYmxlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIGxldCBhdmFpbGFibGVIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBsZXQgbGVmdEFyZWEgPSBib3gubGVmdDtcclxuICAgIGxldCB0b3BBcmVhID0gYm94LnRvcDtcclxuICAgIGxldCByaWdodEFyZWEgPSBhdmFpbGFibGVXaWR0aCAtIGxlZnRBcmVhIC0gYm94LndpZHRoO1xyXG4gICAgbGV0IGJvdHRvbUFyZWEgPSBhdmFpbGFibGVIZWlnaHQgLSB0b3BBcmVhIC0gYm94LmhlaWdodDtcclxuICAgIGxldCBob3Jpem9udGFsID0gbGVmdEFyZWEgPiByaWdodEFyZWEgPyAnbGVmdCcgOiAncmlnaHQnO1xyXG4gICAgbGV0IHZlcnRpY2FsID0gdG9wQXJlYSA+IGJvdHRvbUFyZWEgPyAndG9wJyA6ICdib3R0b20nO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGhvcml6b250YWwsXHJcbiAgICAgIHZlcnRpY2FsLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFV0aWxzIHtcclxuICBzdGF0aWMgZ2V0U3RyaW5nKHRleHQpIHtcclxuICAgIHJldHVybiB0ZXh0IHx8IHRleHQgPT09IDAgPyB0ZXh0LnRvU3RyaW5nKCkgOiAnJztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlLCBkZWZhdWx0VmFsdWUgPSBmYWxzZSkge1xyXG4gICAgaWYgKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT09ICdmYWxzZScpIHtcclxuICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0VtcHR5KHZhbHVlKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNOb3RFbXB0eSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuICF0aGlzLmlzRW1wdHkodmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUl0ZW1Gcm9tQXJyYXkoYXJyYXksIHZhbHVlLCBjbG9uZUFycmF5KSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjbG9uZUFycmF5KSB7XHJcbiAgICAgIGFycmF5ID0gWy4uLmFycmF5XTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW5kZXggPSBhcnJheS5pbmRleE9mKHZhbHVlKTtcclxuXHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUFycmF5RW1wdHkoYXJyYXkpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheSkgfHwgIWFycmF5Lmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5LmZpbHRlcigoZCkgPT4gISFkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZW5lcmF0ZVVVSUQoKSB7XHJcbiAgICByZXR1cm4gKFsxZTddICsgLTFlMyArIC00ZTMgKyAtOGUzICsgLTFlMTEpLnJlcGxhY2UoL1swMThdL2csIChjKSA9PlxyXG4gICAgICAoXHJcbiAgICAgICAgYyBeXHJcbiAgICAgICAgKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMSkpWzBdICYgKDE1ID4+IChjIC8gNCkpKVxyXG4gICAgICApLnRvU3RyaW5nKDE2KVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgVXRpbHMsIERvbVV0aWxzIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5jb25zdCB2aXJ0dWFsU2VsZWN0VmVyc2lvbiA9ICd2MS4wLjYnO1xyXG5jb25zdCBkcm9wYm94Q2xvc2VCdXR0b25GdWxsSGVpZ2h0ID0gNDg7XHJcbmNvbnN0IHNlYXJjaEhlaWdodCA9IDQwO1xyXG5jb25zdCBub25lT3B0aW9uVmFsdWUgPSAneyN2aXJ0dWFsLXNlbGVjdC1ub25lLW9wdGlvbiN9JztcclxuXHJcbmNvbnN0IGtleURvd25NZXRob2RNYXBwaW5nID0ge1xyXG4gIDEzOiAnb25FbnRlclByZXNzJyxcclxuICAyNzogJ29uRXNjUHJlc3MnLFxyXG4gIDM4OiAnb25VcEFycm93UHJlc3MnLFxyXG4gIDQwOiAnb25Eb3duQXJyb3dQcmVzcycsXHJcbn07XHJcblxyXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIFZpcnR1YWxTZWxlY3QgKi9cclxuZXhwb3J0IGNsYXNzIFZpcnR1YWxTZWxlY3Qge1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIFZpcnR1YWxTZWxlY3RcclxuICAgKiBAcHJvcGVydHkgeyhlbGVtZW50fHN0cmluZyl9IGVsZSAtIFBhcmVudCBlbGVtZW50IHRvIHJlbmRlciBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gb3B0aW9ucyAtIEFycmF5IG9mIG9iamVjdCB0byBzaG93IGFzIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLnZhbHVlIC0gVmFsdWUgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10ubGFiZWwgLSBEaXNwbGF5IHRleHQgb2YgdGhlIG9wdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xudW1iZXIpfSBvcHRpb25zW10uZGVzY3JpcHRpb24gLSBUZXh0IHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IG9wdGlvbnNbXS5hbGlhcyAtIEFsdGVybmF0aXZlIGxhYmVscyB0byB1c2Ugb24gc2VhcmNoLiBBcnJheSBvZiBzdHJpbmcgb3IgY29tbWEgc2VwYXJhdGVkIHN0cmluZy5cclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBvcHRpb25zW10ub3B0aW9ucyAtIExpc3Qgb2Ygb3B0aW9ucyBmb3Igb3B0aW9uIGdyb3VwXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt2YWx1ZUtleT12YWx1ZV0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgdmFsdWUgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtsYWJlbEtleT1sYWJlbF0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgbGFiZWwgZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtkZXNjcmlwdGlvbktleT1kZXNjcmlwdGlvbl0gLSBPYmplY3Qga2V5IHRvIHVzZSB0byBnZXQgZGVzY3JpcHRpb24gZnJvbSBvcHRpb25zIGFycmF5XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthbGlhc0tleT1hbGlhc10gLSBLZXkgbmFtZSB0byBnZXQgYWxpYXMgZnJvbSBvcHRpb25zIG9iamVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpcGxlPWZhbHNlXSAtIEVuYWJsZSBtdWx0aXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NlYXJjaD1mYWxzZV0gLSBFbmFibGUgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGlkZUNsZWFyQnV0dG9uPWZhbHNlXSAtIEhpZGUgY2xlYXIgYnV0dG9uXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b1NlbGVjdEZpcnN0T3B0aW9uPWZhbHNlXSAtIFNlbGVjdCBmaXJzdCBvcHRpb24gYnkgZGVmYXVsdCBvbiBsb2FkXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGFzT3B0aW9uRGVzY3JpcHRpb249ZmFsc2VdIC0gSGFzIGRlc2NyaXB0aW9uIHRvIHNob3cgYWxvbmcgd2l0aCBsYWJlbFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVTZWxlY3RBbGw9ZmFsc2VdIC0gRGlzYWJsZSBzZWxlY3QgYWxsIGZlYXR1cmUgb2YgbXVsdGlwbGUgc2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25zQ291bnQ9NXw0XSAtIE5vLm9mIG9wdGlvbnMgdG8gc2hvdyBvbiB2aWV3cG9ydFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb3B0aW9uSGVpZ2h0PTQwcHh8NjBweF0gLSBIZWlnaHQgb2YgZWFjaCBkcm9wZG93biBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3NpdGlvbj1hdXRvXSAtIFBvc2l0aW9uIG9mIGRyb3Bib3ggKHRvcCwgYm90dG9tLCBhdXRvKVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2Vob2xkZXI9U2VsZWN0XSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgc2VsZWN0ZWRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vT3B0aW9uc1RleHQ9Tm8gb3B0aW9ucyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyBvcHRpb25zIHRvIHNob3dcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25vU2VhcmNoUmVzdWx0c1RleHQ9Tm8gcmVzdWx0cyBmb3VuZF0gLSBUZXh0IHRvIHNob3cgd2hlbiBubyByZXN1bHRzIG9uIHNlYXJjaFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc2VsZWN0QWxsVGV4dD1TZWxlY3QgYWxsXSAtIFRleHQgdG8gc2hvdyBuZWFyIHNlbGVjdCBhbGwgY2hlY2tib3ggd2hlbiBzZWFyY2ggaXMgZGlzYWJsZWRcclxuICAgKiBAcHJvcGVydHkge2FycmF5fSBbZGlzYWJsZWRPcHRpb25zXSAtIE9wdGlvbnMgdG8gZGlzYWJsZSAoYXJyYXkgb2YgdmFsdWVzKVxyXG4gICAqIEBwcm9wZXJ0eSB7KHN0cmluZ3xhcnJheSl9IFtzZWxlY3RlZFZhbHVlXSAtIFNpbmdsZSB2YWx1ZSBvciBhcnJheSBvZiB2YWx1ZXMgdG8gc2VsZWN0IG9uIGluaXRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaWxlbnRJbml0aWFsVmFsdWVTZXQ9ZmFsc2VdIC0gVG8gYXZvaWQgXCJjaGFuZ2UgZXZlbnRcIiB0cmlnZ2VyIG9uIHNldHRpbmcgaW5pdGlhbCB2YWx1ZVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZHJvcGJveFdpZHRoXSAtIEN1c3RvbSB3aWR0aCBmb3IgZHJvcGJveFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4PTFdIC0gQ1NTIHotaW5kZXggdmFsdWUgZm9yIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW25vT2ZEaXNwbGF5VmFsdWVzPTUwXSAtIE1heGltdW0gbm8ub2YgdmFsdWVzIHRvIHNob3cgaW4gdGhlIHRvb2x0aXAgZm9yIG11bHRpLXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsbG93TmV3T3B0aW9uPWZhbHNlXSAtIEFsbG93IHRvIGFkZCBuZXcgb3B0aW9uIGJ5IHNlYXJjaGluZ1xyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21hcmtTZWFyY2hSZXN1bHRzPWZhbHNlXSAtIE1hcmsgbWF0Y2hlZCB0ZXJtIGluIGxhYmVsXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b29sdGlwRm9udFNpemU9MTRweF0gLSBGb250IHNpemUgZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rvb2x0aXBBbGlnbm1lbnQ9Y2VudGVyXSAtIENTUyBUZXh0IGFsaWdubWVudCBmb3IgdG9vbHRpcFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdG9vbHRpcE1heFdpZHRoPTMwMHB4XSAtIENTUyBtYXggd2lkdGggZm9yIHRvb2x0aXBcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93U2VsZWN0ZWRPcHRpb25zRmlyc3Q9ZmFsc2VdIC0gU2hvdyBzZWxlY3RlZCBvcHRpb25zIGF0IHRoZSB0b3Agb2YgdGhlIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW25hbWVdIC0gTmFtZSBhdHRyaWJ1dGUgZm9yIGhpZGRlbiBpbnB1dFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tlZXBBbHdheXNPcGVuXSAtIEtlZXAgZHJvcGJveCBhbHdheXMgb3BlbiB3aXRoIGZpeGVkIGhlaWdodFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4VmFsdWVzPTBdIC0gTWF4aW11bSBuby5vZiBvcHRpb25zIGFsbG93ZWQgdG8gY2hvb3NlIGluIG11bHRpcGxlIHNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYWRkaXRpb25hbENsYXNzZXNdIC0gQWRkaXRpb25hbCBjbGFzc2VzIGZvciB3cmFwcGVyIGVsZW1lbnRcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93RHJvcGJveEFzUG9wdXA9dHJ1ZV0gLSBTaG93IGRyb3Bib3ggYXMgcG9wdXAgb24gc21hbGwgc2NyZWVuIGxpa2UgbW9iaWxlXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwb3B1cERyb3Bib3hCcmVha3BvaW50PTU3NnB4XSAtIE1heGltdW0gc2NyZWVuIHdpZHRoIHRoYXQgYWxsb3dlZCB0byBzaG93IGRyb3Bib3ggYXMgcG9wdXBcclxuICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbb25TZXJ2ZXJTZWFyY2hdIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gaW50ZWdyYXRlIHNlcnZlciBzZWFyY2hcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3NlYXJjaFBsYWNlaG9sZGVyPVNlYXJjaC4uLl0gLSBUZXh0IHRvIHNob3cgaW5zaWRlIHNlYXJjaCBpbnB1dFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsbG93Tm9uZU9wdGlvbj1mYWxzZV0gLSBJbiBzaW5nbGUgc2VsZWN0aW9uIG1vZGUgb25seSBhbmQgd2hlbiBrZWVwIGFsd2F5cyBvcGVuIGlzIG9uOiBkaXNwbGF5IGEgbm9uZSBvcHRpb24gdGhhdCBjbGVhcnMgdGhlIHNlbGVjdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9uZU9wdGlvblRleHQ9Tm9uZV0gLSBUZXh0IHRvIGJlIGRpc3BsYXkgaWYgYWxsb3dOb25lIG9wdGlvbiBpcyBhY3RpdmVcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthcHBlbmRUb0JvZHk9ZmFsc2VdIC0gV2hlbiBzZXQgdG8gdHJ1ZSBhbmQga2VlcEFsd2F5cyBvcGVuIGlzIG9mZiB3ZSBhcmUgYWRkaW5nIHRoZSBkcm9wYm94IGVsZW1lbnQgdG8gdGhlIGJvZHlcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnNldFByb3BzKG9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnNldERpc2FibGVkT3B0aW9ucyhvcHRpb25zLmRpc2FibGVkT3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zLm9wdGlvbnMpO1xyXG4gICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkbid0IGluaXRpYXRlIFZpcnR1YWwgU2VsZWN0YCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogcmVuZGVyIG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIHJlbmRlcigpIHtcclxuICAgIGlmICghdGhpcy4kZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd3JhcHBlckNsYXNzZXMgPSAndnNjb21wLXdyYXBwZXInO1xyXG4gICAgbGV0IHZhbHVlVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCcnLCAhdGhpcy5tdWx0aXBsZSwgdHJ1ZSk7XHJcbiAgICBsZXQgY2xlYXJCdXR0b25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJ0NsZWFyJyk7XHJcblxyXG4gICAgbGV0IGRyb3Bib3hDb250YWluZXJTdHlsZSA9IHtcclxuICAgICAgJ3otaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZ2V0V3JhcHBlckNsYXNzZXMgPSAoKSA9PiB7XHJcbiAgICAgIGxldCBjbGFzc2VzID0gJyc7XHJcblxyXG4gICAgICBpZiAodGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcykge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyAnICsgdGhpcy5hZGRpdGlvbmFsQ2xhc3NlcztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgbXVsdGlwbGUnO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1zZWxlY3QtYWxsJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBwb3NpdGlvbi10b3AnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuaGlkZUNsZWFyQnV0dG9uKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGhhcy1jbGVhci1idXR0b24nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5rZWVwQWx3YXlzT3Blbikge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyBrZWVwLWFsd2F5cy1vcGVuIG9wZW5lZCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIGNsb3NlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIHNob3ctYXMtcG9wdXAnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICAgICAgZHJvcGJveENvbnRhaW5lclN0eWxlLndpZHRoID0gdGhpcy5kcm9wYm94V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5oYXNTZWFyY2gpIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgaGFzLXNlYXJjaC1pbnB1dCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBjbGFzc2VzO1xyXG4gICAgfTtcclxuXHJcbiAgICB3cmFwcGVyQ2xhc3NlcyArPSBnZXRXcmFwcGVyQ2xhc3NlcygpO1xyXG5cclxuICAgIHRoaXMuZ3VpZCA9IFV0aWxzLmdlbmVyYXRlVVVJRCgpO1xyXG5cclxuICAgIGxldCBkcm9wYm94Q29udGFpbmVyID0gYDxkaXYgaWQ9XCJ2cy0ke1xyXG4gICAgICB0aGlzLmd1aWRcclxuICAgIH1cIiBjbGFzcz1cInZzY29tcC1kcm9wYm94LWNvbnRhaW5lclwiICR7RG9tVXRpbHMuZ2V0U3R5bGVUZXh0KFxyXG4gICAgICBkcm9wYm94Q29udGFpbmVyU3R5bGVcclxuICAgICl9PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWRyb3Bib3hcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXNlYXJjaC13cmFwcGVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1sb2FkZXJcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbGlzdFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnNcIj48L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLW9wdGlvbnNcIj4ke3RoaXMubm9PcHRpb25zVGV4dH08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLXNlYXJjaC1yZXN1bHRzXCI+JHt0aGlzLm5vU2VhcmNoUmVzdWx0c1RleHR9PC9kaXY+XHJcblxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLWRyb3Bib3gtY2xvc2UtYnV0dG9uXCI+PGkgY2xhc3M9XCJ2c2NvbXAtY2xlYXItaWNvblwiPjwvaT48L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YDtcclxuXHJcbiAgICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPVwiJHt3cmFwcGVyQ2xhc3Nlc31cIiB0YWJpbmRleD1cIjBcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCIke3RoaXMubmFtZX1cIiBjbGFzcz1cInZzY29tcC1oaWRkZW4taW5wdXRcIj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC10b2dnbGUtYnV0dG9uXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLXZhbHVlXCIgJHt2YWx1ZVRvb2x0aXB9PlxyXG4gICAgICAgICAgICAke3RoaXMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWFycm93XCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1jbGVhci1idXR0b24gdG9nZ2xlLWJ1dHRvbi1jaGlsZFwiICR7Y2xlYXJCdXR0b25Ub29sdGlwfT5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJ2c2NvbXAtY2xlYXItaWNvblwiPjwvaT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAke3RoaXMua2VlcEFsd2F5c09wZW4gfHwgIXRoaXMuYXBwZW5kVG9Cb2R5ID8gZHJvcGJveENvbnRhaW5lciA6ICcnfVxyXG5cclxuICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICB0aGlzLiRlbGUuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgIHRoaXMuJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcblxyXG4gICAgdGhpcy4kd3JhcHBlciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXdyYXBwZXInKTtcclxuICAgIHRoaXMuJHRvZ2dsZUJ1dHRvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXRvZ2dsZS1idXR0b24nKTtcclxuICAgIHRoaXMuJGNsZWFyQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtY2xlYXItYnV0dG9uJyk7XHJcbiAgICB0aGlzLiRkcm9wYm94Q2xvc2VCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtZHJvcGJveC1jbG9zZS1idXR0b24nXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghdGhpcy5rZWVwQWx3YXlzT3BlbiAmJiB0aGlzLmFwcGVuZFRvQm9keSkge1xyXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAvLyBBcHBlbmQgdG8gYm9keSAoYmV0YSlcclxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgIHRoaXMuJGJvZHkuYXBwZW5kKFxyXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGRyb3Bib3hDb250YWluZXIpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgI3ZzLSR7dGhpcy5ndWlkfS52c2NvbXAtZHJvcGJveC1jb250YWluZXJgXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLiRkcm9wYm94RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjdnMtJHt0aGlzLmd1aWR9YCk7XHJcblxyXG4gICAgICBsZXQgY2xhc3NlcyA9ICd2c2NvbXAtd3JhcHBlci1ib2R5JztcclxuICAgICAgY2xhc3NlcyArPSBnZXRXcmFwcGVyQ2xhc3NlcygpO1xyXG5cclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kZHJvcGJveEVsLCBgJHtjbGFzc2VzfWApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICcudnNjb21wLWRyb3Bib3gtY29udGFpbmVyJ1xyXG4gICAgICApO1xyXG4gICAgICB0aGlzLiRkcm9wYm94RWwgPSB0aGlzLiRlbGU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kc2VhcmNoID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLXdyYXBwZXInKTtcclxuICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9ucy1jb250YWluZXInXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0ID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucy1saXN0Jyk7XHJcbiAgICB0aGlzLiRvcHRpb25zID0gdGhpcy4kZHJvcGJveEVsLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9ucycpO1xyXG4gICAgdGhpcy4kdmFsdWVUZXh0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdmFsdWUnKTtcclxuICAgIHRoaXMuJGhpZGRlbklucHV0ID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtaGlkZGVuLWlucHV0Jyk7XHJcbiAgICB0aGlzLiRub09wdGlvbnMgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1uby1vcHRpb25zJyk7XHJcbiAgICB0aGlzLiRub1NlYXJjaFJlc3VsdHMgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtbm8tc2VhcmNoLXJlc3VsdHMnXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWZ0ZXJSZW5kZXJXcmFwcGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJPcHRpb25zKCkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBuZXdPcHRpb25JY29uSHRtbCA9ICcnO1xyXG4gICAgbGV0IG1hcmtTZWFyY2hSZXN1bHRzID1cclxuICAgICAgdGhpcy5tYXJrU2VhcmNoUmVzdWx0cyAmJiB0aGlzLnNlYXJjaFZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgbGV0IHNlYXJjaFJlZ2V4O1xyXG5cclxuICAgIGxldCBzdHlsZVRleHQgPSBEb21VdGlscy5nZXRTdHlsZVRleHQoe1xyXG4gICAgICBoZWlnaHQ6IHRoaXMub3B0aW9uSGVpZ2h0ICsgJ3B4JyxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cykge1xyXG4gICAgICBzZWFyY2hSZWdleCA9IG5ldyBSZWdFeHAoYCgke3RoaXMuc2VhcmNoVmFsdWV9KWAsICdnaScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIGNoZWNrYm94SHRtbCA9ICc8c3BhbiBjbGFzcz1cImNoZWNrYm94LWljb25cIj48L3NwYW4+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICBsZXQgbmV3T3B0aW9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdOZXcgT3B0aW9uJyk7XHJcbiAgICAgIG5ld09wdGlvbkljb25IdG1sID0gYDxzcGFuIGNsYXNzPVwidnNjb21wLW5ldy1vcHRpb24taWNvblwiICR7bmV3T3B0aW9uVG9vbHRpcH0+PC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaWJsZU9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBsZXQgb3B0aW9uTGFiZWwgPSBkLmxhYmVsO1xyXG4gICAgICBsZXQgb3B0aW9uQ2xhc3NlcyA9ICd2c2NvbXAtb3B0aW9uJztcclxuICAgICAgbGV0IG9wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnJywgdHJ1ZSk7XHJcbiAgICAgIGxldCBsZWZ0U2VjdGlvbiA9IGNoZWNrYm94SHRtbDtcclxuICAgICAgbGV0IHJpZ2h0U2VjdGlvbiA9ICcnO1xyXG4gICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuXHJcbiAgICAgIGlmIChkLmlzRm9jdXNlZCkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBmb2N1c2VkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNEaXNhYmxlZCkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBkaXNhYmxlZCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBncm91cC10aXRsZSc7XHJcbiAgICAgICAgbGVmdFNlY3Rpb24gPSAnJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICBvcHRpb25DbGFzc2VzICs9ICcgc2VsZWN0ZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIG9wdGlvbkNsYXNzZXMgKz0gJyBncm91cC1vcHRpb24nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9uLWRlc2NyaXB0aW9uXCIgJHtvcHRpb25Ub29sdGlwfT4ke2QuZGVzY3JpcHRpb259PC9kaXY+YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGN1cnJlbnQtbmV3JztcclxuICAgICAgICByaWdodFNlY3Rpb24gKz0gbmV3T3B0aW9uSWNvbkh0bWw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG1hcmtTZWFyY2hSZXN1bHRzICYmICFkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgICAgb3B0aW9uTGFiZWwgPSBvcHRpb25MYWJlbC5yZXBsYWNlKHNlYXJjaFJlZ2V4LCAnPG1hcms+JDE8L21hcms+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwiJHtvcHRpb25DbGFzc2VzfVwiIGRhdGEtdmFsdWU9XCIke1xyXG4gICAgICAgIGQudmFsdWVcclxuICAgICAgfVwiIGRhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCIgZGF0YS12aXNpYmxlLWluZGV4PVwiJHtcclxuICAgICAgICBkLnZpc2libGVJbmRleFxyXG4gICAgICB9XCIgJHtzdHlsZVRleHR9PlxyXG4gICAgICAgICAgJHtsZWZ0U2VjdGlvbn1cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLW9wdGlvbi10ZXh0ICR7XHJcbiAgICAgICAgICAgIGQudmFsdWUgPT09IG5vbmVPcHRpb25WYWx1ZSA/ICdub25lJyA6ICcnXHJcbiAgICAgICAgICB9XCIgJHtvcHRpb25Ub29sdGlwfT5cclxuICAgICAgICAgICAgJHtvcHRpb25MYWJlbH1cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICR7ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAke3JpZ2h0U2VjdGlvbn1cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy4kb3B0aW9ucy5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgbGV0IGhhc05vT3B0aW9ucyA9ICF0aGlzLm9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IGhhc05vU2VhcmNoUmVzdWx0cyA9ICFoYXNOb09wdGlvbnMgJiYgIXZpc2libGVPcHRpb25zLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoIXRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoXHJcbiAgICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgICAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJyxcclxuICAgICAgICBoYXNOb1NlYXJjaFJlc3VsdHNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSlcclxuICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICAgIHRoaXMuJGRyb3Bib3hFbCxcclxuICAgICAgICAgICdoYXMtbm8tc2VhcmNoLXJlc3VsdHMnLFxyXG4gICAgICAgICAgaGFzTm9TZWFyY2hSZXN1bHRzXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLW9wdGlvbnMnLCBoYXNOb09wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zUG9zaXRpb24oKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc1Rvb2x0aXAoKTtcclxuICAgIC8vdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VhcmNoKCkge1xyXG4gICAgaWYgKCF0aGlzLmhhc1NlYXJjaENvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoZWNrYm94SHRtbCA9ICcnO1xyXG4gICAgbGV0IHNlYXJjaElucHV0ID0gJyc7XHJcblxyXG4gICAgLy8gaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgLy8gICBjaGVja2JveEh0bWwgPSBgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1idXR0b25cIj5cclxuICAgIC8vICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2tib3gtaWNvbiB2c2NvbXAtdG9nZ2xlLWFsbC1jaGVja2JveFwiPjwvc3Bhbj5cclxuICAgIC8vICAgICAgIDxzcGFuIGNsYXNzPVwidnNjb21wLXRvZ2dsZS1hbGwtbGFiZWxcIj4ke3RoaXMuc2VsZWN0QWxsVGV4dH08L3NwYW4+XHJcbiAgICAvLyAgICAgPC9zcGFuPmA7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gaWYgKHRoaXMuaGFzU2VhcmNoKSB7XHJcbiAgICAvLyAgIHNlYXJjaElucHV0ID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidnNjb21wLXNlYXJjaC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaFBsYWNlaG9sZGVyfVwiPlxyXG4gICAgLy8gICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPmA7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY29udGFpbmVyXCI+XHJcbiAgICAvLyAgICAgJHtjaGVja2JveEh0bWx9XHJcbiAgICAvLyAgICAgJHtzZWFyY2hJbnB1dH1cclxuICAgIC8vICAgPC9kaXY+YDtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZWFyY2gpIHtcclxuICAgICAgc2VhcmNoSW5wdXQgPSBgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWlucHV0XCIgcGxhY2Vob2xkZXI9XCIke3RoaXMuc2VhcmNoUGxhY2Vob2xkZXJ9XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIXRoaXMuZGlzYWJsZVNlbGVjdEFsbCkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSBgPGRpdiBjbGFzcz1cInZzLWNvbXAtc2VsZWN0LWFsbC1jb250YWluZXJcIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC10b2dnbGUtYWxsLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uIHZzY29tcC10b2dnbGUtYWxsLWNoZWNrYm94XCI+PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWFsbC1sYWJlbFwiPiR7dGhpcy5zZWxlY3RBbGxUZXh0fTwvc3Bhbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+YDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaHRtbCA9IGAke3NlYXJjaElucHV0fSR7Y2hlY2tib3hIdG1sfWA7XHJcblxyXG4gICAgdGhpcy4kc2VhcmNoLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB0aGlzLiRzZWFyY2hJbnB1dCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXNlYXJjaC1pbnB1dCcpO1xyXG4gICAgdGhpcy4kc2VhcmNoQ2xlYXIgPSB0aGlzLiRkcm9wYm94RWwucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtY2xlYXInKTtcclxuICAgIHRoaXMuJHRvZ2dsZUFsbEJ1dHRvbiA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC10b2dnbGUtYWxsLWJ1dHRvbidcclxuICAgICk7XHJcbiAgICB0aGlzLiR0b2dnbGVBbGxDaGVja2JveCA9IHRoaXMuJGRyb3Bib3hFbC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnZzY29tcC10b2dnbGUtYWxsLWNoZWNrYm94J1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaElucHV0LCAna2V5dXAgY2hhbmdlJywgJ29uU2VhcmNoJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaENsZWFyLCAnY2xpY2snLCAnb25TZWFyY2hDbGVhcicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVBbGxCdXR0b24sICdjbGljaycsICdvblRvZ2dsZUFsbE9wdGlvbnMnKTtcclxuICB9XHJcblxyXG4gIC8qKiByZW5kZXIgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogZG9tIGV2ZW50IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIGFkZEV2ZW50cygpIHtcclxuICAgIHRoaXMuYWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsICdvbkRvY3VtZW50Q2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kd3JhcHBlciwgJ2tleWRvd24nLCAnb25LZXlEb3duJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHRvZ2dsZUJ1dHRvbiwgJ2NsaWNrJywgJ29uVG9nZ2xlQnV0dG9uQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kY2xlYXJCdXR0b24sICdjbGljaycsICdvbkNsZWFyQnV0dG9uQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ2NsaWNrJywgJ29uRHJvcGJveENvbnRhaW5lckNsaWNrJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KFxyXG4gICAgICB0aGlzLiRkcm9wYm94Q2xvc2VCdXR0b24sXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgICdvbkRyb3Bib3hDbG9zZUJ1dHRvbkNsaWNrJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJG9wdGlvbnNDb250YWluZXIsICdzY3JvbGwnLCAnb25PcHRpb25zU2Nyb2xsJyk7XHJcblxyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAnY2xpY2snLCAnb25PcHRpb25zQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ21vdXNlb3ZlcicsICdvbk9wdGlvbnNNb3VzZU92ZXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kZHJvcGJveENvbnRhaW5lciwgJ21vdXNlbGVhdmUnLCAnb25PcHRpb25zTW91c2VMZWF2ZScpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAndG91Y2htb3ZlJywgJ29uT3B0aW9uc1RvdWNoTW92ZScpO1xyXG4gIH1cclxuXHJcbiAgb25PcHRpb25zTW91c2VMZWF2ZSgpIHtcclxuICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50KCRlbGUsIGV2ZW50cywgbWV0aG9kKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50cyA9IFV0aWxzLnJlbW92ZUFycmF5RW1wdHkoZXZlbnRzLnNwbGl0KCcgJykpO1xyXG5cclxuICAgIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xyXG4gICAgICBsZXQgZXZlbnRzS2V5ID0gYCR7bWV0aG9kfS0ke2V2ZW50fWA7XHJcbiAgICAgIGxldCBjYWxsYmFjayA9IHRoaXMuZXZlbnRzW2V2ZW50c0tleV07XHJcblxyXG4gICAgICBpZiAoIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgY2FsbGJhY2sgPSB0aGlzW21ldGhvZF0uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudHNLZXldID0gY2FsbGJhY2s7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRlbGUgPSBEb21VdGlscy5nZXRFbGVtZW50cygkZWxlKTtcclxuXHJcbiAgICAgICRlbGUuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNwYXRjaEV2ZW50KCRlbGUsIGV2ZW50TmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkZWxlID0gRG9tVXRpbHMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICRlbGUuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChldmVudE5hbWUsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBvbkRvY3VtZW50Q2xpY2soZSkge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmFwcGVuZFRvQm9keSAmJlxyXG4gICAgICB0aGlzLm11bHRpcGxlICYmXHJcbiAgICAgIHRoaXMuaXNPcGVuZWQoKSAmJlxyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KGAjdnMtJHt0aGlzLmd1aWR9YClcclxuICAgICkge1xyXG4gICAgICByZXR1cm47IC8vIERvbid0IGNsb3NlIGRyb3Bib3ggaWYgYXBwZW5kIHRvIGJvZHksIG11bHRpcGxlIGFuZCBjbGljayBpbnNpZGUgZHJvcGJvd1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCAkZWxlVG9LZWVwT3BlbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtd3JhcHBlcicpO1xyXG5cclxuICAgIGlmICgkZWxlVG9LZWVwT3BlbiAhPT0gdGhpcy4kd3JhcHBlcikge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25LZXlEb3duKGUpIHtcclxuICAgIGxldCBrZXkgPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcclxuICAgIGxldCBtZXRob2QgPSBrZXlEb3duTWV0aG9kTWFwcGluZ1trZXldO1xyXG5cclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgdGhpc1ttZXRob2RdKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25FbnRlclByZXNzKCkge1xyXG4gICAgaWYgKCF0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkVzY1ByZXNzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Eb3duQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCduZXh0Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblVwQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCdwcmV2aW91cycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ub2dnbGVCdXR0b25DbGljayhlKSB7XHJcbiAgICBsZXQgY2hpbGRFbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLWJ1dHRvbi1jaGlsZCcpO1xyXG5cclxuICAgIGlmIChjaGlsZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNTY3JvbGwoKSB7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNDbGljayhlKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnZzY29tcC1vcHRpb246bm90KC5kaXNhYmxlZCk6bm90KC5ncm91cC10aXRsZSknKVxyXG4gICAgKTtcclxuICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0KSB7XHJcbiAgICAgIC8vIE1vdmUgc2VsZWN0ZWQgdG8gdG9wIHdhcyB0cmlnZ2VyaW5nIGNsb3NlRHJvcGJvdyBiZWFjYXVzZSBvZiBvbkRyb3Bib3hDb250YWluZXJDbGlja1xyXG4gICAgICAvLyBXaGVuIHNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCBpcyBvblxyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDb250YWluZXJDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtZHJvcGJveCcpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyb3Bib3hDbG9zZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlT3ZlcihlKSB7XHJcbiAgICBsZXQgJGVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKTpub3QoLmdyb3VwLXRpdGxlKSdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCRlbGUgJiYgdGhpcy5pc09wZW5lZCgpKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNPcHRpb24obnVsbCwgJGVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNUb3VjaE1vdmUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaChlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZShlLnRhcmdldC52YWx1ZSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBvblNlYXJjaENsZWFyKCkge1xyXG4gICAgdGhpcy5zZXRTZWFyY2hWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlQWxsT3B0aW9ucygpIHtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgb25SZXNpemUoKSB7XHJcbiAgICBpZiAodGhpcy5hcHBlbmRUb0JvZHkpIHtcclxuICAgICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEcm9wYm94KHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgdGhpcy5zZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHRydWUpO1xyXG4gIH1cclxuICAvKiogZG9tIGV2ZW50IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIGFmdGVyIGV2ZW50IG1ldGhvZHMgLSBzdGFydCAqL1xyXG4gIGFmdGVyUmVuZGVyV3JhcHBlcigpIHtcclxuICAgIHRoaXMuJGVsZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCB0aGlzLm5hbWUpO1xyXG5cclxuICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJGVsZSwgJ3ZzY29tcC1lbGUnKTtcclxuICAgIHRoaXMucmVuZGVyU2VhcmNoKCk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodCgpO1xyXG4gICAgdGhpcy5hZGRFdmVudHMoKTtcclxuICAgIHRoaXMuc2V0TWV0aG9kcygpO1xyXG5cclxuICAgIGlmICh0aGlzLmluaXRpYWxTZWxlY3RlZFZhbHVlKSB7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2QoXHJcbiAgICAgICAgdGhpcy5pbml0aWFsU2VsZWN0ZWRWYWx1ZSxcclxuICAgICAgICB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dG9TZWxlY3RGaXJzdE9wdGlvbiAmJiB0aGlzLnZpc2libGVPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKFxyXG4gICAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNbMF0udmFsdWUsXHJcbiAgICAgICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXRcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFmdGVyU2V0T3B0aW9uc0NvbnRhaW5lckhlaWdodChyZXNldCkge1xyXG4gICAgaWYgKHJlc2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dBc1BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKiBhZnRlciBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBzZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgc2V0UHJvcHMob3B0aW9ucykge1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc2V0RGVmYXVsdFByb3BzKG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKTtcclxuXHJcbiAgICBsZXQgY29udmVydFRvQm9vbGVhbiA9IFV0aWxzLmNvbnZlcnRUb0Jvb2xlYW47XHJcblxyXG4gICAgdGhpcy4kZWxlID0gb3B0aW9ucy5lbGU7XHJcbiAgICB0aGlzLnZhbHVlS2V5ID0gb3B0aW9ucy52YWx1ZUtleTtcclxuICAgIHRoaXMubGFiZWxLZXkgPSBvcHRpb25zLmxhYmVsS2V5O1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbktleSA9IG9wdGlvbnMuZGVzY3JpcHRpb25LZXk7XHJcbiAgICB0aGlzLmFsaWFzS2V5ID0gb3B0aW9ucy5hbGlhc0tleTtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0VGV4dCA9IG9wdGlvbnMub3B0aW9uSGVpZ2h0O1xyXG4gICAgdGhpcy5vcHRpb25IZWlnaHQgPSBwYXJzZUZsb2F0KHRoaXMub3B0aW9uSGVpZ2h0VGV4dCk7XHJcbiAgICB0aGlzLm11bHRpcGxlID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLm11bHRpcGxlKTtcclxuICAgIHRoaXMuaGFzU2VhcmNoID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLnNlYXJjaCk7XHJcbiAgICB0aGlzLmhpZGVDbGVhckJ1dHRvbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5oaWRlQ2xlYXJCdXR0b24pO1xyXG4gICAgdGhpcy5hdXRvU2VsZWN0Rmlyc3RPcHRpb24gPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLmF1dG9TZWxlY3RGaXJzdE9wdGlvblxyXG4gICAgKTtcclxuICAgIHRoaXMuaGFzT3B0aW9uRGVzY3JpcHRpb24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuaGFzT3B0aW9uRGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5zaWxlbnRJbml0aWFsVmFsdWVTZXQgPSBjb252ZXJ0VG9Cb29sZWFuKFxyXG4gICAgICBvcHRpb25zLnNpbGVudEluaXRpYWxWYWx1ZVNldFxyXG4gICAgKTtcclxuICAgIHRoaXMuYWxsb3dOZXdPcHRpb24gPSBjb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuYWxsb3dOZXdPcHRpb24pO1xyXG4gICAgdGhpcy5tYXJrU2VhcmNoUmVzdWx0cyA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5tYXJrU2VhcmNoUmVzdWx0cyk7XHJcbiAgICB0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCA9IGNvbnZlcnRUb0Jvb2xlYW4oXHJcbiAgICAgIG9wdGlvbnMuc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0XHJcbiAgICApO1xyXG4gICAgdGhpcy5kaXNhYmxlU2VsZWN0QWxsID0gY29udmVydFRvQm9vbGVhbihvcHRpb25zLmRpc2FibGVTZWxlY3RBbGwpO1xyXG4gICAgdGhpcy5rZWVwQWx3YXlzT3BlbiA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5rZWVwQWx3YXlzT3Blbik7XHJcbiAgICB0aGlzLnNob3dEcm9wYm94QXNQb3B1cCA9IGNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5zaG93RHJvcGJveEFzUG9wdXApO1xyXG4gICAgdGhpcy5ub09wdGlvbnNUZXh0ID0gb3B0aW9ucy5ub09wdGlvbnNUZXh0O1xyXG4gICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0ID0gb3B0aW9ucy5ub1NlYXJjaFJlc3VsdHNUZXh0O1xyXG4gICAgdGhpcy5zZWxlY3RBbGxUZXh0ID0gb3B0aW9ucy5zZWxlY3RBbGxUZXh0O1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IG9wdGlvbnMucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcclxuICAgIHRoaXMuZHJvcGJveFdpZHRoID0gb3B0aW9ucy5kcm9wYm94V2lkdGg7XHJcbiAgICB0aGlzLnRvb2x0aXBGb250U2l6ZSA9IG9wdGlvbnMudG9vbHRpcEZvbnRTaXplO1xyXG4gICAgdGhpcy50b29sdGlwQWxpZ25tZW50ID0gb3B0aW9ucy50b29sdGlwQWxpZ25tZW50O1xyXG4gICAgdGhpcy50b29sdGlwTWF4V2lkdGggPSBvcHRpb25zLnRvb2x0aXBNYXhXaWR0aDtcclxuICAgIHRoaXMubm9PZkRpc3BsYXlWYWx1ZXMgPSBwYXJzZUludChvcHRpb25zLm5vT2ZEaXNwbGF5VmFsdWVzKTtcclxuICAgIHRoaXMuekluZGV4ID0gcGFyc2VJbnQob3B0aW9ucy56SW5kZXgpO1xyXG4gICAgdGhpcy5tYXhWYWx1ZXMgPSBwYXJzZUludChvcHRpb25zLm1heFZhbHVlcyk7XHJcbiAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWU7XHJcbiAgICB0aGlzLmFkZGl0aW9uYWxDbGFzc2VzID0gb3B0aW9ucy5hZGRpdGlvbmFsQ2xhc3NlcztcclxuICAgIHRoaXMuaW5pdGlhbFNlbGVjdGVkVmFsdWUgPSBvcHRpb25zLnNlbGVjdGVkVmFsdWU7XHJcbiAgICB0aGlzLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQgPSBvcHRpb25zLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQ7XHJcbiAgICB0aGlzLm9uU2VydmVyU2VhcmNoID0gb3B0aW9ucy5vblNlcnZlclNlYXJjaDtcclxuICAgIHRoaXMuc2VhcmNoUGxhY2Vob2xkZXIgPSBvcHRpb25zLnNlYXJjaFBsYWNlaG9sZGVyO1xyXG4gICAgdGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZSA9IG9wdGlvbnMuaXRlbXNTZWxlY3RlZE1lc3NhZ2U7XHJcbiAgICB0aGlzLmFsbG93Tm9uZU9wdGlvbiA9IG9wdGlvbnMuYWxsb3dOb25lT3B0aW9uO1xyXG4gICAgdGhpcy5ub25lT3B0aW9uVGV4dCA9IG9wdGlvbnMubm9uZU9wdGlvblRleHQ7XHJcbiAgICB0aGlzLmFwcGVuZFRvQm9keSA9IG9wdGlvbnMuYXBwZW5kVG9Cb2R5O1xyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0ZWRJbmRleGVzID0gW107XHJcbiAgICB0aGlzLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgIHRoaXMudG9vbHRpcEVudGVyRGVsYXkgPSAyMDA7XHJcbiAgICB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbiA9IDI1MDtcclxuICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJztcclxuICAgIHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCA9ICcnO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAob3B0aW9ucy5zZWFyY2ggPT09IHVuZGVmaW5lZCAmJiB0aGlzLm11bHRpcGxlKSB8fFxyXG4gICAgICB0aGlzLmFsbG93TmV3T3B0aW9uXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5oYXNTZWFyY2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm1heFZhbHVlcykge1xyXG4gICAgICB0aGlzLmRpc2FibGVTZWxlY3RBbGwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaGFzU2VydmVyU2VhcmNoID0gdHlwZW9mIHRoaXMub25TZXJ2ZXJTZWFyY2ggPT09ICdmdW5jdGlvbic7XHJcbiAgICB0aGlzLnNob3dBc1BvcHVwID1cclxuICAgICAgdGhpcy5zaG93RHJvcGJveEFzUG9wdXAgJiZcclxuICAgICAgIXRoaXMua2VlcEFsd2F5c09wZW4gJiZcclxuICAgICAgd2luZG93LmlubmVyV2lkdGggPD0gcGFyc2VGbG9hdCh0aGlzLnBvcHVwRHJvcGJveEJyZWFrcG9pbnQpO1xyXG4gICAgdGhpcy5oYXNTZWFyY2hDb250YWluZXIgPVxyXG4gICAgICB0aGlzLmhhc1NlYXJjaCB8fCAodGhpcy5tdWx0aXBsZSAmJiAhdGhpcy5kaXNhYmxlU2VsZWN0QWxsKTtcclxuICAgIHRoaXMub3B0aW9uc0NvdW50ID0gdGhpcy5nZXRPcHRpb25zQ291bnQob3B0aW9ucy5vcHRpb25zQ291bnQpO1xyXG4gICAgdGhpcy5oYWxmT3B0aW9uc0NvdW50ID0gTWF0aC5jZWlsKHRoaXMub3B0aW9uc0NvdW50IC8gMik7XHJcbiAgICB0aGlzLm9wdGlvbnNIZWlnaHQgPSB0aGlzLmdldE9wdGlvbnNIZWlnaHQoKTtcclxuICB9XHJcblxyXG4gIHNldERlZmF1bHRQcm9wcyhvcHRpb25zKSB7XHJcbiAgICBsZXQgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgIHZhbHVlS2V5OiAndmFsdWUnLFxyXG4gICAgICBsYWJlbEtleTogJ2xhYmVsJyxcclxuICAgICAgZGVzY3JpcHRpb25LZXk6ICdkZXNjcmlwdGlvbicsXHJcbiAgICAgIGFsaWFzS2V5OiAnYWxpYXMnLFxyXG4gICAgICBvcHRpb25zQ291bnQ6IDUsXHJcbiAgICAgIG5vT2ZEaXNwbGF5VmFsdWVzOiA1MCxcclxuICAgICAgb3B0aW9uSGVpZ2h0OiAnNDBweCcsXHJcbiAgICAgIG11bHRpcGxlOiBmYWxzZSxcclxuICAgICAgaGlkZUNsZWFyQnV0dG9uOiBmYWxzZSxcclxuICAgICAgYXV0b1NlbGVjdEZpcnN0T3B0aW9uOiBmYWxzZSxcclxuICAgICAgaGFzT3B0aW9uRGVzY3JpcHRpb246IGZhbHNlLFxyXG4gICAgICBzaWxlbnRJbml0aWFsVmFsdWVTZXQ6IGZhbHNlLFxyXG4gICAgICBkaXNhYmxlU2VsZWN0QWxsOiBmYWxzZSxcclxuICAgICAgbm9PcHRpb25zVGV4dDogJ05vIG9wdGlvbnMgZm91bmQnLFxyXG4gICAgICBub1NlYXJjaFJlc3VsdHNUZXh0OiAnTm8gcmVzdWx0cyBmb3VuZCcsXHJcbiAgICAgIHNlbGVjdEFsbFRleHQ6ICdTZWxlY3QgQWxsJyxcclxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWxlY3QnLFxyXG4gICAgICBwb3NpdGlvbjogJ2F1dG8nLFxyXG4gICAgICB6SW5kZXg6IDEsXHJcbiAgICAgIGFsbG93TmV3T3B0aW9uOiBmYWxzZSxcclxuICAgICAgbWFya1NlYXJjaFJlc3VsdHM6IGZhbHNlLFxyXG4gICAgICB0b29sdGlwRm9udFNpemU6ICcxNHB4JyxcclxuICAgICAgdG9vbHRpcEFsaWdubWVudDogJ2NlbnRlcicsXHJcbiAgICAgIHRvb2x0aXBNYXhXaWR0aDogJzMwMHB4JyxcclxuICAgICAgc2hvd1NlbGVjdGVkT3B0aW9uc0ZpcnN0OiBmYWxzZSxcclxuICAgICAgbmFtZTogJycsXHJcbiAgICAgIGFkZGl0aW9uYWxDbGFzc2VzOiAnJyxcclxuICAgICAga2VlcEFsd2F5c09wZW46IGZhbHNlLFxyXG4gICAgICBtYXhWYWx1ZXM6IDAsXHJcbiAgICAgIHNob3dEcm9wYm94QXNQb3B1cDogdHJ1ZSxcclxuICAgICAgcG9wdXBEcm9wYm94QnJlYWtwb2ludDogJzU3NnB4JyxcclxuICAgICAgc2VhcmNoUGxhY2Vob2xkZXI6ICdTZWFyY2guLi4nLFxyXG4gICAgICBpdGVtc1NlbGVjdGVkTWVzc2FnZTogJ3NlbGVjdGVkJyxcclxuICAgICAgYWxsb3dOb25lT3B0aW9uOiBmYWxzZSxcclxuICAgICAgbm9uZU9wdGlvblRleHQ6ICdOb25lJyxcclxuICAgICAgYXBwZW5kVG9Cb2R5OiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuaGFzT3B0aW9uRGVzY3JpcHRpb24pIHtcclxuICAgICAgZGVmYXVsdE9wdGlvbnMub3B0aW9uc0NvdW50ID0gNDtcclxuICAgICAgZGVmYXVsdE9wdGlvbnMub3B0aW9uSGVpZ2h0ID0gJzYwcHgnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHNldFByb3BzRnJvbUVsZW1lbnRBdHRyKG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlID0gb3B0aW9ucy5lbGU7XHJcbiAgICBsZXQgbWFwcGluZyA9IHtcclxuICAgICAgbXVsdGlwbGU6ICdtdWx0aXBsZScsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAncGxhY2Vob2xkZXInLFxyXG4gICAgICBuYW1lOiAnbmFtZScsXHJcbiAgICAgICdkYXRhLXZhbHVlLWtleSc6ICd2YWx1ZUtleScsXHJcbiAgICAgICdkYXRhLWxhYmVsLWtleSc6ICdsYWJlbEtleScsXHJcbiAgICAgICdkYXRhLWRlc2NyaXB0aW9uLWtleSc6ICdkZXNjcmlwdGlvbktleScsXHJcbiAgICAgICdkYXRhLWFsaWFzLWtleSc6ICdhbGlhc0tleScsXHJcbiAgICAgICdkYXRhLXNlYXJjaCc6ICdzZWFyY2gnLFxyXG4gICAgICAnZGF0YS1oaWRlLWNsZWFyLWJ1dHRvbic6ICdoaWRlQ2xlYXJCdXR0b24nLFxyXG4gICAgICAnZGF0YS1hdXRvLXNlbGVjdC1maXJzdC1vcHRpb24nOiAnYXV0b1NlbGVjdEZpcnN0T3B0aW9uJyxcclxuICAgICAgJ2RhdGEtaGFzLW9wdGlvbi1kZXNjcmlwdGlvbic6ICdoYXNPcHRpb25EZXNjcmlwdGlvbicsXHJcbiAgICAgICdkYXRhLW9wdGlvbnMtY291bnQnOiAnb3B0aW9uc0NvdW50JyxcclxuICAgICAgJ2RhdGEtb3B0aW9uLWhlaWdodCc6ICdvcHRpb25IZWlnaHQnLFxyXG4gICAgICAnZGF0YS1wb3NpdGlvbic6ICdwb3NpdGlvbicsXHJcbiAgICAgICdkYXRhLW5vLW9wdGlvbnMtdGV4dCc6ICdub09wdGlvbnNUZXh0JyxcclxuICAgICAgJ2RhdGEtbm8tc2VhcmNoLXJlc3VsdHMtdGV4dCc6ICdub1NlYXJjaFJlc3VsdHNUZXh0JyxcclxuICAgICAgJ2RhdGEtc2VsZWN0LWFsbC10ZXh0JzogJ3NlbGVjdEFsbFRleHQnLFxyXG4gICAgICAnZGF0YS1zaWxlbnQtaW5pdGlhbC12YWx1ZS1zZXQnOiAnc2lsZW50SW5pdGlhbFZhbHVlU2V0JyxcclxuICAgICAgJ2RhdGEtZHJvcGJveC13aWR0aCc6ICdkcm9wYm94V2lkdGgnLFxyXG4gICAgICAnZGF0YS16LWluZGV4JzogJ3pJbmRleCcsXHJcbiAgICAgICdkYXRhLW5vLW9mLWRpc3BsYXktdmFsdWVzJzogJ25vT2ZEaXNwbGF5VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWxsb3ctbmV3LW9wdGlvbic6ICdhbGxvd05ld09wdGlvbicsXHJcbiAgICAgICdkYXRhLW1hcmstc2VhcmNoLXJlc3VsdHMnOiAnbWFya1NlYXJjaFJlc3VsdHMnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWZvbnQtc2l6ZSc6ICd0b29sdGlwRm9udFNpemUnLFxyXG4gICAgICAnZGF0YS10b29sdGlwLWFsaWdubWVudCc6ICd0b29sdGlwQWxpZ25tZW50JyxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1tYXgtd2lkdGgnOiAndG9vbHRpcE1heFdpZHRoJyxcclxuICAgICAgJ2RhdGEtc2hvdy1zZWxlY3RlZC1vcHRpb25zLWZpcnN0JzogJ3Nob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCcsXHJcbiAgICAgICdkYXRhLWRpc2FibGUtc2VsZWN0LWFsbCc6ICdkaXNhYmxlU2VsZWN0QWxsJyxcclxuICAgICAgJ2RhdGEta2VlcC1hbHdheXMtb3Blbic6ICdrZWVwQWx3YXlzT3BlbicsXHJcbiAgICAgICdkYXRhLW1heC12YWx1ZXMnOiAnbWF4VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWRkaXRpb25hbC1jbGFzc2VzJzogJ2FkZGl0aW9uYWxDbGFzc2VzJyxcclxuICAgICAgJ2RhdGEtc2hvdy1kcm9wYm94LWFzLXBvcHVwJzogJ3Nob3dEcm9wYm94QXNQb3B1cCcsXHJcbiAgICAgICdkYXRhLXBvcHVwLWRyb3Bib3gtYnJlYWtwb2ludCc6ICdwb3B1cERyb3Bib3hCcmVha3BvaW50JyxcclxuICAgIH07XHJcblxyXG4gICAgZm9yIChsZXQgayBpbiBtYXBwaW5nKSB7XHJcbiAgICAgIGxldCB2YWx1ZSA9ICRlbGUuZ2V0QXR0cmlidXRlKGspO1xyXG5cclxuICAgICAgaWYgKGsgPT09ICdtdWx0aXBsZScgJiYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gJ3RydWUnKSkge1xyXG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgb3B0aW9uc1ttYXBwaW5nW2tdXSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRNZXRob2RzKCkge1xyXG4gICAgbGV0ICRlbGUgPSB0aGlzLiRlbGU7XHJcbiAgICAkZWxlLnZpcnR1YWxTZWxlY3QgPSB0aGlzO1xyXG4gICAgJGVsZS52YWx1ZSA9IHRoaXMubXVsdGlwbGUgPyBbXSA6ICcnO1xyXG4gICAgJGVsZS5yZXNldCA9IFZpcnR1YWxTZWxlY3QucmVzZXQ7XHJcbiAgICAkZWxlLnNldFZhbHVlID0gVmlydHVhbFNlbGVjdC5zZXRWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUuc2V0T3B0aW9ucyA9IFZpcnR1YWxTZWxlY3Quc2V0T3B0aW9uc01ldGhvZDtcclxuICAgICRlbGUuc2V0RGlzYWJsZWRPcHRpb25zID0gVmlydHVhbFNlbGVjdC5zZXREaXNhYmxlZE9wdGlvbnNNZXRob2Q7XHJcbiAgICAkZWxlLnRvZ2dsZVNlbGVjdEFsbCA9IFZpcnR1YWxTZWxlY3QudG9nZ2xlU2VsZWN0QWxsO1xyXG4gICAgJGVsZS5pc0FsbFNlbGVjdGVkID0gVmlydHVhbFNlbGVjdC5pc0FsbFNlbGVjdGVkO1xyXG4gICAgJGVsZS5hZGRPcHRpb24gPSBWaXJ0dWFsU2VsZWN0LmFkZE9wdGlvbk1ldGhvZDtcclxuICAgICRlbGUuZ2V0TmV3VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LmdldE5ld1ZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5nZXREaXNwbGF5VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LmdldERpc3BsYXlWYWx1ZU1ldGhvZDtcclxuICAgICRlbGUub3BlbiA9IFZpcnR1YWxTZWxlY3Qub3Blbk1ldGhvZDtcclxuICAgICRlbGUuY2xvc2UgPSBWaXJ0dWFsU2VsZWN0LmNsb3NlTWV0aG9kO1xyXG4gICAgJGVsZS5zZXRTZWFyY2hWYWx1ZSA9IFZpcnR1YWxTZWxlY3Quc2V0U2VhcmNoVmFsdWVNZXRob2Q7XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHZhbHVlID0gW3ZhbHVlXTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZSA9IHZhbHVlLm1hcCgodikgPT4ge1xyXG4gICAgICByZXR1cm4gdiB8fCB2ID09IDAgPyB2LnRvU3RyaW5nKCkgOiAnJztcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCB2YWxpZFZhbHVlcyA9IFtdO1xyXG4gICAgbGV0IHZhbGlkSW5kZXhlcyA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IGQgb2YgdGhpcy5vcHRpb25zKSB7XHJcbiAgICAgIGxldCBpc1NlbGVjdGVkID0gdmFsdWUuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgICBpZiAoaXNTZWxlY3RlZCAmJiAhZC5pc0Rpc2FibGVkICYmICFkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICAgIGlmICh2YWxpZFZhbHVlcy5pbmRleE9mKGQudmFsdWUpICE9PSAtMSAmJiB0aGlzLm11bHRpcGxlKSBicmVhazsgLy8gSWYgbXVsdGlwbGUgc2VsZWN0aW9uIHdpdGggc2FtZSB2YWx1ZSBvbmx5IHNlbGVjdCBvbmUuXHJcblxyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgdmFsaWRWYWx1ZXMucHVzaChkLnZhbHVlKTtcclxuICAgICAgICB2YWxpZEluZGV4ZXMucHVzaChkLmluZGV4KTtcclxuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIGJyZWFrOyAvLyBpZiBzaW5nbGUgc2VsZWN0aW9uIG9ubHkgc2VsZWN0IG9uZS5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICB2YWxpZFZhbHVlcyA9IHZhbGlkVmFsdWVzWzBdO1xyXG4gICAgICB2YWxpZEluZGV4ZXMgPSB2YWxpZEluZGV4ZXNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5iZWZvcmVWYWx1ZVNldCgpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZSh2YWxpZFZhbHVlcywgdmFsaWRJbmRleGVzLCAhc2lsZW50Q2hhbmdlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpIHtcclxuICAgIGxldCBuZXdvcHRpb24gPSBvcHRpb25zICE9IHRoaXMub3B0aW9ucztcclxuICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zKGtlZXBWYWx1ZSwgbmV3b3B0aW9uKTtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChkaXNhYmxlZE9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlTWV0aG9kKG51bGwpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucyA9IFtdLCBzZXRPcHRpb25zUHJvcCA9IGZhbHNlKSB7XHJcbiAgICBkaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubWFwKChkKSA9PiBkLnRvU3RyaW5nKCkpO1xyXG4gICAgdGhpcy5kaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnM7XHJcblxyXG4gICAgaWYgKHNldE9wdGlvbnNQcm9wICYmIGRpc2FibGVkT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICBkLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJlcGFyZWRPcHRpb25zID0gW107XHJcbiAgICBsZXQgZGlzYWJsZWRPcHRpb25zID0gdGhpcy5kaXNhYmxlZE9wdGlvbnM7XHJcbiAgICBsZXQgaGFzRGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCB2YWx1ZUtleSA9IHRoaXMudmFsdWVLZXk7XHJcbiAgICBsZXQgbGFiZWxLZXkgPSB0aGlzLmxhYmVsS2V5O1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uS2V5ID0gdGhpcy5kZXNjcmlwdGlvbktleTtcclxuICAgIGxldCBhbGlhc0tleSA9IHRoaXMuYWxpYXNLZXk7XHJcbiAgICBsZXQgaGFzT3B0aW9uRGVzY3JpcHRpb24gPSB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uO1xyXG4gICAgbGV0IGdldFN0cmluZyA9IFV0aWxzLmdldFN0cmluZztcclxuICAgIGxldCBnZXRBbGlhcyA9IHRoaXMuZ2V0QWxpYXM7XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgbGV0IGhhc09wdGlvbkdyb3VwID0gZmFsc2U7XHJcblxyXG4gICAgbGV0IHByZXBhcmVPcHRpb24gPSAoZCkgPT4ge1xyXG4gICAgICBsZXQgdmFsdWUgPSBnZXRTdHJpbmcoZFt2YWx1ZUtleV0pO1xyXG4gICAgICBsZXQgY2hpbGRPcHRpb25zID0gZC5vcHRpb25zO1xyXG4gICAgICBsZXQgaXNHcm91cFRpdGxlID0gY2hpbGRPcHRpb25zID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICBsZXQgb3B0aW9uID0ge1xyXG4gICAgICAgIGluZGV4LFxyXG4gICAgICAgIHZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiBnZXRTdHJpbmcoZFtsYWJlbEtleV0pLFxyXG4gICAgICAgIGFsaWFzOiBnZXRBbGlhcyhkW2FsaWFzS2V5XSksXHJcbiAgICAgICAgaXNWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGlzR3JvdXBUaXRsZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmIChoYXNEaXNhYmxlZE9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb24uaXNEaXNhYmxlZCA9IGRpc2FibGVkT3B0aW9ucy5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkLmlzR3JvdXBPcHRpb24pIHtcclxuICAgICAgICBvcHRpb24uaXNHcm91cE9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgb3B0aW9uLmdyb3VwSW5kZXggPSBkLmdyb3VwSW5kZXg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChoYXNPcHRpb25EZXNjcmlwdGlvbikge1xyXG4gICAgICAgIG9wdGlvbi5kZXNjcmlwdGlvbiA9IGdldFN0cmluZyhkW2Rlc2NyaXB0aW9uS2V5XSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHByZXBhcmVkT3B0aW9ucy5wdXNoKG9wdGlvbik7XHJcbiAgICAgIGluZGV4Kys7XHJcblxyXG4gICAgICBpZiAoaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwSW5kZXggPSBvcHRpb24uaW5kZXg7XHJcbiAgICAgICAgaGFzT3B0aW9uR3JvdXAgPSB0cnVlO1xyXG5cclxuICAgICAgICBjaGlsZE9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICAgICAgZC5pc0dyb3VwT3B0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgIGQuZ3JvdXBJbmRleCA9IGdyb3VwSW5kZXg7XHJcblxyXG4gICAgICAgICAgcHJlcGFyZU9wdGlvbihkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBBZGQgbm9uZSBvcHRpb24gb25seSB3aGVuIGluIGxpc3QgbW9kZSAoYWx3YXlzIG9wZW4gYW5kIG9ubHkpXHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUgJiYgdGhpcy5hbGxvd05vbmVPcHRpb24pIHtcclxuICAgICAgb3B0aW9ucy51bnNoaWZ0KHtcclxuICAgICAgICB2YWx1ZTogbm9uZU9wdGlvblZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiB0aGlzLm5vbmVPcHRpb25UZXh0LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2gocHJlcGFyZU9wdGlvbik7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0gcHJlcGFyZWRPcHRpb25zO1xyXG4gICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ID0gcHJlcGFyZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4ID0gdGhpcy5vcHRpb25zLmxlbmd0aCAtIDE7XHJcbiAgICB0aGlzLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgdGhpcy5oYXNPcHRpb25Hcm91cCA9IGhhc09wdGlvbkdyb3VwO1xyXG4gICAgdGhpcy5zZXRTb3J0ZWRPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRTZXJ2ZXJPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCB0cnVlKTtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdzZXJ2ZXItc2VhcmNoaW5nJyk7XHJcbiAgfVxyXG5cclxuICBzZXRTb3J0ZWRPcHRpb25zKCkge1xyXG4gICAgbGV0IHNvcnRlZE9wdGlvbnMgPSBbLi4udGhpcy5vcHRpb25zXTtcclxuXHJcbiAgICBpZiAodGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QgJiYgdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgaWYgKHRoaXMuaGFzT3B0aW9uR3JvdXApIHtcclxuICAgICAgICBzb3J0ZWRPcHRpb25zID0gdGhpcy5zb3J0T3B0aW9uc0dyb3VwKHNvcnRlZE9wdGlvbnMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNvcnRlZE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zKHNvcnRlZE9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zb3J0ZWRPcHRpb25zID0gc29ydGVkT3B0aW9ucztcclxuICB9XHJcblxyXG4gIHNldFZpc2libGVPcHRpb25zKCkge1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gWy4uLnRoaXMuc29ydGVkT3B0aW9uc107XHJcbiAgICBsZXQgbWF4T3B0aW9uc1RvU2hvdyA9IHRoaXMub3B0aW9uc0NvdW50ICogMjtcclxuICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgbWF4T3B0aW9uc1RvU2hvdyAtIDE7XHJcbiAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBuZXdPcHRpb24udmlzaWJsZUluZGV4ID0gaTtcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zID0gdmlzaWJsZU9wdGlvbnMuZmlsdGVyKChkKSA9PiB7XHJcbiAgICAgIGxldCBpblZpZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmIChkLmlzVmlzaWJsZSAmJiAhZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICBpblZpZXcgPSBpID49IHN0YXJ0SW5kZXggJiYgaSA8PSBlbmRJbmRleDtcclxuICAgICAgICBkLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gaW5WaWV3O1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICB2aXNpYmxlT3B0aW9ucyA9IFtuZXdPcHRpb24sIC4uLnZpc2libGVPcHRpb25zXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zID0gdmlzaWJsZU9wdGlvbnM7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNQb3NpdGlvbihzdGFydEluZGV4KSB7XHJcbiAgICBpZiAoc3RhcnRJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHN0YXJ0SW5kZXggPSB0aGlzLmdldFZpc2libGVTdGFydEluZGV4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRvcCA9IHN0YXJ0SW5kZXggKiB0aGlzLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMuJG9wdGlvbnMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsICR7dG9wfXB4LCAwKWA7XHJcbiAgICBEb21VdGlscy5zZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCB0b3ApO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc1Rvb2x0aXAoKSB7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbnMgPSB0aGlzLmdldFZpc2libGVPcHRpb25zKCk7XHJcbiAgICBsZXQgaGFzT3B0aW9uRGVzY3JpcHRpb24gPSB0aGlzLmhhc09wdGlvbkRlc2NyaXB0aW9uO1xyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0ICRvcHRpb25FbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYC52c2NvbXAtb3B0aW9uW2RhdGEtaW5kZXg9XCIke2QuaW5kZXh9XCJdYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgRG9tVXRpbHMuc2V0RGF0YShcclxuICAgICAgICAkb3B0aW9uRWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLXRleHQnKSxcclxuICAgICAgICAndG9vbHRpcCcsXHJcbiAgICAgICAgZC5sYWJlbFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGhhc09wdGlvbkRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgRG9tVXRpbHMuc2V0RGF0YShcclxuICAgICAgICAgICRvcHRpb25FbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24tZGVzY3JpcHRpb24nKSxcclxuICAgICAgICAgICd0b29sdGlwJyxcclxuICAgICAgICAgIGQuZGVzY3JpcHRpb25cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlKHZhbHVlLCBpbmRleCwgdHJpZ2dlckV2ZW50KSB7XHJcbiAgICAvLyBWYWx1ZVxyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbLi4udmFsdWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFt2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld1ZhbHVlID0gdGhpcy5tdWx0aXBsZVxyXG4gICAgICA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXNcclxuICAgICAgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdIHx8ICcnO1xyXG5cclxuICAgIHRoaXMuJGVsZS52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQudmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcbiAgICAvLyBJbmRleFxyXG4gICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbXTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbmRleCkpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbLi4uaW5kZXhdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ZXMgPSBbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdJbmRleCA9IHRoaXMubXVsdGlwbGVcclxuICAgICAgPyB0aGlzLnNlbGVjdGVkSW5kZXhlc1xyXG4gICAgICA6IHRoaXMuc2VsZWN0ZWRJbmRleGVzWzBdIHx8ICcnO1xyXG5cclxuICAgIHRoaXMuJGVsZS5pbmRleCA9IG5ld0luZGV4O1xyXG4gICAgdGhpcy4kaGlkZGVuSW5wdXQuaW5kZXggPSBuZXdJbmRleDtcclxuXHJcbiAgICB0aGlzLmlzTWF4VmFsdWVzU2VsZWN0ZWQgPVxyXG4gICAgICB0aGlzLm1heFZhbHVlcyAmJiB0aGlzLm1heFZhbHVlcyA8PSB0aGlzLnNlbGVjdGVkVmFsdWVzLmxlbmd0aFxyXG4gICAgICAgID8gdHJ1ZVxyXG4gICAgICAgIDogZmFsc2U7XHJcbiAgICB0aGlzLnNldFZhbHVlVGV4dCgpO1xyXG5cclxuICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWVzICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZXNbMF0gPT09IG5vbmVPcHRpb25WYWx1ZSkge1xyXG4gICAgICBEb21VdGlscy5yZW1vdmVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLXZhbHVlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLFxyXG4gICAgICAgICdoYXMtdmFsdWUnLFxyXG4gICAgICAgIFV0aWxzLmlzTm90RW1wdHkodGhpcy5zZWxlY3RlZFZhbHVlcylcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgdGhpcy4kd3JhcHBlcixcclxuICAgICAgJ21heC12YWx1ZS1zZWxlY3RlZCcsXHJcbiAgICAgIHRoaXMuaXNNYXhWYWx1ZXNTZWxlY3RlZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodHJpZ2dlckV2ZW50KSB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLiRlbGUsICdjaGFuZ2UnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpbW1lZGlhdGVseSBtb3ZlIGl0ZW0gdG8gdG9wIGlmIG9wdGlvbnMgaXMgb24uXHJcbiAgICBpZiAodGhpcy5zaG93U2VsZWN0ZWRPcHRpb25zRmlyc3QpIHtcclxuICAgICAgY29uc3QgbGFzdFNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG4gICAgICB0aGlzLm1vdmVTZWxlY3RlZE9wdGlvbnNGaXJzdCgpO1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IGxhc3RTY3JvbGxUb3A7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZVRleHQoKSB7XHJcbiAgICBsZXQgdmFsdWVUZXh0ID0gW107XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkSW5kZXhlcyA9IHRoaXMuc2VsZWN0ZWRJbmRleGVzO1xyXG4gICAgbGV0IHNlbGVjdGVkTGVuZ3RoID0gc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoO1xyXG4gICAgbGV0IG5vT2ZEaXNwbGF5VmFsdWVzID0gdGhpcy5ub09mRGlzcGxheVZhbHVlcztcclxuICAgIGxldCBtYXhpbXVtVmFsdWVzVG9TaG93ID0gNTA7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXNDb3VudCA9IDA7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgICAvL3RoaXMuJHZhbHVlVGV4dC5pbm5lckhUTUwgPSBgQWxsICgke3NlbGVjdGVkTGVuZ3RofSlgO1xyXG4gICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7c2VsZWN0ZWRMZW5ndGh9ICR7dGhpcy5pdGVtc1NlbGVjdGVkTWVzc2FnZX1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChsZXQgZCBvZiB0aGlzLm9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXNDb3VudCA+IG1heGltdW1WYWx1ZXNUb1Nob3cgfHxcclxuICAgICAgICAgICghdGhpcy5tdWx0aXBsZSAmJiBzZWxlY3RlZFZhbHVlc0NvdW50ID09PSAxKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmFsdWUgPSBkLnZhbHVlO1xyXG4gICAgICAgIGxldCBsYWJlbCA9IGQubGFiZWw7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gZC5pbmRleDtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMuaW5kZXhPZih2YWx1ZSkgIT09IC0xICYmXHJcbiAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMuaW5kZXhPZihpbmRleCkgIT09IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXNDb3VudCA+PSBzZWxlY3RlZFZhbHVlcy5sZW5ndGgpIGJyZWFrOyAvLyBkbyBub3QgYWRkIHNhbWUgdmFsdWVzIG11bHRpcGxlXHJcblxyXG4gICAgICAgICAgdmFsdWVUZXh0LnB1c2gobGFiZWwpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZXNDb3VudCsrO1xyXG5cclxuICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50IDw9IG5vT2ZEaXNwbGF5VmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHZhbHVlVG9vbHRpcC5wdXNoKGA8c3BhbiBjbGFzcz1cInZzY29tcC12YWx1ZS10YWdcIj4ke2xhYmVsfTwvc3Bhbj5gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBtb3JlU2VsZWN0ZWRPcHRpb25zID0gc2VsZWN0ZWRMZW5ndGggLSBub09mRGlzcGxheVZhbHVlcztcclxuXHJcbiAgICAgIGlmIChtb3JlU2VsZWN0ZWRPcHRpb25zID4gMCkge1xyXG4gICAgICAgIHZhbHVlVG9vbHRpcC5wdXNoKFxyXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwidnNjb21wLXZhbHVlLXRhZyBtb3JlLXZhbHVlLWNvdW50XCI+KyAke21vcmVTZWxlY3RlZE9wdGlvbnN9IG1vcmUuLi48L3NwYW4+YFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFnZ3JlZ2F0ZWRWYWx1ZVRleHQgPSB2YWx1ZVRleHQuam9pbignLCAnKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBhZ2dyZWdhdGVkVmFsdWVUZXh0ID09PSAnJyB8fFxyXG4gICAgICAgIChzZWxlY3RlZFZhbHVlcyAmJiBzZWxlY3RlZFZhbHVlc1swXSA9PT0gbm9uZU9wdGlvblZhbHVlKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYWdncmVnYXRlZFZhbHVlVGV4dDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICAgIGxldCBtYXhWYWx1ZXMgPSB0aGlzLm1heFZhbHVlcztcclxuXHJcbiAgICAgICAgICBpZiAoRG9tVXRpbHMuaGFzRWxsaXBzaXModGhpcy4kdmFsdWVUZXh0KSB8fCBtYXhWYWx1ZXMpIHtcclxuICAgICAgICAgICAgbGV0IGNvdW50VGV4dCA9IGAke3NlbGVjdGVkTGVuZ3RofWA7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF4VmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgY291bnRUZXh0ICs9IGAgLyAke21heFZhbHVlc31gO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiogcmVwbGFjZSBjb21tYSBkZWxpbWl0dGVkIGxpc3Qgb2Ygc2VsZWN0aW9ucyB3aXRoIHNob3J0ZXIgdGV4dCBpbmRpY2F0aW5nIHNlbGVjdGlvbiBjb3VudCAqL1xyXG4gICAgICAgICAgICAvLyB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7Y291bnRUZXh0fSBvcHRpb24ke1xyXG4gICAgICAgICAgICAvLyAgIHNlbGVjdGVkTGVuZ3RoID09PSAxID8gJycgOiAncydcclxuICAgICAgICAgICAgLy8gfSBzZWxlY3RlZGA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiR2YWx1ZVRleHQuaW5uZXJIVE1MID0gYCR7Y291bnRUZXh0fSAke3RoaXMuaXRlbXNTZWxlY3RlZE1lc3NhZ2V9YDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qKiByZW1vdmluZyB0b29sdGlwIGlmIGZ1bGwgdmFsdWUgdGV4dCBpcyB2aXNpYmxlICovXHJcbiAgICAgICAgICAgIHZhbHVlVG9vbHRpcCA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnNldERhdGEodGhpcy4kdmFsdWVUZXh0LCAndG9vbHRpcCcsIHZhbHVlVG9vbHRpcC5qb2luKCcsICcpKTtcclxuICB9XHJcblxyXG4gIHNldFNlYXJjaFZhbHVlKHZhbHVlLCBza2lwSW5wdXRTZXQsIGZvcmNlKSB7XHJcbiAgICBpZiAodmFsdWUgPT09IHRoaXMuc2VhcmNoVmFsdWVPcmlnaW5hbCAmJiAhZm9yY2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc2tpcElucHV0U2V0KSB7XHJcbiAgICAgIHRoaXMuJHNlYXJjaElucHV0LnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlYXJjaFZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSB2YWx1ZTtcclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLXNlYXJjaC12YWx1ZScsIHZhbHVlKTtcclxuICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSlcclxuICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnaGFzLXNlYXJjaC12YWx1ZScsIHZhbHVlKTtcclxuXHJcbiAgICBpZiAodGhpcy5oYXNTZXJ2ZXJTZWFyY2gpIHtcclxuICAgICAgdGhpcy5zZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZpc2libGVPcHRpb25zQ291bnQgPSAwO1xyXG4gICAgbGV0IGhhc0V4YWN0T3B0aW9uID0gZmFsc2U7XHJcbiAgICBsZXQgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmc7XHJcbiAgICBsZXQgaXNPcHRpb25WaXNpYmxlID0gdGhpcy5pc09wdGlvblZpc2libGU7XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzT3B0aW9uR3JvdXApIHtcclxuICAgICAgdmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcgPVxyXG4gICAgICAgIHRoaXMuZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcoc2VhcmNoVmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGlmIChkLmlzQ3VycmVudE5ldykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHJlc3VsdCA9IGlzT3B0aW9uVmlzaWJsZShcclxuICAgICAgICBkLFxyXG4gICAgICAgIHNlYXJjaFZhbHVlLFxyXG4gICAgICAgIGhhc0V4YWN0T3B0aW9uLFxyXG4gICAgICAgIHZpc2libGVPcHRpb25Hcm91cHNNYXBwaW5nXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAocmVzdWx0LmlzVmlzaWJsZSkge1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICAgIGhhc0V4YWN0T3B0aW9uID0gcmVzdWx0Lmhhc0V4YWN0T3B0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5hbGxvd05ld09wdGlvbikge1xyXG4gICAgICBpZiAoc2VhcmNoVmFsdWUgJiYgIWhhc0V4YWN0T3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zZXROZXdPcHRpb24oKTtcclxuICAgICAgICB2aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVOZXdPcHRpb24oKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IHZpc2libGVPcHRpb25zQ291bnQ7XHJcblxyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25Qcm9wKGluZGV4LCBrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMub3B0aW9uc1tpbmRleF0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9uc1tpbmRleF1ba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0hlaWdodCgpIHtcclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0LnN0eWxlLmhlaWdodCA9XHJcbiAgICAgIHRoaXMub3B0aW9uSGVpZ2h0ICogdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ICsgJ3B4JztcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNDb250YWluZXJIZWlnaHQocmVzZXQpIHtcclxuICAgIGxldCBvcHRpb25zSGVpZ2h0O1xyXG5cclxuICAgIGlmIChyZXNldCkge1xyXG4gICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgIHRoaXMub3B0aW9uc0NvdW50ID0gdGhpcy5nZXRPcHRpb25zQ291bnQoKTtcclxuICAgICAgICBvcHRpb25zSGVpZ2h0ID0gdGhpcy5nZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zSGVpZ2h0ID0gb3B0aW9uc0hlaWdodDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3B0aW9uc0hlaWdodCA9IHRoaXMub3B0aW9uc0hlaWdodDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmtlZXBBbHdheXNPcGVuKSB7XHJcbiAgICAgICAgRG9tVXRpbHMuc2V0U3R5bGUodGhpcy4kbm9PcHRpb25zLCAnaGVpZ2h0Jywgb3B0aW9uc0hlaWdodCk7XHJcbiAgICAgICAgRG9tVXRpbHMuc2V0U3R5bGUodGhpcy4kbm9TZWFyY2hSZXN1bHRzLCAnaGVpZ2h0Jywgb3B0aW9uc0hlaWdodCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy5zZXRTdHlsZSh0aGlzLiRvcHRpb25zQ29udGFpbmVyLCAnbWF4LWhlaWdodCcsIG9wdGlvbnNIZWlnaHQpO1xyXG5cclxuICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zQ29udGFpbmVySGVpZ2h0KHJlc2V0KTtcclxuICB9XHJcblxyXG4gIHNldERyb3Bib3hQb3NpdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnBvc2l0aW9uICE9PSAnYXV0bycpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtb3JlVmlzaWJsZVNpZGVzID0gRG9tVXRpbHMuZ2V0TW9yZVZpc2libGVTaWRlcyh0aGlzLiR3cmFwcGVyKTtcclxuICAgIGxldCBzaG93T25MZWZ0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIGNoZWNrIHRoYXQgaXMgZHJvcGJveCBoaWRkZW4gb24gcmlnaHQgZWRnZSAtIG9ubHkgaWYgY3VzdG9tIHdpZHRoIGdpdmVuICovXHJcbiAgICBpZiAodGhpcy5kcm9wYm94V2lkdGgpIHtcclxuICAgICAgbGV0IGJ1dHRvbkNvb3JkcyA9IHRoaXMuJHRvZ2dsZUJ1dHRvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgbGV0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgbGV0IGRyb3Bib3hXaWR0aCA9IHBhcnNlRmxvYXQodGhpcy5kcm9wYm94V2lkdGgpO1xyXG4gICAgICBsZXQgaGlkZGVuT25SaWdodCA9IGJ1dHRvbkNvb3Jkcy5sZWZ0ICsgZHJvcGJveFdpZHRoID4gdmlld3BvcnRXaWR0aDtcclxuICAgICAgbGV0IGhpZGRlbk9uTGVmdCA9IGRyb3Bib3hXaWR0aCA+IGJ1dHRvbkNvb3Jkcy5yaWdodDtcclxuXHJcbiAgICAgIGlmIChoaWRkZW5PblJpZ2h0ICYmICFoaWRkZW5PbkxlZnQpIHtcclxuICAgICAgICBzaG93T25MZWZ0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSkge1xyXG4gICAgICAvLyBCRVRBXHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdHlwZW9mIHNjcmVlbmZ1bGwgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgc2NyZWVuZnVsbC5pc0Z1bGxzY3JlZW4gJiZcclxuICAgICAgICBzY3JlZW5mdWxsLmVsZW1lbnRcclxuICAgICAgKSB7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuJGRyb3Bib3hDb250YWluZXIpO1xyXG4gICAgICAgIHNjcmVlbmZ1bGwuZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuJGRyb3Bib3hDb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuJGJvZHkuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgZWxlQ29vcmRzID0gdGhpcy4kZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgeCA9IGVsZUNvb3Jkcy5sZWZ0ICsgd2luZG93LnNjcm9sbFg7XHJcbiAgICAgIGxldCB5ID0gZWxlQ29vcmRzLnRvcCArIHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLndpZHRoID0gYCR7XHJcbiAgICAgICAgdGhpcy5kcm9wYm94V2lkdGggPyBwYXJzZUZsb2F0KHRoaXMuZHJvcGJveFdpZHRoKSA6IGVsZUNvb3Jkcy53aWR0aFxyXG4gICAgICB9cHhgO1xyXG4gICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xyXG5cclxuICAgICAgaWYgKG1vcmVWaXNpYmxlU2lkZXMudmVydGljYWwgPT09ICd0b3AnKSB7XHJcbiAgICAgICAgbGV0IGRyb3BCb3hDb3JkID0gdGhpcy4kZHJvcGJveENvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke1xyXG4gICAgICAgIC8vICAgeSAtIHRoaXMuJGRyb3Bib3hDb250YWluZXIub2Zmc2V0SGVpZ2h0IC0gNFxyXG4gICAgICAgIC8vIH1weGA7XHJcbiAgICAgICAgdGhpcy4kZHJvcGJveEVsLnN0eWxlLnRvcCA9IGAke3kgLSBkcm9wQm94Q29yZC5oZWlnaHQgLSA0fXB4YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvL3RoaXMuJGRyb3Bib3hFbC5zdHlsZS50b3AgPSBgJHt5ICsgdGhpcy4kZWxlLm9mZnNldEhlaWdodCArIDR9cHhgO1xyXG4gICAgICAgIHRoaXMuJGRyb3Bib3hFbC5zdHlsZS50b3AgPSBgJHt5ICsgZWxlQ29vcmRzLmhlaWdodCArIDR9cHhgO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICB0aGlzLiRkcm9wYm94Q29udGFpbmVyLFxyXG4gICAgICAgICdwb3NpdGlvbi10b3AnLFxyXG4gICAgICAgIG1vcmVWaXNpYmxlU2lkZXMudmVydGljYWwgPT09ICd0b3AnXHJcbiAgICAgICk7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJGRyb3Bib3hDb250YWluZXIsICdwb3NpdGlvbi1sZWZ0Jywgc2hvd09uTGVmdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcyhcclxuICAgICAgICB0aGlzLiR3cmFwcGVyLFxyXG4gICAgICAgICdwb3NpdGlvbi10b3AnLFxyXG4gICAgICAgIG1vcmVWaXNpYmxlU2lkZXMudmVydGljYWwgPT09ICd0b3AnXHJcbiAgICAgICk7XHJcbiAgICAgIERvbVV0aWxzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdwb3NpdGlvbi1sZWZ0Jywgc2hvd09uTGVmdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXROZXdPcHRpb24oKSB7XHJcbiAgICBsZXQgdmFsdWUgPSB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwudHJpbSgpO1xyXG5cclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG5cclxuICAgIGlmIChuZXdPcHRpb24pIHtcclxuICAgICAgbGV0IG5ld0luZGV4ID0gbmV3T3B0aW9uLmluZGV4O1xyXG5cclxuICAgICAgdGhpcy5zZXRPcHRpb25Qcm9wKG5ld0luZGV4LCAndmFsdWUnLCB2YWx1ZSk7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2xhYmVsJywgdmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgbGFiZWw6IHZhbHVlLFxyXG4gICAgICAgIGlzQ3VycmVudE5ldzogdHJ1ZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuYWRkT3B0aW9uKGRhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0U2VsZWN0ZWRQcm9wKCkge1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICBkLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqIHNldCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBnZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgZ2V0VmlzaWJsZU9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXNpYmxlT3B0aW9ucyB8fCBbXTtcclxuICB9XHJcblxyXG4gIGdldFZhbHVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyB0aGlzLnNlbGVjdGVkVmFsdWVzIDogdGhpcy5zZWxlY3RlZFZhbHVlc1swXTtcclxuICB9XHJcblxyXG4gIGdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCkge1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCAvIHRoaXMub3B0aW9uSGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIGdldFZpc2libGVTdGFydEluZGV4KCkge1xyXG4gICAgbGV0IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4ID0gdGhpcy5nZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpO1xyXG4gICAgbGV0IHN0YXJ0SW5kZXggPSBmaXJzdFZpc2libGVPcHRpb25JbmRleCAtIHRoaXMuaGFsZk9wdGlvbnNDb3VudDtcclxuXHJcbiAgICBpZiAoc3RhcnRJbmRleCA8IDApIHtcclxuICAgICAgc3RhcnRJbmRleCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0YXJ0SW5kZXg7XHJcbiAgfVxyXG5cclxuICBnZXRUb29sdGlwQXR0clRleHQodGV4dCwgZWxsaXBzaXNPbmx5ID0gZmFsc2UsIGFsbG93SHRtbCA9IGZhbHNlKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgJ2RhdGEtdG9vbHRpcCc6IHRleHQgfHwgJycsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZW50ZXItZGVsYXknOiB0aGlzLnRvb2x0aXBFbnRlckRlbGF5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLXotaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1mb250LXNpemUnOiB0aGlzLnRvb2x0aXBGb250U2l6ZSxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGlnbm1lbnQnOiB0aGlzLnRvb2x0aXBBbGlnbm1lbnQsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtbWF4LXdpZHRoJzogdGhpcy50b29sdGlwTWF4V2lkdGgsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZWxsaXBzaXMtb25seSc6IGVsbGlwc2lzT25seSxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1hbGxvdy1odG1sJzogYWxsb3dIdG1sLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gRG9tVXRpbHMuZ2V0QXR0cmlidXRlc1RleHQoZGF0YSk7XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25PYmooZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ2V0U3RyaW5nID0gVXRpbHMuZ2V0U3RyaW5nO1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHtcclxuICAgICAgaW5kZXg6IGRhdGEuaW5kZXgsXHJcbiAgICAgIHZhbHVlOiBnZXRTdHJpbmcoZGF0YS52YWx1ZSksXHJcbiAgICAgIGxhYmVsOiBnZXRTdHJpbmcoZGF0YS5sYWJlbCksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBnZXRTdHJpbmcoZGF0YS5kZXNjcmlwdGlvbiksXHJcbiAgICAgIGFsaWFzOiB0aGlzLmdldEFsaWFzKGRhdGEuYWxpYXMpLFxyXG4gICAgICBpc0N1cnJlbnROZXc6IGRhdGEuaXNDdXJyZW50TmV3IHx8IGZhbHNlLFxyXG4gICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXdPcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXROZXdPcHRpb24oKSB7XHJcbiAgICBsZXQgbGFzdE9wdGlvbiA9IHRoaXMub3B0aW9uc1t0aGlzLmxhc3RPcHRpb25JbmRleF07XHJcblxyXG4gICAgaWYgKCFsYXN0T3B0aW9uIHx8ICFsYXN0T3B0aW9uLmlzQ3VycmVudE5ldykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxhc3RPcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25JbmRleCh2YWx1ZSkge1xyXG4gICAgbGV0IGluZGV4O1xyXG5cclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICB0aGlzLm9wdGlvbnMuc29tZSgoZCkgPT4ge1xyXG4gICAgICAgIGlmIChkLnZhbHVlID09IHZhbHVlKSB7XHJcbiAgICAgICAgICBpbmRleCA9IGQuaW5kZXg7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5kZXg7XHJcbiAgfVxyXG5cclxuICBnZXROZXdWYWx1ZSgpIHtcclxuICAgIGxldCBuZXdWYWx1ZXMgPSB0aGlzLm5ld1ZhbHVlcztcclxuICAgIGxldCByZXN1bHQgPSB0aGlzLnNlbGVjdGVkVmFsdWVzLmZpbHRlcigoZCkgPT4gbmV3VmFsdWVzLmluZGV4T2YoZCkgIT09IC0xKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IHJlc3VsdCA6IHJlc3VsdFswXTtcclxuICB9XHJcblxyXG4gIGdldEFsaWFzKGFsaWFzKSB7XHJcbiAgICBpZiAoYWxpYXMpIHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYWxpYXMpKSB7XHJcbiAgICAgICAgYWxpYXMgPSBhbGlhcy5qb2luKCcsJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWxpYXMgPSBhbGlhcy50b1N0cmluZygpLnRyaW0oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWxpYXMgPSBhbGlhcy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWxpYXMgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYWxpYXM7XHJcbiAgfVxyXG5cclxuICBnZXREaXNwbGF5VmFsdWUoKSB7XHJcbiAgICBsZXQgZGlzcGxheVZhbHVlcyA9IFtdO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcclxuXHJcbiAgICBmb3IgKGxldCBkIG9mIHRoaXMub3B0aW9ucykge1xyXG4gICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICBkaXNwbGF5VmFsdWVzLnB1c2goZC5sYWJlbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSA/IGRpc3BsYXlWYWx1ZXMgOiBkaXNwbGF5VmFsdWVzWzBdIHx8ICcnO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZU9wdGlvbkdyb3Vwc01hcHBpbmcoc2VhcmNoVmFsdWUpIHtcclxuICAgIGxldCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG4gICAgbGV0IHJlc3VsdCA9IHt9O1xyXG4gICAgbGV0IGlzT3B0aW9uVmlzaWJsZSA9IHRoaXMuaXNPcHRpb25WaXNpYmxlO1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIHJlc3VsdFtkLmluZGV4XSA9IGQub3B0aW9ucy5zb21lKFxyXG4gICAgICAgIChlKSA9PiBpc09wdGlvblZpc2libGUoZSwgc2VhcmNoVmFsdWUpLmlzVmlzaWJsZVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbnNDb3VudChjb3VudCkge1xyXG4gICAgaWYgKHRoaXMuc2hvd0FzUG9wdXApIHtcclxuICAgICAgbGV0IGF2YWlsYWJsZUhlaWdodCA9XHJcbiAgICAgICAgKHdpbmRvdy5pbm5lckhlaWdodCAqIDgwKSAvIDEwMCAtIGRyb3Bib3hDbG9zZUJ1dHRvbkZ1bGxIZWlnaHQ7XHJcblxyXG4gICAgICBpZiAodGhpcy5oYXNTZWFyY2hDb250YWluZXIpIHtcclxuICAgICAgICBhdmFpbGFibGVIZWlnaHQgLT0gc2VhcmNoSGVpZ2h0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb3VudCA9IE1hdGguZmxvb3IoYXZhaWxhYmxlSGVpZ2h0IC8gdGhpcy5vcHRpb25IZWlnaHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY291bnQgPSBwYXJzZUludChjb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0T3B0aW9uc0hlaWdodCgpIHtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbnNDb3VudCAqIHRoaXMub3B0aW9uSGVpZ2h0ICsgJ3B4JztcclxuICB9XHJcblxyXG4gIGdldFNpYmxpbmcoJGVsZSwgZGlyZWN0aW9uKSB7XHJcbiAgICBsZXQgcHJvcE5hbWUgPVxyXG4gICAgICBkaXJlY3Rpb24gPT09ICduZXh0JyA/ICduZXh0RWxlbWVudFNpYmxpbmcnIDogJ3ByZXZpb3VzRWxlbWVudFNpYmxpbmcnO1xyXG5cclxuICAgIGRvIHtcclxuICAgICAgaWYgKCRlbGUpIHtcclxuICAgICAgICAkZWxlID0gJGVsZVtwcm9wTmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0gd2hpbGUgKFxyXG4gICAgICBEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnZGlzYWJsZWQnKSB8fFxyXG4gICAgICBEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnZ3JvdXAtdGl0bGUnKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gJGVsZTtcclxuICB9XHJcbiAgLyoqIGdldCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIG9wZW5Ecm9wYm94KGlzU2lsZW50KSB7XHJcbiAgICB0aGlzLnNldERyb3Bib3hQb3NpdGlvbigpO1xyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2Nsb3NlZCcpO1xyXG4gICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnb3BlbmVkJyk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQnKTtcclxuICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnb3BlbmVkJyk7XHJcblxyXG4gICAgICBpZiAoIWlzU2lsZW50KSB7XHJcbiAgICAgICAgdGhpcy5tb3ZlU2VsZWN0ZWRPcHRpb25zRmlyc3QoKTtcclxuICAgICAgICBEb21VdGlscy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnZm9jdXNlZCcpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93QXNQb3B1cCkge1xyXG4gICAgICAgICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kYm9keSwgJ3ZzY29tcC1wb3B1cC1hY3RpdmUnKTtcclxuICAgICAgICAgIHRoaXMuaXNQb3B1cEFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRG9tVXRpbHMuZGlzcGF0Y2hFdmVudCh0aGlzLiRlbGUsICdvcGVuZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZURyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIGlmICh0aGlzLmtlZXBBbHdheXNPcGVuKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0cmFuc2l0aW9uRHVyYXRpb24gPSBpc1NpbGVudCA/IDAgOiB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbjtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCBmb2N1c2VkJyk7XHJcbiAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJGRyb3Bib3hFbCwgJ29wZW5lZCBmb2N1c2VkJyk7XHJcblxyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcblxyXG4gICAgICBpZiAoIWlzU2lsZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQb3B1cEFjdGl2ZSkge1xyXG4gICAgICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kYm9keSwgJ3ZzY29tcC1wb3B1cC1hY3RpdmUnKTtcclxuICAgICAgICAgIHRoaXMuaXNQb3B1cEFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRG9tVXRpbHMuZGlzcGF0Y2hFdmVudCh0aGlzLiRlbGUsICdjbG9zZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSwgMCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIERvbVV0aWxzLmFkZENsYXNzKHRoaXMuJHdyYXBwZXIsICdjbG9zZWQnKTtcclxuICAgICAgRG9tVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy4kZHJvcGJveEVsLCAnY2xvc2VkJyk7XHJcbiAgICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSkge1xyXG4gICAgICAgIC8vIEhpZGUgZHJvcGJveCBzb21ld2hlcmUgZmFycnJycnJyIGF3YXlcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUubGVmdCA9IGAtMjAwMHB4YDtcclxuICAgICAgICB0aGlzLiRkcm9wYm94RWwuc3R5bGUudG9wID0gYC0yMDAwcHhgO1xyXG4gICAgICB9XHJcbiAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgbW92ZVNlbGVjdGVkT3B0aW9uc0ZpcnN0KCkge1xyXG4gICAgaWYgKCF0aGlzLnNob3dTZWxlY3RlZE9wdGlvbnNGaXJzdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTb3J0ZWRPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKCF0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCB8fCAhdGhpcy5zZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRHJvcGJveCgpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT3BlbmVkKCkge1xyXG4gICAgcmV0dXJuIERvbVV0aWxzLmhhc0NsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQnKTtcclxuICB9XHJcblxyXG4gIGZvY3VzU2VhcmNoSW5wdXQoKSB7XHJcbiAgICBsZXQgJGVsZSA9IHRoaXMuJHNlYXJjaElucHV0O1xyXG5cclxuICAgIGlmICgkZWxlKSB7XHJcbiAgICAgICRlbGUuZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvY3VzT3B0aW9uKGRpcmVjdGlvbiwgZWxlKSB7XHJcbiAgICBsZXQgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcudnNjb21wLW9wdGlvbi5mb2N1c2VkJ1xyXG4gICAgKTtcclxuICAgIGxldCAkbmV3Rm9jdXNlZEVsZTtcclxuXHJcbiAgICBpZiAoZWxlKSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gZWxlO1xyXG4gICAgfSBlbHNlIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgLyogaWYgbm8gZWxlbWVudCBvbiBmb2N1cyBjaG9vc2UgZmlyc3QgdmlzaWJsZSBvbmUgKi9cclxuICAgICAgbGV0IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4ID0gdGhpcy5nZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpO1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLnZzY29tcC1vcHRpb25bZGF0YS12aXNpYmxlLWluZGV4PVwiJHtmaXJzdFZpc2libGVPcHRpb25JbmRleH1cIl1gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdkaXNhYmxlZCcpIHx8XHJcbiAgICAgICAgRG9tVXRpbHMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdncm91cC10aXRsZScpXHJcbiAgICAgICkge1xyXG4gICAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRuZXdGb2N1c2VkRWxlLCAnbmV4dCcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkbmV3Rm9jdXNlZEVsZSA9IHRoaXMuZ2V0U2libGluZygkZm9jdXNlZEVsZSwgZGlyZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJG5ld0ZvY3VzZWRFbGUgJiYgJG5ld0ZvY3VzZWRFbGUgIT09ICRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIGlmICgkZm9jdXNlZEVsZSkge1xyXG4gICAgICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy5hZGRDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChEb21VdGlscy5nZXREYXRhKCRuZXdGb2N1c2VkRWxlLCAnaW5kZXgnKSwgdHJ1ZSk7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24pIHRoaXMubW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoJG5ld0ZvY3VzZWRFbGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW92ZUZvY3VzZWRPcHRpb25Ub1ZpZXcoJGZvY3VzZWRFbGUpIHtcclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5ld1Njcm9sbFRvcDtcclxuICAgIGxldCBjb250YWluZXJSZWN0ID0gdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBvcHRpb25SZWN0ID0gJGZvY3VzZWRFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgY29udGFpbmVyVG9wID0gY29udGFpbmVyUmVjdC50b3A7XHJcbiAgICBsZXQgY29udGFpbmVyQm90dG9tID0gY29udGFpbmVyUmVjdC5ib3R0b207XHJcbiAgICBsZXQgY29udGFpbmVySGVpZ2h0ID0gY29udGFpbmVyUmVjdC5oZWlnaHQ7XHJcbiAgICBsZXQgb3B0aW9uVG9wID0gb3B0aW9uUmVjdC50b3A7XHJcbiAgICBsZXQgb3B0aW9uQm90dG9tID0gb3B0aW9uUmVjdC5ib3R0b207XHJcbiAgICBsZXQgb3B0aW9uSGVpZ2h0ID0gb3B0aW9uUmVjdC5oZWlnaHQ7XHJcbiAgICBsZXQgb3B0aW9uT2Zmc2V0VG9wID0gJGZvY3VzZWRFbGUub2Zmc2V0VG9wO1xyXG4gICAgbGV0IG9wdGlvbnNUb3AgPSBEb21VdGlscy5nZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCAnbnVtYmVyJyk7XHJcblxyXG4gICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiB0b3AgKi9cclxuICAgIGlmIChjb250YWluZXJUb3AgPiBvcHRpb25Ub3ApIHtcclxuICAgICAgbmV3U2Nyb2xsVG9wID0gb3B0aW9uT2Zmc2V0VG9wICsgb3B0aW9uc1RvcDtcclxuICAgIH0gZWxzZSBpZiAoY29udGFpbmVyQm90dG9tIDwgb3B0aW9uQm90dG9tKSB7XHJcbiAgICAgIC8qIGlmIG9wdGlvbiBoaWRkZW4gb24gYm90dG9tICovXHJcbiAgICAgIG5ld1Njcm9sbFRvcCA9XHJcbiAgICAgICAgb3B0aW9uT2Zmc2V0VG9wIC0gY29udGFpbmVySGVpZ2h0ICsgb3B0aW9uSGVpZ2h0ICsgb3B0aW9uc1RvcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3U2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lci5zY3JvbGxUb3AgPSBuZXdTY3JvbGxUb3A7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVPcHRpb25Gb2N1cygpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3hDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChudWxsKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdE9wdGlvbigkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGluZyA9ICFEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICBpZiAoaXNBZGRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5pc01heFZhbHVlc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvKiogb24gc2VsZWN0aW5nIHNhbWUgdmFsdWUgaW4gc2luZ2xlIHNlbGVjdCAqL1xyXG4gICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleGVzID0gdGhpcy5zZWxlY3RlZEluZGV4ZXM7XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ3ZhbHVlJyk7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleCA9IHBhcnNlSW50KERvbVV0aWxzLmdldERhdGEoJGVsZSwgJ2luZGV4JykpO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRQcm9wKHNlbGVjdGVkSW5kZXgsIGlzQWRkaW5nKTtcclxuXHJcbiAgICBpZiAoaXNBZGRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKHNlbGVjdGVkVmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RlZFByb3AoXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0T3B0aW9uSW5kZXgoc2VsZWN0ZWRWYWx1ZXNbMF0pLFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGVkVmFsdWVzID0gW3NlbGVjdGVkVmFsdWVdO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcyA9IFtzZWxlY3RlZEluZGV4XTtcclxuICAgICAgICBsZXQgJHByZXZTZWxlY3RlZE9wdGlvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgJy52c2NvbXAtb3B0aW9uLnNlbGVjdGVkJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICgkcHJldlNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkcHJldlNlbGVjdGVkT3B0aW9uLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBEb21VdGlscy50b2dnbGVDbGFzcygkZWxlLCAnc2VsZWN0ZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgRG9tVXRpbHMudG9nZ2xlQ2xhc3MoJGVsZSwgJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZEluZGV4ZXMsIHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChEb21VdGlscy5oYXNDbGFzcygkZWxlLCAnY3VycmVudC1uZXcnKSkge1xyXG4gICAgICB0aGlzLmJlZm9yZVNlbGVjdE5ld1ZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEZvY3VzZWRPcHRpb24oKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihcclxuICAgICAgdGhpcy4kZHJvcGJveENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi5mb2N1c2VkJylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zKGlzU2VsZWN0ZWQpIHtcclxuICAgIGlmICghdGhpcy5tdWx0aXBsZSB8fCB0aGlzLmRpc2FibGVTZWxlY3RBbGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgaXNTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzU2VsZWN0ZWQgPSAhRG9tVXRpbHMuaGFzQ2xhc3ModGhpcy4kdG9nZ2xlQWxsQ2hlY2tib3gsICdjaGVja2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleGVzID0gW107XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQsIGlkeCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkIHx8IGQuaXNDdXJyZW50TmV3IHx8IGQuaXNHcm91cFRpdGxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBpc1NlbGVjdGVkO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKGlkeCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRJbmRleGVzLCB0cnVlKTtcclxuICAgIHRoaXMucmVuZGVyT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzQWxsU2VsZWN0ZWQpIHtcclxuICAgIGlmICh0eXBlb2YgaXNBbGxTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlzQWxsU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgaXNBbGxTZWxlY3RlZCA9ICF0aGlzLm9wdGlvbnMuc29tZSgoZCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICFkLmlzU2VsZWN0ZWQgJiYgIWQuaXNEaXNhYmxlZCAmJiAhZC5pc0dyb3VwVGl0bGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBEb21VdGlscy50b2dnbGVDbGFzcyh0aGlzLiR0b2dnbGVBbGxDaGVja2JveCwgJ2NoZWNrZWQnLCBpc0FsbFNlbGVjdGVkKTtcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVGb2N1c2VkUHJvcChpbmRleCwgaXNGb2N1c2VkID0gZmFsc2UpIHtcclxuICAgIGlmICh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCkge1xyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AodGhpcy5mb2N1c2VkT3B0aW9uSW5kZXgsICdpc0ZvY3VzZWQnLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKGluZGV4LCAnaXNGb2N1c2VkJywgaXNGb2N1c2VkKTtcclxuICAgIHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4ID0gaW5kZXg7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTZWxlY3RlZFByb3AoaW5kZXgsIGlzU2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5zZXRPcHRpb25Qcm9wKGluZGV4LCAnaXNTZWxlY3RlZCcsIGlzU2VsZWN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9Ub3AoKSB7XHJcbiAgICBsZXQgaXNDbG9zZWQgPSAhdGhpcy5pc09wZW5lZCgpO1xyXG5cclxuICAgIGlmIChpc0Nsb3NlZCkge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzY3JvbGxUb3AgPSB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHJcbiAgICBpZiAoc2Nyb2xsVG9wID4gMCkge1xyXG4gICAgICB0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYmVmb3JlVmFsdWVTZXQodHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlKG51bGwsIG51bGwsIHRydWUpO1xyXG4gICAgdGhpcy5hZnRlclZhbHVlU2V0KCk7XHJcbiAgfVxyXG5cclxuICBiZWZvcmVWYWx1ZVNldChpc1Jlc2V0KSB7XHJcbiAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcyhpc1Jlc2V0ID8gZmFsc2UgOiB1bmRlZmluZWQpO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJWYWx1ZVNldCgpIHtcclxuICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBhZnRlclNldE9wdGlvbnMoa2VlcFZhbHVlKSB7XHJcbiAgICBsZXQgc2VhcmNoID0gdGhpcy5zZWFyY2hWYWx1ZTsgLy8gTmVlZCB0byBiZSBzdG9yZWQgYmVjYXVzZSBzZXRWYWx1ZU1ldGhvZCB3aWxsIGVtcHR5IHRoaXMuc2VhcmNoVmFsdWVcclxuXHJcbiAgICBpZiAoa2VlcFZhbHVlKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnModGhpcy5pc0FsbFNlbGVjdGVkKTsgLy8gSWYgc2VsZWN0IGFsbCB3YXMgb24gbGV0IHNlbGVjdCBhbGwgb25cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlTWV0aG9kKHRoaXMuc2VsZWN0ZWRWYWx1ZXMsIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0KTsgLy8gUmVzZWxlY3QgdmFsaWQgdmFsdWVzXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnNlYXJjaCkgdGhpcy5zZXRTZWFyY2hWYWx1ZShzZWFyY2gsIGZhbHNlLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuXHJcbiAgICBpZiAoIWtlZXBWYWx1ZSkge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRPcHRpb24oZGF0YSwgcmVyZW5kZXIpIHtcclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXgrKztcclxuICAgIGRhdGEuaW5kZXggPSB0aGlzLmxhc3RPcHRpb25JbmRleDtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE9wdGlvbk9iaihkYXRhKTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMucHVzaChuZXdPcHRpb24pO1xyXG4gICAgdGhpcy5zb3J0ZWRPcHRpb25zLnB1c2gobmV3T3B0aW9uKTtcclxuXHJcbiAgICBpZiAocmVyZW5kZXIpIHtcclxuICAgICAgdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50Kys7XHJcbiAgICAgIHRoaXMuYWZ0ZXJTZXRPcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVPcHRpb24oaW5kZXgpIHtcclxuICAgIGlmICghaW5kZXggJiYgaW5kZXggIT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleC0tO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbihuZXdPcHRpb24uaW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmVmb3JlU2VsZWN0TmV3VmFsdWUoKSB7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuICAgIGxldCBuZXdJbmRleCA9IG5ld09wdGlvbi5pbmRleDtcclxuXHJcbiAgICB0aGlzLm5ld1ZhbHVlcy5wdXNoKG5ld09wdGlvbi52YWx1ZSk7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdpc0N1cnJlbnROZXcnLCBmYWxzZSk7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdpc05ldycsIHRydWUpO1xyXG5cclxuICAgIC8qKiB1c2luZyBzZXRUaW1lb3V0IHRvIGZpeCB0aGUgaXNzdWUgb2YgZHJvcGJveCBnZXR0aW5nIGNsb3NlZCBvbiBzZWxlY3QgKi9cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgICAgdGhpcy5mb2N1c1NlYXJjaElucHV0KCk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIHNvcnRPcHRpb25zKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBvcHRpb25zLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgaWYgKGIudmFsdWUgPT09IG5vbmVPcHRpb25WYWx1ZSAmJiBhLnZhbHVlICE9PSBub25lT3B0aW9uVmFsdWUpIHtcclxuICAgICAgICAvLyBOb25lIGlzIGFsd2F5cyBmaXJzdFxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2UgaWYgKCFhLmlzU2VsZWN0ZWQgJiYgIWIuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9IGVsc2UgaWYgKGEuaXNTZWxlY3RlZCAmJiAoIWIuaXNTZWxlY3RlZCB8fCBhLmluZGV4IDwgYi5pbmRleCkpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc29ydE9wdGlvbnNHcm91cChvcHRpb25zKSB7XHJcbiAgICBsZXQgc29ydE9wdGlvbnMgPSB0aGlzLnNvcnRPcHRpb25zO1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcblxyXG4gICAgb3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCBjaGlsZE9wdGlvbnMgPSBkLm9wdGlvbnM7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGNoaWxkT3B0aW9ucy5zb21lKChlKSA9PiBlLmlzU2VsZWN0ZWQpO1xyXG5cclxuICAgICAgaWYgKGQuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgIHNvcnRPcHRpb25zKGNoaWxkT3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNvcnRPcHRpb25zKG9wdGlvbnMpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmRlc3RydWN0dXJlT3B0aW9uR3JvdXAob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBpc09wdGlvblZpc2libGUoZCwgc2VhcmNoVmFsdWUsIGhhc0V4YWN0T3B0aW9uLCB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZykge1xyXG4gICAgbGV0IHZhbHVlID0gZC5sYWJlbC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gZC5kZXNjcmlwdGlvbjtcclxuICAgIGxldCBhbGlhcyA9IGQuYWxpYXM7XHJcbiAgICBsZXQgaXNWaXNpYmxlID0gdmFsdWUuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG5cclxuICAgIGlmIChkLmlzR3JvdXBUaXRsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSB2aXNpYmxlT3B0aW9uR3JvdXBzTWFwcGluZ1tkLmluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWxpYXMgJiYgIWlzVmlzaWJsZSkge1xyXG4gICAgICBpc1Zpc2libGUgPSBhbGlhcy5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICYmICFpc1Zpc2libGUpIHtcclxuICAgICAgaXNWaXNpYmxlID0gZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFZhbHVlKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZC5pc1Zpc2libGUgPSBpc1Zpc2libGU7XHJcblxyXG4gICAgaWYgKCFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICBoYXNFeGFjdE9wdGlvbiA9IHZhbHVlID09PSBzZWFyY2hWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc1Zpc2libGUsXHJcbiAgICAgIGhhc0V4YWN0T3B0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBjaGlsZE9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAvKiogZ2V0dGluZyBhbGwgZ3JvdXAgdGl0bGUgKi9cclxuICAgIG9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0dyb3VwVGl0bGUpIHtcclxuICAgICAgICBsZXQgY2hpbGRBcnJheSA9IFtdO1xyXG4gICAgICAgIGQub3B0aW9ucyA9IGNoaWxkQXJyYXk7XHJcbiAgICAgICAgY2hpbGRPcHRpb25zW2QuaW5kZXhdID0gY2hpbGRBcnJheTtcclxuXHJcbiAgICAgICAgcmVzdWx0LnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKiBnZXR0aW5nIGFsbCBncm91cCBvcHRpb25zICovXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgaWYgKGQuaXNHcm91cE9wdGlvbikge1xyXG4gICAgICAgIGNoaWxkT3B0aW9uc1tkLmdyb3VwSW5kZXhdLnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBkZXN0cnVjdHVyZU9wdGlvbkdyb3VwKG9wdGlvbnMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICBvcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgcmVzdWx0LnB1c2goZCk7XHJcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoZC5vcHRpb25zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUpIHtcclxuICAgIERvbVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtbm8tb3B0aW9ucycpO1xyXG4gICAgRG9tVXRpbHMuYWRkQ2xhc3ModGhpcy4kd3JhcHBlciwgJ3NlcnZlci1zZWFyY2hpbmcnKTtcclxuICAgIHRoaXMub25TZXJ2ZXJTZWFyY2goc2VhcmNoVmFsdWUsIHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBzdGF0aWMgaW5pdChvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZUFycmF5ID0gb3B0aW9ucy5lbGU7XHJcblxyXG4gICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzaW5nbGVFbGUgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodHlwZW9mICRlbGVBcnJheSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgJGVsZUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigkZWxlQXJyYXkpO1xyXG5cclxuICAgICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoJGVsZUFycmF5Lmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGVBcnJheSA9IFskZWxlQXJyYXldO1xyXG4gICAgICBzaW5nbGVFbGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbnN0YW5jZXMgPSBbXTtcclxuICAgICRlbGVBcnJheS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgIG9wdGlvbnMuZWxlID0gJGVsZTtcclxuICAgICAgaW5zdGFuY2VzLnB1c2gobmV3IFZpcnR1YWxTZWxlY3Qob3B0aW9ucykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNpbmdsZUVsZSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZXNldEZvcm0oZSkge1xyXG4gICAgbGV0ICRmb3JtID0gZS50YXJnZXQuY2xvc2VzdCgnZm9ybScpO1xyXG5cclxuICAgIGlmICghJGZvcm0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgICRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgJGVsZS5wYXJlbnRFbGVtZW50LnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0KCkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnNldFZhbHVlTWV0aG9kKHZhbHVlLCBzaWxlbnRDaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldE9wdGlvbnNNZXRob2Qob3B0aW9ucywga2VlcFZhbHVlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0T3B0aW9uc01ldGhvZChvcHRpb25zLCBrZWVwVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0RGlzYWJsZWRPcHRpb25zTWV0aG9kKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRvZ2dsZVNlbGVjdEFsbChpc1NlbGVjdGVkKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QudG9nZ2xlQWxsT3B0aW9ucyhpc1NlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0FsbFNlbGVjdGVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5pc0FsbFNlbGVjdGVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZE9wdGlvbk1ldGhvZChkYXRhKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QuYWRkT3B0aW9uKGRhdGEsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE5ld1ZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXROZXdWYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHZlcnNpb24oKSB7XHJcbiAgICByZXR1cm4gdmlydHVhbFNlbGVjdFZlcnNpb247XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RGlzcGxheVZhbHVlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5nZXREaXNwbGF5VmFsdWUoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvcGVuTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5vcGVuRHJvcGJveCgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNsb3NlTWV0aG9kKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5jbG9zZURyb3Bib3goKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRTZWFyY2hWYWx1ZU1ldGhvZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbFNlbGVjdC5zZXRTZWFyY2hWYWx1ZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgb25SZXNpemVNZXRob2QoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudnNjb21wLXdyYXBwZXInKS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgICRlbGUucGFyZW50RWxlbWVudC52aXJ0dWFsU2VsZWN0Lm9uUmVzaXplKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gZW5kICovXHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgVmlydHVhbFNlbGVjdC5yZXNldEZvcm0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgVmlydHVhbFNlbGVjdC5vblJlc2l6ZU1ldGhvZCk7XHJcblxyXG53aW5kb3cuVmlydHVhbFNlbGVjdCA9IFZpcnR1YWxTZWxlY3Q7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=